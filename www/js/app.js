!function(){function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return t}()({1:[function(t,e,n){"use strict";function r(){function t(t,e){e||(e=t,t=0),t>o?o=t:t<a&&(a=t),r[t]||(r[t]=[]),r[t].push(e),i++}function e(){for(var t=a;t<=o;t++)for(var e=r[t],n=0;n<e.length;n++){var i=e[n];i()}}function n(){return i}var r={},i=0,o=0,a=0;return{add:t,process:e,size:n}}var i=t("./utils");e.exports=function(t){function e(t,e){!p&&h&&l&&0===d.size()&&a(),d.add(t,e)}function n(){for(p=!0;d.size();){var t=d;d=r(),t.process()}p=!1}function o(t){p||(void 0===t&&(t=l),f&&(s(f),f=null),t?a():n())}function a(){f=u(n)}function s(t){var e=clearTimeout;return e(t)}function u(t){var e=function(t){return setTimeout(t,0)};return e(t)}t=t||{};var c=t.reporter,l=i.getOption(t,"async",!0),h=i.getOption(t,"auto",!0);h&&!l&&(c&&c.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),l=!0);var f,d=r(),p=!1;return{add:e,force:o}}},{"./utils":2}],2:[function(t,e,n){"use strict";function r(t,e,n){var r=t[e];return void 0!==r&&null!==r||void 0===n?r:n}var i=e.exports={};i.getOption=r},{}],3:[function(t,e,n){(function(e,r){function i(t,e){this._id=t,this._clearFn=e}var o=t("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;n.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,r=!(arguments.length<2)&&s.call(arguments,1);return u[e]=!0,o(function(){u[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":208,timers:3}],4:[function(t,e,n){(function(){var t,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,_,b,x,w,E,M,T,S,P,C,A,L,O,R,k,N,I,D,j,z,U,B,F,H,G,V,W,q,Y,Z,X,K,J,Q,$,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,mt,gt,vt,yt,_t,bt,xt,wt,Et,Mt,Tt,St,Pt,Ct,At,Lt,Ot=[].slice;St=function(){var t,e,n,r,i;for(t={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,e=i.length;r<e;r++)n=i[r],t["[object "+n+"]"]=n.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),X=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t<e&&(t=e),t>n&&(t=n),t},Pt=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},w=function(t){var e,n;for(t._clipped=!1,t._unclipped=t.slice(0),e=n=0;n<3;e=++n)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},o=Math.PI,xt=Math.round,T=Math.cos,L=Math.floor,it=Math.pow,K=Math.log,Et=Math.sin,Mt=Math.sqrt,m=Math.atan2,$=Math.max,p=Math.abs,u=2*o,a=o/3,r=o/180,s=180/o,x=function(){return arguments[0]instanceof t?arguments[0]:function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,arguments,function(){})},x.default=x,d=[],"undefined"!=typeof e&&null!==e&&null!=e.exports&&(e.exports=x),"function"==typeof define&&define.amd?define([],function(){return x}):(bt="undefined"!=typeof n&&null!==n?n:this,bt.chroma=x),x.version="1.3.7",f={},l=[],h=!1,t=function(){function t(){var t,e,n,r,i,o,a,s,u;for(o=this,e=[],s=0,r=arguments.length;s<r;s++)t=arguments[s],null!=t&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=f[a])o._rgb=w(f[a](Pt(e.slice(0,-1))));else{for(h||(l=l.sort(function(t,e){return e.p-t.p}),h=!0),u=0,i=l.length;u<i&&(n=l[u],!(a=n.test.apply(n,e)));u++);a&&(o._rgb=w(f[a].apply(f,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t.prototype.clone=function(){return x(me._rgb)},t}(),x._input=f,x.brewer=_={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;e=[];for(t in _)e.push(_[t.toLowerCase()]=_[t]);return e}(),Ct={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},x.colors=M=Ct,V=function(){var t,e,n,r,o,a,s,u,c;return e=Pt(arguments),o=e[0],t=e[1],n=e[2],u=(o+16)/116,s=isNaN(t)?u:u+t/500,c=isNaN(n)?u:u-n/200,u=i.Yn*W(u),s=i.Xn*W(s),c=i.Zn*W(c),a=Lt(3.2404542*s-1.5371385*u-.4985314*c),r=Lt(-.969266*s+1.8760108*u+.041556*c),n=Lt(.0556434*s-.2040259*u+1.0572252*c),[a,r,n,e.length>3?e[3]:1]},Lt=function(t){return 255*(t<=.00304?12.92*t:1.055*it(t,1/2.4)-.055)},W=function(t){return t>i.t1?t*t*t:i.t2*(t-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ft=function(){var t,e,n,r,i,o,a,s;return r=Pt(arguments),n=r[0],e=r[1],t=r[2],i=vt(n,e,t),o=i[0],a=i[1],s=i[2],[116*a-16,500*(o-a),200*(a-s)]},yt=function(t){return(t/=255)<=.04045?t/12.92:it((t+.055)/1.055,2.4)},At=function(t){return t>i.t3?it(t,1/3):t/i.t2+i.t0},vt=function(){var t,e,n,r,o,a,s;return r=Pt(arguments),n=r[0],e=r[1],t=r[2],n=yt(n),e=yt(e),t=yt(t),o=At((.4124564*n+.3575761*e+.1804375*t)/i.Xn),a=At((.2126729*n+.7151522*e+.072175*t)/i.Yn),s=At((.0193339*n+.119192*e+.9503041*t)/i.Zn),[o,a,s]},x.lab=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["lab"]),function(){})},f.lab=V,t.prototype.lab=function(){return ft(this._rgb)},g=function(t){var e,n,r,i,o,a,s,u,c,l,h;return t=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(x(i));return r}(),2===t.length?(c=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=c[0],a=c[1],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push(o[e]+t*(a[e]-o[e]));return r}(),x.lab.apply(x,n)}):3===t.length?(l=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=l[0],a=l[1],s=l[2],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return r}(),x.lab.apply(x,n)}):4===t.length?(h=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=h[0],a=h[1],s=h[2],u=h[3],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]);return r}(),x.lab.apply(x,n)}):5===t.length&&(n=g(t.slice(0,3)),r=g(t.slice(2,5)),e=function(t){return t<.5?n(2*t):r(2*(t-.5))}),e},x.bezier=function(t){var e;return e=g(t),e.scale=function(){return x.scale(e)},e},x.cubehelix=function(t,e,n,r,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),o=0,"array"===St(i)?a=i[1]-i[0]:(a=0,i=[i,i]),s=function(s){var c,l,h,f,d,p,m,g,v;return c=u*((t+120)/360+e*s),m=it(i[0]+a*s,r),p=0!==o?n[0]+s*o:n,l=p*m*(1-m)/2,f=T(c),v=Et(c),g=m+l*(-.14861*f+1.78277*v),d=m+l*(-.29227*f-.90649*v),h=m+l*(1.97294*f),x(w([255*g,255*d,255*h]))},s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:(n=t,"array"===St(n)?(o=n[1]-n[0],0===o&&(n=n[1])):o=0,s)},s.lightness=function(t){return null==t?i:("array"===St(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return x.scale(s)},s.hue(n),s},x.random=function(){var e,n,r,i;for(n="0123456789abcdef",e="#",r=i=0;i<6;r=++i)e+=n.charAt(L(16*Math.random()));return new t(e)},d=[],j=function(t,e,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==St(t)&&(t=x(t)),"object"!==St(e)&&(e=x(e)),a=0,o=d.length;a<o;a++)if(i=d[a],r===i[0]){s=i[1](t,e,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(t.alpha()+n*(e.alpha()-t.alpha()))},x.interpolate=j,t.prototype.interpolate=function(t,e,n){return j(this,t,e,n)},x.mix=j,t.prototype.mix=t.prototype.interpolate,f.rgb=function(){var t,e,n,r;e=Pt(arguments),n=[];for(t in e)r=e[t],n.push(r);return n},x.rgb=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},t.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},l.push({p:3,test:function(t){var e;return e=Pt(arguments),"array"===St(e)&&3===e.length?"rgb":4===e.length&&"number"===St(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),f.lrgb=f.rgb,B=function(e,n,r,i){var o,a;return o=e._rgb,a=n._rgb,new t(Mt(it(o[0],2)*(1-r)+it(a[0],2)*r),Mt(it(o[1],2)*(1-r)+it(a[1],2)*r),Mt(it(o[2],2)*(1-r)+it(a[2],2)*r),i)},c=function(e){var n,r,i,o,a,s;for(r=1/e.length,s=[0,0,0,0],o=0,i=e.length;o<i;o++)n=e[o],a=n._rgb,s[0]+=it(a[0],2)*r,s[1]+=it(a[1],2)*r,s[2]+=it(a[2],2)*r,s[3]+=a[3]*r;return s[0]=Mt(s[0]),s[1]=Mt(s[1]),s[2]=Mt(s[2]),new t(s)},d.push(["lrgb",B]),x.average=function(t,e){var n,r,i,a,s,u,l,h,f,d,p,g,v;if(null==e&&(e="rgb"),f=t.length,t=t.map(function(t){return x(t)}),l=t.splice(0,1)[0],"lrgb"===e)return c(t);g=l.get(e),a=[],s=0,u=0;for(h in g)g[h]=g[h]||0,a.push(isNaN(g[h])?0:1),"h"!==e.charAt(h)||isNaN(g[h])||(n=g[h]/180*o,s+=T(n),u+=Et(n));for(r=l.alpha(),p=0,d=t.length;p<d;p++){i=t[p],v=i.get(e),r+=i.alpha();for(h in g)isNaN(v[h])||(a[h]+=1,"h"===e.charAt(h)?(n=v[h]/180*o,s+=T(n),u+=Et(n)):g[h]+=v[h])}for(h in g)if("h"===e.charAt(h)){for(n=m(u/a[h],s/a[h])/o*180;n<0;)n+=360;for(;n>=360;)n-=360;g[h]=n}else g[h]=g[h]/a[h];return x(g,e).alpha(r/f)},R=function(t){var e,n,r,i,o,a;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),a=parseInt(t,16),i=a>>16,r=a>>8&255,n=255&a,[i,r,n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),a=parseInt(t,16),i=a>>24&255,r=a>>16&255,n=a>>8&255,e=xt((255&a)/255*100)/100,[i,r,n,e];if(null!=f.css&&(o=f.css(t)))return o;throw"unknown color: "+t},ut=function(t,e){var n,r,i,o,a,s,u;return null==e&&(e="rgb"),a=t[0],i=t[1],r=t[2],n=t[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),u=a<<16|i<<8|r,s="000000"+u.toString(16),s=s.substr(s.length-6),o="0"+xt(255*n).toString(16),o=o.substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},f.hex=function(t){return R(t)},x.hex=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="rgb"),ut(this._rgb,t)},l.push({p:4,test:function(t){if(1===arguments.length&&"string"===St(t))return"hex"}}),I=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f,d;if(t=Pt(arguments),i=t[0],l=t[1],a=t[2],0===l)u=r=e=255*a;else{for(d=[0,0,0],n=[0,0,0],f=a<.5?a*(1+l):a+l-a*l,h=2*a-f,i/=360,d[0]=i+1/3,d[1]=i,d[2]=i-1/3,o=s=0;s<=2;o=++s)d[o]<0&&(d[o]+=1),d[o]>1&&(d[o]-=1),6*d[o]<1?n[o]=h+6*(f-h)*d[o]:2*d[o]<1?n[o]=f:3*d[o]<2?n[o]=h+(f-h)*(2/3-d[o])*6:n[o]=h;c=[xt(255*n[0]),xt(255*n[1]),xt(255*n[2])],u=c[0],r=c[1],e=c[2]}return t.length>3?[u,r,e,t[3]]:[u,r,e]},lt=function(t,e,n){var r,i,o,a,s;return void 0!==t&&t.length>=3&&(a=t,t=a[0],e=a[1],n=a[2]),t/=255,e/=255,n/=255,o=Math.min(t,e,n),$=Math.max(t,e,n),i=($+o)/2,$===o?(s=0,r=Number.NaN):s=i<.5?($-o)/($+o):($-o)/(2-$-o),t===$?r=(e-n)/($-o):e===$?r=2+(n-t)/($-o):n===$&&(r=4+(t-e)/($-o)),r*=60,r<0&&(r+=360),[r,s,i]},x.hsl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["hsl"]),function(){})},f.hsl=I,t.prototype.hsl=function(){return lt(this._rgb)},D=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v;if(t=Pt(arguments),i=t[0],m=t[1],v=t[2],v*=255,0===m)u=r=e=v;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),i/=60,o=L(i),n=i-o,a=v*(1-m),s=v*(1-m*n),g=v*(1-m*(1-n)),o){case 0:c=[v,g,a],u=c[0],r=c[1],e=c[2];break;case 1:l=[s,v,a],u=l[0],r=l[1],e=l[2];break;case 2:h=[a,v,g],u=h[0],r=h[1],e=h[2];break;case 3:f=[a,s,v],u=f[0],r=f[1],e=f[2];break;case 4:d=[g,a,v],u=d[0],r=d[1],e=d[2];break;case 5:p=[v,a,s],u=p[0],r=p[1],e=p[2]}return[u,r,e,t.length>3?t[3]:1]},ht=function(){var t,e,n,r,i,o,a,s,u;return a=Pt(arguments),o=a[0],n=a[1],t=a[2],i=Math.min(o,n,t),$=Math.max(o,n,t),e=$-i,u=$/255,0===$?(r=Number.NaN,s=0):(s=e/$,o===$&&(r=(n-t)/e),n===$&&(r=2+(t-o)/e),t===$&&(r=4+(o-n)/e),r*=60,r<0&&(r+=360)),[r,s,u]},x.hsv=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["hsv"]),function(){})},f.hsv=D,t.prototype.hsv=function(){return ht(this._rgb)},nt=function(t){var e,n,r;return"number"===St(t)&&t>=0&&t<=16777215?(r=t>>16,n=t>>8&255,e=255&t,[r,n,e,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},mt=function(){var t,e,n,r;return r=Pt(arguments),n=r[0],e=r[1],t=r[2],(n<<16)+(e<<8)+t},x.num=function(e){return new t(e,"num")},t.prototype.num=function(t){return null==t&&(t="rgb"),mt(this._rgb,t)},f.num=nt,l.push({p:1,test:function(t){if(1===arguments.length&&"number"===St(t)&&t>=0&&t<=16777215)return"num"}}),O=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,_;if(n=Pt(arguments),s=n[0],i=n[1],e=n[2],i/=100,a=a/100*255,t=255*i,0===i)h=a=r=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),s/=60,u=L(s),o=s-u,c=e*(1-i),l=c+t*(1-o),y=c+t*o,_=c+t,u){case 0:f=[_,y,c],h=f[0],a=f[1],r=f[2];break;case 1:d=[l,_,c],h=d[0],a=d[1],r=d[2];break;case 2:p=[c,_,y],h=p[0],a=p[1],r=p[2];break;case 3:m=[c,l,_],h=m[0],a=m[1],r=m[2];break;case 4:g=[y,c,_],h=g[0],a=g[1],r=g[2];break;case 5:v=[_,c,l],h=v[0],a=v[1],r=v[2]}return[h,a,r,n.length>3?n[3]:1]},st=function(){var t,e,n,r,i,o,a,s,u;return u=Pt(arguments),s=u[0],i=u[1],e=u[2],a=Math.min(s,i,e),$=Math.max(s,i,e),r=$-a,n=100*r/255,t=a/(255-r)*100,0===r?o=Number.NaN:(s===$&&(o=(i-e)/r),i===$&&(o=2+(e-s)/r),e===$&&(o=4+(s-i)/r),o*=60,o<0&&(o+=360)),[o,n,t]},x.hcg=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["hcg"]),function(){})},f.hcg=O,t.prototype.hcg=function(){return st(this._rgb)},S=function(t){var e,n,r,i,o,a,s,u;if(t=t.toLowerCase(),null!=x.colors&&x.colors[t])return R(x.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=xt(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=xt(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,s=I(r),s[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,s=I(r),s[3]=+o[4]);return s},at=function(t){var e;return e=t[3]<1?"rgba":"rgb","rgb"===e?e+"("+t.slice(0,3).map(xt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(xt).join(",")+","+t[3]+")":void 0},_t=function(t){return xt(100*t)/100},N=function(t,e){var n;return n=e<1?"hsla":"hsl",t[0]=_t(t[0]||0),t[1]=_t(100*t[1])+"%",t[2]=_t(100*t[2])+"%","hsla"===n&&(t[3]=e),n+"("+t.join(",")+")"},f.css=function(t){return S(t)},x.css=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?at(this._rgb):"hsl"===t.slice(0,3)?N(this.hsl(),this.alpha()):void 0},f.named=function(t){return R(Ct[t])},l.push({p:5,test:function(t){if(1===arguments.length&&null!=Ct[t])return"named"}}),t.prototype.name=function(t){var e,n;arguments.length&&(Ct[t]&&(this._rgb=R(Ct[t])),this._rgb[3]=1),e=this.hex();for(n in Ct)if(e===Ct[n])return n;return e},q=function(){var t,e,n,i;return i=Pt(arguments),n=i[0],t=i[1],e=i[2],e*=r,[n,T(e)*t,Et(e)*t]},Y=function(){var t,e,n,r,i,o,a,s,u,c,l;return n=Pt(arguments),s=n[0],i=n[1],a=n[2],c=q(s,i,a),t=c[0],e=c[1],r=c[2],l=V(t,e,r),u=l[0],o=l[1],r=l[2],[u,o,r,n.length>3?n[3]:1]},G=function(){var t,e,n,r,i,o;return o=Pt(arguments),i=o[0],t=o[1],e=o[2],n=Mt(t*t+e*e),r=(m(e,t)*s+360)%360,0===xt(1e4*n)&&(r=Number.NaN),[i,n,r]},dt=function(){var t,e,n,r,i,o,a;return o=Pt(arguments),i=o[0],n=o[1],e=o[2],a=ft(i,n,e),r=a[0],t=a[1],e=a[2],G(r,t,e)},x.lch=function(){var e;return e=Pt(arguments),new t(e,"lch")},x.hcl=function(){var e;return e=Pt(arguments),new t(e,"hcl")},f.lch=Y,f.hcl=function(){var t,e,n,r;return r=Pt(arguments),e=r[0],t=r[1],n=r[2],Y([n,t,e])},t.prototype.lch=function(){return dt(this._rgb)},t.prototype.hcl=function(){return dt(this._rgb).reverse()},ot=function(t){var e,n,r,i,o,a,s,u,c;return null==t&&(t="rgb"),u=Pt(arguments),s=u[0],i=u[1],e=u[2],s/=255,i/=255,e/=255,o=1-Math.max(s,Math.max(i,e)),r=o<1?1/(1-o):0,n=(1-s-o)*r,a=(1-i-o)*r,c=(1-e-o)*r,[n,a,c,o]},E=function(){var t,e,n,r,i,o,a,s,u;return e=Pt(arguments),r=e[0],a=e[1],u=e[2],o=e[3],t=e.length>4?e[4]:1,1===o?[0,0,0,t]:(s=r>=1?0:255*(1-r)*(1-o),i=a>=1?0:255*(1-a)*(1-o),n=u>=1?0:255*(1-u)*(1-o),[s,i,n,t])},f.cmyk=function(){return E(Pt(arguments))},x.cmyk=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return ot(this._rgb)},f.gl=function(){var t,e,n,r,i;for(r=function(){var t,n;t=Pt(arguments),n=[];for(e in t)i=t[e],n.push(i);return n}.apply(this,arguments),t=n=0;n<=2;t=++n)r[t]*=255;return r},x.gl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},pt=function(t,e,n){var r;return r=Pt(arguments),t=r[0],e=r[1],n=r[2],t=J(t),e=J(e),n=J(n),.2126*t+.7152*e+.0722*n},J=function(t){return t/=255,t<=.03928?t/12.92:it((t+.055)/1.055,2.4)},H=function(e,n,r,i){var o,a;return o=e._rgb,a=n._rgb,new t(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",H]),t.prototype.luminance=function(t,e){var n,r,i,o,a;return null==e&&(e="rgb"),arguments.length?(o=this._rgb,0===t?o=[0,0,0,this._rgb[3]]:1===t?o=[255,255,255,this[3]]:(n=pt(this._rgb),r=1e-7,i=20,a=function(n,o){var s,u;return u=n.interpolate(o,.5,e),s=u.luminance(),Math.abs(t-s)<r||!i--?u:s>t?a(n,u):a(u,o)},o=n>t?a(x("black"),this).rgba():a(this,x("white")).rgba()),x(o).alpha(this.alpha())):pt(this._rgb)},Tt=function(t){var e,n,r,i;return i=t/100,i<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*K(n),e=i<20?0:-254.76935184120902+.8274096064007395*(e=i-10)+115.67994401066147*K(e)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*K(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*K(n),e=255),[r,n,e]},gt=function(){var t,e,n,r,i,o,a,s,u;for(a=Pt(arguments),o=a[0],n=a[1],t=a[2],i=1e3,r=4e4,e=.4;r-i>e;)u=.5*(r+i),s=Tt(u),s[2]/s[0]>=t/o?r=u:i=u;return xt(u)},x.temperature=x.kelvin=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["temperature"]),function(){})},f.temperature=f.kelvin=f.K=Tt,t.prototype.temperature=function(){return gt(this._rgb)},t.prototype.kelvin=t.prototype.temperature,x.contrast=function(e,n){var r,i,o,a;return"string"!==(o=St(e))&&"number"!==o||(e=new t(e)),"string"!==(a=St(n))&&"number"!==a||(n=new t(n)),r=e.luminance(),i=n.luminance(),r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)},x.distance=function(e,n,r){var i,o,a,s,u,c,l;null==r&&(r="lab"),"string"!==(u=St(e))&&"number"!==u||(e=new t(e)),"string"!==(c=St(n))&&"number"!==c||(n=new t(n)),a=e.get(r),s=n.get(r),l=0;for(o in a)i=(a[o]||0)-(s[o]||0),l+=i*i;return Math.sqrt(l)},x.deltaE=function(e,n,r,i){var a,s,u,c,l,h,f,d,g,v,y,_,b,x,w,E,M,S,P,C,A,L,O,R,k,N,I;for(null==r&&(r=1),null==i&&(i=1),"string"!==(M=St(e))&&"number"!==M||(e=new t(e)),"string"!==(S=St(n))&&"number"!==S||(n=new t(n)),P=e.lab(),a=P[0],u=P[1],l=P[2],C=n.lab(),s=C[0],c=C[1],h=C[2],f=Mt(u*u+l*l),d=Mt(c*c+h*h),O=a<16?.511:.040975*a/(1+.01765*a),A=.0638*f/(1+.0131*f)+.638,E=f<1e-6?0:180*m(l,u)/o;E<0;)E+=360;for(;E>=360;)E-=360;return R=E>=164&&E<=345?.56+p(.2*T(o*(E+168)/180)):.36+p(.4*T(o*(E+35)/180)),g=f*f*f*f,w=Mt(g/(g+1900)),L=A*(w*R+1-w),x=a-s,b=f-d,y=u-c,_=l-h,v=y*y+_*_-b*b,k=x/(r*O),N=b/(i*A),I=L,Mt(k*k+N*N+v/(I*I))},t.prototype.get=function(t){var e,n,r,i,o,a;return r=this,o=t.split("."),i=o[0],e=o[1],a=r[i](),e?(n=i.indexOf(e),n>-1?a[n]:console.warn("unknown channel "+e+" in mode "+i)):a},t.prototype.set=function(t,e){var n,r,i,o,a,s;if(i=this,a=t.split("."),o=a[0],n=a[1],n)if(s=i[o](),r=o.indexOf(n),r>-1)if("string"===St(e))switch(e.charAt(0)){case"+":s[r]+=+e;break;case"-":s[r]+=+e;break;case"*":s[r]*=+e.substr(1);break;case"/":s[r]/=+e.substr(1);break;default:s[r]=+e}else s[r]=e;else console.warn("unknown channel "+n+" in mode "+o);else s=e;return x(s,o).alpha(i.alpha())},t.prototype.clipped=function(){return this._rgb._clipped||!1},t.prototype.alpha=function(t){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},t.prototype.darken=function(t){var e,n;return null==t&&(t=1),n=this,e=n.lab(),e[0]-=i.Kn*t,x.lab(e).alpha(n.alpha())},t.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var e,n;return null==t&&(t=1),n=this,e=n.lch(),e[1]+=t*i.Kn,e[1]<0&&(e[1]=0),x.lch(e).alpha(n.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),x(e[0]*t,e[1]*t,e[2]*t,t)},v=function(t,e,n){if(!v[n])throw"unknown blend mode "+n;return v[n](t,e)},y=function(t){return function(e,n){var r,i;return r=x(n).rgb(),i=x(e).rgb(),x(t(r,i),"rgb")}},A=function(t){return function(e,n){var r,i,o;for(o=[],r=i=0;i<=3;r=++i)o[r]=t(e[r],n[r]);return o}},et=function(t,e){return t},tt=function(t,e){return t*e/255},P=function(t,e){return t>e?e:t},Z=function(t,e){return t>e?t:e},wt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},b=function(t,e){return 255*(1-(1-e/255)/(t/255))},C=function(t,e){return 255===t?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},v.normal=y(A(et)),v.multiply=y(A(tt)),v.screen=y(A(wt)),v.overlay=y(A(rt)),v.darken=y(A(P)),v.lighten=y(A(Z)),v.dodge=y(A(C)),v.burn=y(A(b)),x.blend=v,x.analyze=function(t){var e,n,r,i;for(r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},n=0,e=t.length;n<e;n++)i=t[n],null==i||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(t,e){return x.limits(r,t,e)},r},x.scale=function(t,e){var n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,_,b,w,E,M,T;return h="rgb",f=x("#ccc"),g=0,s=!1,a=[0,1],m=[],p=[0,0],n=!1,i=[],d=!1,l=0,c=1,o=!1,r={},v=!0,u=1,M=function(t){var e,n,r,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===St(t)&&null!=x.brewer&&(t=x.brewer[t]||x.brewer[t.toLowerCase()]||t),"array"===St(t)){for(t=t.slice(0),e=r=0,o=t.length-1;0<=o?r<=o:r>=o;e=0<=o?++r:--r)n=t[e],"string"===St(n)&&(t[e]=x(n));for(m.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)m.push(e/(t.length-1))}return E(),i=t},b=function(t){var e,r;if(null!=n){for(r=n.length-1,e=0;e<r&&t>=n[e];)e++;return e-1}return 0},T=function(t){return t},y=function(t){var e,r,i,o,a;return a=t,n.length>2&&(o=n.length-1,e=b(t),i=n[0]+(n[1]-n[0])*(0+.5*g),r=n[o-1]+(n[o]-n[o-1])*(1-.5*g),a=l+(n[e]+.5*(n[e+1]-n[e])-i)/(r-i)*(c-l)),a},w=function(t,e){var o,a,s,d,g,y,_,w;if(null==e&&(e=!1),isNaN(t))return f;if(e?w=t:n&&n.length>2?(o=b(t),w=o/(n.length-2)):w=c!==l?(t-l)/(c-l):1,e||(w=T(w)),1!==u&&(w=it(w,u)),
w=p[0]+w*(1-p[0]-p[1]),w=Math.min(1,Math.max(0,w)),d=Math.floor(1e4*w),v&&r[d])a=r[d];else{if("array"===St(i))for(s=g=0,_=m.length-1;0<=_?g<=_:g>=_;s=0<=_?++g:--g){if(y=m[s],w<=y){a=i[s];break}if(w>=y&&s===m.length-1){a=i[s];break}if(w>y&&w<m[s+1]){w=(w-y)/(m[s+1]-y),a=x.interpolate(i[s],i[s+1],w,h);break}}else"function"===St(i)&&(a=i(w));v&&(r[d]=a)}return a},E=function(){return r={}},M(t),_=function(t){var e;return e=x(w(t)),d&&e[d]?e[d]():e},_.classes=function(t){var e;return null!=t?("array"===St(t)?(n=t,a=[t[0],t[t.length-1]]):(e=x.analyze(a),n=0===t?[e.min,e.max]:x.limits(e,"e",t)),_):n},_.domain=function(t){var e,n,r,o,s,u,h;if(!arguments.length)return a;if(l=t[0],c=t[t.length-1],m=[],r=i.length,t.length===r&&l!==c)for(s=0,o=t.length;s<o;s++)n=t[s],m.push((n-l)/(c-l));else for(e=h=0,u=r-1;0<=u?h<=u:h>=u;e=0<=u?++h:--h)m.push(e/(r-1));return a=[l,c],_},_.mode=function(t){return arguments.length?(h=t,E(),_):h},_.range=function(t,e){return M(t,e),_},_.out=function(t){return d=t,_},_.spread=function(t){return arguments.length?(g=t,_):g},_.correctLightness=function(t){return null==t&&(t=!0),o=t,E(),T=o?function(t){var e,n,r,i,o,a,s,u,c;for(e=w(0,!0).lab()[0],n=w(1,!0).lab()[0],s=e>n,r=w(t,!0).lab()[0],o=e+(n-e)*t,i=r-o,u=0,c=1,a=20;Math.abs(i)>.01&&a-- >0;)!function(){return s&&(i*=-1),i<0?(u=t,t+=.5*(c-t)):(c=t,t+=.5*(u-t)),r=w(t,!0).lab()[0],i=r-o}();return t}:function(t){return t},_},_.padding=function(t){return null!=t?("number"===St(t)&&(t=[t,t]),p=t,_):p},_.colors=function(e,r){var o,s,u,c,l,h,f,d;if(arguments.length<2&&(r="hex"),l=[],0===arguments.length)l=i.slice(0);else if(1===e)l=[_(.5)];else if(e>1)s=a[0],o=a[1]-s,l=function(){h=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)h.push(t);return h}.apply(this).map(function(t){return _(s+t/(e-1)*o)});else{if(t=[],f=[],n&&n.length>2)for(u=d=1,c=n.length;1<=c?d<c:d>c;u=1<=c?++d:--d)f.push(.5*(n[u-1]+n[u]));else f=a;l=f.map(function(t){return _(t)})}return x[r]&&(l=l.map(function(t){return t[r]()})),l},_.cache=function(t){return null!=t?(v=t,_):v},_.gamma=function(t){return null!=t?(u=t,_):u},_},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(t,e,n){var r,i,o,a,s,u,c;if(s={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},c=function(t,i){if(n(t,i))return r(null!=e&&"function"===St(e)?e(t):null!=e&&"string"===St(e)||"number"===St(e)?t[e]:t)},"array"===St(t))for(a=0,o=t.length;a<o;a++)u=t[a],c(u);else for(i in t)u=t[i],c(u,i);return s.domain=[s.min,s.max],s.limits=function(t,e){return x.limits(s,t,e)},s},x.limits=function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,m,g,v,y,_,b,w,E,M,T,S,P,C,A,O,R,k,N,I,D,j,z,U,B,F,H,G,V,W,q,Y,Z,X,J,Q,tt,et,nt,rt,ot,at,st,ut,ct,lt;if(null==e&&(e="equal"),null==n&&(n=7),"array"===St(t)&&(t=x.analyze(t)),A=t.min,$=t.max,ot=t.sum,ct=t.values.sort(function(t,e){return t-e}),1===n)return[A,$];if(P=[],"c"===e.substr(0,1)&&(P.push(A),P.push($)),"e"===e.substr(0,1)){for(P.push(A),M=D=1,B=n-1;1<=B?D<=B:D>=B;M=1<=B?++D:--D)P.push(A+M/n*($-A));P.push($)}else if("l"===e.substr(0,1)){if(A<=0)throw"Logarithmic scales are only possible for values > 0";for(O=Math.LOG10E*K(A),C=Math.LOG10E*K($),P.push(A),M=lt=1,F=n-1;1<=F?lt<=F:lt>=F;M=1<=F?++lt:--lt)P.push(it(10,O+M/n*(C-O)));P.push($)}else if("q"===e.substr(0,1)){for(P.push(A),M=r=1,Y=n-1;1<=Y?r<=Y:r>=Y;M=1<=Y?++r:--r)j=(ct.length-1)*M/n,z=L(j),z===j?P.push(ct[z]):(U=j-z,P.push(ct[z]*(1-U)+ct[z+1]*U));P.push($)}else if("k"===e.substr(0,1)){for(k=ct.length,v=new Array(k),w=new Array(n),rt=!0,N=0,_=null,_=[],_.push(A),M=i=1,Z=n-1;1<=Z?i<=Z:i>=Z;M=1<=Z?++i:--i)_.push(A+M/n*($-A));for(_.push($);rt;){for(T=o=0,X=n-1;0<=X?o<=X:o>=X;T=0<=X?++o:--o)w[T]=0;for(M=a=0,J=k-1;0<=J?a<=J:a>=J;M=0<=J?++a:--a){for(ut=ct[M],R=Number.MAX_VALUE,T=s=0,Q=n-1;0<=Q?s<=Q:s>=Q;T=0<=Q?++s:--s)E=p(_[T]-ut),E<R&&(R=E,y=T);w[y]++,v[M]=y}for(I=new Array(n),T=u=0,tt=n-1;0<=tt?u<=tt:u>=tt;T=0<=tt?++u:--u)I[T]=null;for(M=c=0,et=k-1;0<=et?c<=et:c>=et;M=0<=et?++c:--c)b=v[M],null===I[b]?I[b]=ct[M]:I[b]+=ct[M];for(T=l=0,nt=n-1;0<=nt?l<=nt:l>=nt;T=0<=nt?++l:--l)I[T]*=1/w[T];for(rt=!1,T=h=0,H=n-1;0<=H?h<=H:h>=H;T=0<=H?++h:--h)if(I[T]!==_[M]){rt=!0;break}_=I,N++,N>200&&(rt=!1)}for(S={},T=f=0,G=n-1;0<=G?f<=G:f>=G;T=0<=G?++f:--f)S[T]=[];for(M=d=0,V=k-1;0<=V?d<=V:d>=V;M=0<=V?++d:--d)b=v[M],S[b].push(ct[M]);for(at=[],T=m=0,W=n-1;0<=W?m<=W:m>=W;T=0<=W?++m:--m)at.push(S[T][0]),at.push(S[T][S[T].length-1]);for(at=at.sort(function(t,e){return t-e}),P.push(at[0]),M=g=1,q=at.length-1;g<=q;M=g+=2)st=at[M],isNaN(st)||P.indexOf(st)!==-1||P.push(st)}return P},k=function(t,e,n){var r,i,o,s;return r=Pt(arguments),t=r[0],e=r[1],n=r[2],isNaN(t)&&(t=0),t/=360,t<1/3?(i=(1-e)/3,s=(1+e*T(u*t)/T(a-u*t))/3,o=1-(i+s)):t<2/3?(t-=1/3,s=(1-e)/3,o=(1+e*T(u*t)/T(a-u*t))/3,i=1-(s+o)):(t-=2/3,o=(1-e)/3,i=(1+e*T(u*t)/T(a-u*t))/3,s=1-(o+i)),s=X(n*s*3),o=X(n*o*3),i=X(n*i*3),[255*s,255*o,255*i,r.length>3?r[3]:1]},ct=function(){var t,e,n,r,i,o,a,s;return a=Pt(arguments),o=a[0],e=a[1],t=a[2],u=2*Math.PI,o/=255,e/=255,t/=255,i=Math.min(o,e,t),r=(o+e+t)/3,s=1-i/r,0===s?n=0:(n=(o-e+(o-t))/2,n/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),n=Math.acos(n),t>e&&(n=u-n),n/=u),[360*n,s,r]},x.hsi=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Ot.call(arguments).concat(["hsi"]),function(){})},f.hsi=k,t.prototype.hsi=function(){return ct(this._rgb)},z=function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,m,g;return"hsl"===r?(m=t.hsl(),g=e.hsl()):"hsv"===r?(m=t.hsv(),g=e.hsv()):"hcg"===r?(m=t.hcg(),g=e.hcg()):"hsi"===r?(m=t.hsi(),g=e.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",m=t.hcl(),g=e.hcl()),"h"===r.substr(0,1)&&(a=m[0],d=m[1],c=m[2],s=g[0],p=g[1],l=g[2]),isNaN(a)||isNaN(s)?isNaN(a)?isNaN(s)?o=Number.NaN:(o=s,1!==c&&0!==c||"hsv"===r||(f=p)):(o=a,1!==l&&0!==l||"hsv"===r||(f=d)):(i=s>a&&s-a>180?s-(a+360):s<a&&a-s>180?s+360-a:s-a,o=a+n*i),null==f&&(f=d+n*(p-d)),u=c+n*(l-c),h=x[r](o,f,u)},d=d.concat(function(){var t,e,n,r;for(n=["hsv","hsl","hsi","hcl","lch","hcg"],r=[],e=0,t=n.length;e<t;e++)Q=n[e],r.push([Q,z]);return r}()),F=function(t,e,n,r){var i,o;return i=t.num(),o=e.num(),x.num(i+(o-i)*n,"num")},d.push(["num",F]),U=function(e,n,r,i){var o,a,s;return a=e.lab(),s=n.lab(),o=new t(a[0]+r*(s[0]-a[0]),a[1]+r*(s[1]-a[1]),a[2]+r*(s[2]-a[2]),i)},d.push(["lab",U])}).call(this)},{}],5:[function(t,e,n){"use strict";function r(t){return t}function i(t,e,n){function i(t,e){var n=y.hasOwnProperty(e)?y[e]:null;E.hasOwnProperty(e)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function o(t,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,o=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(t,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var s=n[a],l=r.hasOwnProperty(a);if(i(l,a),b.hasOwnProperty(a))b[a](t,s);else{var h=y.hasOwnProperty(a),p="function"==typeof s,m=p&&!h&&!l&&n.autobind!==!1;if(m)o.push(a,s),r[a]=s;else if(l){var g=y[a];u(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?r[a]=f(r[a],s):"DEFINE_MANY"===g&&(r[a]=d(r[a],s))}else r[a]=s}}}else;}function l(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in b;u(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in t;if(o){var a=_.hasOwnProperty(n)?_[n]:null;return u("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],r))}t[n]=r}}}function h(t,e){u(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(u(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function d(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function p(t,e){var n=e.bind(t);return n}function m(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=p(t,i)}}function g(t){var e=r(function(t,r,i){this.__reactAutoBindPairs.length&&m(this),this.props=t,this.context=r,this.refs=s,this.updater=i||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;u("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=o});e.prototype=new M,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],v.forEach(o.bind(null,e)),o(e,x),o(e,t),o(e,w),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),u(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var i in y)e.prototype[i]||(e.prototype[i]=null);return e}var v=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},b={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)o(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=a({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=a({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=a({},t.propTypes,e)},statics:function(t,e){l(t,e)},autobind:function(){}},x={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},E={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},M=function(){};return a(M.prototype,t.prototype,E),g}var o,a=t("object-assign"),s=t("fbjs/lib/emptyObject"),u=t("fbjs/lib/invariant"),c="mixins";o={},e.exports=i},{"fbjs/lib/emptyObject":54,"fbjs/lib/invariant":55,"fbjs/lib/warning":56,"object-assign":205}],6:[function(t,e,n){"use strict";var r=t("react"),i=t("./factory");if("undefined"==typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;e.exports=i(r.Component,r.isValidElement,o)},{"./factory":5,react:321}],7:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return a(t(e),n)}}function n(t,e){return[t,e]}function r(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=M?10:o>=T?5:o>=S?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=M?10:o>=T?5:o>=S?2:1)}function i(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=M?i*=10:o>=T?i*=5:o>=S&&(i*=2),e<t?-i:i}function o(t){return t.length}var a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},s=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},u=s(a),c=u.right,l=u.left,h=function(t,e){null==e&&(e=n);for(var r=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);r<i;)a[r]=e(o,o=t[++r]);return a},f=function(t,e,r){var i,o,a,s,u=t.length,c=e.length,l=new Array(u*c);for(null==r&&(r=n),i=a=0;i<u;++i)for(s=t[i],o=0;o<c;++o,++a)l[a]=r(s,e[o]);return l},d=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},m=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==e)for(;++a<i;)isNaN(n=p(t[a]))||(r=n-s,s+=r/++o,u+=r*(n-s));else for(;++a<i;)isNaN(n=p(e(t[a],a,t)))||(r=n-s,s+=r/++o,u+=r*(n-s));if(o>1)return u/(o-1)},g=function(t,e){var n=m(t,e);return n?Math.sqrt(n):n},v=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,_=y.slice,b=y.map,x=function(t){return function(){return t}},w=function(t){return t},E=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},M=Math.sqrt(50),T=Math.sqrt(10),S=Math.sqrt(2),P=function(t,e,n){var i,o,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(s=r(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(o=Math.ceil(e-t+1));++u<o;)a[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(o=Math.ceil(t-e+1));++u<o;)a[u]=(t-u)/s;return i&&a.reverse(),a},C=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},A=function(){function t(t){var o,a,s=t.length,u=new Array(s);for(o=0;o<s;++o)u[o]=e(t[o],o,t);var l=n(u),h=l[0],f=l[1],d=r(u,h,f);Array.isArray(d)||(d=i(h,f,d),d=E(Math.ceil(h/d)*d,Math.floor(f/d)*d,d));for(var p=d.length;d[0]<=h;)d.shift(),--p;for(;d[p-1]>f;)d.pop(),--p;var m,g=new Array(p+1);for(o=0;o<=p;++o)m=g[o]=[],m.x0=o>0?d[o-1]:h,m.x1=o<p?d[o]:f;for(o=0;o<s;++o)a=u[o],h<=a&&a<=f&&g[c(d,a,0,p)].push(t[o]);return g}var e=w,n=v,r=C;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:x(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:x([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:x(Array.isArray(e)?_.call(e):e),t):r},t},L=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}},O=function(t,e,n){return t=b.call(t,p).sort(a),Math.ceil((n-e)/(2*(L(t,.75)-L(t,.25))*Math.pow(t.length,-1/3)))},R=function(t,e,n){return Math.ceil((n-e)/(3.5*g(t)*Math.pow(t.length,-1/3)))},k=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},N=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=p(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},I=function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=p(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=p(e(t[i],i,t)))||o.push(n);return L(o.sort(a),.5)},D=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},j=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},z=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},U=function(t,e){if(n=t.length){var n,r,i=0,o=0,s=t[o];for(null==e&&(e=a);++i<n;)(e(r=t[i],s)<0||0!==e(s,s))&&(s=r,o=i);return 0===e(s,s)?o:void 0}},B=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},F=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},H=function(t){if(!(i=t.length))return[];for(var e=-1,n=j(t,o),r=new Array(n);++e<n;)for(var i,a=-1,s=r[e]=new Array(i);++a<i;)s[a]=t[a][e];return r},G=function(){return H(arguments)};t.bisect=c,t.bisectRight=c,t.bisectLeft=l,t.ascending=a,t.bisector=s,t.cross=f,t.descending=d,t.deviation=g,t.extent=v,t.histogram=A,t.thresholdFreedmanDiaconis=O,t.thresholdScott=R,t.thresholdSturges=C,t.max=k,t.mean=N,t.median=I,t.merge=D,t.min=j,t.pairs=h,t.permute=z,t.quantile=L,t.range=E,t.scan=U,t.shuffle=B,t.sum=F,t.ticks=P,t.tickIncrement=r,t.tickStep=i,t.transpose=H,t.variance=m,t.zip=G,Object.defineProperty(t,"__esModule",{value:!0})})},{}],8:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return"translate("+(t+.5)+",0)"}function n(t){return"translate(0,"+(t+.5)+")"}function r(t){return function(e){return+t(e)}}function i(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function o(){return!this.__axis}function a(t,a){function s(e){var n=null==c?a.ticks?a.ticks.apply(a,u):a.domain():c,s=null==l?a.tickFormat?a.tickFormat.apply(a,u):f:l,h=Math.max(y,0)+b,M=a.range(),T=+M[0]+.5,S=+M[M.length-1]+.5,P=(a.bandwidth?i:r)(a.copy()),C=e.selection?e.selection():e,A=C.selectAll(".domain").data([null]),L=C.selectAll(".tick").data(n,a).order(),O=L.exit(),R=L.enter().append("g").attr("class","tick"),k=L.select("line"),N=L.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),L=L.merge(R),k=k.merge(R.append("line").attr("stroke","#000").attr(w+"2",x*y)),N=N.merge(R.append("text").attr("fill","#000").attr(w,x*h).attr("dy",t===d?"0em":t===m?"0.71em":"0.32em")),e!==C&&(A=A.transition(e),L=L.transition(e),k=k.transition(e),N=N.transition(e),O=O.transition(e).attr("opacity",v).attr("transform",function(t){return isFinite(t=P(t))?E(t):this.getAttribute("transform")}),R.attr("opacity",v).attr("transform",function(t){var e=this.parentNode.__axis;return E(e&&isFinite(e=e(t))?e:P(t))})),O.remove(),A.attr("d",t===g||t==p?"M"+x*_+","+T+"H0.5V"+S+"H"+x*_:"M"+T+","+x*_+"V0.5H"+S+"V"+x*_),L.attr("opacity",1).attr("transform",function(t){return E(P(t))}),k.attr(w+"2",x*y),N.attr(w,x*h).text(s),C.filter(o).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===p?"start":t===g?"end":"middle"),C.each(function(){this.__axis=P})}var u=[],c=null,l=null,y=6,_=6,b=3,x=t===d||t===g?-1:1,w=t===g||t===p?"x":"y",E=t===d||t===m?e:n;return s.scale=function(t){return arguments.length?(a=t,s):a},s.ticks=function(){return u=h.call(arguments),s},s.tickArguments=function(t){return arguments.length?(u=null==t?[]:h.call(t),s):u.slice()},s.tickValues=function(t){return arguments.length?(c=null==t?null:h.call(t),s):c&&c.slice()},s.tickFormat=function(t){return arguments.length?(l=t,s):l},s.tickSize=function(t){return arguments.length?(y=_=+t,s):y},s.tickSizeInner=function(t){return arguments.length?(y=+t,s):y},s.tickSizeOuter=function(t){return arguments.length?(_=+t,s):_},s.tickPadding=function(t){return arguments.length?(b=+t,s):b},s}function s(t){return a(d,t)}function u(t){return a(p,t)}function c(t){return a(m,t)}function l(t){return a(g,t)}var h=Array.prototype.slice,f=function(t){return t},d=1,p=2,m=3,g=4,v=1e-6;t.axisTop=s,t.axisRight=u,t.axisBottom=c,t.axisLeft=l,Object.defineProperty(t,"__esModule",{value:!0})})},{}],9:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(){i.event.stopImmediatePropagation()}function s(t){return{type:t}}function u(){return!i.event.button}function c(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function l(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function h(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function f(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function d(){return m(E)}function p(){return m(M)}function m(t){function f(e){var n=e.property("__brush",O).selectAll(".overlay").data([s("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",S.overlay).merge(n).each(function(){var t=l(this).extent;i.select(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([s("selection")]).enter().append("rect").attr("class","selection").attr("cursor",S.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return S[t.type]}),e.each(d).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",T)}function d(){var t=i.select(this),e=l(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-D/2:e[0][0]-D/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-D/2:e[0][1]-D/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+D:D}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+D:D})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function p(t,e){return t.__brush.emitter||new m(t,e)}function m(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function T(){function e(){var t=i.mouse(F);!$||U||B||(Math.abs(t[0]-et[0])>Math.abs(t[1]-et[1])?B=!0:U=!0),et=t,z=!0,y(),r()}function r(){var t;switch(D=et[0]-tt[0],j=et[1]-tt[1],G){case b:case _:V&&(D=Math.max(X-f,Math.min(J-T,D)),m=f+D,O=T+D),W&&(j=Math.max(K-g,Math.min(Q-k,j)),v=g+j,I=k+j);break;case x:V<0?(D=Math.max(X-f,Math.min(J-f,D)),m=f+D,O=T):V>0&&(D=Math.max(X-T,Math.min(J-T,D)),m=f,O=T+D),W<0?(j=Math.max(K-g,Math.min(Q-g,j)),v=g+j,I=k):W>0&&(j=Math.max(K-k,Math.min(Q-k,j)),v=g,I=k+j);break;case w:V&&(m=Math.max(X,Math.min(J,f-D*V)),O=Math.max(X,Math.min(J,T+D*V))),W&&(v=Math.max(K,Math.min(Q,g-j*W)),I=Math.max(K,Math.min(Q,k+j*W)))}O<m&&(V*=-1,t=f,f=T,T=t,t=m,m=O,O=t,H in P&&it.attr("cursor",S[H=P[H]])),I<v&&(W*=-1,t=g,g=k,k=t,t=v,v=I,I=t,H in C&&it.attr("cursor",S[H=C[H]])),q.selection&&(Z=q.selection),U&&(m=Z[0][0],O=Z[1][0]),B&&(v=Z[0][1],I=Z[1][1]),Z[0][0]===m&&Z[0][1]===v&&Z[1][0]===O&&Z[1][1]===I||(q.selection=[[m,v],[O,I]],d.call(F),nt.brush())}function s(){if(a(),i.event.touches){if(i.event.touches.length)return;R&&clearTimeout(R),R=setTimeout(function(){R=null},500),rt.on("touchmove.brush touchend.brush touchcancel.brush",null)}else n.dragEnable(i.event.view,z),ot.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);rt.attr("pointer-events","all"),it.attr("cursor",S.overlay),q.selection&&(Z=q.selection),h(Z)&&(q.selection=null,d.call(F)),nt.end()}function u(){switch(i.event.keyCode){case 16:$=V&&W;break;case 18:G===x&&(V&&(T=O-D*V,f=m+D*V),W&&(k=I-j*W,g=v+j*W),G=w,r());break;case 32:G!==x&&G!==w||(V<0?T=O-D:V>0&&(f=m-D),W<0?k=I-j:W>0&&(g=v-j),G=b,it.attr("cursor",S.selection),r());break;default:return}y()}function c(){switch(i.event.keyCode){case 16:$&&(U=B=$=!1,r());break;case 18:G===w&&(V<0?T=O:V>0&&(f=m),W<0?k=I:W>0&&(g=v),G=x,r());break;case 32:G===b&&(i.event.altKey?(V&&(T=O-D*V,f=m+D*V),W&&(k=I-j*W,g=v+j*W),G=w):(V<0?T=O:V>0&&(f=m),W<0?k=I:W>0&&(g=v),G=x),it.attr("cursor",S[H]),r());break;default:return}y()}if(i.event.touches){if(i.event.changedTouches.length<i.event.touches.length)return y()}else if(R)return;if(N.apply(this,arguments)){var f,m,g,v,T,O,k,I,D,j,z,U,B,F=this,H=i.event.target.__data__.type,G="selection"===(i.event.metaKey?H="overlay":H)?_:i.event.altKey?w:x,V=t===M?null:A[H],W=t===E?null:L[H],q=l(F),Y=q.extent,Z=q.selection,X=Y[0][0],K=Y[0][1],J=Y[1][0],Q=Y[1][1],$=V&&W&&i.event.shiftKey,tt=i.mouse(F),et=tt,nt=p(F,arguments).beforestart();"overlay"===H?q.selection=Z=[[f=t===M?X:tt[0],g=t===E?K:tt[1]],[T=t===M?J:f,k=t===E?Q:g]]:(f=Z[0][0],g=Z[0][1],T=Z[1][0],k=Z[1][1]),m=f,v=g,O=T,I=k;var rt=i.select(F).attr("pointer-events","none"),it=rt.selectAll(".overlay").attr("cursor",S[H]);if(i.event.touches)rt.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",s,!0);else{var ot=i.select(i.event.view).on("keydown.brush",u,!0).on("keyup.brush",c,!0).on("mousemove.brush",e,!0).on("mouseup.brush",s,!0);n.dragDisable(i.event.view)}a(),o.interrupt(F),d.call(F),nt.start()}}function O(){var e=this.__brush||{selection:null};return e.extent=k.apply(this,arguments),e.dim=t,e}var R,k=c,N=u,I=e.dispatch(f,"start","brush","end"),D=6;return f.move=function(e,n){e.selection?e.on("start.brush",function(){p(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){p(this,arguments).end()}).tween("brush",function(){function e(t){o.selection=1===t&&h(u)?null:c(t),d.call(i),a.brush()}var i=this,o=i.__brush,a=p(i,arguments),s=o.selection,u=t.input("function"==typeof n?n.apply(this,arguments):n,o.extent),c=r.interpolate(s,u);return s&&u?e:e(1)}):e.each(function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),s=p(e,r).beforestart();o.interrupt(e),i.selection=null==a||h(a)?null:a,d.call(e),s.start().brush().end()})},m.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){i.customEvent(new v(f,e,t.output(this.state.selection)),I.apply,I,[e,this.that,this.args])}},f.extent=function(t){return arguments.length?(k="function"==typeof t?t:g([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),f):k},f.filter=function(t){return arguments.length?(N="function"==typeof t?t:g(!!t),f):N},f.handleSize=function(t){return arguments.length?(D=+t,f):D},f.on=function(){var t=I.on.apply(I,arguments);return t===I?f:t},f}var g=function(t){return function(){return t}},v=function(t,e,n){this.target=t,this.type=e,this.selection=n},y=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},_={name:"drag"},b={name:"space"},x={name:"handle"},w={name:"center"},E={name:"x",handles:["e","w"].map(s),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},M={name:"y",handles:["n","s"].map(s),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},T={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(s),input:function(t){return t},output:function(t){return t}},S={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},P={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},C={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},A={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},L={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},O=function(){return m(T)};t.brush=O,t.brushX=d,t.brushY=p,t.brushSelection=f,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":14,"d3-drag":15,"d3-interpolate":23,"d3-selection":30,"d3-transition":35}],10:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-array"),t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function i(t){return t.source}function o(t){return t.target}function a(t){return t.radius}function s(t){return t.startAngle}function u(t){return t.endAngle}var c=Math.cos,l=Math.sin,h=Math.PI,f=h/2,d=2*h,p=Math.max,m=function(){function t(t){var r,s,u,c,l,h,f=t.length,m=[],g=e.range(f),v=[],y=[],_=y.groups=new Array(f),b=new Array(f*f);for(r=0,l=-1;++l<f;){for(s=0,h=-1;++h<f;)s+=t[l][h];m.push(s),v.push(e.range(f)),r+=s}for(i&&g.sort(function(t,e){return i(m[t],m[e])}),o&&v.forEach(function(e,n){e.sort(function(e,r){return o(t[n][e],t[n][r])})}),r=p(0,d-n*f)/r,c=r?n:d/f,s=0,l=-1;++l<f;){for(u=s,h=-1;++h<f;){var x=g[l],w=v[x][h],E=t[x][w],M=s,T=s+=E*r;b[w*f+x]={index:x,subindex:w,startAngle:M,endAngle:T,value:E}}_[x]={index:x,startAngle:u,endAngle:s,value:m[x]},s+=c}for(l=-1;++l<f;)for(h=l-1;++h<f;){var S=b[h*f+l],P=b[l*f+h];(S.value||P.value)&&y.push(S.value<P.value?{source:P,target:S}:{source:S,target:P})}return a?y.sort(a):y}var n=0,i=null,o=null,a=null;return t.padAngle=function(e){return arguments.length?(n=p(0,e),t):n},t.sortGroups=function(e){return arguments.length?(i=e,t):i},t.sortSubgroups=function(e){return arguments.length?(o=e,t):o},t.sortChords=function(e){return arguments.length?(null==e?a=null:(a=r(e))._=e,t):a&&a._},t},g=Array.prototype.slice,v=function(t){return function(){return t}},y=function(){function t(){var t,i=g.call(arguments),o=e.apply(this,i),a=r.apply(this,i),s=+h.apply(this,(i[0]=o,i)),u=d.apply(this,i)-f,v=p.apply(this,i)-f,y=s*c(u),_=s*l(u),b=+h.apply(this,(i[0]=a,i)),x=d.apply(this,i)-f,w=p.apply(this,i)-f;if(m||(m=t=n.path()),m.moveTo(y,_),m.arc(0,0,s,u,v),u===x&&v===w||(m.quadraticCurveTo(0,0,b*c(x),b*l(x)),m.arc(0,0,b,x,w)),m.quadraticCurveTo(0,0,y,_),m.closePath(),t)return m=null,t+""||null}var e=i,r=o,h=a,d=s,p=u,m=null;return t.radius=function(e){return arguments.length?(h="function"==typeof e?e:v(+e),t):h},t.startAngle=function(e){return arguments.length?(d="function"==typeof e?e:v(+e),t):d},t.endAngle=function(e){return arguments.length?(p="function"==typeof e?e:v(+e),t):p},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(r=e,t):r},t.context=function(e){return arguments.length?(m=null==e?null:e,t):m},t};t.chord=m,t.ribbon=y,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7,"d3-path":24}],11:[function(t,e,n){
!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var s in t)r.set(s,t[s]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function a(t,e,n){t.set(e,n)}function s(){}function u(t,e){var n=new s;if(t instanceof s)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}var c="$";e.prototype=n.prototype={constructor:e,has:function(t){return c+t in this},get:function(t){return this[c+t]},set:function(t,e){return this[c+t]=e,this},remove:function(t){var e=c+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===c&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===c&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===c&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===c&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===c&&++t;return t},empty:function(){for(var t in this)if(t[0]===c)return!1;return!0},each:function(t){for(var e in this)e[0]===c&&t(this[e],e.slice(1),this)}};var l=function(){function t(e,r,i,o){if(r>=l.length)return null!=s&&e.sort(s),null!=u?u(e):e;for(var a,c,h,f=-1,d=e.length,p=l[r++],m=n(),g=i();++f<d;)(h=m.get(a=p(c=e[f])+""))?h.push(c):m.set(a,[c]);return m.each(function(e,n){o(g,n,t(e,r,i,o))}),g}function e(t,n){if(++n>l.length)return t;var r,i=h[n-1];return null!=u&&n>=l.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var s,u,c,l=[],h=[];return c={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,o,a)},entries:function(n){return e(t(n,0,o,a),0)},key:function(t){return l.push(t),c},sortKeys:function(t){return h[l.length-1]=t,c},sortValues:function(t){return s=t,c},rollup:function(t){return u=t,c}}},h=n.prototype;s.prototype=u.prototype={constructor:s,has:h.has,add:function(t){return t+="",this[c+t]=t,this},remove:h.remove,clear:h.clear,values:h.keys,size:h.size,empty:h.empty,each:h.each};var f=function(t){var e=[];for(var n in t)e.push(n);return e},d=function(t){var e=[];for(var n in t)e.push(t[n]);return e},p=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};t.nest=l,t.set=u,t.map=n,t.keys=f,t.values=d,t.entries=p,Object.defineProperty(t,"__esModule",{value:!0})})},{}],12:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=D.exec(t))?(e=parseInt(e[1],16),new u(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=j.exec(t))?i(parseInt(e[1],16)):(e=z.exec(t))?new u(e[1],e[2],e[3],1):(e=U.exec(t))?new u(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=B.exec(t))?o(e[1],e[2],e[3],e[4]):(e=F.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=H.exec(t))?l(e[1],e[2]/100,e[3]/100,1):(e=G.exec(t))?l(e[1],e[2]/100,e[3]/100,e[4]):V.hasOwnProperty(t)?i(V[t]):"transparent"===t?new u(NaN,NaN,NaN,0):null}function i(t){return new u(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new u(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new u(t.r,t.g,t.b,t.opacity)):new u}function s(t,e,n,r){return 1===arguments.length?a(t):new u(t,e,n,null==r?1:r)}function u(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function c(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function l(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new d(t,e,n,r)}function h(t){if(t instanceof d)return new d(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new d;if(t instanceof d)return t;t=t.rgb();var e=t.r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),s=Math.max(e,i,o),u=NaN,c=s-a,l=(s+a)/2;return c?(u=e===s?(i-o)/c+6*(i<o):i===s?(o-e)/c+2:(e-i)/c+4,c/=l<.5?s+a:2-s-a,u*=60):c=l>0&&l<1?0:u,new d(u,c,l,t.opacity)}function f(t,e,n,r){return 1===arguments.length?h(t):new d(t,e,n,null==r?1:r)}function d(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function p(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function m(t){if(t instanceof y)return new y(t.l,t.a,t.b,t.opacity);if(t instanceof S){if(isNaN(t.h))return new y(t.l,0,0,t.opacity);var e=t.h*W;return new y(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof u||(t=a(t));var n,r,i=w(t.r),o=w(t.g),s=w(t.b),c=_((.2225045*i+.7168786*o+.0606169*s)/X);return i===o&&o===s?n=r=c:(n=_((.4360747*i+.3850649*o+.1430804*s)/Z),r=_((.0139322*i+.0971045*o+.7141733*s)/K)),new y(116*c-16,500*(n-c),200*(c-r),t.opacity)}function g(t,e){return new y(t,0,0,null==e?1:e)}function v(t,e,n,r){return 1===arguments.length?m(t):new y(t,e,n,null==r?1:r)}function y(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function _(t){return t>tt?Math.pow(t,1/3):t/$+J}function b(t){return t>Q?t*t*t:$*(t-J)}function x(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function w(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function E(t){if(t instanceof S)return new S(t.h,t.c,t.l,t.opacity);if(t instanceof y||(t=m(t)),0===t.a&&0===t.b)return new S(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*q;return new S(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function M(t,e,n,r){return 1===arguments.length?E(t):new S(n,e,t,null==r?1:r)}function T(t,e,n,r){return 1===arguments.length?E(t):new S(t,e,n,null==r?1:r)}function S(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function P(t){if(t instanceof A)return new A(t.h,t.s,t.l,t.opacity);t instanceof u||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ut*r+at*e-st*n)/(ut+at-st),o=r-i,s=(ot*(n-i)-rt*o)/it,c=Math.sqrt(s*s+o*o)/(ot*i*(1-i)),l=c?Math.atan2(s,o)*q-120:NaN;return new A(l<0?l+360:l,c,i,t.opacity)}function C(t,e,n,r){return 1===arguments.length?P(t):new A(t,e,n,null==r?1:r)}function A(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var L=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},O=.7,R=1/O,k="\\s*([+-]?\\d+)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",I="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3})$/,j=/^#([0-9a-f]{6})$/,z=new RegExp("^rgb\\("+[k,k,k]+"\\)$"),U=new RegExp("^rgb\\("+[I,I,I]+"\\)$"),B=new RegExp("^rgba\\("+[k,k,k,N]+"\\)$"),F=new RegExp("^rgba\\("+[I,I,I,N]+"\\)$"),H=new RegExp("^hsl\\("+[N,I,I]+"\\)$"),G=new RegExp("^hsla\\("+[N,I,I,N]+"\\)$"),V={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L(n,r,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),L(u,s,e(n,{brighter:function(t){return t=null==t?R:Math.pow(R,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?O:Math.pow(O,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+c(this.r)+c(this.g)+c(this.b)},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),L(d,f,e(n,{brighter:function(t){return t=null==t?R:Math.pow(R,t),new d(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?O:Math.pow(O,t),new d(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new u(p(t>=240?t-240:t+120,i,r),p(t,i,r),p(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var W=Math.PI/180,q=180/Math.PI,Y=18,Z=.96422,X=1,K=.82521,J=4/29,Q=6/29,$=3*Q*Q,tt=Q*Q*Q;L(y,v,e(n,{brighter:function(t){return new y(this.l+Y*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new y(this.l-Y*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Z*b(e),t=X*b(t),n=K*b(n),new u(x(3.1338561*e-1.6168667*t-.4906146*n),x(-.9787684*e+1.9161415*t+.033454*n),x(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),L(S,T,e(n,{brighter:function(t){return new S(this.h,this.c,this.l+Y*(null==t?1:t),this.opacity)},darker:function(t){return new S(this.h,this.c,this.l-Y*(null==t?1:t),this.opacity)},rgb:function(){return m(this).rgb()}}));var et=-.14861,nt=1.78277,rt=-.29227,it=-.90649,ot=1.97294,at=ot*it,st=ot*nt,ut=nt*rt-it*et;L(A,C,e(n,{brighter:function(t){return t=null==t?R:Math.pow(R,t),new A(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?O:Math.pow(O,t),new A(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*W,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new u(255*(e+n*(et*r+nt*i)),255*(e+n*(rt*r+it*i)),255*(e+n*(ot*r)),this.opacity)}})),t.color=r,t.rgb=s,t.hsl=f,t.lab=v,t.hcl=T,t.lch=M,t.gray=g,t.cubehelix=C,Object.defineProperty(t,"__esModule",{value:!0})})},{}],13:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e){for(var n=e[0],i=e[1],o=-1,a=0,s=t.length,u=s-1;a<s;u=a++){var c=t[a],l=c[0],h=c[1],f=t[u],d=f[0],p=f[1];if(r(c,f,e))return 0;h>i!=p>i&&n<(d-l)*(i-h)/(p-h)+l&&(o=-o)}return o}function r(t,e,n){var r;return i(t,e,n)&&o(t[r=+(t[0]===e[0])],n[r],e[r])}function i(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function o(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function a(t,e,n){for(var r=t.width,i=t.height,o=(n<<1)+1,a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),s>=n&&(s>=o&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function s(t,e,n){for(var r=t.width,i=t.height,o=(n<<1)+1,a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),s>=n&&(s>=o&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function u(t){return t[0]}function c(t){return t[1]}var l=Array.prototype,h=l.slice,f=function(t,e){return t-e},d=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},p=function(t){return function(){return t}},m=function(t,e){for(var r,i=-1,o=e.length;++i<o;)if(r=n(t,e[i]))return r;return 0},g=function(){},v=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],y=function(){function t(t){var r=u(t);if(Array.isArray(r))r=r.slice().sort(f);else{var i=e.extent(t),o=i[0],a=i[1];r=e.tickStep(o,a,r),r=e.range(Math.floor(o/r)*r,Math.floor(a/r)*r,r)}return r.map(function(e){return n(t,e)})}function n(t,e){var n=[],i=[];return r(t,e,function(r){c(r,t,e),d(r)>0?n.push([r]):i.push(r)}),i.forEach(function(t){for(var e,r=0,i=n.length;r<i;++r)if(m((e=n[r])[0],t)!==-1)return void e.push(t)}),{type:"MultiPolygon",value:e,coordinates:n}}function r(t,e,n){function r(t){var e,r,a=[t[0][0]+o,t[0][1]+u],s=[t[1][0]+o,t[1][1]+u],c=i(a),l=i(s);(e=p[c])?(r=d[l])?(delete p[e.end],delete d[r.start],e===r?(e.ring.push(s),n(e.ring)):d[e.start]=p[r.end]={start:e.start,end:r.end,ring:e.ring.concat(r.ring)}):(delete p[e.end],e.ring.push(s),p[e.end=l]=e):(e=d[l])?(r=p[c])?(delete d[e.start],delete p[r.end],e===r?(e.ring.push(s),n(e.ring)):d[r.start]=p[e.end]={start:r.start,end:e.end,ring:r.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(a),d[e.start=c]=e):d[c]=p[l]={start:c,end:l,ring:[a,s]}}var o,u,c,l,h,f,d=new Array,p=new Array;for(o=u=-1,l=t[0]>=e,v[l<<1].forEach(r);++o<a-1;)c=l,l=t[o+1]>=e,v[c|l<<1].forEach(r);for(v[l<<0].forEach(r);++u<s-1;){for(o=-1,l=t[u*a+a]>=e,h=t[u*a]>=e,v[l<<1|h<<2].forEach(r);++o<a-1;)c=l,l=t[u*a+a+o+1]>=e,f=h,h=t[u*a+o+1]>=e,v[c|l<<1|h<<2|f<<3].forEach(r);v[l|h<<3].forEach(r)}for(o=-1,h=t[u*a]>=e,v[h<<2].forEach(r);++o<a-1;)f=h,h=t[u*a+o+1]>=e,v[h<<2|f<<3].forEach(r);v[h<<3].forEach(r)}function i(t){return 2*t[0]+t[1]*(a+1)*4}function o(t,e,n){t.forEach(function(t){var r,i=t[0],o=t[1],u=0|i,c=0|o,l=e[c*a+u];i>0&&i<a&&u===i&&(r=e[c*a+u-1],t[0]=i+(n-r)/(l-r)-.5),o>0&&o<s&&c===o&&(r=e[(c-1)*a+u],t[1]=o+(n-r)/(l-r)-.5)})}var a=1,s=1,u=e.thresholdSturges,c=o;return t.contour=n,t.size=function(e){if(!arguments.length)return[a,s];var n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(n>0&&r>0))throw new Error("invalid size");return a=n,s=r,t},t.thresholds=function(e){return arguments.length?(u="function"==typeof e?e:p(Array.isArray(e)?h.call(e):e),t):u},t.smooth=function(e){return arguments.length?(c=e?o:g,t):c===o},t},_=function(){function t(t){var r=new Float32Array(x*w),i=new Float32Array(x*w);t.forEach(function(t,e,n){var i=f(t,e,n)+b>>_,o=d(t,e,n)+b>>_;i>=0&&i<x&&o>=0&&o<w&&++r[i+o*x]}),a({width:x,height:w,data:r},{width:x,height:w,data:i},v>>_),s({width:x,height:w,data:i},{width:x,height:w,data:r},v>>_),a({width:x,height:w,data:r},{width:x,height:w,data:i},v>>_),s({width:x,height:w,data:i},{width:x,height:w,data:r},v>>_),a({width:x,height:w,data:r},{width:x,height:w,data:i},v>>_),s({width:x,height:w,data:i},{width:x,height:w,data:r},v>>_);var o=E(r);if(!Array.isArray(o)){var u=e.max(r);o=e.tickStep(0,u,o),o=e.range(0,Math.floor(u/o)*o,o),o.shift()}return y().thresholds(o).size([x,w])(r).map(n)}function n(t){return t.value*=Math.pow(2,-2*_),t.coordinates.forEach(r),t}function r(t){t.forEach(i)}function i(t){t.forEach(o)}function o(t){t[0]=t[0]*Math.pow(2,_)-b,t[1]=t[1]*Math.pow(2,_)-b}function l(){return b=3*v,x=m+2*b>>_,w=g+2*b>>_,t}var f=u,d=c,m=960,g=500,v=20,_=2,b=3*v,x=m+2*b>>_,w=g+2*b>>_,E=p(20);return t.x=function(e){return arguments.length?(f="function"==typeof e?e:p(+e),t):f},t.y=function(e){return arguments.length?(d="function"==typeof e?e:p(+e),t):d},t.size=function(t){if(!arguments.length)return[m,g];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return m=e,g=n,l()},t.cellSize=function(t){if(!arguments.length)return 1<<_;if(!((t=+t)>=1))throw new Error("invalid cell size");return _=Math.floor(Math.log(t)/Math.LN2),l()},t.thresholds=function(e){return arguments.length?(E="function"==typeof e?e:p(Array.isArray(e)?h.call(e):e),t):E},t.bandwidth=function(t){if(!arguments.length)return Math.sqrt(v*(v+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return v=Math.round((Math.sqrt(4*t*t+1)-1)/2),l()},t};t.contours=y,t.contourDensity=_,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7}],14:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new n(i)}function n(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var a={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,a=this._,s=r(t+"",a),u=-1,c=s.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<c;)if(n=(t=s[u]).type)a[n]=o(a[n],t.name,e);else if(null==e)for(n in a)a[n]=o(a[n],t.name,null);return this}for(;++u<c;)if((n=(t=s[u]).type)&&(n=i(a[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},{}],15:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dispatch"),t("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(t,e){var r=t.document.documentElement,i=n.select(t).on("dragstart.drag",null);e&&(i.on("click.drag",l,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function o(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function a(){return!n.event.button}function s(){return this.parentNode}function u(t){return null==t?{x:n.event.x,y:n.event.y}:t}function c(){return"ontouchstart"in this}var l=function(){n.event.preventDefault(),n.event.stopImmediatePropagation()},h=function(t){var e=t.document.documentElement,r=n.select(t).on("dragstart.drag",l,!0);"onselectstart"in e?r.on("selectstart.drag",l,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},f=function(t){return function(){return t}};o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var d=function(){function t(t){t.on("mousedown.drag",d).filter(P).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!E&&M.apply(this,arguments)){var t=_("mouse",T.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),h(n.event.view),r(),w=!1,b=n.event.clientX,x=n.event.clientY,t("start"))}}function p(){if(l(),!w){var t=n.event.clientX-b,e=n.event.clientY-x;w=t*t+e*e>O}C.mouse("drag")}function m(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),i(n.event.view,w),l(),C.mouse("end")}function g(){if(M.apply(this,arguments)){var t,e,i=n.event.changedTouches,o=T.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(e=_(i[t].identifier,o,n.touch,this,arguments))&&(r(),e("start"))}}function v(){var t,e,r=n.event.changedTouches,i=r.length;for(t=0;t<i;++t)(e=C[r[t].identifier])&&(l(),e("drag"))}function y(){var t,e,i=n.event.changedTouches,o=i.length;for(E&&clearTimeout(E),E=setTimeout(function(){E=null},500),t=0;t<o;++t)(e=C[i[t].identifier])&&(r(),e("end"))}function _(e,r,i,a,s){var u,c,l,h=i(r,e),f=A.copy();if(n.customEvent(new o(t,"beforestart",u,e,L,h[0],h[1],0,0,f),function(){return null!=(n.event.subject=u=S.apply(a,s))&&(c=u.x-h[0]||0,l=u.y-h[1]||0,!0)}))return function d(p){var m,g=h;switch(p){case"start":C[e]=d,m=L++;break;case"end":delete C[e],--L;case"drag":h=i(r,e),m=L}n.customEvent(new o(t,p,u,e,m,h[0]+c,h[1]+l,h[0]-g[0],h[1]-g[1],f),f.apply,f,[p,a,s])}}var b,x,w,E,M=a,T=s,S=u,P=c,C={},A=e.dispatch("start","drag","end"),L=0,O=0;return t.filter=function(e){return arguments.length?(M="function"==typeof e?e:f(!!e),t):M},t.container=function(e){return arguments.length?(T="function"==typeof e?e:f(e),t):T},t.subject=function(e){return arguments.length?(S="function"==typeof e?e:f(e),t):S},t.touchable=function(e){return arguments.length?(P="function"==typeof e?e:f(!!e),t):P},t.on=function(){var e=A.on.apply(A,arguments);return e===A?t:e},t.clickDistance=function(e){return arguments.length?(O=(e=+e)*e,t):Math.sqrt(O)},t};t.drag=d,t.dragDisable=h,t.dragEnable=i,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":14,"d3-selection":30}],16:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function n(t,n){var r=e(t);return function(e,i){return n(r(e),i,t)}}function r(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}var i={},o={},a=34,s=10,u=13,c=function(t){function c(t,r){var i,o,a=l(t,function(t,a){return i?i(t,a-1):(o=t,void(i=r?n(t,r):e(t)))});return a.columns=o||[],a}function l(t,e){function n(){if(d)return o;if(p)return p=!1,i;var e,n,r=h;if(t.charCodeAt(r)===a){for(;h++<l&&t.charCodeAt(h)!==a||t.charCodeAt(++h)===a;);return(e=h)>=l?d=!0:(n=t.charCodeAt(h++))===s?p=!0:n===u&&(p=!0,t.charCodeAt(h)===s&&++h),t.slice(r+1,e-1).replace(/""/g,'"')}for(;h<l;){if((n=t.charCodeAt(e=h++))===s)p=!0;else if(n===u)p=!0,t.charCodeAt(h)===s&&++h;else if(n!==g)continue;return t.slice(r,e)}return d=!0,t.slice(r,l)}var r,c=[],l=t.length,h=0,f=0,d=l<=0,p=!1;for(t.charCodeAt(l-1)===s&&--l,t.charCodeAt(l-1)===u&&--l;(r=n())!==o;){for(var m=[];r!==i&&r!==o;)m.push(r),r=n();e&&null==(m=e(m,f++))||c.push(m)}return c}function h(e,n){return null==n&&(n=r(e)),[n.map(p).join(t)].concat(e.map(function(e){return n.map(function(t){return p(e[t])}).join(t)})).join("\n")}function f(t){return t.map(d).join("\n")}function d(e){return e.map(p).join(t)}function p(t){return null==t?"":m.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var m=new RegExp('["'+t+"\n\r]"),g=t.charCodeAt(0);return{parse:c,parseRows:l,format:h,formatRows:f}},l=c(","),h=l.parse,f=l.parseRows,d=l.format,p=l.formatRows,m=c("\t"),g=m.parse,v=m.parseRows,y=m.format,_=m.formatRows;t.dsvFormat=c,t.csvParse=h,t.csvParseRows=f,t.csvFormat=d,t.csvFormatRows=p,t.tsvParse=g,t.tsvParseRows=v,t.tsvFormat=y,t.tsvFormatRows=_,Object.defineProperty(t,"__esModule",{value:!0})})},{}],17:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return+t}function n(t){return t*t}function r(t){return t*(2-t)}function i(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function o(t){return t*t*t}function a(t){return--t*t*t+1}function s(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function u(t){return 1-Math.cos(t*T)}function c(t){return Math.sin(t*T)}function l(t){return(1-Math.cos(M*t))/2}function h(t){return Math.pow(2,10*t-10)}function f(t){return 1-Math.pow(2,-10*t)}function d(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function p(t){return 1-Math.sqrt(1-t*t)}function m(t){return Math.sqrt(1- --t*t)}function g(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function v(t){return 1-y(1-t)}function y(t){return(t=+t)<S?I*t*t:t<C?I*(t-=P)*t+A:t<O?I*(t-=L)*t+R:I*(t-=k)*t+N}function _(t){return((t*=2)<=1?1-y(1-t):y(t-1)+1)/2}var b=3,x=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(b),w=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(b),E=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(b),M=Math.PI,T=M/2,S=4/11,P=6/11,C=8/11,A=.75,L=9/11,O=10/11,R=.9375,k=21/22,N=63/64,I=1/S/S,D=1.70158,j=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(D),z=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(D),U=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(D),B=2*Math.PI,F=1,H=.3,G=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=B);return r.amplitude=function(e){return t(e,n*B)},r.period=function(n){return t(e,n)},r}(F,H),V=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=B);return r.amplitude=function(e){return t(e,n*B)},r.period=function(n){return t(e,n)},r}(F,H),W=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=B);return r.amplitude=function(e){return t(e,n*B)},r.period=function(n){return t(e,n)},r}(F,H);t.easeLinear=e,t.easeQuad=i,t.easeQuadIn=n,t.easeQuadOut=r,t.easeQuadInOut=i,t.easeCubic=s,t.easeCubicIn=o,t.easeCubicOut=a,t.easeCubicInOut=s,t.easePoly=E,t.easePolyIn=x,t.easePolyOut=w,t.easePolyInOut=E,t.easeSin=l,t.easeSinIn=u,t.easeSinOut=c,t.easeSinInOut=l,t.easeExp=d,t.easeExpIn=h,t.easeExpOut=f,t.easeExpInOut=d,t.easeCircle=g,t.easeCircleIn=p,t.easeCircleOut=m,t.easeCircleInOut=g,t.easeBounce=y,t.easeBounceIn=v,t.easeBounceOut=y,t.easeBounceInOut=_,t.easeBack=U,t.easeBackIn=j,t.easeBackOut=z,t.easeBackInOut=U,t.easeElastic=V,t.easeElasticIn=G,t.easeElasticOut=V,t.easeElasticInOut=W,Object.defineProperty(t,"__esModule",{value:!0})})},{}],18:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function r(t,e){return fetch(t,e).then(n)}function i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function o(t,e){return fetch(t,e).then(i)}function a(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function s(t,e){return fetch(t,e).then(a)}function u(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),s(e,n).then(function(e){return t(e,r)})}}function c(t,n,r,i){3===arguments.length&&"function"==typeof r&&(i=r,r=void 0);var o=e.dsvFormat(t);return s(n,r).then(function(t){return o.parse(t,i)})}function l(t,e){return new Promise(function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function h(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function f(t,e){return fetch(t,e).then(h)}function d(t){return function(e,n){return s(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var p=u(e.csvParse),m=u(e.tsvParse),g=d("application/xml"),v=d("text/html"),y=d("image/svg+xml");t.blob=r,t.buffer=o,t.dsv=c,t.csv=p,t.tsv=m,t.image=l,t.json=f,t.text=s,t.xml=g,t.html=v,t.svg=y,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dsv":16}],19:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i){"use strict";function o(t){return t.x+t.vx}function a(t){return t.y+t.vy}function s(t){return t.index}function u(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function c(t){return t.x}function l(t){return t.y}var h=function(t,e){function n(){var n,i,o=r.length,a=0,s=0;for(n=0;n<o;++n)i=r[n],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,n=0;n<o;++n)i=r[n],i.x-=a,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},f=function(t){return function(){return t}},d=function(){return 1e-6*(Math.random()-.5)},p=function(t){function n(){function t(t,e,n,r,i){var o=t.data,a=t.r,s=m+a;{if(!o)return e>f+s||r<f-s||n>p+s||i<p-s;if(o.index>h.index){var u=f-o.x-o.vx,l=p-o.y-o.vy,v=u*u+l*l;v<s*s&&(0===u&&(u=d(),v+=u*u),0===l&&(l=d(),v+=l*l),v=(s-(v=Math.sqrt(v)))/v*c,h.vx+=(u*=v)*(s=(a*=a)/(g+a)),h.vy+=(l*=v)*s,o.vx-=u*(s=1-s),o.vy-=l*s)}}}for(var n,i,h,f,p,m,g,v=s.length,y=0;y<l;++y)for(i=e.quadtree(s,o,a).visitAfter(r),n=0;n<v;++n)h=s[n],m=u[h.index],g=m*m,f=h.x+h.vx,p=h.y+h.vy,i.visit(t)}function r(t){if(t.data)return t.r=u[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(s){var e,n,r=s.length;for(u=new Array(r),e=0;e<r;++e)n=s[e],u[n.index]=+t(n,e,s)}}var s,u,c=1,l=1;return"function"!=typeof t&&(t=f(null==t?1:+t)),n.initialize=function(t){s=t,i()},n.iterations=function(t){return arguments.length?(l=+t,
n):l},n.strength=function(t){return arguments.length?(c=+t,n):c},n.radius=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),i(),n):t},n},m=function(t){function e(t){return 1/Math.min(p[t.source.index],p[t.target.index])}function r(e){for(var n=0,r=t.length;n<_;++n)for(var i,o,a,s,u,h,f,p=0;p<r;++p)i=t[p],o=i.source,a=i.target,s=a.x+a.vx-o.x-o.vx||d(),u=a.y+a.vy-o.y-o.vy||d(),h=Math.sqrt(s*s+u*u),h=(h-l[p])/h*e*c[p],s*=h,u*=h,a.vx-=s*(f=m[p]),a.vy-=u*f,o.vx+=s*(f=1-f),o.vy+=u*f}function i(){if(h){var e,r,i=h.length,s=t.length,f=n.map(h,g);for(e=0,p=new Array(i);e<s;++e)r=t[e],r.index=e,"object"!=typeof r.source&&(r.source=u(f,r.source)),"object"!=typeof r.target&&(r.target=u(f,r.target)),p[r.source.index]=(p[r.source.index]||0)+1,p[r.target.index]=(p[r.target.index]||0)+1;for(e=0,m=new Array(s);e<s;++e)r=t[e],m[e]=p[r.source.index]/(p[r.source.index]+p[r.target.index]);c=new Array(s),o(),l=new Array(s),a()}}function o(){if(h)for(var e=0,n=t.length;e<n;++e)c[e]=+v(t[e],e,t)}function a(){if(h)for(var e=0,n=t.length;e<n;++e)l[e]=+y(t[e],e,t)}var c,l,h,p,m,g=s,v=e,y=f(30),_=1;return null==t&&(t=[]),r.initialize=function(t){h=t,i()},r.links=function(e){return arguments.length?(t=e,i(),r):t},r.id=function(t){return arguments.length?(g=t,r):g},r.iterations=function(t){return arguments.length?(_=+t,r):_},r.strength=function(t){return arguments.length?(v="function"==typeof t?t:f(+t),o(),r):v},r.distance=function(t){return arguments.length?(y="function"==typeof t?t:f(+t),a(),r):y},r},g=10,v=Math.PI*(3-Math.sqrt(5)),y=function(t){function e(){o(),y.call("tick",u),c<l&&(m.stop(),y.call("end",u))}function o(){var e,n,r=t.length;for(c+=(f-c)*h,p.each(function(t){t(c)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=d:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=d:(n.y=n.fy,n.vy=0)}function a(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=g*Math.sqrt(n),o=n*v;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function s(e){return e.initialize&&e.initialize(t),e}var u,c=1,l=.001,h=1-Math.pow(l,1/300),f=0,d=.6,p=n.map(),m=i.timer(e),y=r.dispatch("tick","end");return null==t&&(t=[]),a(),u={tick:o,restart:function(){return m.restart(e),u},stop:function(){return m.stop(),u},nodes:function(e){return arguments.length?(t=e,a(),p.each(s),u):t},alpha:function(t){return arguments.length?(c=+t,u):c},alphaMin:function(t){return arguments.length?(l=+t,u):l},alphaDecay:function(t){return arguments.length?(h=+t,u):+h},alphaTarget:function(t){return arguments.length?(f=+t,u):f},velocityDecay:function(t){return arguments.length?(d=1-t,u):1-d},force:function(t,e){return arguments.length>1?(null==e?p.remove(t):p.set(t,s(e)),u):p.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(y.on(t,e),u):y.on(t)}}},_=function(){function t(t){var n,u=o.length,h=e.quadtree(o,c,l).visitAfter(r);for(s=t,n=0;n<u;++n)a=o[n],h.visit(i)}function n(){if(o){var t,e,n=o.length;for(u=new Array(n),t=0;t<n;++t)e=o[t],u[e.index]=+h(e,t,o)}}function r(t){var e,n,r,i,o,a=0,s=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{e=t,e.x=e.data.x,e.y=e.data.y;do a+=u[e.data.index];while(e=e.next)}t.value=a}function i(t,e,n,r){if(!t.value)return!0;var i=t.x-a.x,o=t.y-a.y,c=r-e,l=i*i+o*o;if(c*c/g<l)return l<m&&(0===i&&(i=d(),l+=i*i),0===o&&(o=d(),l+=o*o),l<p&&(l=Math.sqrt(p*l)),a.vx+=i*t.value*s/l,a.vy+=o*t.value*s/l),!0;if(!(t.length||l>=m)){(t.data!==a||t.next)&&(0===i&&(i=d(),l+=i*i),0===o&&(o=d(),l+=o*o),l<p&&(l=Math.sqrt(p*l)));do t.data!==a&&(c=u[t.data.index]*s/l,a.vx+=i*c,a.vy+=o*c);while(t=t.next)}}var o,a,s,u,h=f(-30),p=1,m=1/0,g=.81;return t.initialize=function(t){o=t,n()},t.strength=function(e){return arguments.length?(h="function"==typeof e?e:f(+e),n(),t):h},t.distanceMin=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.distanceMax=function(e){return arguments.length?(m=e*e,t):Math.sqrt(m)},t.theta=function(e){return arguments.length?(g=e*e,t):Math.sqrt(g)},t},b=function(t,e,n){function r(t){for(var r=0,i=o.length;r<i;++r){var u=o[r],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l),f=(s[r]-h)*a[r]*t/h;u.vx+=c*f,u.vy+=l*f}}function i(){if(o){var e,n=o.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(o[e],e,o),a[e]=isNaN(s[e])?0:+u(o[e],e,o)}}var o,a,s,u=f(.1);return"function"!=typeof t&&(t=f(+t)),null==e&&(e=0),null==n&&(n=0),r.initialize=function(t){o=t,i()},r.strength=function(t){return arguments.length?(u="function"==typeof t?t:f(+t),i(),r):u},r.radius=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),i(),r):t},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(t){return arguments.length?(n=+t,r):n},r},x=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vx+=(o[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=f(.1);return"function"!=typeof t&&(t=f(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:f(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:f(+r),n(),e):t},e},w=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vy+=(o[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=f(.1);return"function"!=typeof t&&(t=f(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:f(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:f(+r),n(),e):t},e};t.forceCenter=h,t.forceCollide=p,t.forceLink=m,t.forceManyBody=_,t.forceRadial=b,t.forceSimulation=y,t.forceX=x,t.forceY=w,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-collection":11,"d3-dispatch":14,"d3-quadtree":26,"d3-timer":34}],20:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return new n(t)}function n(t){if(!(e=u.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function r(e){return l=v(e),t.format=l.format,t.formatPrefix=l.formatPrefix,l}var i=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},o=function(t){return t=i(Math.abs(t)),t?t[1]:NaN},a=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}},s=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},u=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;e.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var c,l,h=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},f=function(t,e){var n=i(t,e);if(!n)return t+"";var r=n[0],o=n[1],a=o-(c=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+i(t,Math.max(0,e+a-1))[0]},d=function(t,e){var n=i(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array((-o)).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")},p={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return d(100*t,e)},r:d,s:f,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},m=function(t){return t},g=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],v=function(t){function n(t){function n(t){var e,n,s,u=w,d=E;if("c"===x)d=M(t)+d,t="";else{t=+t;var p=t<0;if(t=M(Math.abs(t),_),b&&(t=h(t)),p&&0===+t&&(p=!1),u=(p?"("===a?a:"-":"-"===a||"("===a?"":a)+u,d=("s"===x?g[8+c/3]:"")+d+(p&&"("===a?")":""),T)for(e=-1,n=t.length;++e<n;)if(s=t.charCodeAt(e),48>s||s>57){d=(46===s?l+t.slice(e+1):t.slice(e))+d,t=t.slice(0,e);break}}y&&!m&&(t=i(t,1/0));var S=u.length+t.length+d.length,P=S<v?new Array(v-S+1).join(r):"";switch(y&&m&&(t=i(P+t,P.length?v-d.length:1/0),P=""),o){case"<":t=u+t+d+P;break;case"=":t=u+P+t+d;break;case"^":t=P.slice(0,S=P.length>>1)+u+t+d+P.slice(S);break;default:t=P+u+t+d}return f(t)}t=e(t);var r=t.fill,o=t.align,a=t.sign,s=t.symbol,m=t.zero,v=t.width,y=t.comma,_=t.precision,b=t.trim,x=t.type;"n"===x?(y=!0,x="g"):p[x]||(null==_&&(_=12),b=!0,x="g"),(m||"0"===r&&"="===o)&&(m=!0,r="0",o="=");var w="$"===s?u[0]:"#"===s&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E="$"===s?u[1]:/[%p]/.test(x)?d:"",M=p[x],T=/[defgprs%]/.test(x);return _=null==_?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),n.toString=function(){return t+""},n}function r(t,r){var i=n((t=e(t),t.type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor(o(r)/3))),s=Math.pow(10,-a),u=g[8+a/3];return function(t){return i(s*t)+u}}var i=t.grouping&&t.thousands?a(t.grouping,t.thousands):m,u=t.currency,l=t.decimal,f=t.numerals?s(t.numerals):m,d=t.percent||"%";return{format:n,formatPrefix:r}};r({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var y=function(t){return Math.max(0,-o(Math.abs(t)))},_=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(o(e)/3)))-o(Math.abs(t)))},b=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,o(e)-o(t))+1};t.formatDefaultLocale=r,t.formatLocale=v,t.formatSpecifier=e,t.precisionFixed=y,t.precisionPrefix=_,t.precisionRound=b,Object.defineProperty(t,"__esModule",{value:!0})})},{}],21:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(){return new r}function r(){this.reset()}function i(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function o(t){return t>1?0:t<-1?In:Math.acos(t)}function a(t){return t>1?Dn:t<-1?-Dn:Math.asin(t)}function s(t){return(t=Xn(t/2))*t}function u(){}function c(t,e){t&&tr.hasOwnProperty(t.type)&&tr[t.type](t,e)}function l(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function h(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)l(t[n],e,1);e.polygonEnd()}function f(t,e){t&&$n.hasOwnProperty(t.type)?$n[t.type](t,e):c(t,e)}function d(){rr.point=m}function p(){g(tn,en)}function m(t,e){rr.point=g,tn=t,en=e,t*=Bn,e*=Bn,nn=t,rn=Vn(e=e/2+jn),on=Xn(e)}function g(t,e){t*=Bn,e*=Bn,e=e/2+jn;var n=t-nn,r=n>=0?1:-1,i=r*n,o=Vn(e),a=Xn(e),s=on*a,u=rn*o+s*Vn(i),c=s*r*Xn(i);er.add(Gn(c,u)),nn=t,rn=o,on=a}function v(t){return nr.reset(),f(t,rr),2*nr}function y(t){return[Gn(t[1],t[0]),a(t[2])]}function _(t){var e=t[0],n=t[1],r=Vn(n);return[r*Vn(e),r*Xn(e),Xn(n)]}function b(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function x(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function w(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function E(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function M(t){var e=Jn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function T(t,e){pn.push(mn=[an=t,un=t]),e<sn&&(sn=e),e>cn&&(cn=e)}function S(t,e){var n=_([t*Bn,e*Bn]);if(dn){var r=x(dn,n),i=[r[1],-r[0],0],o=x(i,r);M(o),o=y(o);var a,s=t-ln,u=s>0?1:-1,c=o[0]*Un*u,l=Fn(s)>180;l^(u*ln<c&&c<u*t)?(a=o[1]*Un,a>cn&&(cn=a)):(c=(c+360)%360-180,l^(u*ln<c&&c<u*t)?(a=-o[1]*Un,a<sn&&(sn=a)):(e<sn&&(sn=e),e>cn&&(cn=e))),l?t<ln?R(an,t)>R(an,un)&&(un=t):R(t,un)>R(an,un)&&(an=t):un>=an?(t<an&&(an=t),t>un&&(un=t)):t>ln?R(an,t)>R(an,un)&&(un=t):R(t,un)>R(an,un)&&(an=t)}else pn.push(mn=[an=t,un=t]);e<sn&&(sn=e),e>cn&&(cn=e),dn=n,ln=t}function P(){or.point=S}function C(){mn[0]=an,mn[1]=un,or.point=T,dn=null}function A(t,e){if(dn){var n=t-ln;ir.add(Fn(n)>180?n+(n>0?360:-360):n)}else hn=t,fn=e;rr.point(t,e),S(t,e)}function L(){rr.lineStart()}function O(){A(hn,fn),rr.lineEnd(),Fn(ir)>kn&&(an=-(un=180)),mn[0]=an,mn[1]=un,dn=null}function R(t,e){return(e-=t)<0?e+360:e}function k(t,e){return t[0]-e[0]}function N(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function I(t){var e,n,r,i,o,a,s;if(cn=un=-(an=sn=1/0),pn=[],f(t,or),n=pn.length){for(pn.sort(k),e=1,r=pn[0],o=[r];e<n;++e)i=pn[e],N(r,i[0])||N(r,i[1])?(R(r[0],i[1])>R(r[0],r[1])&&(r[1]=i[1]),R(i[0],r[1])>R(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-(1/0),n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=R(r[1],i[0]))>a&&(a=s,an=i[0],un=r[1])}return pn=mn=null,an===1/0||sn===1/0?[[NaN,NaN],[NaN,NaN]]:[[an,sn],[un,cn]]}function D(t,e){t*=Bn,e*=Bn;var n=Vn(e);j(n*Vn(t),n*Xn(t),Xn(e))}function j(t,e,n){++gn,yn+=(t-yn)/gn,_n+=(e-_n)/gn,bn+=(n-bn)/gn}function z(){ar.point=U}function U(t,e){t*=Bn,e*=Bn;var n=Vn(e);An=n*Vn(t),Ln=n*Xn(t),On=Xn(e),ar.point=B,j(An,Ln,On)}function B(t,e){t*=Bn,e*=Bn;var n=Vn(e),r=n*Vn(t),i=n*Xn(t),o=Xn(e),a=Gn(Jn((a=Ln*o-On*i)*a+(a=On*r-An*o)*a+(a=An*i-Ln*r)*a),An*r+Ln*i+On*o);vn+=a,xn+=a*(An+(An=r)),wn+=a*(Ln+(Ln=i)),En+=a*(On+(On=o)),j(An,Ln,On)}function F(){ar.point=D}function H(){ar.point=V}function G(){W(Pn,Cn),ar.point=D}function V(t,e){Pn=t,Cn=e,t*=Bn,e*=Bn,ar.point=W;var n=Vn(e);An=n*Vn(t),Ln=n*Xn(t),On=Xn(e),j(An,Ln,On)}function W(t,e){t*=Bn,e*=Bn;var n=Vn(e),r=n*Vn(t),i=n*Xn(t),o=Xn(e),s=Ln*o-On*i,u=On*r-An*o,c=An*i-Ln*r,l=Jn(s*s+u*u+c*c),h=a(l),f=l&&-h/l;Mn+=f*s,Tn+=f*u,Sn+=f*c,vn+=h,xn+=h*(An+(An=r)),wn+=h*(Ln+(Ln=i)),En+=h*(On+(On=o)),j(An,Ln,On)}function q(t){gn=vn=yn=_n=bn=xn=wn=En=Mn=Tn=Sn=0,f(t,ar);var e=Mn,n=Tn,r=Sn,i=e*e+n*n+r*r;return i<Nn&&(e=xn,n=wn,r=En,vn<kn&&(e=yn,n=_n,r=bn),i=e*e+n*n+r*r,i<Nn)?[NaN,NaN]:[Gn(n,e)*Un,a(r/Jn(i))*Un]}function Y(t){return function(){return t}}function Z(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function X(t,e){return[t>In?t-zn:t<-In?t+zn:t,e]}function K(t,e,n){return(t%=zn)?e||n?Z(Q(t),$(e,n)):Q(t):e||n?$(e,n):X}function J(t){return function(e,n){return e+=t,[e>In?e-zn:e<-In?e+zn:e,n]}}function Q(t){var e=J(t);return e.invert=J(-t),e}function $(t,e){function n(t,e){var n=Vn(e),u=Vn(t)*n,c=Xn(t)*n,l=Xn(e),h=l*r+u*i;return[Gn(c*o-h*s,u*r-l*i),a(h*o+c*s)]}var r=Vn(t),i=Xn(t),o=Vn(e),s=Xn(e);return n.invert=function(t,e){var n=Vn(e),u=Vn(t)*n,c=Xn(t)*n,l=Xn(e),h=l*o-c*s;return[Gn(c*o+l*s,u*r+h*i),a(h*r-u*i)]},n}function tt(t){function e(e){return e=t(e[0]*Bn,e[1]*Bn),e[0]*=Un,e[1]*=Un,e}return t=K(t[0]*Bn,t[1]*Bn,t.length>2?t[2]*Bn:0),e.invert=function(e){return e=t.invert(e[0]*Bn,e[1]*Bn),e[0]*=Un,e[1]*=Un,e},e}function et(t,e,n,r,i,o){if(n){var a=Vn(e),s=Xn(e),u=r*n;null==i?(i=e+r*zn,o=e-u/2):(i=nt(a,i),o=nt(a,o),(r>0?i<o:i>o)&&(i+=r*zn));for(var c,l=i;r>0?l>o:l<o;l-=u)c=y([a,-s*Vn(l),-s*Xn(l)]),t.point(c[0],c[1])}}function nt(t,e){e=_(e),e[0]-=t,M(e);var n=o(-e[1]);return((-e[2]<0?-n:n)+zn-kn)%zn}function rt(){function t(t,e){n.push(t=r(t,e)),t[0]*=Un,t[1]*=Un}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*Bn,u=a.apply(this,arguments)*Bn;return n=[],r=K(-t[0]*Bn,-t[1]*Bn,0).invert,et(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=Y([0,0]),o=Y(90),a=Y(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:Y([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Y(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:Y(+t),e):a},e}function it(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:u,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ot(t,e){return Fn(t[0]-e[0])<kn&&Fn(t[1]-e[1])<kn}function at(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function st(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ot(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new at(r,t,null,(!0))),u.push(n.o=new at(r,null,n,(!1))),s.push(n=new at(a,t,null,(!1))),u.push(n.o=new at(a,null,n,(!0)))}}),s.length){for(u.sort(e),ut(s),ut(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}}function ut(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ct(t,e){var n=e[0],r=e[1],i=Xn(r),o=[Xn(n),-Vn(n),0],s=0,u=0;yr.reset(),1===i?r=Dn+kn:i===-1&&(r=-Dn-kn);for(var c=0,l=t.length;c<l;++c)if(f=(h=t[c]).length)for(var h,f,d=h[f-1],p=d[0],m=d[1]/2+jn,g=Xn(m),v=Vn(m),y=0;y<f;++y,p=w,g=T,v=S,d=b){var b=h[y],w=b[0],E=b[1]/2+jn,T=Xn(E),S=Vn(E),P=w-p,C=P>=0?1:-1,A=C*P,L=A>In,O=g*T;if(yr.add(Gn(O*C*Xn(A),v*S+O*Vn(A))),s+=L?P+C*zn:P,L^p>=n^w>=n){var R=x(_(d),_(b));M(R);var k=x(o,R);M(k);var N=(L^P>=0?-1:1)*a(k[2]);(r>N||r===N&&(R[0]||R[1]))&&(u+=L^P>=0?1:-1)}}return(s<-kn||s<kn&&yr<-kn)^1&u}function lt(t,n,r,i){return function(o){function a(e,n){t(e,n)&&o.point(e,n)}function s(t,e){g.point(t,e)}function u(){b.point=s,g.lineStart()}function c(){b.point=a,g.lineEnd()}function l(t,e){m.push([t,e]),y.point(t,e)}function h(){y.lineStart(),m=[]}function f(){l(m[0][0],m[0][1]),y.lineEnd();var t,e,n,r,i=y.clean(),a=v.result(),s=a.length;if(m.pop(),d.push(m),m=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),p.push(a.filter(ht))}var d,p,m,g=n(o),v=it(),y=n(v),_=!1,b={point:a,lineStart:u,lineEnd:c,polygonStart:function(){b.point=l,b.lineStart=h,b.lineEnd=f,p=[],d=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=c,p=e.merge(p);var t=ct(d,i);p.length?(_||(o.polygonStart(),_=!0),st(p,ft,t,r,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}}function ht(t){return t.length>1}function ft(t,e){return((t=t.x)[0]<0?t[1]-Dn-kn:Dn-t[1])-((e=e.x)[0]<0?e[1]-Dn-kn:Dn-e[1])}function dt(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?In:-In,u=Fn(o-n);Fn(u-In)<kn?(t.point(n,r=(r+a)/2>0?Dn:-Dn),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=In&&(Fn(n-i)<kn&&(n-=i*kn),Fn(o-s)<kn&&(o-=s*kn),r=pt(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function pt(t,e,n,r){var i,o,a=Xn(t-n);return Fn(a)>kn?Hn((Xn(e)*(o=Vn(r))*Xn(n)-Xn(r)*(i=Vn(e))*Xn(t))/(i*o*a)):(e+r)/2}function mt(t,e,n,r){var i;if(null==t)i=n*Dn,r.point(-In,i),r.point(0,i),r.point(In,i),r.point(In,0),r.point(In,-i),r.point(0,-i),r.point(-In,-i),r.point(-In,0),r.point(-In,i);else if(Fn(t[0]-e[0])>kn){var o=t[0]<e[0]?In:-In;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function gt(t){function e(e,n,r,i){et(i,t,s,r,e,n)}function n(t,e){return Vn(t)*Vn(e)>a}function r(t){var e,r,a,s,l;return{lineStart:function(){s=a=!1,l=1},point:function(h,f){var d,p=[h,f],m=n(h,f),g=u?m?0:o(h,f):m?o(h+(h<0?In:-In),f):0;if(!e&&(s=a=m)&&t.lineStart(),m!==a&&(d=i(e,p),(!d||ot(e,d)||ot(p,d))&&(p[0]+=kn,p[1]+=kn,m=n(p[0],p[1]))),m!==a)l=0,m?(t.lineStart(),d=i(p,e),t.point(d[0],d[1])):(d=i(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(c&&e&&u^m){var v;g&r||!(v=i(p,e,!0))||(l=0,u?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&ot(e,p)||t.point(p[0],p[1]),e=p,a=m,r=g},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return l|(s&&a)<<1}}}function i(t,e,n){var r=_(t),i=_(e),o=[1,0,0],s=x(r,i),u=b(s,s),c=s[0],l=u-c*c;if(!l)return!n&&t;var h=a*u/l,f=-a*c/l,d=x(o,s),p=E(o,h),m=E(s,f);w(p,m);var g=d,v=b(p,g),M=b(g,g),T=v*v-M*(b(p,p)-1);if(!(T<0)){var S=Jn(T),P=E(g,(-v-S)/M);if(w(P,p),P=y(P),!n)return P;var C,A=t[0],L=e[0],O=t[1],R=e[1];L<A&&(C=A,A=L,L=C);var k=L-A,N=Fn(k-In)<kn,I=N||k<kn;if(!N&&R<O&&(C=O,O=R,R=C),I?N?O+R>0^P[1]<(Fn(P[0]-A)<kn?O:R):O<=P[1]&&P[1]<=R:k>In^(A<=P[0]&&P[0]<=L)){var D=E(g,(-v+S)/M);return w(D,p),[P,y(D)]}}}function o(e,n){var r=u?t:In-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=Vn(t),s=6*Bn,u=a>0,c=Fn(a)>kn;return lt(n,r,e,u?[0,-t]:[-In,t-In])}function vt(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,d=c-s,p=l-u;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*d,t[1]=u+h*p),f<1&&(e[0]=s+f*d,e[1]=u+f*p),!0}}}}}function yt(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,u){var l=0,h=0;if(null==e||(l=s(e,a))!==(h=s(o,a))||c(e,o)<0^a>0){do u.point(0===l||3===l?t:r,l>1?i:n);while((l=(l+a+4)%4)!==h)}else u.point(o[0],o[1])}function s(e,i){return Fn(e[0]-t)<kn?i>0?0:3:Fn(e[0]-r)<kn?i>0?2:1:Fn(e[1]-n)<kn?i>0?1:0:i>0?3:2}function u(t,e){return c(t.x,e.x)}function c(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function c(t,e){o(t,e)&&P.point(t,e)}function l(){for(var e=0,n=0,r=v.length;n<r;++n)for(var o,a,s=v[n],u=1,c=s.length,l=s[0],h=l[0],f=l[1];u<c;++u)o=h,a=f,l=s[u],h=l[0],f=l[1],a<=i?f>i&&(h-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(h-o)*(i-a)<(f-a)*(t-o)&&--e;return e}function h(){P=C,g=[],v=[],S=!0}function f(){var t=l(),n=S&&t,r=(g=e.merge(g)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),r&&st(g,u,t,a,s),s.polygonEnd()),P=s,g=v=y=null}function d(){A.point=m,v&&v.push(y=[]),T=!0,M=!1,w=E=NaN}function p(){g&&(m(_,b),x&&M&&C.rejoin(),g.push(C.result())),A.point=c,M&&P.lineEnd()}function m(e,a){var s=o(e,a);if(v&&y.push([e,a]),T)_=e,b=a,x=s,T=!1,s&&(P.lineStart(),P.point(e,a));else if(s&&M)P.point(e,a);else{var u=[w=Math.max(xr,Math.min(br,w)),E=Math.max(xr,Math.min(br,E))],c=[e=Math.max(xr,Math.min(br,e)),a=Math.max(xr,Math.min(br,a))];vt(u,c,t,n,r,i)?(M||(P.lineStart(),P.point(u[0],u[1])),P.point(c[0],c[1]),s||P.lineEnd(),S=!1):s&&(P.lineStart(),P.point(e,a),S=!1)}w=e,E=a,M=s}var g,v,y,_,b,x,w,E,M,T,S,P=s,C=it(),A={point:c,lineStart:d,lineEnd:p,polygonStart:h,polygonEnd:f};return A}}function _t(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=yt(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}function bt(){Er.point=wt,Er.lineEnd=xt}function xt(){Er.point=Er.lineEnd=u}function wt(t,e){t*=Bn,e*=Bn,sr=t,ur=Xn(e),cr=Vn(e),Er.point=Et}function Et(t,e){t*=Bn,e*=Bn;var n=Xn(e),r=Vn(e),i=Fn(t-sr),o=Vn(i),a=Xn(i),s=r*a,u=cr*n-ur*r*o,c=ur*n+cr*r*o;wr.add(Gn(Jn(s*s+u*u),c)),sr=t,ur=n,cr=r}function Mt(t){return wr.reset(),f(t,Er),+wr}function Tt(t,e){return Mr[0]=t,Mr[1]=e,Mt(Tr)}function St(t,e){return!(!t||!Pr.hasOwnProperty(t.type))&&Pr[t.type](t,e)}function Pt(t,e){return 0===Tt(t,e)}function Ct(t,e){var n=Tt(t[0],t[1]),r=Tt(t[0],e),i=Tt(e,t[1]);return r+i<=n+kn}function At(t,e){return!!ct(t.map(Lt),Ot(e))}function Lt(t){return t=t.map(Ot),t.pop(),t}function Ot(t){return[t[0]*Bn,t[1]*Bn]}function Rt(t,e){return(t&&Sr.hasOwnProperty(t.type)?Sr[t.type]:St)(t,e)}function kt(t,n,r){var i=e.range(t,n-kn,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Nt(t,n,r){var i=e.range(t,n-kn,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function It(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(Wn(a/v)*v,o,v).map(d).concat(e.range(Wn(l/y)*y,c,y).map(p)).concat(e.range(Wn(i/m)*m,r,m).filter(function(t){return Fn(t%v)>kn}).map(h)).concat(e.range(Wn(u/g)*g,s,g).filter(function(t){return Fn(t%y)>kn}).map(f))}var r,i,o,a,s,u,c,l,h,f,d,p,m=10,g=m,v=90,y=360,_=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(p(c).slice(1),d(o).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],l=+e[0][1],c=+e[1][1],a>o&&(e=a,a=o,o=e),l>c&&(e=l,l=c,c=e),t.precision(_)):[[a,l],[o,c]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],u=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),u>s&&(e=u,u=s,s=e),t.precision(_)):[[i,u],[r,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.stepMinor=function(e){return arguments.length?(m=+e[0],g=+e[1],t):[m,g]},t.precision=function(e){return arguments.length?(_=+e,h=kt(u,s,90),f=Nt(i,r,_),d=kt(l,c,90),p=Nt(a,o,_),t):_},t.extentMajor([[-180,-90+kn],[180,90-kn]]).extentMinor([[-180,-80-kn],[180,80+kn]])}function Dt(){return It()()}function jt(t,e){var n=t[0]*Bn,r=t[1]*Bn,i=e[0]*Bn,o=e[1]*Bn,u=Vn(r),c=Xn(r),l=Vn(o),h=Xn(o),f=u*Vn(n),d=u*Xn(n),p=l*Vn(i),m=l*Xn(i),g=2*a(Jn(s(o-r)+u*l*s(i-n))),v=Xn(g),y=g?function(t){var e=Xn(t*=g)/v,n=Xn(g-t)/v,r=n*f+e*p,i=n*d+e*m,o=n*c+e*h;return[Gn(i,r)*Un,Gn(o,Jn(r*r+i*i))*Un]}:function(){return[n*Un,r*Un]};return y.distance=g,y}function zt(t){return t}function Ut(){Lr.point=Bt}function Bt(t,e){Lr.point=Ft,lr=fr=t,hr=dr=e}function Ft(t,e){Ar.add(dr*t-fr*e),fr=t,dr=e}function Ht(){Ft(lr,hr)}function Gt(t,e){t<Or&&(Or=t),t>kr&&(kr=t),e<Rr&&(Rr=e),e>Nr&&(Nr=e)}function Vt(t,e){Dr+=t,jr+=e,++zr}function Wt(){Wr.point=qt}function qt(t,e){Wr.point=Yt,Vt(gr=t,vr=e)}function Yt(t,e){var n=t-gr,r=e-vr,i=Jn(n*n+r*r);Ur+=i*(gr+t)/2,Br+=i*(vr+e)/2,Fr+=i,Vt(gr=t,vr=e)}function Zt(){Wr.point=Vt}function Xt(){Wr.point=Jt}function Kt(){Qt(pr,mr)}function Jt(t,e){Wr.point=Qt,Vt(pr=gr=t,mr=vr=e)}function Qt(t,e){var n=t-gr,r=e-vr,i=Jn(n*n+r*r);Ur+=i*(gr+t)/2,Br+=i*(vr+e)/2,Fr+=i,i=vr*t-gr*e,Hr+=i*(gr+t),Gr+=i*(vr+e),Vr+=3*i,Vt(gr=t,vr=e)}function $t(t){this._context=t}function te(t,e){Qr.point=ee,Yr=Xr=t,Zr=Kr=e}function ee(t,e){Xr-=t,Kr-=e,Jr.add(Jn(Xr*Xr+Kr*Kr)),Xr=t,Kr=e}function ne(){this._string=[]}function re(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ie(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),f(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return f(t,r(Lr)),Lr.result()},n.measure=function(t){return f(t,r(Qr)),Qr.result()},n.bounds=function(t){return f(t,r(Ir)),Ir.result()},n.centroid=function(t){return f(t,r(Wr)),Wr.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,zt):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new ne):new $t(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)}function oe(t){return{stream:ae(t)}}function ae(t){return function(e){var n=new se;for(var r in t)n[r]=t[r];return n.stream=e,n}}function se(){}function ue(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),f(n,t.stream(Ir)),e(Ir.result()),null!=r&&t.clipExtent(r),t}function ce(t,e,n){return ue(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])},n)}function le(t,e,n){return ce(t,[[0,0],e],n)}function he(t,e,n){return ue(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function fe(t,e,n){return ue(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}function de(t,e){return+e?me(t,e):pe(t)}function pe(t){return ae({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function me(t,e){function n(r,i,o,s,u,c,l,h,f,d,p,m,g,v){var y=l-r,_=h-i,b=y*y+_*_;if(b>4*e&&g--){var x=s+d,w=u+p,E=c+m,M=Jn(x*x+w*w+E*E),T=a(E/=M),S=Fn(Fn(E)-1)<kn||Fn(o-f)<kn?(o+f)/2:Gn(w,x),P=t(S,T),C=P[0],A=P[1],L=C-r,O=A-i,R=_*L-y*O;(R*R/b>e||Fn((y*L+_*O)/b-.5)>.3||s*d+u*p+c*m<ti)&&(n(r,i,o,s,u,c,C,A,S,x/=M,w/=M,E,g,v),v.point(C,A),n(C,A,S,x,w,E,l,h,f,d,p,m,g,v))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,E.point=o,e.lineStart()}function o(r,i){var o=_([r,i]),a=t(r,i);n(v,y,g,b,x,w,v=a[0],y=a[1],g=r,b=o[0],x=o[1],w=o[2],$r,e),e.point(v,y)}function a(){E.point=r,e.lineEnd()}function s(){i(),E.point=u,E.lineEnd=c}function u(t,e){o(l=t,e),h=v,f=y,d=b,p=x,m=w,E.point=o}function c(){n(v,y,g,b,x,w,h,f,l,d,p,m,$r,e),E.lineEnd=a,a()}var l,h,f,d,p,m,g,v,y,b,x,w,E={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),E.lineStart=s},polygonEnd:function(){e.polygonEnd(),E.lineStart=i}};return E}}function ge(t){return ae({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function ve(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function ye(t,e,n,r){function i(t,r){return[s*t-u*r+e,n-u*t-s*r]}var o=Vn(r),a=Xn(r),s=o*t,u=a*t,c=o/t,l=a/t,h=(a*n-o*e)/t,f=(a*e+o*n)/t;return i.invert=function(t,e){return[c*t-l*e+h,f-l*t-c*e]},i}function _e(t){return be(function(){return t})()}function be(t){function e(t){return f(t[0]*Bn,t[1]*Bn)}function n(t){return t=f.invert(t[0],t[1]),t&&[t[0]*Un,t[1]*Un]}function r(){var t=ye(m,0,0,E).apply(null,o(y,_)),e=(E?ye:ve)(m,g-t[0],v-t[1],E);return a=K(b,x,w),h=Z(o,e),f=Z(a,h),l=de(h,C),i()}function i(){return d=p=null,e}var o,a,s,u,c,l,h,f,d,p,m=150,g=480,v=250,y=0,_=0,b=0,x=0,w=0,E=0,M=null,T=_r,S=null,P=zt,C=.5;return e.stream=function(t){return d&&p===t?d:d=ei(ge(a)(T(l(P(p=t)))))},e.preclip=function(t){return arguments.length?(T=t,M=void 0,i()):T},e.postclip=function(t){return arguments.length?(P=t,S=s=u=c=null,i()):P},e.clipAngle=function(t){return arguments.length?(T=+t?gt(M=t*Bn):(M=null,_r),i()):M*Un},e.clipExtent=function(t){return arguments.length?(P=null==t?(S=s=u=c=null,zt):yt(S=+t[0][0],s=+t[0][1],u=+t[1][0],c=+t[1][1]),
i()):null==S?null:[[S,s],[u,c]]},e.scale=function(t){return arguments.length?(m=+t,r()):m},e.translate=function(t){return arguments.length?(g=+t[0],v=+t[1],r()):[g,v]},e.center=function(t){return arguments.length?(y=t[0]%360*Bn,_=t[1]%360*Bn,r()):[y*Un,_*Un]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Bn,x=t[1]%360*Bn,w=t.length>2?t[2]%360*Bn:0,r()):[b*Un,x*Un,w*Un]},e.angle=function(t){return arguments.length?(E=t%360*Bn,r()):E*Un},e.precision=function(t){return arguments.length?(l=de(h,C=t*t),i()):Jn(C)},e.fitExtent=function(t,n){return ce(e,t,n)},e.fitSize=function(t,n){return le(e,t,n)},e.fitWidth=function(t,n){return he(e,t,n)},e.fitHeight=function(t,n){return fe(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function xe(t){var e=0,n=In/3,r=be(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Bn,n=t[1]*Bn):[e*Un,n*Un]},i}function we(t){function e(t,e){return[t*n,Xn(e)/n]}var n=Vn(t);return e.invert=function(t,e){return[t/n,a(e*n)]},e}function Ee(t,e){function n(t,e){var n=Jn(o-2*i*Xn(e))/i;return[n*Xn(t*=i),s-n*Vn(t)]}var r=Xn(t),i=(r+Xn(e))/2;if(Fn(i)<kn)return we(t);var o=1+r*(2*i-r),s=Jn(o)/i;return n.invert=function(t,e){var n=s-e;return[Gn(t,Fn(n))/i*Kn(n),a((o-(t*t+n*n)*i*i)/(2*i))]},n}function Me(){return xe(Ee).scale(155.424).center([0,33.6442])}function Te(){return Me().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Se(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Pe(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=Te(),c=Me().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Me().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=Se([u.stream(r=t),c.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),c.scale(.35*e),l.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(h),o=c.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+kn,s+.12*n+kn],[r-.214*n-kn,s+.234*n-kn]]).stream(h),a=l.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+kn,s+.166*n+kn],[r-.115*n-kn,s+.234*n-kn]]).stream(h),e()},t.fitExtent=function(e,n){return ce(t,e,n)},t.fitSize=function(e,n){return le(t,e,n)},t.fitWidth=function(e,n){return he(t,e,n)},t.fitHeight=function(e,n){return fe(t,e,n)},t.scale(1070)}function Ce(t){return function(e,n){var r=Vn(e),i=Vn(n),o=t(r*i);return[o*i*Xn(e),o*Xn(n)]}}function Ae(t){return function(e,n){var r=Jn(e*e+n*n),i=t(r),o=Xn(i),s=Vn(i);return[Gn(e*o,r*s),a(r&&n*o/r)]}}function Le(){return _e(ni).scale(124.75).clipAngle(179.999)}function Oe(){return _e(ri).scale(79.4188).clipAngle(179.999)}function Re(t,e){return[t,Yn(Qn((Dn+e)/2))]}function ke(){return Ne(Re).scale(961/zn)}function Ne(t){function e(){var e=In*s(),a=o(tt(o.rotate()).invert([0,0]));return c(null==l?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===Re?[[Math.max(a[0]-e,l),n],[Math.min(a[0]+e,r),i]]:[[l,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=_e(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}function Ie(t){return Qn((Dn+t)/2)}function De(t,e){function n(t,e){o>0?e<-Dn+kn&&(e=-Dn+kn):e>Dn-kn&&(e=Dn-kn);var n=o/Zn(Ie(e),i);return[n*Xn(i*t),o-n*Vn(i*t)]}var r=Vn(t),i=t===e?Xn(t):Yn(r/Vn(e))/Yn(Ie(e)/Ie(t)),o=r*Zn(Ie(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Kn(i)*Jn(t*t+n*n);return[Gn(t,Fn(n))/i*Kn(n),2*Hn(Zn(o/r,1/i))-Dn]},n):Re}function je(){return xe(De).scale(109.5).parallels([30,30])}function ze(t,e){return[t,e]}function Ue(){return _e(ze).scale(152.63)}function Be(t,e){function n(t,e){var n=o-e,r=i*t;return[n*Xn(r),o-n*Vn(r)]}var r=Vn(t),i=t===e?Xn(t):(r-Vn(e))/(e-t),o=r/i+t;return Fn(i)<kn?ze:(n.invert=function(t,e){var n=o-e;return[Gn(t,Fn(n))/i*Kn(n),o-Kn(i)*Jn(t*t+n*n)]},n)}function Fe(){return xe(Be).scale(131.154).center([0,13.9389])}function He(t,e){var n=Vn(e),r=Vn(t)*n;return[n*Xn(t)/r,Xn(e)/r]}function Ge(){return _e(He).scale(144.049).clipAngle(60)}function Ve(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?zt:ae({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function We(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,c=0,l=1,h=1,f=zt,d=null,p=zt;return a={stream:function(t){return i&&o===t?i:i=f(p(o=t))},postclip:function(i){return arguments.length?(p=i,d=e=n=r=null,t()):p},clipExtent:function(i){return arguments.length?(p=null==i?(d=e=n=r=null,zt):yt(d=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==d?null:[[d,e],[n,r]]},scale:function(e){return arguments.length?(f=Ve((s=+e)*l,s*h,u,c),t()):s},translate:function(e){return arguments.length?(f=Ve(s*l,s*h,u=+e[0],c=+e[1]),t()):[u,c]},reflectX:function(e){return arguments.length?(f=Ve(s*(l=e?-1:1),s*h,u,c),t()):l<0},reflectY:function(e){return arguments.length?(f=Ve(s*l,s*(h=e?-1:1),u,c),t()):h<0},fitExtent:function(t,e){return ce(a,t,e)},fitSize:function(t,e){return le(a,t,e)},fitWidth:function(t,e){return he(a,t,e)},fitHeight:function(t,e){return fe(a,t,e)}}}function qe(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}function Ye(){return _e(qe).scale(175.295)}function Ze(t,e){return[Vn(e)*Xn(t),Xn(e)]}function Xe(){return _e(Ze).scale(249.5).clipAngle(90+kn)}function Ke(t,e){var n=Vn(e),r=1+Vn(t)*n;return[n*Xn(t)/r,Xn(e)/r]}function Je(){return _e(Ke).scale(250).clipAngle(142)}function Qe(t,e){return[Yn(Qn((Dn+e)/2)),-t]}function $e(){var t=Ne(Qe),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){i(Rn,t,this.t),i(this,Rn.s,this.s),this.s?this.t+=Rn.t:this.s=Rn.t},valueOf:function(){return this.s}};var tn,en,nn,rn,on,an,sn,un,cn,ln,hn,fn,dn,pn,mn,gn,vn,yn,_n,bn,xn,wn,En,Mn,Tn,Sn,Pn,Cn,An,Ln,On,Rn=new r,kn=1e-6,Nn=1e-12,In=Math.PI,Dn=In/2,jn=In/4,zn=2*In,Un=180/In,Bn=In/180,Fn=Math.abs,Hn=Math.atan,Gn=Math.atan2,Vn=Math.cos,Wn=Math.ceil,qn=Math.exp,Yn=Math.log,Zn=Math.pow,Xn=Math.sin,Kn=Math.sign||function(t){return t>0?1:t<0?-1:0},Jn=Math.sqrt,Qn=Math.tan,$n={Feature:function(t,e){c(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)c(n[r].geometry,e)}},tr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){l(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l(n[r],e,0)},Polygon:function(t,e){h(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)h(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)c(n[r],e)}},er=n(),nr=n(),rr={point:u,lineStart:u,lineEnd:u,polygonStart:function(){er.reset(),rr.lineStart=d,rr.lineEnd=p},polygonEnd:function(){var t=+er;nr.add(t<0?zn+t:t),this.lineStart=this.lineEnd=this.point=u},sphere:function(){nr.add(zn)}},ir=n(),or={point:T,lineStart:P,lineEnd:C,polygonStart:function(){or.point=A,or.lineStart=L,or.lineEnd=O,ir.reset(),rr.polygonStart()},polygonEnd:function(){rr.polygonEnd(),or.point=T,or.lineStart=P,or.lineEnd=C,er<0?(an=-(un=180),sn=-(cn=90)):ir>kn?cn=90:ir<-kn&&(sn=-90),mn[0]=an,mn[1]=un}},ar={sphere:u,point:D,lineStart:z,lineEnd:F,polygonStart:function(){ar.lineStart=H,ar.lineEnd=G},polygonEnd:function(){ar.lineStart=z,ar.lineEnd=F}};X.invert=X;var sr,ur,cr,lr,hr,fr,dr,pr,mr,gr,vr,yr=n(),_r=lt(function(){return!0},dt,mt,[-In,-Dn]),br=1e9,xr=-br,wr=n(),Er={sphere:u,point:u,lineStart:bt,lineEnd:u,polygonStart:u,polygonEnd:u},Mr=[null,null],Tr={type:"LineString",coordinates:Mr},Sr={Feature:function(t,e){return St(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(St(n[r].geometry,e))return!0;return!1}},Pr={Sphere:function(){return!0},Point:function(t,e){return Pt(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Pt(n[r],e))return!0;return!1},LineString:function(t,e){return Ct(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ct(n[r],e))return!0;return!1},Polygon:function(t,e){return At(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(At(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(St(n[r],e))return!0;return!1}},Cr=n(),Ar=n(),Lr={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Lr.lineStart=Ut,Lr.lineEnd=Ht},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=u,Cr.add(Fn(Ar)),Ar.reset()},result:function(){var t=Cr/2;return Cr.reset(),t}},Or=1/0,Rr=Or,kr=-Or,Nr=kr,Ir={point:Gt,lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u,result:function(){var t=[[Or,Rr],[kr,Nr]];return kr=Nr=-(Rr=Or=1/0),t}},Dr=0,jr=0,zr=0,Ur=0,Br=0,Fr=0,Hr=0,Gr=0,Vr=0,Wr={point:Vt,lineStart:Wt,lineEnd:Zt,polygonStart:function(){Wr.lineStart=Xt,Wr.lineEnd=Kt},polygonEnd:function(){Wr.point=Vt,Wr.lineStart=Wt,Wr.lineEnd=Zt},result:function(){var t=Vr?[Hr/Vr,Gr/Vr]:Fr?[Ur/Fr,Br/Fr]:zr?[Dr/zr,jr/zr]:[NaN,NaN];return Dr=jr=zr=Ur=Br=Fr=Hr=Gr=Vr=0,t}};$t.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,zn)}},result:u};var qr,Yr,Zr,Xr,Kr,Jr=n(),Qr={point:u,lineStart:function(){Qr.point=te},lineEnd:function(){qr&&ee(Yr,Zr),Qr.point=u},polygonStart:function(){qr=!0},polygonEnd:function(){qr=null},result:function(){var t=+Jr;return Jr.reset(),t}};ne.prototype={_radius:4.5,_circle:re(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=re(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},se.prototype={constructor:se,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $r=16,ti=Vn(30*Bn),ei=ae({point:function(t,e){this.stream.point(t*Bn,e*Bn)}}),ni=Ce(function(t){return Jn(2/(1+t))});ni.invert=Ae(function(t){return 2*a(t/2)});var ri=Ce(function(t){return(t=o(t))&&t/Xn(t)});ri.invert=Ae(function(t){return t}),Re.invert=function(t,e){return[t,2*Hn(qn(e))-Dn]},ze.invert=ze,He.invert=Ae(Hn),qe.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-e)/(1.007226+o*(.045255+a*(-.311325+.259866*o-.005916*11*a)))}while(Fn(n)>kn&&--i>0);return[t/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]},Ze.invert=Ae(a),Ke.invert=Ae(function(t){return 2*Hn(t)}),Qe.invert=function(t,e){return[-e,2*Hn(qn(t))-Dn]},t.geoArea=v,t.geoBounds=I,t.geoCentroid=q,t.geoCircle=rt,t.geoClipAntimeridian=_r,t.geoClipCircle=gt,t.geoClipExtent=_t,t.geoClipRectangle=yt,t.geoContains=Rt,t.geoDistance=Tt,t.geoGraticule=It,t.geoGraticule10=Dt,t.geoInterpolate=jt,t.geoLength=Mt,t.geoPath=ie,t.geoAlbers=Te,t.geoAlbersUsa=Pe,t.geoAzimuthalEqualArea=Le,t.geoAzimuthalEqualAreaRaw=ni,t.geoAzimuthalEquidistant=Oe,t.geoAzimuthalEquidistantRaw=ri,t.geoConicConformal=je,t.geoConicConformalRaw=De,t.geoConicEqualArea=Me,t.geoConicEqualAreaRaw=Ee,t.geoConicEquidistant=Fe,t.geoConicEquidistantRaw=Be,t.geoEquirectangular=Ue,t.geoEquirectangularRaw=ze,t.geoGnomonic=Ge,t.geoGnomonicRaw=He,t.geoIdentity=We,t.geoProjection=_e,t.geoProjectionMutator=be,t.geoMercator=ke,t.geoMercatorRaw=Re,t.geoNaturalEarth1=Ye,t.geoNaturalEarth1Raw=qe,t.geoOrthographic=Xe,t.geoOrthographicRaw=Ze,t.geoStereographic=Je,t.geoStereographicRaw=Ke,t.geoTransverseMercator=$e,t.geoTransverseMercatorRaw=Qe,t.geoRotation=tt,t.geoStream=f,t.geoTransform=oe,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7}],22:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t.parent===e.parent?1:2}function n(t){return t.reduce(r,0)/t.length}function r(t,e){return t+e.x}function i(t){return 1+t.reduce(o,0)}function o(t,e){return Math.max(t,e.y)}function a(t){for(var e;e=t.children;)t=e[0];return t}function s(t){for(var e;e=t.children;)t=e[e.length-1];return t}function u(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function c(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function l(t,e){var n,r,i,o,a,s=new m(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=f);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new m(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(p)}function h(){return l(this).eachBefore(d)}function f(t){return t.children}function d(t){t.data=t.data.data}function p(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function m(t){this.data=t,this.depth=this.height=0,this.parent=null}function g(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}function v(t,e){var n,r;if(b(e,t))return[e];for(n=0;n<t.length;++n)if(y(e,t[n])&&b(E(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(y(E(t[n],t[r]),e)&&y(E(t[n],e),t[r])&&y(E(t[r],e),t[n])&&b(M(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function y(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function _(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function b(t,e){for(var n=0;n<e.length;++n)if(!_(t,e[n]))return!1;return!0}function x(t){switch(t.length){case 1:return w(t[0]);case 2:return E(t[0],t[1]);case 3:return M(t[0],t[1],t[2])}}function w(t){return{x:t.x,y:t.y,r:t.r}}function E(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function M(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,d=r-c,p=i-s,m=i-l,g=u-o,v=h-o,y=r*r+i*i-o*o,_=y-a*a-s*s+u*u,b=y-c*c-l*l+h*h,x=d*p-f*m,w=(p*b-m*_)/(2*x)-r,E=(m*g-p*v)/x,M=(d*_-f*b)/(2*x)-i,T=(f*v-d*g)/x,S=E*E+T*T-1,P=2*(o+w*E+M*T),C=w*w+M*M-o*o,A=-(S?(P+Math.sqrt(P*P-4*S*C))/(2*S):C/P);return{x:r+w+E*A,y:i+M+T*A,r:A}}function T(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,a*=a,i>a?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function S(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function P(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function C(t){this._=t,this.next=null,this.previous=null}function A(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,h;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;T(n,e,r=t[2]),e=new C(e),n=new C(n),r=new C(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){T(e._,n._,r=t[s]),r=new C(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do if(l<=h){if(S(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(S(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=P(e);(r=r.next)!==n;)(a=P(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=st(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function L(t){return null==t?null:O(t)}function O(t){if("function"!=typeof t)throw new Error;return t}function R(){return 0}function k(t){return Math.sqrt(t.value)}function N(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function I(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=A(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function D(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function j(t){return t.id}function z(t){return t.parentId}function U(t,e){return t.parent===e.parent?1:2}function B(t){var e=t.children;return e?e[0]:t.t}function F(t){var e=t.children;return e?e[e.length-1]:t.t}function H(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function G(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function V(t,e,n){return t.a.parent===e.parent?t.a:n}function W(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function q(t){for(var e,n,r,i,o,a=new W(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new W(r[i],i)),n.parent=e;return(a.parent=new W(null,0)).children=[a],a}function Y(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,d,p,m,g,v=[],y=e.children,_=0,b=0,x=y.length,w=e.value;_<x;){u=i-n,c=o-r;do l=y[b++].value;while(!l&&b<x);for(h=f=l,m=Math.max(c/u,u/c)/(w*t),g=l*l*m,p=Math.max(f/g,g/h);b<x;++b){if(l+=s=y[b].value,s<h&&(h=s),s>f&&(f=s),g=l*l*m,d=Math.max(f/g,g/h),d>p){l-=s;break}p=d}v.push(a={value:l,dice:u<c,children:y.slice(_,b)}),a.dice?ft(a,n,r,i,w?r+=c*l/w:o):_t(a,n,r,w?n+=u*l/w:i,o),w-=l,_=b}return v}var Z=function(){function t(t){var e,l=0;t.eachAfter(function(t){var o=t.children;o?(t.x=n(o),t.y=i(o)):(t.x=e?l+=r(t,e):0,t.y=0,e=t)});var h=a(t),f=s(t),d=h.x-r(h,f)/2,p=f.x+r(f,h)/2;return t.eachAfter(c?function(e){e.x=(e.x-t.x)*o,e.y=(t.y-e.y)*u}:function(e){e.x=(e.x-d)/(p-d)*o,e.y=(1-(t.y?e.y/t.y:1))*u})}var r=e,o=1,u=1,c=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(c=!1,o=+e[0],u=+e[1],t):c?null:[o,u]},t.nodeSize=function(e){return arguments.length?(c=!0,o=+e[0],u=+e[1],t):c?[o,u]:null},t},X=function(){return this.eachAfter(u)},K=function(t){var e,n,r,i,o=this,a=[o];do for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);while(a.length);return this},J=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},Q=function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},$=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},tt=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},et=function(t){for(var e=this,n=c(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},nt=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},rt=function(){var t=[];return this.each(function(e){t.push(e)}),t},it=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},ot=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};m.prototype=l.prototype={constructor:m,count:X,each:K,eachAfter:Q,eachBefore:J,sum:$,sort:tt,path:et,ancestors:nt,descendants:rt,leaves:it,links:ot,copy:h};var at=Array.prototype.slice,st=function(t){for(var e,n,r=0,i=(t=g(at.call(t))).length,o=[];r<i;)e=t[r],n&&_(n,e)?++r:(n=x(o=v(o,e)),r=0);return n},ut=function(t){return A(t),t},ct=function(t){return function(){return t}},lt=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(N(e)).eachAfter(I(i,.5)).eachBefore(D(1)):t.eachBefore(N(k)).eachAfter(I(R,1)).eachAfter(I(i,t.r/Math.min(n,r))).eachBefore(D(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=R;return t.radius=function(n){return arguments.length?(e=L(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:ct(+e),t):i},t},ht=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},ft=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},dt=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(ht),t}function e(t,e){return function(n){n.children&&ft(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},pt="$",mt={depth:-1},gt={},vt=function(){function t(t){var r,i,o,a,s,u,c,l=t.length,h=new Array(l),f={};for(i=0;i<l;++i)r=t[i],s=h[i]=new m(r),null!=(u=e(r,i,t))&&(u+="")&&(c=pt+(s.id=u),f[c]=c in f?gt:s);for(i=0;i<l;++i)if(s=h[i],u=n(t[i],i,t),null!=u&&(u+="")){if(a=f[pt+u],!a)throw new Error("missing: "+u);if(a===gt)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=mt,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(p),o.parent=null,l>0)throw new Error("cycle");return o}var e=j,n=z;return t.id=function(n){return arguments.length?(e=O(n),t):e},t.parentId=function(e){return arguments.length?(n=O(e),t):n},t};W.prototype=Object.create(m.prototype);var yt=function(){function t(t){var r=q(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var c=t,l=t,h=t;t.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)});var f=c===l?1:o(c,l)/2,d=f-c.x,p=a/(l.x+f+d),m=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){G(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],c=i.m,l=a.m,h=s.m,f=u.m;s=F(s),i=B(i),s&&i;)u=B(u),a=F(a),a.a=t,r=s.z+h-i.z-c+o(s._,i._),r>0&&(H(V(s,t,n),t,r),c+=r,l+=r),h+=s.m,c+=i.m,f+=u.m,l+=a.m;s&&!F(a)&&(a.t=s,a.m+=h-l),i&&!B(u)&&(u.t=i,u.m+=c-f,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=U,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t},_t=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},bt=(1+Math.sqrt(5))/2,xt=function t(e){function n(t,n,r,i,o){Y(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(bt),wt=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(ht),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,f=t.y1-e;o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=f,t.children&&(e=a[t.depth+1]=s(t)/2,r+=h(t)-e,i+=u(t)-e,o-=c(t)-e,f-=l(t)-e,o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),n(t,r,i,o,f))}var n=xt,r=!1,i=1,o=1,a=[0],s=R,u=R,c=R,l=R,h=R;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=O(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:ct(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:ct(+e),t):u},t.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:ct(+e),t):c},t.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:ct(+e),t):l},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:ct(+e),t):h},t},Et=function(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var c=u[t];return c.x0=r,c.y0=i,c.x1=a,c.y1=s,void 0}for(var h=l[t],f=n/2+h,d=t+1,p=e-1;d<p;){var m=d+p>>>1;l[m]<f?d=m+1:p=m}f-l[d-1]<l[d]-f&&t+1<d&&--d;var g=l[d]-h,v=n-g;if(a-r>s-i){var y=(r*v+a*g)/n;o(t,d,g,r,i,y,s),o(d,e,v,y,i,a,s)}else{var _=(i*v+s*g)/n;o(t,d,g,r,i,a,_),o(d,e,v,r,_,a,s)}}var a,s,u=t.children,c=u.length,l=new Array(c+1);for(l[0]=s=a=0;a<c;++a)l[a+1]=s+=u[a].value;o(0,c,t.value,e,n,r,i)},Mt=function(t,e,n,r,i){(1&t.depth?_t:ft)(t,e,n,r,i)},Tt=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,d=t.value;++h<f;){for(s=a[h],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?ft(s,n,r,i,r+=(o-r)*s.value/d):_t(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Y(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(bt);t.cluster=Z,t.hierarchy=l,t.pack=lt,t.packSiblings=ut,t.packEnclose=st,t.partition=dt,t.stratify=vt,t.tree=yt,t.treemap=wt,t.treemapBinary=Et,t.treemapDice=ft,t.treemapSlice=_t,t.treemapSliceDice=Mt,t.treemapSquarify=xt,t.treemapResquarify=Tt,Object.defineProperty(t,"__esModule",{value:!0})})},{}],23:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):C(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):C(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):C(isNaN(t)?e:t)}function u(t){return function(n){var r,i,o=n.length,a=new Array(o),s=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,s[r]=i.g||0,u[r]=i.b||0;return a=t(a),s=t(s),u=t(u),i.opacity=1,function(t){return i.r=a(t),i.g=s(t),i.b=u(t),i+""}}}function c(t){return function(){return t}}function l(t){return function(e){return t(e)+""}}function h(t){return"none"===t?H:(w||(w=document.createElement("DIV"),E=document.documentElement,M=document.defaultView),w.style.transform=t,t=M.getComputedStyle(E.appendChild(w),null).getPropertyValue("transform"),E.removeChild(w),t=t.slice(7,-1).split(","),G(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function f(t){return null==t?H:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",t),(t=T.transform.baseVal.consolidate())?(t=t.matrix,G(t.a,t.b,t.c,t.d,t.e,t.f)):H)}function d(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:N(t,i)},{i:u-2,x:N(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:N(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:N(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:N(t,n)},{i:s-2,x:N(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function p(t){return((t=Math.exp(t))+1/t)/2}function m(t){return((t=Math.exp(t))-1/t)/2}function g(t){return((t=Math.exp(2*t))-1)/(t+1)}function v(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=s(n.s,r.s),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function y(t,n){var r=s((t=e.lab(t)).l,(n=e.lab(n)).l),i=s(t.a,n.a),o=s(t.b,n.b),a=s(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function _(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=s(n.c,r.c),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function b(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=s(n.s,i.s),u=s(n.l,i.l),c=s(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=u(Math.pow(t,r)),n.opacity=c(t),n+""}}return r=+r,i.gamma=n,i}(1)}function x(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var w,E,M,T,S=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,u=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,s,o,a,u)}},P=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return n((r-i/e)*e,o,a,s,u)}},C=function(t){return function(){return t}},A=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),a=i(t.b,n.b),u=s(t.opacity,n.opacity);
return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var i=a(n);return r.gamma=t,r}(1),L=u(S),O=u(P),R=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=U(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},k=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},N=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},I=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=U(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},D=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,j=new RegExp(D.source,"g"),z=function(t,e){var n,r,i,o=D.lastIndex=j.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=D.exec(t))&&(r=j.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:N(n,r)})),o=j.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?l(u[0].x):c(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},U=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?C(n):("number"===i?N:"string"===i?(r=e.color(n))?(n=r,A):z:n instanceof e.color?A:n instanceof Date?k:Array.isArray(n)?R:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?I:N)(t,n)},B=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},F=180/Math.PI,H={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},G=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*F,skewX:Math.atan(u)*F,scaleX:a,scaleY:s}},V=d(h,"px, ","px)","deg)"),W=d(f,", ",")",")"),q=Math.SQRT2,Y=2,Z=4,X=1e-12,K=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<X)r=Math.log(c/a)/q,n=function(t){return[i+t*l,o+t*h,a*Math.exp(q*t*r)]};else{var d=Math.sqrt(f),v=(c*c-a*a+Z*f)/(2*a*Y*d),y=(c*c-a*a-Z*f)/(2*c*Y*d),_=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);r=(b-_)/q,n=function(t){var e=t*r,n=p(_),s=a/(Y*d)*(n*g(q*e+_)-m(_));return[i+s*l,o+s*h,a*n/p(q*e+_)]}}return n.duration=1e3*r,n},J=v(o),Q=v(s),$=_(o),tt=_(s),et=b(o),nt=b(s),rt=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};t.interpolate=U,t.interpolateArray=R,t.interpolateBasis=S,t.interpolateBasisClosed=P,t.interpolateDate=k,t.interpolateNumber=N,t.interpolateObject=I,t.interpolateRound=B,t.interpolateString=z,t.interpolateTransformCss=V,t.interpolateTransformSvg=W,t.interpolateZoom=K,t.interpolateRgb=A,t.interpolateRgbBasis=L,t.interpolateRgbBasisClosed=O,t.interpolateHsl=J,t.interpolateHslLong=Q,t.interpolateLab=y,t.interpolateHcl=$,t.interpolateHclLong=tt,t.interpolateCubehelix=et,t.interpolateCubehelixLong=nt,t.piecewise=x,t.quantize=rt,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":12}],24:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}var r=Math.PI,i=2*r,o=1e-6,a=i-o;e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var s=this._x1,u=this._y1,c=n-t,l=i-e,h=s-t,f=u-e,d=h*h+f*f;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>o)if(Math.abs(f*c-l*h)>o&&a){var p=n-s,m=i-u,g=c*c+l*l,v=p*p+m*m,y=Math.sqrt(g),_=Math.sqrt(d),b=a*Math.tan((r-Math.acos((g+d-v)/(2*y*_)))/2),x=b/_,w=b/y;Math.abs(x-1)>o&&(this._+="L"+(t+x*h)+","+(e+x*f)),this._+="A"+a+","+a+",0,0,"+ +(f*p>h*m)+","+(this._x1=t+w*c)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,s,u,c){t=+t,e=+e,n=+n;var l=n*Math.cos(s),h=n*Math.sin(s),f=t+l,d=e+h,p=1^c,m=c?s-u:u-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+d:(Math.abs(this._x1-f)>o||Math.abs(this._y1-d)>o)&&(this._+="L"+f+","+d),n&&(m<0&&(m=m%i+i),m>a?this._+="A"+n+","+n+",0,1,"+p+","+(t-l)+","+(e-h)+"A"+n+","+n+",0,1,"+p+","+(this._x1=f)+","+(this._y1=d):m>o&&(this._+="A"+n+","+n+",0,"+ +(m>=r)+","+p+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},{}],25:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t[0]-e[0]||t[1]-e[1]}function n(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&o(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var r=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},i=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return u*=3,[o/u,a/u]},o=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},a=function(t){if((i=t.length)<3)return null;var r,i,o=new Array(i),a=new Array(i);for(r=0;r<i;++r)o[r]=[+t[r][0],+t[r][1],r];for(o.sort(e),r=0;r<i;++r)a[r]=[o[r][0],-o[r][1]];var s=n(o),u=n(a),c=u[0]===s[0],l=u[u.length-1]===s[s.length-1],h=[];for(r=s.length-1;r>=0;--r)h.push(t[o[s[r]][2]]);for(r=+c;r<u.length-l;++r)h.push(t[o[u[r]][2]]);return h},s=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,h=0;h<i;++h)o=t[h],n=o[0],r=o[1],r>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l},u=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,o=t[r],a=o[0],s=o[1],e-=a,n-=s,u+=Math.sqrt(e*e+n*n);return u};t.polygonArea=r,t.polygonCentroid=i,t.polygonHull=a,t.polygonContains=s,t.polygonLength=u,Object.defineProperty(t,"__esModule",{value:!0})})},{}],26:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(l=n>=(a=(g+y)/2))?g=a:y=a,i=d,!(d=d[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(l=n>=(a=(g+y)/2))?g=a:y=a;while((h=l<<1|c)===(f=(u>=a)<<1|s>=o));return i[f]=d,i[h]=p,t}function n(t){var n,r,i,o,a=t.length,s=new Array(a),u=new Array(a),c=1/0,l=1/0,h=-(1/0),f=-(1/0);for(r=0;r<a;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(o=+this._y.call(null,n))||(s[r]=i,u[r]=o,i<c&&(c=i),i>h&&(h=i),o<l&&(l=o),o>f&&(f=o));for(h<c&&(c=this._x0,h=this._x1),f<l&&(l=this._y0,f=this._y1),this.cover(c,l).cover(h,f),r=0;r<a;++r)e(this,s[r],u[r],t[r]);return this}function r(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function i(t){return t[0]}function o(t){return t[1]}function a(t,e,n){var r=new s(null==e?i:e,null==n?o:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function s(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function u(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var c=function(t){var n=+this._x.call(null,t),r=+this._y.call(null,t);return e(this.cover(n,r),n,r,t)},l=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,o=r+u,t>i||e>o);break;case 1:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,o=r+u,n>t||e>o);break;case 2:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,r=o-u,t>i||r>e);break;case 3:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,r=o-u,n>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},h=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},f=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},d=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},p=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new d(g,l,h,f,p)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=m.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<l||(s=u.y1)<h))if(g.length){var v=(i+a)/2,y=(o+s)/2;m.push(new d(g[3],v,y,a,s),new d(g[2],i,y,v,s),new d(g[1],v,o,a,y),new d(g[0],i,o,v,y)),(c=(e>=y)<<1|t>=v)&&(u=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=u)}else{var _=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=_*_+b*b;if(x<n){var w=Math.sqrt(n=x);l=t-w,h=e-w,f=t+w,p=e+w,r=g.data}}return r},m=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(l=a>=(u=(m+v)/2))?m=u:v=u,e=d,!(d=d[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},g=function(){return this._root},v=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},y=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new d(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new d(n,c,l,o,a)),(n=u[2])&&s.push(new d(n,r,l,c,a)),(n=u[1])&&s.push(new d(n,c,i,o,l)),(n=u[0])&&s.push(new d(n,r,i,c,l))}return this},_=function(t){var e,n=[],r=[];for(this._root&&n.push(new d(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new d(o,a,s,l,h)),(o=i[1])&&n.push(new d(o,l,s,u,h)),(o=i[2])&&n.push(new d(o,a,h,l,c)),(o=i[3])&&n.push(new d(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},b=function(t){return arguments.length?(this._x=t,this):this._x},x=function(t){return arguments.length?(this._y=t,this):this._y},w=a.prototype=s.prototype;w.copy=function(){var t,e,n=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=u(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=u(e));return n},w.add=c,w.addAll=n,w.cover=l,w.data=h,w.extent=f,w.find=p,w.remove=m,w.removeAll=r,w.root=g,w.size=v,w.visit=y,w.visitAfter=_,w.x=b,w.y=x,t.quadtree=a,Object.defineProperty(t,"__esModule",{value:!0})})},{}],27:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";var e=function(){return Math.random()},n=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(e),r=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do r=2*e()-1,o=2*e()-1,i=r*r+o*o;while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(e),i=function t(e){function n(){var t=r.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(e),o=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(e),a=function t(e){function n(t){var n=o.source(e)(t);return function(){return n()/t}}return n.source=t,n}(e),s=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(e);t.randomUniform=n,t.randomNormal=r,t.randomLogNormal=i,t.randomBates=a,t.randomIrwinHall=o,t.randomExponential=s,Object.defineProperty(t,"__esModule",{value:!0})})},{}],28:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-interpolate"),t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function i(t){return e.interpolateRgbBasis(t[t.length-1])}function o(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return bt.h=360*t-100,bt.s=1.5-1.5*e,bt.l=.8-.9*e,bt+""}function a(t){var e;return t=(.5-t)*Math.PI,xt.r=255*(e=Math.sin(t))*e,xt.g=255*(e=Math.sin(t+wt))*e,xt.b=255*(e=Math.sin(t+Et))*e,xt+""}function s(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var u=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),c=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),l=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),h=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),f=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),d=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),p=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),m=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),g=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),y=i(v),_=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),b=i(_),x=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),w=i(x),E=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),M=i(E),T=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),S=i(T),P=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),C=i(P),A=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),L=i(A),O=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),R=i(O),k=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),N=i(k),I=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),D=i(I),j=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),z=i(j),U=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),B=i(U),F=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),H=i(F),G=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),V=i(G),W=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),q=i(W),Y=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),Z=i(Y),X=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),K=i(X),J=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),Q=i(J),$=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),tt=i($),et=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),nt=i(et),rt=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),it=i(rt),ot=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),at=i(ot),st=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),ut=i(st),ct=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),lt=i(ct),ht=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),ft=i(ht),dt=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),pt=i(dt),mt=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),gt=i(mt),vt=e.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),yt=e.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),_t=e.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),bt=n.cubehelix(),xt=n.rgb(),wt=Math.PI/3,Et=2*Math.PI/3,Mt=s(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Tt=s(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),St=s(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Pt=s(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));t.schemeCategory10=u,t.schemeAccent=c,t.schemeDark2=l,t.schemePaired=h,t.schemePastel1=f,t.schemePastel2=d,t.schemeSet1=p,t.schemeSet2=m,t.schemeSet3=g,t.interpolateBrBG=y,t.schemeBrBG=v,t.interpolatePRGn=b,t.schemePRGn=_,t.interpolatePiYG=w,t.schemePiYG=x,t.interpolatePuOr=M,t.schemePuOr=E,t.interpolateRdBu=S,t.schemeRdBu=T,t.interpolateRdGy=C,t.schemeRdGy=P,t.interpolateRdYlBu=L,t.schemeRdYlBu=A,t.interpolateRdYlGn=R,t.schemeRdYlGn=O,t.interpolateSpectral=N,t.schemeSpectral=k,t.interpolateBuGn=D,t.schemeBuGn=I,t.interpolateBuPu=z,t.schemeBuPu=j,t.interpolateGnBu=B,t.schemeGnBu=U,t.interpolateOrRd=H,t.schemeOrRd=F,t.interpolatePuBuGn=V,t.schemePuBuGn=G,t.interpolatePuBu=q,t.schemePuBu=W,t.interpolatePuRd=Z,t.schemePuRd=Y,t.interpolateRdPu=K,t.schemeRdPu=X,t.interpolateYlGnBu=Q,t.schemeYlGnBu=J,t.interpolateYlGn=tt,t.schemeYlGn=$,t.interpolateYlOrBr=nt,t.schemeYlOrBr=et,t.interpolateYlOrRd=it,t.schemeYlOrRd=rt,t.interpolateBlues=at,t.schemeBlues=ot,t.interpolateGreens=ut,t.schemeGreens=st,t.interpolateGreys=lt,t.schemeGreys=ct,t.interpolatePurples=ft,t.schemePurples=ht,t.interpolateReds=pt,t.schemeReds=dt,t.interpolateOranges=gt,t.schemeOranges=mt,t.interpolateCubehelixDefault=vt,
t.interpolateRainbow=o,t.interpolateWarm=yt,t.interpolateCool=_t,t.interpolateSinebow=a,t.interpolateViridis=Mt,t.interpolateMagma=Tt,t.interpolateInferno=St,t.interpolatePlasma=Pt,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":12,"d3-interpolate":23}],29:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-array"),t("d3-collection"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a){"use strict";function s(t){function e(e){var n=e+"",a=r.get(n);if(!a){if(o!==Y)return o;r.set(n,a=i.push(e))}return t[(a-1)%t.length]}var r=n.map(),i=[],o=Y;return t=null==t?[]:q.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],r=n.map();for(var o,a,s=-1,u=t.length;++s<u;)r.has(a=(o=t[s])+"")||r.set(a,i.push(o));return e},e.range=function(n){return arguments.length?(t=q.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return s().domain(i).range(t).unknown(o)},e}function u(){function t(){var t=o().length,i=c[1]<c[0],s=c[i-0],u=c[1-i];n=(u-s)/Math.max(1,t-h+2*f),l&&(n=Math.floor(n)),s+=(u-s-n*(t-h))*d,r=n*(1-h),l&&(s=Math.round(s),r=Math.round(r));var p=e.range(t).map(function(t){return s+n*t});return a(i?p.reverse():p)}var n,r,i=s().unknown(void 0),o=i.domain,a=i.range,c=[0,1],l=!1,h=0,f=0,d=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),t()):o()},i.range=function(e){return arguments.length?(c=[+e[0],+e[1]],t()):c.slice()},i.rangeRound=function(e){return c=[+e[0],+e[1]],l=!0,t()},i.bandwidth=function(){return r},i.step=function(){return n},i.round=function(e){return arguments.length?(l=!!e,t()):l},i.padding=function(e){return arguments.length?(h=f=Math.max(0,Math.min(1,e)),t()):h},i.paddingInner=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},i.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},i.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},i.copy=function(){return u().domain(o()).range(c).round(l).paddingInner(h).paddingOuter(f).align(d)},t()}function c(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return c(e())},t}function l(){return c(u().paddingInner(1))}function h(t){return function(){return t}}function f(t){return+t}function d(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:h(e)}function p(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function m(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function g(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function v(t,n,r,i){var o=Math.min(t.length,n.length)-1,a=new Array(o),s=new Array(o),u=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<o;)a[u]=r(t[u],t[u+1]),s[u]=i(n[u],n[u+1]);return function(n){var r=e.bisect(t,n,1,o)-1;return s[r](a[r](n))}}function y(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function _(t,e){function n(){return o=Math.min(u.length,c.length)>2?v:g,a=s=null,i}function i(e){return(a||(a=o(u,c,h?p(t):t,l)))(+e)}var o,a,s,u=Z,c=Z,l=r.interpolate,h=!1;return i.invert=function(t){return(s||(s=o(c,u,d,h?m(e):e)))(+t)},i.domain=function(t){return arguments.length?(u=W.call(t,f),n()):u.slice()},i.range=function(t){return arguments.length?(c=q.call(t),n()):c.slice()},i.rangeRound=function(t){return c=q.call(t),l=r.interpolateRound,n()},i.clamp=function(t){return arguments.length?(h=!!t,n()):h},i.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function b(t,n,r){var o,a=t[0],s=t[t.length-1],u=e.tickStep(a,s,null==n?10:n);switch(r=i.formatSpecifier(null==r?",f":r),r.type){case"s":var c=Math.max(Math.abs(a),Math.abs(s));return null!=r.precision||isNaN(o=i.precisionPrefix(u,c))||(r.precision=o),i.formatPrefix(r,c);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=i.precisionRound(u,Math.max(Math.abs(a),Math.abs(s))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=i.precisionFixed(u))||(r.precision=o-2*("%"===r.type))}return i.format(r)}function x(t){var n=t.domain;return t.ticks=function(t){var r=n();return e.ticks(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,e){return b(n(),t,e)},t.nice=function(r){null==r&&(r=10);var i,o=n(),a=0,s=o.length-1,u=o[a],c=o[s];return c<u&&(i=u,u=c,c=i,i=a,a=s,s=i),i=e.tickIncrement(u,c,r),i>0?(u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i,i=e.tickIncrement(u,c,r)):i<0&&(u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i,i=e.tickIncrement(u,c,r)),i>0?(o[a]=Math.floor(u/i)*i,o[s]=Math.ceil(c/i)*i,n(o)):i<0&&(o[a]=Math.ceil(u*i)/i,o[s]=Math.floor(c*i)/i,n(o)),t},t}function w(){var t=_(d,r.interpolateNumber);return t.copy=function(){return y(t,w())},x(t)}function E(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=W.call(n,f),t):e.slice()},t.copy=function(){return E().domain(e)},x(t)}function M(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function T(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:h(e)}function S(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function P(t){return isFinite(t)?+("1e"+t):t<0?0:t}function C(t){return 10===t?P:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function A(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function L(t){return function(e){return-t(-e)}}function O(){function t(){return a=A(o),s=C(o),r()[0]<0&&(a=L(a),s=L(s)),n}var n=_(T,S).domain([1,10]),r=n.domain,o=10,a=A(10),s=C(10);return n.base=function(e){return arguments.length?(o=+e,t()):o},n.domain=function(e){return arguments.length?(r(e),t()):r()},n.ticks=function(t){var n,i=r(),u=i[0],c=i[i.length-1];(n=c<u)&&(d=u,u=c,c=d);var l,h,f,d=a(u),p=a(c),m=null==t?10:+t,g=[];if(!(o%1)&&p-d<m){if(d=Math.round(d)-1,p=Math.round(p)+1,u>0){for(;d<p;++d)for(h=1,l=s(d);h<o;++h)if(f=l*h,!(f<u)){if(f>c)break;g.push(f)}}else for(;d<p;++d)for(h=o-1,l=s(d);h>=1;--h)if(f=l*h,!(f<u)){if(f>c)break;g.push(f)}}else g=e.ticks(d,p,Math.min(p-d,m)).map(s);return n?g.reverse():g},n.tickFormat=function(t,e){if(null==e&&(e=10===o?".0e":","),"function"!=typeof e&&(e=i.format(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,o*t/n.ticks().length);return function(t){var n=t/s(Math.round(a(t)));return n*o<o-.5&&(n*=o),n<=r?e(t):""}},n.nice=function(){return r(M(r(),{floor:function(t){return s(Math.floor(a(t)))},ceil:function(t){return s(Math.ceil(a(t)))}}))},n.copy=function(){return y(n,O().base(o))},n}function R(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function k(){function t(t,e){return(e=R(e,n)-(t=R(t,n)))?function(r){return(R(r,n)-t)/e}:h(e)}function e(t,e){return e=R(e,n)-(t=R(t,n)),function(r){return R(t+e*r,1/n)}}var n=1,r=_(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return y(r,k().exponent(n))},x(r)}function N(){return k().exponent(.5)}function I(){function t(){var t=0,a=Math.max(1,i.length);for(o=new Array(a-1);++t<a;)o[t-1]=e.quantile(r,t/a);return n}function n(t){if(!isNaN(t=+t))return i[e.bisect(o,t)]}var r=[],i=[],o=[];return n.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:r[0],e<o.length?o[e]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,o=0,a=n.length;o<a;++o)i=n[o],null==i||isNaN(i=+i)||r.push(i);return r.sort(e.ascending),t()},n.range=function(e){return arguments.length?(i=q.call(e),t()):i.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return I().domain(r).range(i)},n}function D(){function t(t){if(t<=t)return s[e.bisect(a,t,0,o)]}function n(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*r)/(o+1);return t}var r=0,i=1,o=1,a=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],n()):[r,i]},t.range=function(t){return arguments.length?(o=(s=q.call(t)).length-1,n()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[r,a[0]]:e>=o?[a[o-1],i]:[a[e-1],a[e]]},t.copy=function(){return D().domain([r,i]).range(s)},x(t)}function j(){function t(t){if(t<=t)return r[e.bisect(n,t,0,i)]}var n=[.5],r=[0,1],i=1;return t.domain=function(e){return arguments.length?(n=q.call(e),i=Math.min(n.length,r.length-1),t):n.slice()},t.range=function(e){return arguments.length?(r=q.call(e),i=Math.min(n.length,r.length-1),t):r.slice()},t.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},t.copy=function(){return j().domain(n).range(r)},t}function z(t){return new Date(t)}function U(t){return t instanceof Date?+t:+new Date((+t))}function B(t,n,i,o,a,s,u,c,l){function h(e){return(u(e)<e?v:s(e)<e?b:a(e)<e?x:o(e)<e?w:n(e)<e?i(e)<e?E:T:t(e)<e?S:P)(e)}function f(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,s=e.bisector(function(t){return t[2]}).right(C,a);s===C.length?(o=e.tickStep(r/et,i/et,n),n=t):s?(s=C[a/C[s-1][2]<C[s][2]/a?s-1:s],o=s[1],n=s[0]):(o=Math.max(e.tickStep(r,i,n),1),n=c)}return null==o?n:n.every(o)}var p=_(d,r.interpolateNumber),m=p.invert,g=p.domain,v=l(".%L"),b=l(":%S"),x=l("%I:%M"),w=l("%I %p"),E=l("%a %d"),T=l("%b %d"),S=l("%B"),P=l("%Y"),C=[[u,1,X],[u,5,5*X],[u,15,15*X],[u,30,30*X],[s,1,K],[s,5,5*K],[s,15,15*K],[s,30,30*K],[a,1,J],[a,3,3*J],[a,6,6*J],[a,12,12*J],[o,1,Q],[o,2,2*Q],[i,1,$],[n,1,tt],[n,3,3*tt],[t,1,et]];return p.invert=function(t){return new Date(m(t))},p.domain=function(t){return arguments.length?g(W.call(t,U)):g().map(z)},p.ticks=function(t,e){var n,r=g(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=f(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},p.tickFormat=function(t,e){return null==e?h:l(e)},p.nice=function(t,e){var n=g();return(t=f(t,n[0],n[n.length-1],e))?g(M(n,t)):p},p.copy=function(){return y(p,B(t,n,i,o,a,s,u,c,l))},p}function F(){return B(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function H(){return B(o.utcYear,o.utcMonth,o.utcWeek,o.utcDay,o.utcHour,o.utcMinute,o.utcSecond,o.utcMillisecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function G(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return G(t).domain([n,r]).clamp(i)},x(e)}var V=Array.prototype,W=V.map,q=V.slice,Y={name:"implicit"},Z=[0,1],X=1e3,K=60*X,J=60*K,Q=24*J,$=7*Q,tt=30*Q,et=365*Q;t.scaleBand=u,t.scalePoint=l,t.scaleIdentity=E,t.scaleLinear=w,t.scaleLog=O,t.scaleOrdinal=s,t.scaleImplicit=Y,t.scalePow=k,t.scaleSqrt=N,t.scaleQuantile=I,t.scaleQuantize=D,t.scaleThreshold=j,t.scaleTime=F,t.scaleUtc=H,t.scaleSequential=G,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":7,"d3-collection":11,"d3-format":20,"d3-interpolate":23,"d3-time":33,"d3-time-format":32}],30:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Yt.hasOwnProperty(e)?{space:Yt[e],local:t}:t}function n(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===qt&&e.documentElement.namespaceURI===qt?e.createElement(t):e.createElementNS(n,t)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var i=e(t);return(i.local?r:n)(i)}function o(){}function a(t){return null==t?o:function(){return this.querySelector(t)}}function s(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,u=e[i],c=u.length,l=r[i]=new Array(c),h=0;h<c;++h)(o=u[h])&&(s=t.call(o,o.__data__,h,u))&&("__data__"in o&&(s.__data__=o.__data__),l[h]=s);return new Nt(r,this._parents)}function u(){return[]}function c(t){return null==t?u:function(){return this.querySelectorAll(t)}}function l(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Nt(r,i)}function h(t){"function"!=typeof t&&(t=Jt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Nt(r,this._parents)}function f(t){return new Array(t.length)}function d(){return new Nt(this._enter||this._groups.map(f),this._parents)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function m(t){return function(){return t}}function g(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new p(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function v(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=Qt+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)c=Qt+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new p(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function y(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?v:g,r=this._parents,i=this._groups;"function"!=typeof t&&(t=m(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,y=s[c]=new Array(p),_=a[c]=new Array(p),b=u[c]=new Array(f);n(l,h,y,_,b,d,e);for(var x,w,E=0,M=0;E<p;++E)if(x=y[E]){for(E>=M&&(M=E+1);!(w=_[M])&&++M<p;);x._next=w||null}}return a=new Nt(a,r),a._enter=s,a._exit=u,a}function _(){return new Nt(this._exit||this._groups.map(f),this._parents)}function b(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Nt(a,this._parents)}function x(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this}function w(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=E);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Nt(i,this._parents).order()}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function M(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function T(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function S(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function P(){var t=0;return this.each(function(){++t}),t}function C(){return!this.node()}function A(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this}function L(t){return function(){this.removeAttribute(t)}}function O(t){return function(){this.removeAttributeNS(t.space,t.local)}}function R(t,e){return function(){this.setAttribute(t,e)}}function k(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function N(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function I(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function D(t,n){var r=e(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?O:L:"function"==typeof n?r.local?I:N:r.local?k:R)(r,n))}function j(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function z(t){return function(){this.style.removeProperty(t)}}function U(t,e,n){return function(){this.style.setProperty(t,e,n)}}function B(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function F(t,e,n){return arguments.length>1?this.each((null==e?z:"function"==typeof e?B:U)(t,e,null==n?"":n)):H(this.node(),t)}function H(t,e){return t.style.getPropertyValue(e)||j(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function V(t,e){return function(){this[t]=e}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function q(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?W:V)(t,e)):this.node()[t]}function Y(t){return t.trim().split(/^|\s+/)}function Z(t){return t.classList||new X(t)}function X(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function K(t,e){for(var n=Z(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function J(t,e){for(var n=Z(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Q(t){return function(){K(this,t)}}function $(t){return function(){J(this,t)}}function tt(t,e){return function(){(e.apply(this,arguments)?K:J)(this,t)}}function et(t,e){var n=Y(t+"");if(arguments.length<2){for(var r=Z(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?tt:e?Q:$)(n,e))}function nt(){this.textContent=""}function rt(t){return function(){this.textContent=t}}function it(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ot(t){return arguments.length?this.each(null==t?nt:("function"==typeof t?it:rt)(t)):this.node().textContent}function at(){this.innerHTML=""}function st(t){return function(){this.innerHTML=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ct(t){return arguments.length?this.each(null==t?at:("function"==typeof t?ut:st)(t)):this.node().innerHTML}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function ht(){return this.each(lt)}function ft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(){return this.each(ft)}function pt(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mt(){return null}function gt(t,e){var n="function"==typeof t?t:i(t),r=null==e?mt:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vt(){var t=this.parentNode;t&&t.removeChild(this)}function yt(){return this.each(vt)}function _t(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function bt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function xt(t){return this.select(t?bt:_t)}function wt(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Et(t,e,n){return t=Mt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Mt(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function Tt(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function St(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Pt(t,e,n){var r=$t.hasOwnProperty(t.type)?Et:Mt;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function Ct(t,e,n){var r,i,o=Tt(t+""),a=o.length;{if(!(arguments.length<2)){for(s=e?Pt:St,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}}function At(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function Lt(t,e,n){var r=j(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ot(t,e){return function(){return Lt(this,t,e)}}function Rt(t,e){return function(){return Lt(this,t,e.apply(this,arguments))}}function kt(t,e){return this.each(("function"==typeof e?Rt:Ot)(t,e))}function Nt(t,e){this._groups=t,this._parents=e}function It(){return new Nt([[document.documentElement]],ee)}function Dt(t){return"string"==typeof t?new Nt([[document.querySelector(t)]],[document.documentElement]):new Nt([[t]],ee)}function jt(t){return Dt(i(t).call(document.documentElement))}function zt(){return new Ut}function Ut(){this._="@"+(++ne).toString(36)}function Bt(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function Ft(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Ht(t){var e=Bt();return e.changedTouches&&(e=e.changedTouches[0]),Ft(t,e)}function Gt(t){return"string"==typeof t?new Nt([document.querySelectorAll(t)],[document.documentElement]):new Nt([null==t?[]:t],ee)}function Vt(t,e,n){arguments.length<3&&(n=e,e=Bt().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Ft(t,r);return null}function Wt(t,e){null==e&&(e=Bt().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Ft(t,e[n]);return i}var qt="http://www.w3.org/1999/xhtml",Yt={svg:"http://www.w3.org/2000/svg",xhtml:qt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Zt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Xt=document.documentElement;if(!Xt.matches){var Kt=Xt.webkitMatchesSelector||Xt.msMatchesSelector||Xt.mozMatchesSelector||Xt.oMatchesSelector;Zt=function(t){return function(){return Kt.call(this,t)}}}}var Jt=Zt;p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Qt="$";X.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $t={};if(t.event=null,"undefined"!=typeof document){var te=document.documentElement;"onmouseenter"in te||($t={mouseenter:"mouseover",mouseleave:"mouseout"})}var ee=[null];Nt.prototype=It.prototype={constructor:Nt,select:s,selectAll:l,filter:h,data:y,enter:d,exit:_,merge:b,order:x,sort:w,call:M,nodes:T,node:S,size:P,empty:C,each:A,attr:D,style:F,property:q,classed:et,text:ot,html:ct,raise:ht,lower:dt,append:pt,insert:gt,remove:yt,clone:xt,datum:wt,on:Ct,dispatch:kt};var ne=0;Ut.prototype=zt.prototype={constructor:Ut,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=jt,t.creator=i,t.local=zt,t.matcher=Jt,t.mouse=Ht,t.namespace=e,t.namespaces=Yt,t.clientPoint=Ft,t.select=Dt,t.selectAll=Gt,t.selection=It,t.selector=a,t.selectorAll=c,t.style=H,t.touch=Vt,t.touches=Wt,t.window=j,t.customEvent=At,Object.defineProperty(t,"__esModule",{value:!0})})},{}],31:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){return t>1?0:t<-1?ht:Math.acos(t)}function r(t){return t>=1?ft:t<=-1?-ft:Math.asin(t)}function i(t){return t.innerRadius}function o(t){return t.outerRadius}function a(t){return t.startAngle}function s(t){return t.endAngle}function u(t){return t&&t.padAngle}function c(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=(l*(e-o)-h*(t-i))/(h*u-l*c);return[t+f*u,e+f*c]}function l(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/ct(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,p=n+l,m=r+h,g=(f+p)/2,v=(d+m)/2,y=p-f,_=m-d,b=y*y+_*_,x=i-o,w=f*m-p*d,E=(_<0?-1:1)*ct(at(0,x*x*b-w*w)),M=(w*_-y*E)/b,T=(-w*y-_*E)/b,S=(w*_+y*E)/b,P=(-w*y+_*E)/b,C=M-g,A=T-v,L=S-g,O=P-v;return C*C+A*A>L*L+O*O&&(M=S,T=P),{cx:M,cy:T,x01:-l,y01:-h,x11:M*(i/x-1),y11:T*(i/x-1)}}function h(t){this._context=t}function f(t){return t[0]}function d(t){return t[1]}function p(t){this._curve=t}function m(t){function e(e){return new p(t(e))}return e._curve=t,e}function g(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(m(t)):e()._curve},t}function v(t){return t.source}function y(t){return t.target}function _(t){function n(){var n,u=Tt.call(arguments),c=r.apply(this,u),l=i.apply(this,u);if(s||(s=n=e.path()),t(s,+o.apply(this,(u[0]=c,u)),+a.apply(this,u),+o.apply(this,(u[0]=l,u)),+a.apply(this,u)),n)return s=null,n+""||null}var r=v,i=y,o=f,a=d,s=null;return n.source=function(t){return arguments.length?(r=t,n):r},n.target=function(t){return arguments.length?(i=t,n):i},n.x=function(t){return arguments.length?(o="function"==typeof t?t:nt(+t),n):o},n.y=function(t){return arguments.length?(a="function"==typeof t?t:nt(+t),n):a},n.context=function(t){return arguments.length?(s=null==t?null:t,n):s},n}function b(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function x(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function w(t,e,n,r,i){var o=Mt(e,n),a=Mt(e,n=(n+i)/2),s=Mt(r,n),u=Mt(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function E(){return _(b)}function M(){return _(x)}function T(){var t=_(w);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function S(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function P(t){this._context=t}function C(t){this._context=t}function A(t){this._context=t}function L(t,e){this._basis=new P(t),this._beta=e}function O(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function R(t,e){this._context=t,this._k=(1-e)/6}function k(t,e){this._context=t,this._k=(1-e)/6}function N(t,e){this._context=t,this._k=(1-e)/6}function I(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>lt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>lt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function D(t,e){this._context=t,this._alpha=e}function j(t,e){this._context=t,this._alpha=e}function z(t,e){this._context=t,this._alpha=e}function U(t){this._context=t}function B(t){return t<0?-1:1}function F(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(B(o)+B(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function H(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function G(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function V(t){this._context=t}function W(t){this._context=new q(t)}function q(t){this._context=t}function Y(t){return new V(t)}function Z(t){return new W(t)}function X(t){this._context=t}function K(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function J(t,e){this._context=t,this._t=e}function Q(t){return new J(t,0)}function $(t){return new J(t,1)}function tt(t,e){return t[e]}function et(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var nt=function(t){return function(){return t}},rt=Math.abs,it=Math.atan2,ot=Math.cos,at=Math.max,st=Math.min,ut=Math.sin,ct=Math.sqrt,lt=1e-12,ht=Math.PI,ft=ht/2,dt=2*ht,pt=function(){function t(){var t,i,o=+h.apply(this,arguments),a=+f.apply(this,arguments),s=m.apply(this,arguments)-ft,u=g.apply(this,arguments)-ft,_=rt(u-s),b=u>s;if(y||(y=t=e.path()),a<o&&(i=a,a=o,o=i),a>lt)if(_>dt-lt)y.moveTo(a*ot(s),a*ut(s)),y.arc(0,0,a,s,u,!b),o>lt&&(y.moveTo(o*ot(u),o*ut(u)),y.arc(0,0,o,u,s,b));else{var x,w,E=s,M=u,T=s,S=u,P=_,C=_,A=v.apply(this,arguments)/2,L=A>lt&&(p?+p.apply(this,arguments):ct(o*o+a*a)),O=st(rt(a-o)/2,+d.apply(this,arguments)),R=O,k=O;if(L>lt){var N=r(L/o*ut(A)),I=r(L/a*ut(A));(P-=2*N)>lt?(N*=b?1:-1,T+=N,S-=N):(P=0,T=S=(s+u)/2),(C-=2*I)>lt?(I*=b?1:-1,E+=I,M-=I):(C=0,E=M=(s+u)/2)}var D=a*ot(E),j=a*ut(E),z=o*ot(S),U=o*ut(S);if(O>lt){var B=a*ot(M),F=a*ut(M),H=o*ot(T),G=o*ut(T);if(_<ht){var V=P>lt?c(D,j,H,G,B,F,z,U):[z,U],W=D-V[0],q=j-V[1],Y=B-V[0],Z=F-V[1],X=1/ut(n((W*Y+q*Z)/(ct(W*W+q*q)*ct(Y*Y+Z*Z)))/2),K=ct(V[0]*V[0]+V[1]*V[1]);R=st(O,(o-K)/(X-1)),k=st(O,(a-K)/(X+1))}}C>lt?k>lt?(x=l(H,G,D,j,a,k,b),w=l(B,F,z,U,a,k,b),y.moveTo(x.cx+x.x01,x.cy+x.y01),k<O?y.arc(x.cx,x.cy,k,it(x.y01,x.x01),it(w.y01,w.x01),!b):(y.arc(x.cx,x.cy,k,it(x.y01,x.x01),it(x.y11,x.x11),!b),y.arc(0,0,a,it(x.cy+x.y11,x.cx+x.x11),it(w.cy+w.y11,w.cx+w.x11),!b),y.arc(w.cx,w.cy,k,it(w.y11,w.x11),it(w.y01,w.x01),!b))):(y.moveTo(D,j),y.arc(0,0,a,E,M,!b)):y.moveTo(D,j),o>lt&&P>lt?R>lt?(x=l(z,U,B,F,o,-R,b),w=l(D,j,H,G,o,-R,b),y.lineTo(x.cx+x.x01,x.cy+x.y01),R<O?y.arc(x.cx,x.cy,R,it(x.y01,x.x01),it(w.y01,w.x01),!b):(y.arc(x.cx,x.cy,R,it(x.y01,x.x01),it(x.y11,x.x11),!b),y.arc(0,0,o,it(x.cy+x.y11,x.cx+x.x11),it(w.cy+w.y11,w.cx+w.x11),b),y.arc(w.cx,w.cy,R,it(w.y11,w.x11),it(w.y01,w.x01),!b))):y.arc(0,0,o,S,T,b):y.lineTo(z,U)}else y.moveTo(0,0);if(y.closePath(),t)return y=null,t+""||null}var h=i,f=o,d=nt(0),p=null,m=a,g=s,v=u,y=null;return t.centroid=function(){var t=(+h.apply(this,arguments)+ +f.apply(this,arguments))/2,e=(+m.apply(this,arguments)+ +g.apply(this,arguments))/2-ht/2;return[ot(e)*t,ut(e)*t]},t.innerRadius=function(e){return arguments.length?(h="function"==typeof e?e:nt(+e),t):h},t.outerRadius=function(e){
return arguments.length?(f="function"==typeof e?e:nt(+e),t):f},t.cornerRadius=function(e){return arguments.length?(d="function"==typeof e?e:nt(+e),t):d},t.padRadius=function(e){return arguments.length?(p=null==e?null:"function"==typeof e?e:nt(+e),t):p},t.startAngle=function(e){return arguments.length?(m="function"==typeof e?e:nt(+e),t):m},t.endAngle=function(e){return arguments.length?(g="function"==typeof e?e:nt(+e),t):g},t.padAngle=function(e){return arguments.length?(v="function"==typeof e?e:nt(+e),t):v},t.context=function(e){return arguments.length?(y=null==e?null:e,t):y},t};h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var mt=function(t){return new h(t)},gt=function(){function t(t){var u,c,l,h=t.length,f=!1;for(null==o&&(s=a(l=e.path())),u=0;u<=h;++u)!(u<h&&i(c=t[u],u,t))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+n(c,u,t),+r(c,u,t));if(l)return s=null,l+""||null}var n=f,r=d,i=nt(!0),o=null,a=mt,s=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:nt(+e),t):n},t.y=function(e){return arguments.length?(r="function"==typeof e?e:nt(+e),t):r},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:nt(!!e),t):i},t.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),t):a},t.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),t):o},t},vt=function(){function t(t){var n,h,f,d,p,m=t.length,g=!1,v=new Array(m),y=new Array(m);for(null==u&&(l=c(p=e.path())),n=0;n<=m;++n){if(!(n<m&&s(d=t[n],n,t))===g)if(g=!g)h=n,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),f=n-1;f>=h;--f)l.point(v[f],y[f]);l.lineEnd(),l.areaEnd()}g&&(v[n]=+r(d,n,t),y[n]=+o(d,n,t),l.point(i?+i(d,n,t):v[n],a?+a(d,n,t):y[n]))}if(p)return l=null,p+""||null}function n(){return gt().defined(s).curve(c).context(u)}var r=f,i=null,o=nt(0),a=d,s=nt(!0),u=null,c=mt,l=null;return t.x=function(e){return arguments.length?(r="function"==typeof e?e:nt(+e),i=null,t):r},t.x0=function(e){return arguments.length?(r="function"==typeof e?e:nt(+e),t):r},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:nt(+e),t):i},t.y=function(e){return arguments.length?(o="function"==typeof e?e:nt(+e),a=null,t):o},t.y0=function(e){return arguments.length?(o="function"==typeof e?e:nt(+e),t):o},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:nt(+e),t):a},t.lineX0=t.lineY0=function(){return n().x(r).y(o)},t.lineY1=function(){return n().x(r).y(a)},t.lineX1=function(){return n().x(i).y(o)},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:nt(!!e),t):s},t.curve=function(e){return arguments.length?(c=e,null!=u&&(l=c(u)),t):c},t.context=function(e){return arguments.length?(null==e?u=l=null:l=c(u=e),t):u},t},yt=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},_t=function(t){return t},bt=function(){function t(t){var s,u,c,l,h,f=t.length,d=0,p=new Array(f),m=new Array(f),g=+i.apply(this,arguments),v=Math.min(dt,Math.max(-dt,o.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/f,a.apply(this,arguments)),_=y*(v<0?-1:1);for(s=0;s<f;++s)(h=m[p[s]=s]=+e(t[s],s,t))>0&&(d+=h);for(null!=n?p.sort(function(t,e){return n(m[t],m[e])}):null!=r&&p.sort(function(e,n){return r(t[e],t[n])}),s=0,c=d?(v-f*_)/d:0;s<f;++s,g=l)u=p[s],h=m[u],l=g+(h>0?h*c:0)+_,m[u]={data:t[u],index:s,value:h,startAngle:g,endAngle:l,padAngle:y};return m}var e=_t,n=yt,r=null,i=nt(0),o=nt(dt),a=nt(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:nt(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:nt(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:nt(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:nt(+e),t):a},t},xt=m(mt);p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var wt=function(){return g(gt().curve(xt))},Et=function(){var t=vt().curve(xt),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return g(n())},delete t.lineX0,t.lineEndAngle=function(){return g(r())},delete t.lineX1,t.lineInnerRadius=function(){return g(i())},delete t.lineY0,t.lineOuterRadius=function(){return g(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(m(t)):e()._curve},t},Mt=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Tt=Array.prototype.slice,St={draw:function(t,e){var n=Math.sqrt(e/ht);t.moveTo(n,0),t.arc(0,0,n,0,dt)}},Pt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Ct=Math.sqrt(1/3),At=2*Ct,Lt={draw:function(t,e){var n=Math.sqrt(e/At),r=n*Ct;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Ot=.8908130915292852,Rt=Math.sin(ht/10)/Math.sin(7*ht/10),kt=Math.sin(dt/10)*Rt,Nt=-Math.cos(dt/10)*Rt,It={draw:function(t,e){var n=Math.sqrt(e*Ot),r=kt*n,i=Nt*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=dt*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Dt={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},jt=Math.sqrt(3),zt={draw:function(t,e){var n=-Math.sqrt(e/(3*jt));t.moveTo(0,2*n),t.lineTo(-jt*n,-n),t.lineTo(jt*n,-n),t.closePath()}},Ut=-.5,Bt=Math.sqrt(3)/2,Ft=1/Math.sqrt(12),Ht=3*(Ft/2+1),Gt={draw:function(t,e){var n=Math.sqrt(e/Ht),r=n/2,i=n*Ft,o=r,a=n*Ft+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Ut*r-Bt*i,Bt*r+Ut*i),t.lineTo(Ut*o-Bt*a,Bt*o+Ut*a),t.lineTo(Ut*s-Bt*u,Bt*s+Ut*u),t.lineTo(Ut*r+Bt*i,Ut*i-Bt*r),t.lineTo(Ut*o+Bt*a,Ut*a-Bt*o),t.lineTo(Ut*s+Bt*u,Ut*u-Bt*s),t.closePath()}},Vt=[St,Pt,Lt,Dt,It,zt,Gt],Wt=function(){function t(){var t;if(i||(i=t=e.path()),n.apply(this,arguments).draw(i,+r.apply(this,arguments)),t)return i=null,t+""||null}var n=nt(St),r=nt(64),i=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:nt(e),t):n},t.size=function(e){return arguments.length?(r="function"==typeof e?e:nt(+e),t):r},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},qt=function(){};P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:S(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:S(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Yt=function(t){return new P(t)};C.prototype={areaStart:qt,areaEnd:qt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:S(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Zt=function(t){return new C(t)};A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:S(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Xt=function(t){return new A(t)};L.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Kt=function t(e){function n(t){return 1===e?new P(t):new L(t,e)}return n.beta=function(e){return t(+e)},n}(.85);R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:O(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:O(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Jt=function t(e){function n(t){return new R(t,e)}return n.tension=function(e){return t(+e)},n}(0);k.prototype={areaStart:qt,areaEnd:qt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:O(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qt=function t(e){function n(t){return new k(t,e)}return n.tension=function(e){return t(+e)},n}(0);N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $t=function t(e){function n(t){return new N(t,e)}return n.tension=function(e){return t(+e)},n}(0);D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:I(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var te=function t(e){function n(t){return e?new D(t,e):new R(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);j.prototype={areaStart:qt,areaEnd:qt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:I(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ee=function t(e){function n(t){return e?new j(t,e):new k(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ne=function t(e){function n(t){return e?new z(t,e):new N(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);U.prototype={areaStart:qt,areaEnd:qt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var re=function(t){return new U(t)};V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G(this,this._t0,H(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,G(this,H(this,n=F(this,t,e)),n);break;default:G(this,this._t0,n=F(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(W.prototype=Object.create(V.prototype)).point=function(t,e){V.prototype.point.call(this,e,t)},q.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=K(t),i=K(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ie=function(t){return new X(t)};J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var oe=function(t){return new J(t,.5)},ae=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},se=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},ue=function(){function t(t){var o,a,s=e.apply(this,arguments),u=t.length,c=s.length,l=new Array(c);for(o=0;o<c;++o){for(var h,f=s[o],d=l[o]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+i(t[p],f,p,t)],h.data=t[p];d.key=f}for(o=0,a=n(l);o<c;++o)l[a[o]].index=o;return r(l,a),l}var e=nt([]),n=se,r=ae,i=tt;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:nt(Tt.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:nt(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?se:"function"==typeof e?e:nt(Tt.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?ae:e,t):r},t},ce=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}ae(t,e)}},le=function(t,e){if((s=t.length)>1)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},he=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}ae(t,e)}},fe=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=l[a-1][1]||0,d=(h-f)/2,p=0;p<s;++p){var m=t[e[p]],g=m[a][1]||0,v=m[a-1][1]||0;d+=g-v}u+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,ae(t,e)}},de=function(t){var e=t.map(et);return se(t).sort(function(t,n){return e[t]-e[n]})},pe=function(t){return de(t).reverse()},me=function(t){var e,n,r=t.length,i=t.map(et),o=se(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},ge=function(t){return se(t).reverse()};t.arc=pt,t.area=vt,t.line=gt,t.pie=bt,t.areaRadial=Et,t.radialArea=Et,t.lineRadial=wt,t.radialLine=wt,t.pointRadial=Mt,t.linkHorizontal=E,t.linkVertical=M,t.linkRadial=T,t.symbol=Wt,t.symbols=Vt,t.symbolCircle=St,t.symbolCross=Pt,t.symbolDiamond=Lt,t.symbolSquare=Dt,t.symbolStar=It,t.symbolTriangle=zt,t.symbolWye=Gt,t.curveBasisClosed=Zt,t.curveBasisOpen=Xt,t.curveBasis=Yt,t.curveBundle=Kt,t.curveCardinalClosed=Qt,t.curveCardinalOpen=$t,t.curveCardinal=Jt,t.curveCatmullRomClosed=ee,t.curveCatmullRomOpen=ne,t.curveCatmullRom=te,t.curveLinearClosed=re,t.curveLinear=mt,t.curveMonotoneX=Y,t.curveMonotoneY=Z,t.curveNatural=ie,t.curveStep=oe,t.curveStepAfter=$,t.curveStepBefore=Q,t.stack=ue,t.stackOffsetExpand=ce,t.stackOffsetDiverging=le,t.stackOffsetNone=ae,t.stackOffsetSilhouette=he,t.stackOffsetWiggle=fe,t.stackOrderAscending=de,t.stackOrderDescending=pe,t.stackOrderInsideOut=me,t.stackOrderNone=se,t.stackOrderReverse=ge,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-path":24}],32:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date((-1),t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function o(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date((+n)));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=gt[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function a(t,n){return function(o){var a,u,c=i(1900),l=s(c,t,o+="",0);if(l!=o.length)return null;if("Q"in c)return new Date(c.Q);if("p"in c&&(c.H=c.H%12+12*c.p),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(a=r(i(c.y)),u=a.getUTCDay(),a=u>4||0===u?e.utcMonday.ceil(a):e.utcMonday(a),a=e.utcDay.offset(a,7*(c.V-1)),c.y=a.getUTCFullYear(),c.m=a.getUTCMonth(),c.d=a.getUTCDate()+(c.w+6)%7):(a=n(i(c.y)),u=a.getDay(),a=u>4||0===u?e.timeMonday.ceil(a):e.timeMonday(a),a=e.timeDay.offset(a,7*(c.V-1)),c.y=a.getFullYear(),c.m=a.getMonth(),c.d=a.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?r(i(c.y)).getUTCDay():n(i(c.y)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):n(c)}}function s(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=Jt[i in gt?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function ft(t,e,n){var r=Ut.exec(e.slice(n));return r?(t.p=Bt[r[0].toLowerCase()],n+r[0].length):-1}function dt(t,e,n){var r=Gt.exec(e.slice(n));return r?(t.w=Vt[r[0].toLowerCase()],n+r[0].length):-1}function pt(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.w=Ht[r[0].toLowerCase()],n+r[0].length):-1}function mt(t,e,n){var r=Yt.exec(e.slice(n));return r?(t.m=Zt[r[0].toLowerCase()],n+r[0].length):-1}function vt(t,e,n){var r=Wt.exec(e.slice(n));return r?(t.m=qt[r[0].toLowerCase()],n+r[0].length):-1}function yt(t,e,n){return s(t,Ot,e,n)}function _t(t,e,n){return s(t,Rt,e,n)}function bt(t,e,n){return s(t,kt,e,n)}function xt(t){return Dt[t.getDay()]}function wt(t){return It[t.getDay()]}function Et(t){return zt[t.getMonth()]}function Mt(t){return jt[t.getMonth()]}function Tt(t){return Nt[+(t.getHours()>=12)]}function St(t){return Dt[t.getUTCDay()]}function Pt(t){return It[t.getUTCDay()]}function Ct(t){return zt[t.getUTCMonth()]}function At(t){return jt[t.getUTCMonth()]}function Lt(t){return Nt[+(t.getUTCHours()>=12)]}var Ot=t.dateTime,Rt=t.date,kt=t.time,Nt=t.periods,It=t.days,Dt=t.shortDays,jt=t.months,zt=t.shortMonths,Ut=u(Nt),Bt=c(Nt),Ft=u(It),Ht=c(It),Gt=u(Dt),Vt=c(Dt),Wt=u(jt),qt=c(jt),Yt=u(zt),Zt=c(zt),Xt={a:xt,A:wt,b:Et,B:Mt,c:null,d:A,e:A,f:N,H:L,I:O,j:R,L:k,m:I,M:D,p:Tt,Q:lt,s:ht,S:j,u:z,U:U,V:B,w:F,W:H,x:null,X:null,y:G,Y:V,Z:W,"%":ct},Kt={a:St,A:Pt,b:Ct,B:At,c:null,d:q,e:q,f:J,H:Y,I:Z,j:X,L:K,m:Q,M:$,p:Lt,Q:lt,s:ht,S:tt,u:et,U:nt,V:rt,w:it,W:ot,x:null,X:null,y:at,Y:st,Z:ut,"%":ct},Jt={a:dt,A:pt,b:mt,B:vt,c:yt,d:_,e:_,f:T,H:x,I:x,j:b,L:M,m:y,M:w,p:ft,Q:P,s:C,S:E,u:h,U:f,V:d,w:l,W:p,x:_t,X:bt,y:g,Y:m,Z:v,"%":S};return Xt.x=o(Rt,Xt),Xt.X=o(kt,Xt),Xt.c=o(Ot,Xt),Kt.x=o(Rt,Kt),Kt.X=o(kt,Kt),Kt.c=o(Ot,Kt),{format:function(t){var e=o(t+="",Xt);return e.toString=function(){return t},e},parse:function(t){var e=a(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var e=o(t+="",Kt);return e.toString=function(){return t},e},utcParse:function(t){var e=a(t,r);return e.toString=function(){return t},e}}}function a(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function s(t){return t.replace(_t,"\\$&")}function u(t){return new RegExp("^(?:"+t.map(s).join("|")+")","i")}function c(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function l(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function h(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function f(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function d(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function p(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function m(t,e,n){var r=vt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function g(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function b(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function x(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function w(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function E(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function M(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function T(t,e,n){var r=vt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function S(t,e,n){var r=yt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function P(t,e,n){var r=vt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function C(t,e,n){var r=vt.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function A(t,e){return a(t.getDate(),e,2)}function L(t,e){return a(t.getHours(),e,2)}function O(t,e){return a(t.getHours()%12||12,e,2)}function R(t,n){return a(1+e.timeDay.count(e.timeYear(t),t),n,3)}function k(t,e){return a(t.getMilliseconds(),e,3)}function N(t,e){return k(t,e)+"000"}function I(t,e){return a(t.getMonth()+1,e,2)}function D(t,e){return a(t.getMinutes(),e,2)}function j(t,e){return a(t.getSeconds(),e,2)}function z(t){var e=t.getDay();return 0===e?7:e}function U(t,n){return a(e.timeSunday.count(e.timeYear(t),t),n,2)}function B(t,n){var r=t.getDay();return t=r>=4||0===r?e.timeThursday(t):e.timeThursday.ceil(t),a(e.timeThursday.count(e.timeYear(t),t)+(4===e.timeYear(t).getDay()),n,2)}function F(t){return t.getDay()}function H(t,n){return a(e.timeMonday.count(e.timeYear(t),t),n,2)}function G(t,e){return a(t.getFullYear()%100,e,2)}function V(t,e){return a(t.getFullYear()%1e4,e,4)}function W(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function q(t,e){return a(t.getUTCDate(),e,2)}function Y(t,e){return a(t.getUTCHours(),e,2)}function Z(t,e){return a(t.getUTCHours()%12||12,e,2)}function X(t,n){return a(1+e.utcDay.count(e.utcYear(t),t),n,3)}function K(t,e){return a(t.getUTCMilliseconds(),e,3)}function J(t,e){return K(t,e)+"000"}function Q(t,e){return a(t.getUTCMonth()+1,e,2)}function $(t,e){return a(t.getUTCMinutes(),e,2)}function tt(t,e){return a(t.getUTCSeconds(),e,2)}function et(t){var e=t.getUTCDay();return 0===e?7:e}function nt(t,n){return a(e.utcSunday.count(e.utcYear(t),t),n,2)}function rt(t,n){var r=t.getUTCDay();return t=r>=4||0===r?e.utcThursday(t):e.utcThursday.ceil(t),a(e.utcThursday.count(e.utcYear(t),t)+(4===e.utcYear(t).getUTCDay()),n,2)}function it(t){return t.getUTCDay()}function ot(t,n){return a(e.utcMonday.count(e.utcYear(t),t),n,2)}function at(t,e){return a(t.getUTCFullYear()%100,e,2)}function st(t,e){return a(t.getUTCFullYear()%1e4,e,4)}function ut(){return"+0000"}function ct(){return"%"}function lt(t){return+t}function ht(t){return Math.floor(+t/1e3)}function ft(e){return mt=o(e),t.timeFormat=mt.format,t.timeParse=mt.parse,t.utcFormat=mt.utcFormat,t.utcParse=mt.utcParse,mt}function dt(t){return t.toISOString()}function pt(t){var e=new Date(t);return isNaN(e)?null:e}var mt,gt={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,yt=/^%/,_t=/[\\^$*+?|[\]().{}]/g;ft({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var bt="%Y-%m-%dT%H:%M:%S.%LZ",xt=Date.prototype.toISOString?dt:t.utcFormat(bt),wt=+new Date("2000-01-01T00:00:00.000Z")?pt:t.utcParse(bt);t.timeFormatDefaultLocale=ft,t.timeFormatLocale=o,t.isoFormat=xt,t.isoParse=wt,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-time":33}],33:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,n,r,a){function s(e){return t(e=new Date((+e))),e}return s.floor=s,s.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return n(t=new Date((+t)),null==e?1:Math.floor(e)),t},s.range=function(e,r,i){var o,a=[];if(e=s.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return a;do a.push(o=new Date((+e))),n(e,i),t(e);while(o<e&&e<r);return a},s.filter=function(r){return e(function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)},function(t,e){if(t>=t)if(e<0)for(;++e<=0;)for(;n(t,-1),!r(t););else for(;--e>=0;)for(;n(t,1),!r(t););})},r&&(s.count=function(e,n){return i.setTime(+e),o.setTime(+n),t(i),t(o),Math.floor(r(i,o))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}function n(t){return e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/f;
})}function r(t){return e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/f})}var i=new Date,o=new Date,a=e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):a:null};var s=a.range,u=1e3,c=6e4,l=36e5,h=864e5,f=6048e5,d=e(function(t){t.setTime(Math.floor(t/u)*u)},function(t,e){t.setTime(+t+e*u)},function(t,e){return(e-t)/u},function(t){return t.getUTCSeconds()}),p=d.range,m=e(function(t){t.setTime(Math.floor(t/c)*c)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getMinutes()}),g=m.range,v=e(function(t){var e=t.getTimezoneOffset()*c%l;e<0&&(e+=l),t.setTime(Math.floor((+t-e)/l)*l+e)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getHours()}),y=v.range,_=e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/h},function(t){return t.getDate()-1}),b=_.range,x=n(0),w=n(1),E=n(2),M=n(3),T=n(4),S=n(5),P=n(6),C=x.range,A=w.range,L=E.range,O=M.range,R=T.range,k=S.range,N=P.range,I=e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),D=I.range,j=e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});j.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var z=j.range,U=e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getUTCMinutes()}),B=U.range,F=e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getUTCHours()}),H=F.range,G=e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/h},function(t){return t.getUTCDate()-1}),V=G.range,W=r(0),q=r(1),Y=r(2),Z=r(3),X=r(4),K=r(5),J=r(6),Q=W.range,$=q.range,tt=Y.range,et=Z.range,nt=X.range,rt=K.range,it=J.range,ot=e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),at=ot.range,st=e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});st.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ut=st.range;t.timeInterval=e,t.timeMillisecond=a,t.timeMilliseconds=s,t.utcMillisecond=a,t.utcMilliseconds=s,t.timeSecond=d,t.timeSeconds=p,t.utcSecond=d,t.utcSeconds=p,t.timeMinute=m,t.timeMinutes=g,t.timeHour=v,t.timeHours=y,t.timeDay=_,t.timeDays=b,t.timeWeek=x,t.timeWeeks=C,t.timeSunday=x,t.timeSundays=C,t.timeMonday=w,t.timeMondays=A,t.timeTuesday=E,t.timeTuesdays=L,t.timeWednesday=M,t.timeWednesdays=O,t.timeThursday=T,t.timeThursdays=R,t.timeFriday=S,t.timeFridays=k,t.timeSaturday=P,t.timeSaturdays=N,t.timeMonth=I,t.timeMonths=D,t.timeYear=j,t.timeYears=z,t.utcMinute=U,t.utcMinutes=B,t.utcHour=F,t.utcHours=H,t.utcDay=G,t.utcDays=V,t.utcWeek=W,t.utcWeeks=Q,t.utcSunday=W,t.utcSundays=Q,t.utcMonday=q,t.utcMondays=$,t.utcTuesday=Y,t.utcTuesdays=tt,t.utcWednesday=Z,t.utcWednesdays=et,t.utcThursday=X,t.utcThursdays=nt,t.utcFriday=K,t.utcFridays=rt,t.utcSaturday=J,t.utcSaturdays=it,t.utcMonth=ot,t.utcMonths=at,t.utcYear=st,t.utcYears=ut,Object.defineProperty(t,"__esModule",{value:!0})})},{}],34:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){return v||(b(n),v=_.now()+y)}function n(){v=0}function r(){this._call=this._time=this._next=null}function i(t,e,n){var i=new r;return i.restart(t,e,n),i}function o(){e(),++f;for(var t,n=l;n;)(t=v-n._time)>=0&&n._call.call(null,t),n=n._next;--f}function a(){v=(g=_.now())+y,f=d=0;try{o()}finally{f=0,u(),v=0}}function s(){var t=_.now(),e=t-g;e>m&&(y-=e,g=t)}function u(){for(var t,e,n=l,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:l=e);h=t,c(r)}function c(t){if(!f){d&&(d=clearTimeout(d));var e=t-v;e>24?(t<1/0&&(d=setTimeout(a,t-_.now()-y)),p&&(p=clearInterval(p))):(p||(g=_.now(),p=setInterval(s,m)),f=1,b(a))}}var l,h,f=0,d=0,p=0,m=1e3,g=0,v=0,y=0,_="object"==typeof performance&&performance.now?performance:Date,b="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};r.prototype=i.prototype={constructor:r,restart:function(t,n,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?e():+r)+(null==n?0:+n),this._next||h===this||(h?h._next=this:l=this,h=this),this._call=t,this._time=r,c()},stop:function(){this._call&&(this._call=null,this._time=1/0,c())}};var x=function(t,e,n){var i=new r;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},w=function(t,n,i){var o=new r,a=n;return null==n?(o.restart(t,n,i),o):(n=+n,i=null==i?e():+i,o.restart(function e(r){r+=a,o.restart(e,a+=n,i),t(r)},n,i),o)};t.now=e,t.timer=i,t.timerFlush=o,t.timeout=x,t.interval=w,Object.defineProperty(t,"__esModule",{value:!0})})},{}],35:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-timer"),t("d3-interpolate"),t("d3-color"),t("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a){"use strict";function s(t,e){var n=c(t,e);if(n.state>G)throw new Error("too late; already scheduled");return n}function u(t,e){var n=c(t,e);if(n.state>W)throw new Error("too late; already started");return n}function c(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function l(t,e,n){function i(t){n.state=V,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(i){var l,h,f,d;if(n.state!==V)return s();for(l in c)if(d=c[l],d.name===n.name){if(d.state===q)return r.timeout(o);d.state===Y?(d.state=X,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete c[l]):+l<e&&(d.state=X,d.timer.stop(),delete c[l])}if(r.timeout(function(){n.state===q&&(n.state=Y,n.timer.restart(a,n.delay,n.time),a(i))}),n.state=W,n.on.call("start",t,t.__data__,n.index,n.group),n.state===W){for(n.state=q,u=new Array(f=n.tween.length),l=0,h=-1;l<f;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(u[++h]=d);u.length=h+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=Z,1),i=-1,o=u.length;++i<o;)u[i].call(null,r);n.state===Z&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=X,n.timer.stop(),delete c[e];for(var r in c)return;delete t.__transition}var u,c=t.__transition;c[e]=n,n.timer=r.timer(i,0,n.time)}function h(t,e){var n,r;return function(){var i=u(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function f(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=u(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function d(t,e,n){var r=t._id;return t.each(function(){var t=u(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return c(t,r).value[e]}}function p(t){return function(){this.removeAttribute(t)}}function m(t){return function(){this.removeAttributeNS(t.space,t.local)}}function g(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function v(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function y(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttribute(t):(a=this.getAttribute(t),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function _(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function b(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function x(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function w(t,e){return function(){s(this,t).delay=+e.apply(this,arguments)}}function E(t,e){return e=+e,function(){s(this,t).delay=e}}function M(t,e){return function(){u(this,t).duration=+e.apply(this,arguments)}}function T(t,e){return e=+e,function(){u(this,t).duration=e}}function S(t,e){if("function"!=typeof e)throw new Error;return function(){u(this,t).ease=e}}function P(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function C(t,e,n){var r,i,o=P(e)?s:u;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function A(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function L(t,n){var r,i,o;return function(){var a=e.style(this,t),s=(this.style.removeProperty(t),e.style(this,t));return a===s?null:a===r&&s===i?o:o=n(r=a,i=s)}}function O(t){return function(){this.style.removeProperty(t)}}function R(t,n,r){var i,o;return function(){var a=e.style(this,t);return a===r?null:a===i?o:o=n(i=a,r)}}function k(t,n,r){var i,o,a;return function(){var s=e.style(this,t),u=r(this);return null==u&&(this.style.removeProperty(t),u=e.style(this,t)),s===u?null:s===i&&u===o?a:a=n(i=s,o=u)}}function N(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function I(t){return function(){this.textContent=t}}function D(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function j(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function z(t){return e.selection().transition(t)}function U(){return++yt}function B(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return bt.time=r.now(),bt;return n}var F=n.dispatch("start","end","interrupt"),H=[],G=0,V=1,W=2,q=3,Y=4,Z=5,X=6,K=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};l(t,n,{name:e,index:r,group:i,on:F,tween:H,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:G})},J=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>W&&n.state<Z,n.state=X,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Q=function(t){return this.each(function(){J(this,t)})},$=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=c(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?h:f)(n,t,e))},tt=function(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof o.color?i.interpolateRgb:(n=o.color(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)},et=function(t,n){var r=e.namespace(t),o="transform"===r?i.interpolateTransformSvg:tt;return this.attrTween(t,"function"==typeof n?(r.local?_:y)(r,o,d(this,"attr."+t,n)):null==n?(r.local?m:p)(r):(r.local?v:g)(r,o,n+""))},nt=function(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var i=e.namespace(t);return this.tween(r,(i.local?b:x)(i,n))},rt=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?w:E)(e,t)):c(this.node(),e).delay},it=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?M:T)(e,t)):c(this.node(),e).duration},ot=function(t){var e=this._id;return arguments.length?this.each(S(e,t)):c(this.node(),e).ease},at=function(t){"function"!=typeof t&&(t=e.matcher(t));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a,s=n[o],u=s.length,c=i[o]=[],l=0;l<u;++l)(a=s[l])&&t.call(a,a.__data__,l,s)&&c.push(a);return new j(i,this._parents,this._name,this._id)},st=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new j(a,this._parents,this._name,this._id)},ut=function(t,e){var n=this._id;return arguments.length<2?c(this.node(),n).on.on(t):this.each(C(n,t,e))},ct=function(){return this.on("end.remove",A(this._id))},lt=function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selector(t));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var u,l,h=i[s],f=h.length,d=a[s]=new Array(f),p=0;p<f;++p)(u=h[p])&&(l=t.call(u,u.__data__,p,h))&&("__data__"in u&&(l.__data__=u.__data__),d[p]=l,K(d[p],n,r,p,d,c(u,r)));return new j(a,this._parents,n,r)},ht=function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selectorAll(t));for(var i=this._groups,o=i.length,a=[],s=[],u=0;u<o;++u)for(var l,h=i[u],f=h.length,d=0;d<f;++d)if(l=h[d]){for(var p,m=t.call(l,l.__data__,d,h),g=c(l,r),v=0,y=m.length;v<y;++v)(p=m[v])&&K(p,n,r,v,m,g);a.push(m),s.push(l)}return new j(a,s,n,r)},ft=e.selection.prototype.constructor,dt=function(){return new ft(this._groups,this._parents)},pt=function(t,e,n){var r="transform"==(t+="")?i.interpolateTransformCss:tt;return null==e?this.styleTween(t,L(t,r)).on("end.style."+t,O(t)):this.styleTween(t,"function"==typeof e?k(t,r,d(this,"style."+t,e)):R(t,r,e+""),n)},mt=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,N(t,e,null==n?"":n))},gt=function(t){return this.tween("text","function"==typeof t?D(d(this,"text",t)):I(null==t?"":t+""))},vt=function(){for(var t=this._name,e=this._id,n=U(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var h=c(a,e);K(a,t,n,l,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new j(r,this._parents,t,n)},yt=0,_t=e.selection.prototype;j.prototype=z.prototype={constructor:j,select:lt,selectAll:ht,filter:at,merge:st,selection:dt,transition:vt,call:_t.call,nodes:_t.nodes,node:_t.node,size:_t.size,empty:_t.empty,each:_t.each,on:ut,attr:et,attrTween:nt,style:pt,styleTween:mt,text:gt,remove:ct,tween:$,delay:rt,duration:it,ease:ot};var bt={time:null,delay:0,duration:250,ease:a.easeCubicInOut},xt=function(t){var e,n;t instanceof j?(e=t._id,t=t._name):(e=U(),(n=bt).time=r.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s,u=i[a],c=u.length,l=0;l<c;++l)(s=u[l])&&K(s,t,e,l,u,n||B(s,e));return new j(i,this._parents,t,e)};e.selection.prototype.interrupt=Q,e.selection.prototype.transition=xt;var wt=[null],Et=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>V&&n.name===e)return new j([[t]],wt,e,(+r))}return null};t.transition=z,t.active=Et,t.interrupt=J,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":12,"d3-dispatch":14,"d3-ease":17,"d3-interpolate":23,"d3-selection":30,"d3-timer":34}],36:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return t[0]}function n(t){return t[1]}function r(){this._=null}function i(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function o(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function a(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function s(t){for(;t.L;)t=t.L;return t}function u(t,e,n,r){var i=[null,null],o=z.push(i)-1;return i.left=t,i.right=e,n&&l(i,t,e,n),r&&l(i,e,t,r),D[t.index].halfedges.push(o),D[e.index].halfedges.push(o),i}function c(t,e,n){var r=[e,n];return r.left=t,r}function l(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function h(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],h=s[1],f=0,d=1,p=l-u,m=h-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}if(o=n-c,m||!(o>0)){if(o/=m,m<0){if(o<f)return;o<d&&(d=o)}else if(m>0){if(o>d)return;o>f&&(f=o)}if(o=i-c,m||!(o<0)){if(o/=m,m<0){if(o>d)return;o>f&&(f=o)}else if(m>0){if(o<f)return;o<d&&(d=o)}return!(f>0||d<1)||(f>0&&(t[0]=[u+f*p,c+f*m]),d<1&&(t[1]=[u+d*p,c+d*m]),!0)}}}}}function f(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||m>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(a=(h-d)/(p-f),s=g-a*m,a<-1||a>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function d(t,e,n,r){for(var i,o=z.length;o--;)f(i=z[o],t,e,n,r)&&h(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>F||Math.abs(i[0][1]-i[1][1])>F)||delete z[o]}function p(t){return D[t.index]={site:t,halfedges:[]}}function m(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function g(t,e){return e[+(e.left!==t.site)]}function v(t,e){return e[+(e.left===t.site)]}function y(){for(var t,e,n,r,i=0,o=D.length;i<o;++i)if((t=D[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=m(t,z[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function _(t,e,n,r){var i,o,a,s,u,l,h,f,d,p,m,y,_=D.length,b=!0;for(i=0;i<_;++i)if(o=D[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)z[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=v(o,z[u[s]]),m=p[0],y=p[1],h=g(o,z[u[++s%l]]),f=h[0],d=h[1],(Math.abs(m-f)>F||Math.abs(y-d)>F)&&(u.splice(s,0,z.push(c(a,p,Math.abs(m-t)<F&&r-y>F?[t,Math.abs(f-t)<F?d:r]:Math.abs(y-r)<F&&n-m>F?[Math.abs(d-r)<F?f:n,r]:Math.abs(m-n)<F&&y-e>F?[n,Math.abs(f-n)<F?d:e]:Math.abs(y-e)<F&&m-t>F?[Math.abs(d-e)<F?f:t,e]:null))-1),++l);l&&(b=!1)}if(b){var x,w,E,M=1/0;for(i=0,b=null;i<_;++i)(o=D[i])&&(a=o.site,x=a[0]-t,w=a[1]-e,E=x*x+w*w,E<M&&(M=E,b=o));if(b){var T=[t,e],S=[t,r],P=[n,r],C=[n,e];b.halfedges.push(z.push(c(a=b.site,T,S))-1,z.push(c(a,S,P))-1,z.push(c(a,P,C))-1,z.push(c(a,C,T))-1)}}for(i=0;i<_;++i)(o=D[i])&&(o.halfedges.length||delete D[i])}function b(){i(this),this.x=this.y=this.arc=this.site=this.cy=null}function x(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-H)){var d=u*u+c*c,p=l*l+h*h,m=(h*d-c*p)/f,g=(u*p-l*d)/f,v=U.pop()||new b;v.arc=t,v.site=i,v.x=m+a,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,_=j._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}j.insert(y,v),y||(N=v)}}}}function w(t){var e=t.circle;e&&(e.P||(N=e.N),j.remove(e),U.push(e),i(e),t.circle=null)}function E(){i(this),this.edge=this.site=this.circle=null}function M(t){var e=B.pop()||new E;return e.site=t,e}function T(t){w(t),I.remove(t),B.push(t),i(t)}function S(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];T(t);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<F&&Math.abs(r-c.circle.cy)<F;)o=c.P,s.unshift(c),T(c),c=o;s.unshift(c),w(c);for(var h=a;h.circle&&Math.abs(n-h.circle.x)<F&&Math.abs(r-h.circle.cy)<F;)a=h.N,s.push(h),T(h),h=a;s.push(h),w(h);var f,d=s.length;for(f=1;f<d;++f)h=s[f],c=s[f-1],l(h.edge,c.site,h.site,i);c=s[0],h=s[d-1],h.edge=u(c.site,h.site,null,i),x(c),x(h)}function P(t){for(var e,n,r,i,o=t[0],a=t[1],s=I._;s;)if(r=C(s,a)-o,r>F)s=s.L;else{if(i=o-A(s,a),!(i>F)){r>-F?(e=s.P,n=s):i>-F?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}p(t);var c=M(t);if(I.insert(e,c),e||n){if(e===n)return w(e),n=M(e.site),I.insert(c,n),c.edge=n.edge=u(e.site,c.site),x(e),void x(n);if(!n)return void(c.edge=u(e.site,c.site));w(e),w(n);var h=e.site,f=h[0],d=h[1],m=t[0]-f,g=t[1]-d,v=n.site,y=v[0]-f,_=v[1]-d,b=2*(m*_-g*y),E=m*m+g*g,T=y*y+_*_,S=[(_*E-g*T)/b+f,(m*T-y*E)/b+d];l(n.edge,h,v,S),c.edge=u(h,t,null,S),n.edge=u(t,v,null,S),x(e),x(n)}}function C(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function A(t,e){var n=t.N;if(n)return C(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function L(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function O(t,e){return e[1]-t[1]||e[0]-t[0]}function R(t,e){var n,i,o,a=t.sort(O).pop();for(z=[],D=new Array(t.length),I=new r,j=new r;;)if(o=N,a&&(!o||a[1]<o.y||a[1]===o.y&&a[0]<o.x))a[0]===n&&a[1]===i||(P(a),n=a[0],i=a[1]),a=t.pop();else{if(!o)break;S(o.arc)}if(y(),e){var s=+e[0][0],u=+e[0][1],c=+e[1][0],l=+e[1][1];d(s,u,c,l),_(s,u,c,l)}this.edges=z,this.cells=D,I=j=z=D=null}var k=function(t){return function(){return t}};r.prototype={constructor:r,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=s(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(o(this,n),t=n,n=t.U),n.C=!1,r.C=!0,a(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(a(this,n),t=n,n=t.U),n.C=!1,r.C=!0,o(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,u=t.L,c=t.R;if(n=u?c?s(c):u:c,i?i.L===t?i.L=n:i.R=n:this._=n,u&&c?(r=n.C,n.C=t.C,n.L=u,u.U=n,n!==c?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=c,c.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,o(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,a(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,o(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,a(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,o(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,a(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var N,I,D,j,z,U=[],B=[],F=1e-6,H=1e-12;R.prototype={constructor:R,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return g(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&L(s,a,l)<0&&t.push([s.data,a.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}});while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var G=function(){function t(t){return new R(t.map(function(e,n){var o=[Math.round(r(e,n,t)/F)*F,Math.round(i(e,n,t)/F)*F];return o.index=n,o.data=e,o}),o)}var r=e,i=n,o=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(e){return arguments.length?(r="function"==typeof e?e:k(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:k(+e),t):i},t.extent=function(e){return arguments.length?(o=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},t.size=function(e){return arguments.length?(o=null==e?null:[[0,0],[+e[0],+e[1]]],t):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},t};t.voronoi=G,Object.defineProperty(t,"__esModule",{value:!0})})},{}],37:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(t,e,n){this.target=t,this.type=e,this.transform=n}function s(t,e,n){this.k=t,this.x=e,this.y=n}function u(t){return t.__zoom||v}function c(){i.event.stopImmediatePropagation()}function l(){return!i.event.button}function h(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function f(){return this.__zoom||v}function d(){return-i.event.deltaY*(i.event.deltaMode?120:1)/500}function p(){return"ontouchstart"in this}function m(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var g=function(t){return function(){return t}};s.prototype={constructor:s,scale:function(t){return 1===t?this:new s(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new s(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var v=new s(1,0,0);u.prototype=s.prototype;var y=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},_=function(){function t(t){t.property("__zoom",f).on("wheel.zoom",M).on("mousedown.zoom",T).on("dblclick.zoom",S).filter(D).on("touchstart.zoom",P).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){return e=Math.max(j[0],Math.min(j[1],e)),e===t.k?t:new s(e,t.x,t.y)}function _(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new s(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=w(t,r),o=k.apply(t,r),a=n||b(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=t.__zoom,l="function"==typeof e?e.apply(t,r):e,h=B(c.invert(a).concat(u/c.k),l.invert(a).concat(u/l.k));return function(t){if(1===t)t=l;else{var e=h(t),n=u/e[2];t=new s(n,a[0]-e[0]*n,a[1]-e[1]*n)}i.zoom(null,t)}})}function w(t,e){for(var n,r=0,i=F.length;r<i;++r)if((n=F[r]).that===t)return n;return new E(t,e)}function E(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=k.apply(t,e)}function M(){function t(){e.wheel=null,e.end()}if(R.apply(this,arguments)){var e=w(this,arguments),n=this.__zoom,r=Math.max(j[0],Math.min(j[1],n.k*Math.pow(2,I.apply(this,arguments)))),a=i.mouse(this);if(e.wheel)e.mouse[0][0]===a[0]&&e.mouse[0][1]===a[1]||(e.mouse[1]=n.invert(e.mouse[0]=a)),clearTimeout(e.wheel);else{if(n.k===r)return;e.mouse=[a,n.invert(a)],o.interrupt(this),e.start()}y(),e.wheel=setTimeout(t,V),e.zoom("mouse",N(_(u(n,r),e.mouse[0],e.mouse[1]),e.extent,z))}}function T(){function t(){if(y(),!r.moved){var t=i.event.clientX-u,e=i.event.clientY-l;r.moved=t*t+e*e>W}r.zoom("mouse",N(_(r.that.__zoom,r.mouse[0]=i.mouse(r.that),r.mouse[1]),r.extent,z))}function e(){a.on("mousemove.zoom mouseup.zoom",null),n.dragEnable(i.event.view,r.moved),y(),r.end()}if(!O&&R.apply(this,arguments)){var r=w(this,arguments),a=i.select(i.event.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",e,!0),s=i.mouse(this),u=i.event.clientX,l=i.event.clientY;n.dragDisable(i.event.view),c(),r.mouse=[s,this.__zoom.invert(s)],o.interrupt(this),r.start()}}function S(){if(R.apply(this,arguments)){var e=this.__zoom,n=i.mouse(this),r=e.invert(n),o=e.k*(i.event.shiftKey?.5:2),a=N(_(u(e,o),n,r),k.apply(this,arguments),z);y(),U>0?i.select(this).transition().duration(U).call(x,a,n):i.select(this).call(t.transform,a)}}function P(){if(R.apply(this,arguments)){var t,e,n,r,a=w(this,arguments),s=i.event.changedTouches,u=s.length;for(c(),e=0;e<u;++e)n=s[e],r=i.touch(this,s,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],a.touch0?a.touch1||(a.touch1=r):(a.touch0=r,t=!0);return L&&(L=clearTimeout(L),!a.touch1)?(a.end(),r=i.select(this).on("dblclick.zoom"),void(r&&r.apply(this,arguments))):void(t&&(L=setTimeout(function(){L=null},G),o.interrupt(this),a.start()))}}function C(){var t,e,n,r,o=w(this,arguments),a=i.event.changedTouches,s=a.length;for(y(),L&&(L=clearTimeout(L)),t=0;t<s;++t)e=a[t],n=i.touch(this,a,e.identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var c=o.touch0[0],l=o.touch0[1],h=o.touch1[0],f=o.touch1[1],d=(d=h[0]-c[0])*d+(d=h[1]-c[1])*d,p=(p=f[0]-l[0])*p+(p=f[1]-l[1])*p;e=u(e,Math.sqrt(d/p)),n=[(c[0]+h[0])/2,(c[1]+h[1])/2],r=[(l[0]+f[0])/2,(l[1]+f[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",N(_(e,n,r),o.extent,z))}function A(){var t,e,n=w(this,arguments),r=i.event.changedTouches,o=r.length;for(c(),O&&clearTimeout(O),O=setTimeout(function(){O=null},G),t=0;t<o;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var L,O,R=l,k=h,N=m,I=d,D=p,j=[0,1/0],z=[[-(1/0),-(1/0)],[1/0,1/0]],U=250,B=r.interpolateZoom,F=[],H=e.dispatch("start","zoom","end"),G=500,V=150,W=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",f),t!==n?x(t,e):n.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end();
})},t.scaleBy=function(e,n){t.scaleTo(e,function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e})},t.scaleTo=function(e,n){t.transform(e,function(){var t=k.apply(this,arguments),e=this.__zoom,r=b(t),i=e.invert(r),o="function"==typeof n?n.apply(this,arguments):n;return N(_(u(e,o),r,i),t,z)})},t.translateBy=function(e,n,r){t.transform(e,function(){return N(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),k.apply(this,arguments),z)})},t.translateTo=function(e,n,r){t.transform(e,function(){var t=k.apply(this,arguments),e=this.__zoom,i=b(t);return N(v.translate(i[0],i[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),t,z)})},E.prototype={start:function(){return 1===++this.active&&(this.index=F.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(F.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){i.customEvent(new a(t,e,this.that.__zoom),H.apply,H,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(I="function"==typeof e?e:g(+e),t):I},t.filter=function(e){return arguments.length?(R="function"==typeof e?e:g(!!e),t):R},t.touchable=function(e){return arguments.length?(D="function"==typeof e?e:g(!!e),t):D},t.extent=function(e){return arguments.length?(k="function"==typeof e?e:g([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):k},t.scaleExtent=function(e){return arguments.length?(j[0]=+e[0],j[1]=+e[1],t):[j[0],j[1]]},t.translateExtent=function(e){return arguments.length?(z[0][0]=+e[0][0],z[1][0]=+e[1][0],z[0][1]=+e[0][1],z[1][1]=+e[1][1],t):[[z[0][0],z[0][1]],[z[1][0],z[1][1]]]},t.constrain=function(e){return arguments.length?(N=e,t):N},t.duration=function(e){return arguments.length?(U=+e,t):U},t.interpolate=function(e){return arguments.length?(B=e,t):B},t.on=function(){var e=H.on.apply(H,arguments);return e===H?t:e},t.clickDistance=function(e){return arguments.length?(W=(e=+e)*e,t):Math.sqrt(W)},t};t.zoom=_,t.zoomTransform=u,t.zoomIdentity=v,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":14,"d3-drag":15,"d3-interpolate":23,"d3-selection":30,"d3-transition":35}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-array"),i=t("d3-axis"),o=t("d3-brush"),a=t("d3-chord"),s=t("d3-collection"),u=t("d3-color"),c=t("d3-contour"),l=t("d3-dispatch"),h=t("d3-drag"),f=t("d3-dsv"),d=t("d3-ease"),p=t("d3-fetch"),m=t("d3-force"),g=t("d3-format"),v=t("d3-geo"),y=t("d3-hierarchy"),_=t("d3-interpolate"),b=t("d3-path"),x=t("d3-polygon"),w=t("d3-quadtree"),E=t("d3-random"),M=t("d3-scale"),T=t("d3-scale-chromatic"),S=t("d3-selection"),P=t("d3-shape"),C=t("d3-time"),A=t("d3-time-format"),L=t("d3-timer"),O=t("d3-transition"),R=t("d3-voronoi"),k=t("d3-zoom"),N="5.4.0";Object.keys(r).forEach(function(t){n[t]=r[t]}),Object.keys(i).forEach(function(t){n[t]=i[t]}),Object.keys(o).forEach(function(t){n[t]=o[t]}),Object.keys(a).forEach(function(t){n[t]=a[t]}),Object.keys(s).forEach(function(t){n[t]=s[t]}),Object.keys(u).forEach(function(t){n[t]=u[t]}),Object.keys(c).forEach(function(t){n[t]=c[t]}),Object.keys(l).forEach(function(t){n[t]=l[t]}),Object.keys(h).forEach(function(t){n[t]=h[t]}),Object.keys(f).forEach(function(t){n[t]=f[t]}),Object.keys(d).forEach(function(t){n[t]=d[t]}),Object.keys(p).forEach(function(t){n[t]=p[t]}),Object.keys(m).forEach(function(t){n[t]=m[t]}),Object.keys(g).forEach(function(t){n[t]=g[t]}),Object.keys(v).forEach(function(t){n[t]=v[t]}),Object.keys(y).forEach(function(t){n[t]=y[t]}),Object.keys(_).forEach(function(t){n[t]=_[t]}),Object.keys(b).forEach(function(t){n[t]=b[t]}),Object.keys(x).forEach(function(t){n[t]=x[t]}),Object.keys(w).forEach(function(t){n[t]=w[t]}),Object.keys(E).forEach(function(t){n[t]=E[t]}),Object.keys(M).forEach(function(t){n[t]=M[t]}),Object.keys(T).forEach(function(t){n[t]=T[t]}),Object.keys(S).forEach(function(t){n[t]=S[t]}),Object.keys(P).forEach(function(t){n[t]=P[t]}),Object.keys(C).forEach(function(t){n[t]=C[t]}),Object.keys(A).forEach(function(t){n[t]=A[t]}),Object.keys(L).forEach(function(t){n[t]=L[t]}),Object.keys(O).forEach(function(t){n[t]=O[t]}),Object.keys(R).forEach(function(t){n[t]=R[t]}),Object.keys(k).forEach(function(t){n[t]=k[t]}),n.version=N,Object.defineProperty(n,"event",{get:function(){return S.event}})},{"d3-array":7,"d3-axis":8,"d3-brush":9,"d3-chord":10,"d3-collection":11,"d3-color":12,"d3-contour":13,"d3-dispatch":14,"d3-drag":15,"d3-dsv":16,"d3-ease":17,"d3-fetch":18,"d3-force":19,"d3-format":20,"d3-geo":21,"d3-hierarchy":22,"d3-interpolate":23,"d3-path":24,"d3-polygon":25,"d3-quadtree":26,"d3-random":27,"d3-scale":29,"d3-scale-chromatic":28,"d3-selection":30,"d3-shape":31,"d3-time":33,"d3-time-format":32,"d3-timer":34,"d3-transition":35,"d3-voronoi":36,"d3-zoom":37}],39:[function(t,e,n){!function(t,n){"use strict";"function"==typeof define&&define.amd?define(n):"object"==typeof e&&e.exports?e.exports=n():t.matchesSelector=n()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0;n<e.length;n++){var r=e[n],i=r+"MatchesSelector";if(t[i])return i}}();return function(e,n){return e[t](n)}})},{}],40:[function(t,e,n){"use strict";var r=e.exports={};r.isIE=function(t){function e(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!==-1||t.indexOf("trident")!==-1||t.indexOf(" edge/")!==-1}if(!e())return!1;if(!t)return!0;var n=function(){var t,e=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(r[0]);return e>4?e:t}();return t===n},r.isLegacyOpera=function(){return!!window.opera}},{}],41:[function(t,e,n){"use strict";var r=e.exports={};r.forEach=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}}},{}],42:[function(t,e,n){"use strict";var r=t("../browser-detector");e.exports=function(t){function e(t,e){function n(){e(t)}if(!i(t))throw new Error("Element is not detectable by this strategy.");if(r.isIE(8))u(t).object={proxy:n},t.attachEvent("onresize",n);else{var o=i(t);o.contentDocument.defaultView.addEventListener("resize",n)}}function n(t,e,n){function i(t,e){function n(){function n(){if("static"===c.position){t.style.position="relative";var e=function(t,e,n,r){function i(t){return t.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};e(a,t,c,"top"),e(a,t,c,"right"),e(a,t,c,"bottom"),e(a,t,c,"left")}}function s(){function r(t,e){return t.contentDocument?void e(t.contentDocument):void setTimeout(function(){r(t,e)},100)}o||n();var i=this;r(i,function(n){e(t)})}""!==c.position&&(n(c),o=!0);var l=document.createElement("object");l.style.cssText=i,l.tabIndex=-1,l.type="text/html",l.onload=s,r.isIE()||(l.data="about:blank"),t.appendChild(l),u(t).object=l,r.isIE()&&(l.data="about:blank")}var i="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",o=!1,c=window.getComputedStyle(t),l=t.offsetWidth,h=t.offsetHeight;u(t).startSize={width:l,height:h},s?s.add(n):n()}n||(n=e,e=t,t=null),t=t||{};t.debug;r.isIE(8)?n(e):i(e,n)}function i(t){return u(t).object}function o(t){r.isIE(8)?t.detachEvent("onresize",u(t).object.proxy):t.removeChild(i(t)),delete u(t).object}t=t||{};var a=t.reporter,s=t.batchProcessor,u=t.stateHandler.getState;if(!a)throw new Error("Missing required dependency: reporter.");return{makeDetectable:n,addListener:e,uninstall:o}}},{"../browser-detector":40}],43:[function(t,e,n){"use strict";var r=t("../collection-utils").forEach;e.exports=function(t){function e(){var t=500,e=500,n=document.createElement("div");n.style.cssText="position: absolute; width: "+2*t+"px; height: "+2*e+"px; visibility: hidden; margin: 0; padding: 0;";var r=document.createElement("div");r.style.cssText="position: absolute; width: "+t+"px; height: "+e+"px; overflow: scroll; visibility: none; top: "+3*-t+"px; left: "+3*-e+"px; visibility: hidden; margin: 0; padding: 0;",r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var i=t-r.clientWidth,o=e-r.clientHeight;return document.body.removeChild(r),{width:i,height:o}}function n(t,e){function n(e,n){n=n||function(t){document.head.appendChild(t)};var r=document.createElement("style");return r.innerHTML=e,r.id=t,n(r),r}if(!document.getElementById(t)){var r=e+"_animation",i=e+"_animation_active",o="/* Created by the element-resize-detector library. */\n";o+="."+e+" > div::-webkit-scrollbar { display: none; }\n\n",o+="."+i+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+r+"; animation-name: "+r+"; }\n",o+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",o+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",n(o)}}function i(t){t.className+=" "+y+"_animation_active"}function o(t,e,n){if(t.addEventListener)t.addEventListener(e,n);else{if(!t.attachEvent)return f.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+e,n)}}function a(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n);else{if(!t.detachEvent)return f.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+e,n)}}function s(t){return p(t).container.childNodes[0].childNodes[0].childNodes[0]}function u(t){return p(t).container.childNodes[0].childNodes[0].childNodes[1]}function c(t,e){var n=p(t).listeners;if(!n.push)throw new Error("Cannot add listener to an element that is not detectable.");p(t).listeners.push(e)}function l(t,e,n){function a(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(m.get(e),"Scroll: "),f.log.apply)f.log.apply(null,n);else for(var r=0;r<n.length;r++)f.log(n[r])}}function c(t){function e(t){return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)}return!e(t)||null===window.getComputedStyle(t)}function l(t){var e=p(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||n.width.indexOf("px")===-1}function h(){var t=window.getComputedStyle(e),n={};return n.position=t.position,n.width=e.offsetWidth,n.height=e.offsetHeight,n.top=t.top,n.right=t.right,n.bottom=t.bottom,n.left=t.left,n.widthCSS=t.width,n.heightCSS=t.height,n}function v(){var t=h();p(e).startSize={width:t.width,height:t.height},a("Element start size",p(e).startSize)}function _(){p(e).listeners=[]}function b(){if(a("storeStyle invoked."),!p(e))return void a("Aborting because element has been uninstalled");var t=h();p(e).style=t}function x(t,e,n){p(t).lastWidth=e,p(t).lastHeight=n}function w(t){return s(t).childNodes[0]}function E(){return 2*g.width+1}function M(){return 2*g.height+1}function T(t){return t+10+E()}function S(t){return t+10+M()}function P(t){return 2*t+E()}function C(t){return 2*t+M()}function A(t,e,n){var r=s(t),i=u(t),o=T(e),a=S(n),c=P(e),l=C(n);r.scrollLeft=o,r.scrollTop=a,i.scrollLeft=c,i.scrollTop=l}function L(){var t=p(e).container;if(!t){t=document.createElement("div"),t.className=y,t.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",p(e).container=t,i(t),e.appendChild(t);var n=function(){p(e).onRendered&&p(e).onRendered()};o(t,"animationstart",n),p(e).onAnimationStart=n}return t}function O(){function t(){var t=p(e).style;if("static"===t.position){e.style.position="relative";var n=function(t,e,n,r){function i(t){return t.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};n(f,e,t,"top"),n(f,e,t,"right"),n(f,e,t,"bottom"),n(f,e,t,"left")}}function n(t,e,n,r){return t=t?t+"px":"0",e=e?e+"px":"0",n=n?n+"px":"0",r=r?r+"px":"0","left: "+t+"; top: "+e+"; right: "+r+"; bottom: "+n+";"}function r(){p(e).onExpand&&p(e).onExpand()}function i(){p(e).onShrink&&p(e).onShrink()}if(a("Injecting elements"),!p(e))return void a("Aborting because element has been uninstalled");t();var s=p(e).container;s||(s=L());var u=g.width,c=g.height,l="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",h="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+n(-(1+u),-(1+c),-c,-u),d="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",m="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",v="position: absolute; left: 0; top: 0;",_="position: absolute; width: 200%; height: 200%;",b=document.createElement("div"),x=document.createElement("div"),w=document.createElement("div"),E=document.createElement("div"),M=document.createElement("div"),T=document.createElement("div");b.dir="ltr",b.style.cssText=l,b.className=y,x.className=y,x.style.cssText=h,w.style.cssText=d,E.style.cssText=v,M.style.cssText=m,T.style.cssText=_,w.appendChild(E),M.appendChild(T),x.appendChild(w),x.appendChild(M),b.appendChild(x),s.appendChild(b),o(w,"scroll",r),o(M,"scroll",i),p(e).onExpandScroll=r,p(e).onShrinkScroll=i}function R(){function n(t,e,n){var r=w(t),i=T(e),o=S(n);r.style.width=i+"px",r.style.height=o+"px"}function i(r){var i=e.offsetWidth,s=e.offsetHeight;a("Storing current size",i,s),x(e,i,s),d.add(0,function(){if(!p(e))return void a("Aborting because element has been uninstalled");if(!o())return void a("Aborting because element container has not been initialized");if(t.debug){var r=e.offsetWidth,u=e.offsetHeight;r===i&&u===s||f.warn(m.get(e),"Scroll: Size changed before updating detector elements.")}n(e,i,s)}),d.add(1,function(){return p(e)?o()?void A(e,i,s):void a("Aborting because element container has not been initialized"):void a("Aborting because element has been uninstalled")}),r&&d.add(2,function(){return p(e)?o()?void r():void a("Aborting because element container has not been initialized"):void a("Aborting because element has been uninstalled")})}function o(){return!!p(e).container}function c(){function t(){return void 0===p(e).lastNotifiedWidth}a("notifyListenersIfNeeded invoked");var n=p(e);return t()&&n.lastWidth===n.startSize.width&&n.lastHeight===n.startSize.height?a("Not notifying: Size is the same as the start size, and there has been no notification yet."):n.lastWidth===n.lastNotifiedWidth&&n.lastHeight===n.lastNotifiedHeight?a("Not notifying: Size already notified"):(a("Current size not notified, notifying..."),n.lastNotifiedWidth=n.lastWidth,n.lastNotifiedHeight=n.lastHeight,void r(p(e).listeners,function(t){t(e)}))}function h(){if(a("startanimation triggered."),l(e))return void a("Ignoring since element is still unrendered...");a("Element rendered.");var t=s(e),n=u(e);0!==t.scrollLeft&&0!==t.scrollTop&&0!==n.scrollLeft&&0!==n.scrollTop||(a("Scrollbars out of sync. Updating detector elements..."),i(c))}function g(){if(a("Scroll detected."),l(e))return void a("Scroll event fired while unrendered. Ignoring...");var t=e.offsetWidth,n=e.offsetHeight;t!==p(e).lastWidth||n!==p(e).lastHeight?(a("Element size changed."),i(c)):a("Element size has not changed ("+t+"x"+n+").")}if(a("registerListenersAndPositionElements invoked."),!p(e))return void a("Aborting because element has been uninstalled");p(e).onRendered=h,p(e).onExpand=g,p(e).onShrink=g;var v=p(e).style;n(e,v.width,v.height)}function k(){if(a("finalizeDomMutation invoked."),!p(e))return void a("Aborting because element has been uninstalled");var t=p(e).style;x(e,t.width,t.height),A(e,t.width,t.height)}function N(){n(e)}function I(){a("Installing..."),_(),v(),d.add(0,b),d.add(1,O),d.add(2,R),d.add(3,k),d.add(4,N)}n||(n=e,e=t,t=null),t=t||{},a("Making detectable..."),c(e)?(a("Element is detached"),L(),a("Waiting until element is attached..."),p(e).onRendered=function(){a("Element is now attached"),I()}):I()}function h(t){var e=p(t);e&&(e.onExpandScroll&&a(s(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&a(u(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&a(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))}t=t||{};var f=t.reporter,d=t.batchProcessor,p=t.stateHandler.getState,m=(t.stateHandler.hasState,t.idHandler);if(!d)throw new Error("Missing required dependency: batchProcessor");if(!f)throw new Error("Missing required dependency: reporter.");var g=e(),v="erd_scroll_detection_scrollbar_style",y="erd_scroll_detection_container";return n(v,y),{makeDetectable:l,addListener:c,uninstall:h}}},{"../collection-utils":41}],44:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)||void 0!==t.length}function i(t){if(Array.isArray(t))return t;var e=[];return s(t,function(t){e.push(t)}),e}function o(t){return t&&1===t.nodeType}function a(t,e,n){var r=t[e];return void 0!==r&&null!==r||void 0===n?r:n}var s=t("./collection-utils").forEach,u=t("./element-utils"),c=t("./listener-handler"),l=t("./id-generator"),h=t("./id-handler"),f=t("./reporter"),d=t("./browser-detector"),p=t("batch-processor"),m=t("./state-handler"),g=t("./detection-strategy/object.js"),v=t("./detection-strategy/scroll.js");e.exports=function(t){function e(t,e,n){function u(t){var e=S.get(t);s(e,function(e){e(t)})}function c(t,e,n){S.add(e,n),t&&n(e)}if(n||(n=e,e=t,t={}),!e)throw new Error("At least one element required.");if(!n)throw new Error("Listener required.");if(o(e))e=[e];else{if(!r(e))return x.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=i(e)}var l=0,h=a(t,"callOnAdd",M.callOnAdd),f=a(t,"onReady",function(){}),d=a(t,"debug",M.debug);s(e,function(t){m.getState(t)||(m.initState(t),y.set(t));var r=y.get(t);return d&&x.log("Attaching listener to element",r,t),P.isDetectable(t)?(d&&x.log(r,"Already detecable, adding listener."),c(h,t,n),void l++):(d&&x.log(r,"Not detectable."),P.isBusy(t)?(d&&x.log(r,"System busy making it detectable"),c(h,t,n),L[r]=L[r]||[],void L[r].push(function(){l++,l===e.length&&f()})):(d&&x.log(r,"Making detectable..."),P.markBusy(t,!0),T.makeDetectable({debug:d},t,function(t){if(d&&x.log(r,"onElementDetectable"),m.getState(t)){P.markAsDetectable(t),P.markBusy(t,!1),T.addListener(t,u),c(h,t,n);var i=m.getState(t);if(i&&i.startSize){var o=t.offsetWidth,a=t.offsetHeight;i.startSize.width===o&&i.startSize.height===a||u(t)}L[r]&&s(L[r],function(t){t()})}else d&&x.log(r,"Element uninstalled before being detectable.");delete L[r],l++,l===e.length&&f()})))}),l===e.length&&f()}function n(t){if(!t)return x.error("At least one element is required.");if(o(t))t=[t];else{if(!r(t))return x.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=i(t)}s(t,function(t){S.removeAllListeners(t),T.uninstall(t),m.cleanState(t)})}t=t||{};var y;if(t.idHandler)y={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var _=l(),b=h({idGenerator:_,stateHandler:m});y=b}var x=t.reporter;if(!x){var w=x===!1;x=f(w)}var E=a(t,"batchProcessor",p({reporter:x})),M={};M.callOnAdd=!!a(t,"callOnAdd",!0),M.debug=!!a(t,"debug",!1);var T,S=c(y),P=u({stateHandler:m}),C=a(t,"strategy","object"),A={reporter:x,batchProcessor:E,stateHandler:m,idHandler:y};if("scroll"===C&&(d.isLegacyOpera()?(x.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),C="object"):d.isIE(9)&&(x.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),C="object")),"scroll"===C)T=v(A);else{if("object"!==C)throw new Error("Invalid strategy name: "+C);T=g(A)}var L={};return{listenTo:e,removeListener:S.removeListener,removeAllListeners:S.removeAllListeners,uninstall:n}}},{"./browser-detector":40,"./collection-utils":41,"./detection-strategy/object.js":42,"./detection-strategy/scroll.js":43,"./element-utils":45,"./id-generator":46,"./id-handler":47,"./listener-handler":48,"./reporter":49,"./state-handler":50,"batch-processor":1}],45:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=o(t);return e&&!!e.isDetectable}function n(t){o(t).isDetectable=!0}function r(t){return!!o(t).busy}function i(t,e){o(t).busy=!!e}var o=t.stateHandler.getState;return{isDetectable:e,markAsDetectable:n,isBusy:r,markBusy:i}}},{}],46:[function(t,e,n){"use strict";e.exports=function(){function t(){return e++}var e=1;return{generate:t}}},{}],47:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=i(t);return e&&void 0!==e.id?e.id:null}function n(t){var e=i(t);if(!e)throw new Error("setId required the element to have a resize detection state.");var n=r.generate();return e.id=n,n}var r=t.idGenerator,i=t.stateHandler.getState;return{get:e,set:n}}},{}],48:[function(t,e,n){"use strict";e.exports=function(t){function e(e){var n=t.get(e);return void 0===n?[]:o[n]||[]}function n(e,n){var r=t.get(e);o[r]||(o[r]=[]),o[r].push(n)}function r(t,n){for(var r=e(t),i=0,o=r.length;i<o;++i)if(r[i]===n){r.splice(i,1);break}}function i(t){var n=e(t);n&&(n.length=0)}var o={};return{get:e,add:n,removeListener:r,removeAllListeners:i}}},{}],49:[function(t,e,n){"use strict";e.exports=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var r=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},{}],50:[function(t,e,n){"use strict";function r(t){return t[a]={},i(t)}function i(t){return t[a]}function o(t){delete t[a]}var a="_erd";e.exports={initState:r,getState:i,cleanState:o}},{}],51:[function(t,e,n){!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e&&e.exports?e.exports=n():t.EvEmitter=n()}("undefined"!=typeof window?window:this,function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},r=n[t]=n[t]||[];return r.indexOf(e)==-1&&r.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{},r=n[t]=n[t]||{};return r[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var r=n.indexOf(e);return r!=-1&&n.splice(r,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var r=this._onceEvents&&this._onceEvents[t],i=0;i<n.length;i++){var o=n[i],a=r&&r[o];a&&(this.off(t,o),delete r[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})},{}],52:[function(t,e,n){!function(t,r){"object"==typeof n&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define("EventBus",[],r):"object"==typeof n?n.EventBus=r():t.EventBus=r()}(this,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(t,e,n){for(var r=[],i=arguments.length,o=0;o<i;o++)r.push(arguments[o]);r=r.length>3?r.splice(3,r.length-1):[],"undefined"!=typeof this.listeners[t]?this.listeners[t].push({scope:n,callback:e,args:r}):this.listeners[t]=[{scope:n,callback:e,args:r}]},removeEventListener:function(t,e,n){if("undefined"!=typeof this.listeners[t]){for(var r=this.listeners[t].length,i=[],o=0;o<r;o++){var a=this.listeners[t][o];a.scope==n&&a.callback==e||i.push(a)}this.listeners[t]=i}},hasEventListener:function(t,e,n){if("undefined"!=typeof this.listeners[t]){var r=this.listeners[t].length;if(void 0===e&&void 0===n)return r>0;for(var i=0;i<r;i++){var o=this.listeners[t][i];if((!n||o.scope==n)&&o.callback==e)return!0}}return!1},dispatch:function(t,e){for(var n=0,r={type:t,target:e},i=[],o=arguments.length,a=0;a<o;a++)i.push(arguments[a]);if(i=i.length>2?i.splice(2,i.length-1):[],i=[r].concat(i),"undefined"!=typeof this.listeners[t])for(var s=this.listeners[t].length,a=0;a<s;a++){var u=this.listeners[t][a];if(u&&u.callback){var c=i.concat(u.args);u.callback.apply(u.scope,c),n+=1}}},getEvents:function(){var t="";for(var e in this.listeners)for(var n=this.listeners[e].length,r=0;r<n;r++){var i=this.listeners[e][r];t+=i.scope&&i.scope.className?i.scope.className:"anonymous",t+=" listen for '"+e+"'\n"}return t}};var e=new t;return e})},{}],53:[function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},e.exports=i},{}],54:[function(t,e,n){"use strict";var r={};e.exports=r},{}],55:[function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};e.exports=r},{}],56:[function(t,e,n){"use strict";var r=t("./emptyFunction"),i=r;e.exports=i},{"./emptyFunction":53}],57:[function(t,e,n){!function(n,r){"function"==typeof define&&define.amd?define(["desandro-matches-selector/matches-selector"],function(t){return r(n,t)}):"object"==typeof e&&e.exports?e.exports=r(n,t("desandro-matches-selector")):n.fizzyUIUtils=r(n,n.matchesSelector)}(window,function(t,e){"use strict";var n={};n.extend=function(t,e){for(var n in e)t[n]=e[n];return t},n.modulo=function(t,e){return(t%e+e)%e};var r=Array.prototype.slice;n.makeArray=function(t){if(Array.isArray(t))return t;if(null===t||void 0===t)return[];var e="object"==typeof t&&"number"==typeof t.length;return e?r.call(t):[t]},n.removeFrom=function(t,e){var n=t.indexOf(e);n!=-1&&t.splice(n,1)},n.getParent=function(t,n){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,n))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,r){t=n.makeArray(t);var i=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!r)return void i.push(t);e(t,r)&&i.push(t);for(var n=t.querySelectorAll(r),o=0;o<n.length;o++)i.push(n[o])}}),i},n.debounceMethod=function(t,e,n){n=n||100;var r=t.prototype[e],i=e+"Timeout";t.prototype[e]=function(){var t=this[i];clearTimeout(t);var e=arguments,o=this;this[i]=setTimeout(function(){r.apply(o,e),delete o[i]},n)}},n.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()};var i=t.console;return n.htmlInit=function(e,r){n.docReady(function(){var o=n.toDashed(r),a="data-"+o,s=document.querySelectorAll("["+a+"]"),u=document.querySelectorAll(".js-"+o),c=n.makeArray(s).concat(n.makeArray(u)),l=a+"-options",h=t.jQuery;c.forEach(function(t){var n,o=t.getAttribute(a)||t.getAttribute(l);try{n=o&&JSON.parse(o)}catch(e){return void(i&&i.error("Error parsing "+a+" on "+t.className+": "+e))}var s=new e(t,n);h&&h.data(t,r,s)})})},n})},{"desandro-matches-selector":39}],58:[function(t,e,n){!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e&&e.exports?e.exports=n():t.getSize=n()}(window,function(){"use strict";function t(t){var e=parseFloat(t),n=t.indexOf("%")==-1&&!isNaN(e);return n&&e}function e(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<c;e++){var n=u[e];t[n]=0}return t}function r(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function i(){if(!l){l=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var i=r(e);a=200==Math.round(t(i.width)),o.isBoxSizeOuter=a,n.removeChild(e)}}function o(e){if(i(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=r(e);if("none"==o.display)return n();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var l=s.isBorderBox="border-box"==o.boxSizing,h=0;h<c;h++){var f=u[h],d=o[f],p=parseFloat(d);s[f]=isNaN(p)?0:p}var m=s.paddingLeft+s.paddingRight,g=s.paddingTop+s.paddingBottom,v=s.marginLeft+s.marginRight,y=s.marginTop+s.marginBottom,_=s.borderLeftWidth+s.borderRightWidth,b=s.borderTopWidth+s.borderBottomWidth,x=l&&a,w=t(o.width);w!==!1&&(s.width=w+(x?0:m+_));var E=t(o.height);return E!==!1&&(s.height=E+(x?0:g+b)),s.innerWidth=s.width-(m+_),s.innerHeight=s.height-(g+b),s.outerWidth=s.width+v,s.outerHeight=s.height+y,s}}var a,s="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],c=u.length,l=!1;return o})},{}],59:[function(t,e,n){!function(n,r){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(t){return r(n,t)}):"object"==typeof e&&e.exports?e.exports=r(n,t("ev-emitter")):n.imagesLoaded=r(n,n.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t){if(Array.isArray(t))return t;var e="object"==typeof t&&"number"==typeof t.length;return e?c.call(t):[t]}function i(t,e,o){if(!(this instanceof i))return new i(t,e,o);var a=t;return"string"==typeof t&&(a=document.querySelectorAll(t)),a?(this.elements=r(a),this.options=n({},this.options),"function"==typeof e?o=e:n(this.options,e),o&&this.on("always",o),this.getImages(),s&&(this.jqDeferred=new s.Deferred),void setTimeout(this.check.bind(this))):void u.error("Bad element for imagesLoaded "+(a||t))}function o(t){this.img=t}function a(t,e){this.url=t,this.element=e,this.img=new Image}var s=t.jQuery,u=t.console,c=Array.prototype.slice;i.prototype=Object.create(e.prototype),i.prototype.options={},i.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},i.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&l[e]){for(var n=t.querySelectorAll("img"),r=0;r<n.length;r++){var i=n[r];this.addImage(i)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(r=0;r<o.length;r++){var a=o[r];this.addElementBackgroundImages(a)}}}};var l={1:!0,9:!0,11:!0};return i.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,r=n.exec(e.backgroundImage);null!==r;){var i=r&&r[2];i&&this.addBackground(i,t),r=n.exec(e.backgroundImage)}},i.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},i.prototype.addBackground=function(t,e){var n=new a(t,e);this.images.push(n)},i.prototype.check=function(){function t(t,n,r){setTimeout(function(){e.progress(t,n,r)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){
e.once("progress",t),e.check()}):void this.complete()},i.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&u&&u.log("progress: "+n,t,e)},i.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype=Object.create(o.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},i.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(s=e,s.fn.imagesLoaded=function(t,e){var n=new i(this,t,e);return n.jqDeferred.promise(s(this))})},i.makeJQueryPlugin(),i})},{"ev-emitter":51}],60:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;u=new Error(e.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},{}],61:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.L={})}(this,function(t){"use strict";function e(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++){i=arguments[n];for(e in i)t[e]=i[e]}return t}function n(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}function r(t){return t._leaflet_id=t._leaflet_id||++me,t._leaflet_id}function i(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function o(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function a(){return!1}function s(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function l(t,e){t.hasOwnProperty("options")||(t.options=t.options?pe(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function h(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&e.indexOf("?")!==-1?"&":"?")+r.join("&")}function f(t,e){return t.replace(ge,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})}function d(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var e=+new Date,n=Math.max(0,16-(e-_e));return _e=e+n,window.setTimeout(t,n)}function g(t,e,r){return r&&be===m?void t.call(e):be.call(window,n(t,e))}function v(t){t&&xe.call(window,t)}function y(){}function _(t){if("undefined"!=typeof L&&L&&L.Mixin){t=ve(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function b(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function x(t,e,n){return t instanceof b?t:ve(t)?new b(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new b(t.x,t.y):new b(t,e,n)}function w(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function E(t,e){return!t||t instanceof w?t:new w(t,e)}function M(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function T(t,e){return t instanceof M?t:new M(t,e)}function S(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function P(t,e,n){return t instanceof S?t:ve(t)&&"object"!=typeof t[0]?3===t.length?new S(t[0],t[1],t[2]):2===t.length?new S(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new S(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new S(t,e,n)}function C(t,e,n,r){return ve(t)?(this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])):(this._a=t,this._b=e,this._c=n,void(this._d=r))}function A(t,e,n,r){return new C(t,e,n,r)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function R(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(a=t[n],r=0,o=a.length;r<o;r++)s=a[r],u+=(r?"L":"M")+s.x+" "+s.y;u+=e?fn?"z":"x":""}return u||"M0 0"}function k(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function N(t,e,n,r){return"touchstart"===e?D(t,n,r):"touchmove"===e?F(t,n,r):"touchend"===e&&H(t,n,r),this}function I(t,e,n){var r=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(mn,r,!1):"touchmove"===e?t.removeEventListener(gn,r,!1):"touchend"===e&&(t.removeEventListener(vn,r,!1),t.removeEventListener(yn,r,!1)),this}function D(t,e,r){var i=n(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(_n.indexOf(t.target.tagName)<0))return;Q(t)}B(t,e)});t["_leaflet_touchstart"+r]=i,t.addEventListener(mn,i,!1),xn||(document.documentElement.addEventListener(mn,j,!0),document.documentElement.addEventListener(gn,z,!0),document.documentElement.addEventListener(vn,U,!0),document.documentElement.addEventListener(yn,U,!0),xn=!0)}function j(t){bn[t.pointerId]=t,wn++}function z(t){bn[t.pointerId]&&(bn[t.pointerId]=t)}function U(t){delete bn[t.pointerId],wn--}function B(t,e){t.touches=[];for(var n in bn)t.touches.push(bn[n]);t.changedTouches=[t],e(t)}function F(t,e,n){var r=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&B(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(gn,r,!1)}function H(t,e,n){var r=function(t){B(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(vn,r,!1),t.addEventListener(yn,r,!1)}function G(t,e,n){function r(t){var e;if(an){if(!ze||"mouse"===t.pointerType)return;e=wn}else e=t.touches.length;if(!(e>1)){var n=Date.now(),r=n-(o||n);a=t.touches?t.touches[0]:t,s=r>0&&r<=u,o=n}}function i(t){if(s&&!a.cancelBubble){if(an){if(!ze||"mouse"===t.pointerType)return;var n,r,i={};for(r in a)n=a[r],i[r]=n&&n.bind?n.bind(a):n;a=i}a.type="dblclick",e(a),o=null}}var o,a,s=!1,u=250;return t[Tn+En+n]=r,t[Tn+Mn+n]=i,t[Tn+"dblclick"+n]=e,t.addEventListener(En,r,!1),t.addEventListener(Mn,i,!1),t.addEventListener("dblclick",e,!1),this}function V(t,e){var n=t[Tn+En+e],r=t[Tn+Mn+e],i=t[Tn+"dblclick"+e];return t.removeEventListener(En,n,!1),t.removeEventListener(Mn,r,!1),ze||t.removeEventListener("dblclick",i,!1),this}function W(t,e,n,r){if("object"==typeof e)for(var i in e)Y(t,i,e[i],n);else{e=c(e);for(var o=0,a=e.length;o<a;o++)Y(t,e[o],n,r)}return this}function q(t,e,n,r){if("object"==typeof e)for(var i in e)Z(t,i,e[i],n);else if(e){e=c(e);for(var o=0,a=e.length;o<a;o++)Z(t,e[o],n,r)}else{for(var s in t[Sn])Z(t,s,t[Sn][s]);delete t[Sn]}return this}function Y(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):"");if(t[Sn]&&t[Sn][o])return this;var a=function(e){return n.call(i||t,e||window.event)},s=a;an&&0===e.indexOf("touch")?N(t,e,a,o):!sn||"dblclick"!==e||!G||an&&We?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,it(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&Be&&(a=function(t){ot(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):G(t,a,o),t[Sn]=t[Sn]||{},t[Sn][o]=a}function Z(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):""),a=t[Sn]&&t[Sn][o];return a?(an&&0===e.indexOf("touch")?I(t,e,o):!sn||"dblclick"!==e||!V||an&&We?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a):V(t,o),void(t[Sn][o]=null)):this}function X(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,rt(t),this}function K(t){return Y(t,"mousewheel",X),this}function J(t){return W(t,"mousedown touchstart dblclick",X),Y(t,"click",nt),this}function Q(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function $(t){return Q(t),X(t),this}function tt(t,e){if(!e)return new b(t.clientX,t.clientY);var n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,i=n.height/e.offsetHeight||1;return new b(t.clientX/r-n.left-e.clientLeft,t.clientY/i-n.top-e.clientTop)}function et(t){return ze?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Pn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function nt(t){Cn[t.type]=!0}function rt(t){var e=Cn[t.type];return Cn[t.type]=!1,e}function it(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}function ot(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=Ae&&n-Ae;return r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?void $(t):(Ae=n,void e(t))}function at(t){return"string"==typeof t?document.getElementById(t):t}function st(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ut(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ct(t){var e=t.parentNode;e&&e.removeChild(t)}function lt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ht(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function ft(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function dt(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=vt(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function pt(t,e){if(void 0!==t.classList)for(var n=c(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!dt(t,e)){var o=vt(t);gt(t,(o?o+" ":"")+e)}}function mt(t,e){void 0!==t.classList?t.classList.remove(e):gt(t,u((" "+vt(t)+" ").replace(" "+e+" "," ")))}function gt(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function vt(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function yt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&_t(t,e)}function _t(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function bt(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function xt(t,e,n){var r=e||new b(0,0);t.style[Ln]=(Je?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function wt(t,e){t._leaflet_pos=e,tn?xt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Et(t){return t._leaflet_pos||new b(0,0)}function Mt(){W(window,"dragstart",Q)}function Tt(){q(window,"dragstart",Q)}function St(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Pt(),Nn=t,In=t.style.outline,t.style.outline="none",W(window,"keydown",Pt))}function Pt(){Nn&&(Nn.style.outline=In,Nn=void 0,In=void 0,q(window,"keydown",Pt))}function Ct(t,e){return new zn(t,e)}function At(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Nt(t,n),t=Rt(t,n)}function Lt(t,e,n){return Math.sqrt(Ut(t,e,n,!0))}function Ot(t,e,n){return Ut(t,e,n)}function Rt(t,e){var n=t.length,r=typeof Uint8Array!=void 0+""?Uint8Array:Array,i=new r(n);i[0]=i[n-1]=1,kt(t,i,e,0,n-1);var o,a=[];for(o=0;o<n;o++)i[o]&&a.push(t[o]);return a}function kt(t,e,n,r,i){var o,a,s,u=0;for(a=r+1;a<=i-1;a++)s=Ut(t[a],t[r],t[i],!0),s>u&&(o=a,u=s);u>n&&(e[o]=1,kt(t,e,n,r,o),kt(t,e,n,o,i))}function Nt(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)zt(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}function It(t,e,n,r,i){var o,a,s,u=r?Kn:jt(t,n),c=jt(e,n);for(Kn=c;;){if(!(u|c))return[t,e];if(u&c)return!1;o=u||c,a=Dt(t,e,o,n,i),s=jt(a,n),o===u?(t=a,u=s):(e=a,c=s)}}function Dt(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,c=r.min,l=r.max;return 8&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):4&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(o=l.x,a=t.y+u*(l.x-t.x)/s):1&n&&(o=c.x,a=t.y+u*(c.x-t.x)/s),new b(o,a,i)}function jt(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function zt(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Ut(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,c=s*s+u*u;return c>0&&(i=((t.x-o)*s+(t.y-a)*u)/c,i>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new b(o,a)}function Bt(t){return!ve(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]}function Ft(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Bt(t)}function Ht(t,e,n){var r,i,o,a,s,u,c,l,h,f=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=jt(t[i],e);for(a=0;a<4;a++){for(l=f[a],r=[],i=0,c=t.length,o=c-1;i<c;o=i++)s=t[i],u=t[o],s._code&l?u._code&l||(h=Dt(u,s,l,e,n),h._code=jt(h,e),r.push(h)):(u._code&l&&(h=Dt(u,s,l,e,n),h._code=jt(h,e),r.push(h)),r.push(s));t=r}return t}function Gt(t){return new mr(t)}function Vt(t,e){return new yr(t,e)}function Wt(t,e){return new br(t,e)}function qt(t,e,n){return new xr(t,e,n)}function Yt(t,e){return new wr(t,e)}function Zt(t,e){return new Er(t,e)}function Xt(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],c=e&&e.pointToLayer,l=e&&e.coordsToLatLng||Kt;if(!s&&!a)return null;switch(a.type){case"Point":return n=l(s),c?c(t,n):new yr(n);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=l(s[i]),u.push(c?c(t,n):new yr(n));return new dr(u);case"LineString":case"MultiLineString":return r=Jt(s,"LineString"===a.type?0:1,l),new wr(r,e);case"Polygon":case"MultiPolygon":return r=Jt(s,"Polygon"===a.type?1:2,l),new Er(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=Xt({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new dr(u);default:throw new Error("Invalid GeoJSON object.")}}function Kt(t){return new S(t[1],t[0],t[2])}function Jt(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Jt(t[o],e-1,n):(n||Kt)(t[o]),i.push(r);return i}function Qt(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[s(t.lng,e),s(t.lat,e),s(t.alt,e)]:[s(t.lng,e),s(t.lat,e)]}function $t(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?$t(t[o],e-1,n,r):Qt(t[o],r));return!e&&n&&i.push(i[0]),i}function te(t,n){return t.feature?e({},t.feature,{geometry:n}):ee(n)}function ee(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function ne(t,e){return new Mr(t,e)}function re(t,e,n){return new Ar(t,e,n)}function ie(t){return new Ir(t)}function oe(t){return new Dr(t)}function ae(t,e){return new jr(t,e)}function se(t,e){return new zr(t,e)}function ue(t){return hn?new Br(t):null}function ce(t){return fn||dn?new Vr(t):null}function le(t,e){return new Wr(t,e)}function he(){return window.L=$r,this}var fe="1.3.1",de=Object.freeze;Object.freeze=function(t){return t};var pe=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),me=0,ge=/\{ *([\w_-]+) *\}/g,ve=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",_e=0,be=window.requestAnimationFrame||p("RequestAnimationFrame")||m,xe=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},we=(Object.freeze||Object)({freeze:de,extend:e,create:pe,bind:n,lastId:me,stamp:r,throttle:i,wrapNum:o,falseFn:a,formatNum:s,trim:u,splitWords:c,setOptions:l,getParamString:h,template:f,isArray:ve,indexOf:d,emptyImageUrl:ye,requestFn:be,cancelFn:xe,requestAnimFrame:g,cancelAnimFrame:v});y.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,i=pe(r);i.constructor=n,n.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(n[o]=this[o]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(_(t.includes),e.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=e(pe(i.options),t.options)),e(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},n},y.include=function(t){return e(this.prototype,t),this},y.mergeOptions=function(t){return e(this.prototype.options,t),this},y.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var Ee={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else{t=c(t);for(var i=0,o=t.length;i<o;i++)this._on(t[i],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else{t=c(t);for(var i=0,o=t.length;i<o;i++)this._off(t[i],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t])){if(!e){for(i=0,o=r.length;i<o;i++)r[i].fn=a;return void delete this._events[t]}if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var s=r[i];if(s.ctx===n&&s.fn===e)return s.fn=a,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}},fire:function(t,n,r){if(!this.listens(t,r))return this;var i=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,r){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=n(function(){this.off(t,e,r).off(t,o,r)},this);return this.on(t,e,r).on(t,o,r)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};Ee.addEventListener=Ee.on,Ee.removeEventListener=Ee.clearAllEventListeners=Ee.off,Ee.addOneTimeEventListener=Ee.once,Ee.fireEvent=Ee.fire,Ee.hasEventListeners=Ee.listens;var Me=y.extend(Ee),Te=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};b.prototype={clone:function(){return new b(this.x,this.y)},add:function(t){return this.clone()._add(x(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(x(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new b(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new b(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Te(this.x),this.y=Te(this.y),this},distanceTo:function(t){t=x(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=x(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=x(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s(this.x)+", "+s(this.y)+")"}},w.prototype={extend:function(t){return t=x(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof b?x(t):E(t),t instanceof w?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=E(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=E(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},M.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof S)e=t,n=t;else{if(!(t instanceof M))return t?this.extend(P(t)||T(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new S(e.lat,e.lng),this._northEast=new S(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new M(new S(e.lat-r,e.lng-i),new S(n.lat+r,n.lng+i))},getCenter:function(){return new S((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new S(this.getNorth(),this.getWest())},getSouthEast:function(){return new S(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof S||"lat"in t?P(t):T(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof M?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=T(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=T(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=T(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},S.prototype={equals:function(t,e){if(!t)return!1;t=P(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+s(this.lat,t)+", "+s(this.lng,t)+")"},distanceTo:function(t){return Pe.distance(this,P(t))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return T([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new S(this.lat,this.lng,this.alt)}};var Se={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return new w(r,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new S(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast(),s=new S(o.lat-r,o.lng-i),u=new S(a.lat-r,a.lng-i);return new M(s,u)}},Pe=e({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),Ce={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new b(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new S((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new w([-t,-t],[t,t])}()};C.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new b((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Ae,Le,Oe,Re,ke=e({},Pe,{code:"EPSG:3857",projection:Ce,transformation:function(){var t=.5/(Math.PI*Ce.R);return A(t,.5,-t,.5)}()}),Ne=e({},ke,{code:"EPSG:900913"}),Ie=document.documentElement.style,De="ActiveXObject"in window,je=De&&!document.addEventListener,ze="msLaunchUri"in navigator&&!("documentMode"in document),Ue=k("webkit"),Be=k("android"),Fe=k("android 2")||k("android 3"),He=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ge=Be&&k("Google")&&He<537&&!("AudioNode"in window),Ve=!!window.opera,We=k("chrome"),qe=k("gecko")&&!Ue&&!Ve&&!De,Ye=!We&&k("safari"),Ze=k("phantom"),Xe="OTransition"in Ie,Ke=0===navigator.platform.indexOf("Win"),Je=De&&"transition"in Ie,Qe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fe,$e="MozPerspective"in Ie,tn=!window.L_DISABLE_3D&&(Je||Qe||$e)&&!Xe&&!Ze,en="undefined"!=typeof orientation||k("mobile"),nn=en&&Ue,rn=en&&Qe,on=!window.PointerEvent&&window.MSPointerEvent,an=!(!window.PointerEvent&&!on),sn=!window.L_NO_TOUCH&&(an||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),un=en&&Ve,cn=en&&qe,ln=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hn=function(){return!!document.createElement("canvas").getContext}(),fn=!(!document.createElementNS||!O("svg").createSVGRect),dn=!fn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),pn=(Object.freeze||Object)({ie:De,ielt9:je,edge:ze,webkit:Ue,android:Be,android23:Fe,androidStock:Ge,opera:Ve,chrome:We,gecko:qe,safari:Ye,phantom:Ze,opera12:Xe,win:Ke,ie3d:Je,webkit3d:Qe,gecko3d:$e,any3d:tn,mobile:en,mobileWebkit:nn,mobileWebkit3d:rn,msPointer:on,pointer:an,touch:sn,mobileOpera:un,mobileGecko:cn,retina:ln,canvas:hn,svg:fn,vml:dn}),mn=on?"MSPointerDown":"pointerdown",gn=on?"MSPointerMove":"pointermove",vn=on?"MSPointerUp":"pointerup",yn=on?"MSPointerCancel":"pointercancel",_n=["INPUT","SELECT","OPTION"],bn={},xn=!1,wn=0,En=on?"MSPointerDown":an?"pointerdown":"touchstart",Mn=on?"MSPointerUp":an?"pointerup":"touchend",Tn="_leaflet_",Sn="_leaflet_events",Pn=Ke&&We?2*window.devicePixelRatio:qe?window.devicePixelRatio:1,Cn={},An=(Object.freeze||Object)({on:W,off:q,stopPropagation:X,disableScrollPropagation:K,disableClickPropagation:J,preventDefault:Q,stop:$,getMousePosition:tt,getWheelDelta:et,fakeStop:nt,skipped:rt,isExternalTarget:it,addListener:W,removeListener:q}),Ln=bt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),On=bt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rn="webkitTransition"===On||"OTransition"===On?On+"End":"transitionend";if("onselectstart"in document)Le=function(){W(window,"selectstart",Q)},Oe=function(){q(window,"selectstart",Q)};else{var kn=bt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Le=function(){if(kn){var t=document.documentElement.style;Re=t[kn],t[kn]="none"}},Oe=function(){kn&&(document.documentElement.style[kn]=Re,Re=void 0)}}var Nn,In,Dn=(Object.freeze||Object)({TRANSFORM:Ln,TRANSITION:On,TRANSITION_END:Rn,get:at,getStyle:st,create:ut,remove:ct,empty:lt,toFront:ht,toBack:ft,hasClass:dt,addClass:pt,removeClass:mt,setClass:gt,getClass:vt,setOpacity:yt,testProp:bt,setTransform:xt,setPosition:wt,getPosition:Et,disableTextSelection:Le,enableTextSelection:Oe,disableImageDrag:Mt,enableImageDrag:Tt,preventOutline:St,restoreOutline:Pt}),jn=Me.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Et(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this),this._step();
},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),wt(this._el,n),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),zn=Me.extend({options:{crs:ke,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=l(this,e),this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(P(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=On&&tn&&!un&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),W(this._proxy,Rn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){if(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(P(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){void 0!==r.animate&&(r.zoom=e({animate:r.animate},r.zoom),r.pan=e({animate:r.animate,duration:r.duration},r.pan));var i=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(tn?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(tn?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=t instanceof b?t:this.latLngToContainerPoint(t),a=o.subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():T(t);var n=x(e.paddingTopLeft||e.padding||[0,0]),r=x(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if(i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i,i===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i),u=this.unproject(a.add(s).divideBy(2).add(o),i);return{center:u,zoom:i}},fitBounds:function(t,e){if(t=T(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=x(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){pt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function r(t){var e=t?-1:1,n=t?v:m,r=v*v-m*m+e*b*b*y*y,i=2*n*b*y,o=r/i,a=Math.sqrt(o*o+1)-o,s=a<1e-9?-18:Math.log(a);return s}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return i(t)/o(t)}function s(t){return m*(o(x)/o(x+_*t))}function u(t){return m*(o(x)*a(x+_*t)-i(x))/b}function c(t){return 1-Math.pow(1-t,1.5)}function l(){var n=(Date.now()-w)/M,r=c(n)*E;n<=1?(this._flyToFrame=g(l,this),this._move(this.unproject(h.add(f.subtract(h).multiplyBy(u(r)/y)),p),this.getScaleZoom(m/s(r),p),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!tn)return this.setView(t,e,n);this._stop();var h=this.project(this.getCenter()),f=this.project(t),d=this.getSize(),p=this._zoom;t=P(t),e=void 0===e?p:e;var m=Math.max(d.x,d.y),v=m*this.getZoomScale(p,e),y=f.distanceTo(h)||1,_=1.42,b=_*_,x=r(0),w=Date.now(),E=(r(1)-x)/_,M=n.duration?1e3*n.duration:1e3*E*.8;return this._moveStart(!0,n.noMoveStart),l.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=T(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,T(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=r.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=n(this._handleGeolocationResponse,this),i=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,i,t):navigator.geolocation.getCurrentPosition(r,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,r=new S(e,n),i=r.toBounds(t.coords.accuracy),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(i);this.setView(r,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:r,bounds:i,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(s[u]=t.coords[u]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ct(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=ut("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new M(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=T(t),n=x(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),c=E(this.project(s,r),this.project(a,r)).getSize(),l=tn?this.options.zoomSnap:1,h=u.x/c.x,f=u.y/c.y,d=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(d,r),l&&(r=Math.round(r/(l/100))*(l/100),r=e?Math.ceil(r/l)*l:Math.floor(r/l)*l),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new w(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(P(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(x(t),e)},layerPointToLatLng:function(t){var e=x(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(P(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(P(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(T(t))},distance:function(t,e){return this.options.crs.distance(P(t),P(e))},containerPointToLayerPoint:function(t){return x(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return x(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(x(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(P(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=at(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");W(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&tn,pt(t,"leaflet-container"+(sn?" leaflet-touch":"")+(ln?" leaflet-retina":"")+(je?" leaflet-oldie":"")+(Ye?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=st(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new b(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(t.markerPane,"leaflet-zoom-hide"),pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){wt(this._mapPane,new b(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){wt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?q:W;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),tn&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if(n=this._targets[r(a)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(o&&!it(a,t))break;if(i.push(n),o)break}if(a===this._container)break;a=a.parentNode}return i.length||s||o||!it(a,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!rt(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||St(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if("click"===t.type){var i=e({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,n)),r.length)){var o=r[0];"contextmenu"===n&&o.listens(n,!0)&&Q(t);var a={originalEvent:t};if("keypress"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(n,a,!0),a.originalEvent._stopped||r[u].options.bubblingMouseEvents===!1&&d(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Et(this._mapPane)||new b(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return E([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new w(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new w(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=E(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max),a=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new b(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=tn?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!((e&&e.animate)!==!0&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Ln,n=this._proxy.style[e];xt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();xt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ct(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(n.animate!==!0&&!this.getSize().contains(i))&&(g(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,r,i){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}}),Un=y.extend({options:{position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return pt(e,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(e,r.firstChild):r.appendChild(e),this},remove:function(){return this._map?(ct(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Bn=function(t){return new Un(t)};zn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,i){var o=n+t+" "+n+i;e[t+i]=ut("div",o,r)}var e=this._controlCorners={},n="leaflet-",r=this._controlContainer=ut("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ct(this._controlCorners[t]);ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fn=Un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){l(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Un.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(pt(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ut("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),J(e),K(e);var r=this._form=ut("form",t+"-list");n&&(this._map.on("click",this.collapse,this),Be||W(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ut("a",t+"-toggle",e);i.href="#",i.title="Layers",sn?(W(i,"click",$),W(i,"click",this.expand,this)):W(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ut("div",t+"-base",r),this._separator=ut("div",t+"-separator",r),this._overlaysList=ut("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:r}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lt(this._baseLayersList),lt(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=r(t.layer),W(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var a=document.createElement("div");n.appendChild(a),a.appendChild(e),a.appendChild(o);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Hn=function(t,e,n){return new Fn(t,e,n)},Gn=Un.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ut("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=ut("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),J(o),W(o,"click",$),W(o,"click",i,this),W(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";mt(this._zoomInButton,e),mt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pt(this._zoomInButton,e)}});zn.mergeOptions({zoomControl:!0}),zn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gn,this.addControl(this.zoomControl))});var Vn=function(t){return new Gn(t)},Wn=Un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ut("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ut("div",e,n)),t.imperial&&(this._iScale=ut("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),qn=function(t){return new Wn(t)},Yn=Un.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),J(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});zn.mergeOptions({attributionControl:!0}),zn.addInitHook(function(){this.options.attributionControl&&(new Yn).addTo(this)});var Zn=function(t){return new Yn(t)};Un.Layers=Fn,Un.Zoom=Gn,Un.Scale=Wn,Un.Attribution=Yn,Bn.layers=Hn,Bn.zoom=Vn,Bn.scale=qn,Bn.attribution=Zn;var Xn=y.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xn.addTo=function(t,e){return t.addHandler(e,this),this};var Kn,Jn={Events:Ee},Qn=sn?"touchstart mousedown":"mousedown",$n={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},tr={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},er=Me.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){l(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(W(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(er._dragging===this&&this.finishDrag(),q(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,
!dt(this._element,"leaflet-zoom-anim")&&!(er._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(er._dragging=this,this._preventOutline&&St(this._element),Mt(),Le(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new b(e.clientX,e.clientY),W(document,tr[t.type],this._onMove,this),W(document,$n[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new b(e.clientX,e.clientY),r=n.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(Q(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Et(this._element).subtract(r),pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,v(this._animRequest),this._lastEvent=t,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),wt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in tr)q(document,tr[t],this._onMove,this),q(document,$n[t],this._onUp,this);Tt(),Oe(),this._moved&&this._moving&&(v(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,er._dragging=!1}}),nr=(Object.freeze||Object)({simplify:At,pointToSegmentDistance:Lt,closestPointOnSegment:Ot,clipSegment:It,_getEdgeIntersection:Dt,_getBitCode:jt,_sqClosestPointOnSegment:Ut,isFlat:Bt,_flat:Ft}),rr=(Object.freeze||Object)({clipPolygon:Ht}),ir={project:function(t){return new b(t.lng,t.lat)},unproject:function(t){return new S(t.y,t.x)},bounds:new w([-180,-90],[180,90])},or={R:6378137,R_MINOR:6356752.314245179,bounds:new w([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new b(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),c=Math.PI/2-2*Math.atan(a*e)-s,s+=c;return new S(s*n,t.x*n/r)}},ar=(Object.freeze||Object)({LonLat:ir,Mercator:or,SphericalMercator:Ce}),sr=e({},Pe,{code:"EPSG:3395",projection:or,transformation:function(){var t=.5/(Math.PI*or.R);return A(t,.5,-t,.5)}()}),ur=e({},Pe,{code:"EPSG:4326",projection:ir,transformation:A(1/180,1,-1/180,.5)}),cr=e({},Se,{projection:ir,transformation:A(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});Se.Earth=Pe,Se.EPSG3395=sr,Se.EPSG3857=ke,Se.EPSG900913=Ne,Se.EPSG4326=ur,Se.Simple=cr;var lr=Me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});zn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?ve(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-(1/0)?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hr=lr.extend({initialize:function(t,e){l(this,e),this._layers={};var n,r;if(t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),fr=function(t,e){return new hr(t,e)},dr=hr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),hr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),hr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new M;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),pr=function(t){return new dr(t)},mr=y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=x(r),o=x("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return ln&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),gr=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return gr.imagePath||(gr.imagePath=this._detectIconPath()),(this.options.imagePath||gr.imagePath)+mr.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ut("div","leaflet-default-icon-path",document.body),e=st(t,"background-image")||st(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),vr=Xn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new er(t,t,(!0))),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=E(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var c=x((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=g(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(v(this._panRequest),this._panRequest=g(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=Et(e._icon),i=e._map.layerPointToLatLng(r);n&&wt(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){v(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),yr=lr.extend({options:{icon:new gr,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){l(this,e),this._latlng=P(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=P(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),pt(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(pt(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ct(this._shadow),this._shadow=null},_setPos:function(t){wt(this._icon,t),this._shadow&&wt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;yt(this._icon,t),this._shadow&&yt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),_r=lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),br=_r.extend({options:{fill:!0,radius:10},initialize:function(t,e){l(this,e),this._latlng=P(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=P(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return _r.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new w(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),xr=br.extend({initialize:function(t,n,r){if("number"==typeof n&&(n=e({},r,{radius:n})),l(this,n),this._latlng=P(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new M(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:_r.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===Pe.distance){var i=Math.PI/180,o=this._mRadius/Pe.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),c=n.unproject(u).lat,l=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:u.x-n.project([c,t-l]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),wr=_r.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){l(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=Ut,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],c=1,l=u.length;c<l;c++){e=u[c-1],n=u[c];var h=o(t,e,n,!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],n=i.distanceTo(o),r+=n,r>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=P(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new M,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Bt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Bt(t),r=0,i=t.length;r<i;r++)n?(e[r]=P(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new w;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new b(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof S,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(s=this._rings[e],n=0,o=s.length;n<o-1;n++)a=It(s[n],s[n+1],t,n,!0),a&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=At(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(s=this._parts[n],r=0,a=s.length,i=a-1;r<a;i=r++)if((e||0!==r)&&Lt(t,s[i],s[r])<=u)return!0;return!1}});wr._flat=Ft;var Er=wr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,c=this._rings[0],l=c.length;if(!l)return null;for(o=a=s=0,t=0,e=l-1;t<l;e=t++)n=c[t],r=c[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=wr.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof S&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){wr.prototype._setLatLngs.call(this,t),Bt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Bt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new b(e,e);if(t=new w(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var r,i=0,o=this._rings.length;i<o;i++)r=Ht(this._rings[i],t,!0),r.length&&this._parts.push(r)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,c=!1;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(e=this._parts[i],o=0,u=e.length,a=u-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||wr.prototype._containsPoint.call(this,t,!0)}}),Mr=dr.extend({initialize:function(t,e){l(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=ve(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)r=i[e],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Xt(t,o);return a?(a.feature=ee(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),Tr={toGeoJSON:function(t){return te(this,{type:"Point",coordinates:Qt(this.getLatLng(),t)})}};yr.include(Tr),xr.include(Tr),br.include(Tr),wr.include({toGeoJSON:function(t){var e=!Bt(this._latlngs),n=$t(this._latlngs,e?1:0,!1,t);return te(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Er.include({toGeoJSON:function(t){var e=!Bt(this._latlngs),n=e&&!Bt(this._latlngs[0]),r=$t(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),te(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),hr.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),te(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer(function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=ee(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?te(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Sr=ne,Pr=lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=T(e),l(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&ft(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=T(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ut("img");return pt(e,"leaflet-image-layer"),this._zoomAnimated&&pt(e,"leaflet-zoom-animated"),this.options.className&&pt(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?void(this._url=e.src):(e.src=this._url,void(e.alt=this.options.alt))},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xt(this._image,n,e)},_reset:function(){var t=this._image,e=new w(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();wt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Cr=function(t,e,n){return new Pr(t,e,n)},Ar=Pr.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ut("video");if(pt(e,"leaflet-image-layer"),this._zoomAnimated&&pt(e,"leaflet-zoom-animated"),e.onselectstart=a,e.onmousemove=a,e.onloadeddata=n(this.fire,this,"load"),t){for(var r=e.getElementsByTagName("source"),i=[],o=0;o<r.length;o++)i.push(r[o].src);return void(this._url=r.length>0?i:[e.src])}ve(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var u=ut("source");u.src=this._url[s],e.appendChild(u)}}}),Lr=lr.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){l(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&yt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(n(ct,void 0,this._container),200)):ct(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=P(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&ft(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=x(this.options.offset),n=this._getAnchor();this._zoomAnimated?wt(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Or=Lr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Lr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _r||this._source.on("preclick",X))},onRemove:function(t){Lr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _r||this._source.off("preclick",X))},getEvents:function(){var t=Lr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ut("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ut("div",t+"-content-wrapper",e);if(this._contentNode=ut("div",t+"-content",n),J(n),K(this._contentNode),W(n,"contextmenu",X),this._tipContainer=ut("div",t+"-tip-container",e),this._tip=ut("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ut("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",W(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",pt(t,o)):mt(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();wt(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(st(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new b(this._containerLeft,-n-this._containerBottom);i._add(Et(this._container));var o=t.layerPointToContainerPoint(i),a=x(this.options.autoPanPadding),s=x(this.options.autoPanPaddingTopLeft||a),u=x(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),l=0,h=0;
o.x+r+u.x>c.x&&(l=o.x+r-c.x+u.x),o.x-l-s.x<0&&(l=o.x-s.x),o.y+n+u.y>c.y&&(h=o.y+n-c.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),$(t)},_getAnchor:function(){return x(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rr=function(t,e){return new Or(t,e)};zn.mergeOptions({closePopupOnClick:!0}),zn.include({openPopup:function(t,e,n){return t instanceof Or||(t=new Or(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),lr.include({bindPopup:function(t,e){return t instanceof Or?(l(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Or(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof lr||(e=t,t=this),t instanceof dr)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return $(t),e instanceof _r?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var kr=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Lr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Lr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Lr.prototype.getEvents.call(this);return sn&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=x(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(x(-a/2+u.x,-s+u.y+c.y,!0)):"bottom"===o?t=t.subtract(x(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(x(a/2+u.x,s/2-c.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(x(u.x+c.x,c.y-s/2+u.y,!0))):(o="left",t=t.subtract(x(a+c.x-u.x,s/2-c.y-u.y,!0))),mt(n,"leaflet-tooltip-right"),mt(n,"leaflet-tooltip-left"),mt(n,"leaflet-tooltip-top"),mt(n,"leaflet-tooltip-bottom"),pt(n,"leaflet-tooltip-"+o),wt(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&yt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return x(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Nr=function(t,e){return new kr(t,e)};zn.include({openTooltip:function(t,e,n){return t instanceof kr||(t=new kr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),lr.include({bindTooltip:function(t,e){return t instanceof kr?(l(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new kr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),sn&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof lr||(e=t,t=this),t instanceof dr)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Ir=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=x(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});mr.Default=gr;var Dr=lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:en,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ct(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ft(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=i(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof b?t:new b(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-(1/0),1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je){yt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);yt(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:a,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ct(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||(r=this._levels[t]={},r.el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),a(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:a,_onRemoveLevel:a,_onCreateLevel:a,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ct(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new b((+i),(+o));s.z=+a;var u=this._tileCoordsToKey(s),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new b(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();tn?xt(t.el,i,r):wt(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new w(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new w(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var l=this._tiles[c].coords;l.z===this._tileZoom&&u.contains(new b(l.x,l.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var d=new b(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return T(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n),o=e.unproject(r,t.z),a=e.unproject(i,t.z);return[o,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new M(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new b((+e[0]),(+e[1]));return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(Ge||e.el.setAttribute("src",ye),ct(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=a,t.onmousemove=a,je&&this.options.opacity<1&&yt(t,this.options.opacity),Be&&!Fe&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var r=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&g(n(this._tileReady,this,t,null,o)),wt(o,r),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,r){if(this._map){e&&this.fire("tileerror",{error:e,tile:r,coords:t});var i=this._tileCoordsToKey(t);r=this._tiles[i],r&&(r.loaded=+new Date,this._map._fadeAnimated?(yt(r.el,0),v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),e||(pt(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new b(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new w(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),jr=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=l(this,e),e.detectRetina&&ln&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Be||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var r=document.createElement("img");return W(r,"load",n(this._tileOnLoad,this,e,r)),W(r,"error",n(this._tileOnError,this,e,r)),this.options.crossOrigin&&(r.crossOrigin=""),r.alt="",r.setAttribute("role","presentation"),r.src=this.getTileUrl(t),r},getTileUrl:function(t){var n={r:ln?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return f(this._url,e(n,this.options))},_tileOnLoad:function(t,e){je?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=a,e.onerror=a,e.complete||(e.src=ye,ct(e),delete this._tiles[t]))}}),zr=jr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=e({},this.defaultWmsParams);for(var i in n)i in this.options||(r[i]=n[i]);n=l(this,n);var o=n.detectRetina&&ln?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,jr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=E(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===ur?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+h(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});jr.WMS=zr,ae.wms=se;var Ur=lr.extend({options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=Et(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(o),u=i.multiplyBy(-n).add(r).add(i).subtract(s);tn?xt(this._container,u,n):wt(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new w(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Br=Ur.extend({getEvents:function(){var t=Ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");W(t,"mousemove",i(this._onMouseMove,32,this),this),W(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),W(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,ct(this._container),q(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},Ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=ln?2:1;wt(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",ln&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),r=[];for(e=0;e<n.length;e++)r.push(Number(n[e]));t.options._dashArray=r}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new w,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;this._drawnLayers[t._leaflet_id]=t,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)e=i.layer,e.options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(nt(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(mt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,i=this._drawFirst;i;i=i.next)n=i.layer,n.options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(pt(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),Fr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Hr={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Fr("shape");pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Fr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ct(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=Fr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=ve(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=Fr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ht(t._container)},_bringToBack:function(t){ft(t._container)}},Gr=dn?Fr:O,Vr=Ur.extend({getEvents:function(){var t=Ur.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ct(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),wt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Gr("path");t.options.className&&pt(e,t.options.className),t.options.interactive&&pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ct(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,R(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,i="a"+n+","+r+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ht(t._path)},_bringToBack:function(t){ft(t._path)}});dn&&Vr.include(Hr),zn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ue()||ce()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=Vr&&ce({pane:t})||Br&&ue({pane:t}),this._paneRenderers[t]=e),e}});var Wr=Er.extend({
initialize:function(t,e){Er.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=T(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Vr.create=Gr,Vr.pointsToPath=R,Mr.geometryToLayer=Xt,Mr.coordsToLatLng=Kt,Mr.coordsToLatLngs=Jt,Mr.latLngToCoords=Qt,Mr.latLngsToCoords=$t,Mr.getFeature=te,Mr.asFeature=ee,zn.mergeOptions({boxZoom:!0});var qr=Xn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){W(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._clearDeferredResetState(),this._resetState(),Le(),Mt(),this._startPoint=this._map.mouseEventToContainerPoint(t),void W(document,{contextmenu:$,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new w(this._point,this._startPoint),n=e.getSize();wt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ct(this._box),mt(this._container,"leaflet-crosshair")),Oe(),Tt(),q(document,{contextmenu:$,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new M(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});zn.addInitHook("addHandler","boxZoom",qr),zn.mergeOptions({doubleClickZoom:!0});var Yr=Xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});zn.addInitHook("addHandler","doubleClickZoom",Yr),zn.mergeOptions({dragging:!0,inertia:!Fe,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zr=Xn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new er(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=T(this._map.options.maxBounds);this._offsetLimit=E(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),l=s.multiplyBy(c/u),h=c/(n.inertiaDeceleration*a),f=l.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),g(function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});zn.addInitHook("addHandler","dragging",Zr),zn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xr=Xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),W(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){W(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){q(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(r._panAnim&&r._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=x(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}$(t)}}});zn.addInitHook("addHandler","keyboard",Xr),zn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Kr=Xn.extend({addHooks:function(){W(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){q(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=et(t),r=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),i),$(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});zn.addInitHook("addHandler","scrollWheelZoom",Kr),zn.mergeOptions({tap:!0,tapTolerance:15});var Jr=Xn.extend({addHooks:function(){W(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Q(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],r=e.target;this._startPos=this._newPos=new b(e.clientX,e.clientY),r.tagName&&"a"===r.tagName.toLowerCase()&&pt(r,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),W(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),q(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&mt(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new b(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});sn&&!an&&zn.addInitHook("addHandler","tap",Jr),zn.mergeOptions({touchZoom:sn&&!Fe,bounceAtZoomLimits:!0});var Qr=Xn.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),W(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),W(document,"touchmove",this._onTouchMove,this),W(document,"touchend",this._onTouchEnd,this),Q(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,r=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=r.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=r._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),v(this._animRequest);var s=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(s,this,!0),Q(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),q(document,"touchmove",this._onTouchMove),q(document,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}});zn.addInitHook("addHandler","touchZoom",Qr),zn.BoxZoom=qr,zn.DoubleClickZoom=Yr,zn.Drag=Zr,zn.Keyboard=Xr,zn.ScrollWheelZoom=Kr,zn.Tap=Jr,zn.TouchZoom=Qr;var $r=window.L;window.L=t,Object.freeze=de,t.version=fe,t.noConflict=he,t.Control=Un,t.control=Bn,t.Browser=pn,t.Evented=Me,t.Mixin=Jn,t.Util=we,t.Class=y,t.Handler=Xn,t.extend=e,t.bind=n,t.stamp=r,t.setOptions=l,t.DomEvent=An,t.DomUtil=Dn,t.PosAnimation=jn,t.Draggable=er,t.LineUtil=nr,t.PolyUtil=rr,t.Point=b,t.point=x,t.Bounds=w,t.bounds=E,t.Transformation=C,t.transformation=A,t.Projection=ar,t.LatLng=S,t.latLng=P,t.LatLngBounds=M,t.latLngBounds=T,t.CRS=Se,t.GeoJSON=Mr,t.geoJSON=ne,t.geoJson=Sr,t.Layer=lr,t.LayerGroup=hr,t.layerGroup=fr,t.FeatureGroup=dr,t.featureGroup=pr,t.ImageOverlay=Pr,t.imageOverlay=Cr,t.VideoOverlay=Ar,t.videoOverlay=re,t.DivOverlay=Lr,t.Popup=Or,t.popup=Rr,t.Tooltip=kr,t.tooltip=Nr,t.Icon=mr,t.icon=Gt,t.DivIcon=Ir,t.divIcon=ie,t.Marker=yr,t.marker=Vt,t.TileLayer=jr,t.tileLayer=ae,t.GridLayer=Dr,t.gridLayer=oe,t.SVG=Vr,t.svg=ce,t.Renderer=Ur,t.Canvas=Br,t.canvas=ue,t.Path=_r,t.CircleMarker=br,t.circleMarker=Wt,t.Circle=xr,t.circle=qt,t.Polyline=wr,t.polyline=Yt,t.Polygon=Er,t.polygon=Zt,t.Rectangle=Wr,t.rectangle=le,t.Map=zn,t.map=Ct})},{}],62:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"DataView");e.exports=o},{"./_getNative":124,"./_root":165}],63:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_hashClear"),o=t("./_hashDelete"),a=t("./_hashGet"),s=t("./_hashHas"),u=t("./_hashSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_hashClear":131,"./_hashDelete":132,"./_hashGet":133,"./_hashHas":134,"./_hashSet":135}],64:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_listCacheClear"),o=t("./_listCacheDelete"),a=t("./_listCacheGet"),s=t("./_listCacheHas"),u=t("./_listCacheSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_listCacheClear":146,"./_listCacheDelete":147,"./_listCacheGet":148,"./_listCacheHas":149,"./_listCacheSet":150}],65:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Map");e.exports=o},{"./_getNative":124,"./_root":165}],66:[function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_mapCacheClear"),o=t("./_mapCacheDelete"),a=t("./_mapCacheGet"),s=t("./_mapCacheHas"),u=t("./_mapCacheSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},{"./_mapCacheClear":151,"./_mapCacheDelete":152,"./_mapCacheGet":153,"./_mapCacheHas":154,"./_mapCacheSet":155}],67:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Promise");e.exports=o},{"./_getNative":124,"./_root":165}],68:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Set");e.exports=o},{"./_getNative":124,"./_root":165}],69:[function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=t("./_ListCache"),o=t("./_stackClear"),a=t("./_stackDelete"),s=t("./_stackGet"),u=t("./_stackHas"),c=t("./_stackSet");r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},{"./_ListCache":64,"./_stackClear":168,"./_stackDelete":169,"./_stackGet":170,"./_stackHas":171,"./_stackSet":172}],70:[function(t,e,n){var r=t("./_root"),i=r.Symbol;e.exports=i},{"./_root":165}],71:[function(t,e,n){var r=t("./_root"),i=r.Uint8Array;e.exports=i},{"./_root":165}],72:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"WeakMap");e.exports=o},{"./_getNative":124,"./_root":165}],73:[function(t,e,n){function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}e.exports=r},{}],74:[function(t,e,n){function r(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}e.exports=r},{}],75:[function(t,e,n){function r(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}e.exports=r},{}],76:[function(t,e,n){function r(t,e){var n=a(t),r=!n&&o(t),l=!n&&!r&&s(t),f=!n&&!r&&!l&&c(t),d=n||r||l||f,p=d?i(t.length,String):[],m=p.length;for(var g in t)!e&&!h.call(t,g)||d&&("length"==g||l&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,m))||p.push(g);return p}var i=t("./_baseTimes"),o=t("./isArguments"),a=t("./isArray"),s=t("./isBuffer"),u=t("./_isIndex"),c=t("./isTypedArray"),l=Object.prototype,h=l.hasOwnProperty;e.exports=r},{"./_baseTimes":100,"./_isIndex":140,"./isArguments":182,"./isArray":183,"./isBuffer":185,"./isTypedArray":194}],77:[function(t,e,n){function r(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}e.exports=r},{}],78:[function(t,e,n){function r(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}e.exports=r},{}],79:[function(t,e,n){function r(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}var i=t("./_baseAssignValue"),o=t("./eq"),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},{"./_baseAssignValue":83,"./eq":179}],80:[function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=t("./eq");e.exports=r},{"./eq":179}],81:[function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=t("./_copyObject"),o=t("./keys");e.exports=r},{"./_copyObject":112,"./keys":195}],82:[function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=t("./_copyObject"),o=t("./keysIn");e.exports=r},{"./_copyObject":112,"./keysIn":196}],83:[function(t,e,n){function r(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var i=t("./_defineProperty");e.exports=r},{"./_defineProperty":118}],84:[function(t,e,n){function r(t,e,n,A,L,O){var R,I=e&T,D=e&S,z=e&P;if(n&&(R=L?n(t,A,L,O):n(t)),void 0!==R)return R;if(!w(t))return t;var U=_(t);if(U){if(R=g(t),!I)return l(t,R)}else{var B=m(t),F=B==k||B==N;if(b(t))return c(t,I);if(B==j||B==C||F&&!L){if(R=D||F?{}:y(t),!I)return D?f(t,u(R,t)):h(t,s(R,t))}else{if(!tt[B])return L?t:{};R=v(t,B,I)}}O||(O=new i);var H=O.get(t);if(H)return H;if(O.set(t,R),E(t))return t.forEach(function(i){R.add(r(i,e,n,i,t,O))}),R;if(x(t))return t.forEach(function(i,o){R.set(o,r(i,e,n,o,t,O))}),R;var G=z?D?p:d:D?keysIn:M,V=U?void 0:G(t);return o(V||t,function(i,o){V&&(o=i,i=t[o]),a(R,o,r(i,e,n,o,t,O))}),R}var i=t("./_Stack"),o=t("./_arrayEach"),a=t("./_assignValue"),s=t("./_baseAssign"),u=t("./_baseAssignIn"),c=t("./_cloneBuffer"),l=t("./_copyArray"),h=t("./_copySymbols"),f=t("./_copySymbolsIn"),d=t("./_getAllKeys"),p=t("./_getAllKeysIn"),m=t("./_getTag"),g=t("./_initCloneArray"),v=t("./_initCloneByTag"),y=t("./_initCloneObject"),_=t("./isArray"),b=t("./isBuffer"),x=t("./isMap"),w=t("./isObject"),E=t("./isSet"),M=t("./keys"),T=1,S=2,P=4,C="[object Arguments]",A="[object Array]",L="[object Boolean]",O="[object Date]",R="[object Error]",k="[object Function]",N="[object GeneratorFunction]",I="[object Map]",D="[object Number]",j="[object Object]",z="[object RegExp]",U="[object Set]",B="[object String]",F="[object Symbol]",H="[object WeakMap]",G="[object ArrayBuffer]",V="[object DataView]",W="[object Float32Array]",q="[object Float64Array]",Y="[object Int8Array]",Z="[object Int16Array]",X="[object Int32Array]",K="[object Uint8Array]",J="[object Uint8ClampedArray]",Q="[object Uint16Array]",$="[object Uint32Array]",tt={};tt[C]=tt[A]=tt[G]=tt[V]=tt[L]=tt[O]=tt[W]=tt[q]=tt[Y]=tt[Z]=tt[X]=tt[I]=tt[D]=tt[j]=tt[z]=tt[U]=tt[B]=tt[F]=tt[K]=tt[J]=tt[Q]=tt[$]=!0,tt[R]=tt[k]=tt[H]=!1,e.exports=r},{"./_Stack":69,"./_arrayEach":74,"./_assignValue":79,"./_baseAssign":81,"./_baseAssignIn":82,"./_cloneBuffer":106,"./_copyArray":111,"./_copySymbols":113,"./_copySymbolsIn":114,"./_getAllKeys":121,"./_getAllKeysIn":122,"./_getTag":129,"./_initCloneArray":136,"./_initCloneByTag":137,"./_initCloneObject":138,"./isArray":183,"./isBuffer":185,"./isMap":188,"./isObject":189,"./isSet":192,"./keys":195}],85:[function(t,e,n){var r=t("./isObject"),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.exports=o},{"./isObject":189}],86:[function(t,e,n){function r(t,e,n,a,s){var u=-1,c=t.length;for(n||(n=o),s||(s=[]);++u<c;){var l=t[u];e>0&&n(l)?e>1?r(l,e-1,n,a,s):i(s,l):a||(s[s.length]=l)}return s}var i=t("./_arrayPush"),o=t("./_isFlattenable");e.exports=r},{"./_arrayPush":78,"./_isFlattenable":139}],87:[function(t,e,n){function r(t,e){e=i(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}var i=t("./_castPath"),o=t("./_toKey");e.exports=r},{"./_castPath":104,"./_toKey":174}],88:[function(t,e,n){function r(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}var i=t("./_arrayPush"),o=t("./isArray");e.exports=r},{"./_arrayPush":78,"./isArray":183}],89:[function(t,e,n){function r(t){return null==t?void 0===t?u:s:c&&c in Object(t)?o(t):a(t)}var i=t("./_Symbol"),o=t("./_getRawTag"),a=t("./_objectToString"),s="[object Null]",u="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=r},{"./_Symbol":70,"./_getRawTag":126,"./_objectToString":161}],90:[function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=t("./_baseGetTag"),o=t("./isObjectLike"),a="[object Arguments]";e.exports=r},{"./_baseGetTag":89,"./isObjectLike":190}],91:[function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=t("./_getTag"),o=t("./isObjectLike"),a="[object Map]";e.exports=r},{"./_getTag":129,"./isObjectLike":190}],92:[function(t,e,n){function r(t){if(!a(t)||o(t))return!1;var e=i(t)?p:c;return e.test(s(t))}var i=t("./isFunction"),o=t("./_isMasked"),a=t("./isObject"),s=t("./_toSource"),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,h=Object.prototype,f=l.toString,d=h.hasOwnProperty,p=RegExp("^"+f.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{"./_isMasked":144,"./_toSource":175,"./isFunction":186,"./isObject":189}],93:[function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=t("./_getTag"),o=t("./isObjectLike"),a="[object Set]";e.exports=r},{"./_getTag":129,"./isObjectLike":190}],94:[function(t,e,n){function r(t){return a(t)&&o(t.length)&&!!O[i(t)]}var i=t("./_baseGetTag"),o=t("./isLength"),a=t("./isObjectLike"),s="[object Arguments]",u="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",d="[object Map]",p="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",y="[object String]",_="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",M="[object Int8Array]",T="[object Int16Array]",S="[object Int32Array]",P="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",L="[object Uint32Array]",O={};O[w]=O[E]=O[M]=O[T]=O[S]=O[P]=O[C]=O[A]=O[L]=!0,O[s]=O[u]=O[b]=O[c]=O[x]=O[l]=O[h]=O[f]=O[d]=O[p]=O[m]=O[g]=O[v]=O[y]=O[_]=!1,e.exports=r},{"./_baseGetTag":89,"./isLength":187,"./isObjectLike":190}],95:[function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=t("./_isPrototype"),o=t("./_nativeKeys"),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},{"./_isPrototype":145,"./_nativeKeys":158}],96:[function(t,e,n){function r(t){if(!i(t))return a(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var i=t("./isObject"),o=t("./_isPrototype"),a=t("./_nativeKeysIn"),s=Object.prototype,u=s.hasOwnProperty;e.exports=r},{"./_isPrototype":145,"./_nativeKeysIn":159,"./isObject":189}],97:[function(t,e,n){function r(t,e){return a(o(t,e,i),t+"")}var i=t("./identity"),o=t("./_overRest"),a=t("./_setToString");e.exports=r},{"./_overRest":163,"./_setToString":166,"./identity":181}],98:[function(t,e,n){var r=t("./constant"),i=t("./_defineProperty"),o=t("./identity"),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;e.exports=a},{"./_defineProperty":118,"./constant":177,"./identity":181}],99:[function(t,e,n){function r(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}e.exports=r},{}],100:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}e.exports=r},{}],101:[function(t,e,n){function r(t){if("string"==typeof t)return t;if(a(t))return o(t,r)+"";if(s(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=t("./_Symbol"),o=t("./_arrayMap"),a=t("./isArray"),s=t("./isSymbol"),u=1/0,c=i?i.prototype:void 0,l=c?c.toString:void 0;e.exports=r},{"./_Symbol":70,"./_arrayMap":77,"./isArray":183,"./isSymbol":193}],102:[function(t,e,n){function r(t){return function(e){return t(e)}}e.exports=r},{}],103:[function(t,e,n){function r(t,e){return e=i(e,t),t=a(t,e),null==t||delete t[s(o(e))]}var i=t("./_castPath"),o=t("./last"),a=t("./_parent"),s=t("./_toKey");e.exports=r},{"./_castPath":104,"./_parent":164,"./_toKey":174,"./last":197}],104:[function(t,e,n){function r(t,e){return i(t)?t:o(t,e)?[t]:a(s(t))}var i=t("./isArray"),o=t("./_isKey"),a=t("./_stringToPath"),s=t("./toString");e.exports=r},{"./_isKey":142,"./_stringToPath":173,"./isArray":183,"./toString":204}],105:[function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}var i=t("./_Uint8Array");e.exports=r},{"./_Uint8Array":71}],106:[function(t,e,n){function r(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}var i=t("./_root"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?i.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.exports=r},{"./_root":165}],107:[function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var i=t("./_cloneArrayBuffer");e.exports=r},{"./_cloneArrayBuffer":105}],108:[function(t,e,n){function r(t){var e=new t.constructor(t.source,i.exec(t));return e.lastIndex=t.lastIndex,e}var i=/\w*$/;e.exports=r},{}],109:[function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var i=t("./_Symbol"),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;e.exports=r},{"./_Symbol":70}],110:[function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var i=t("./_cloneArrayBuffer");e.exports=r},{"./_cloneArrayBuffer":105}],111:[function(t,e,n){function r(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}e.exports=r},{}],112:[function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=r?r(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?o(n,c,l):i(n,c,l)}return n}var i=t("./_assignValue"),o=t("./_baseAssignValue");e.exports=r},{"./_assignValue":79,"./_baseAssignValue":83}],113:[function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=t("./_copyObject"),o=t("./_getSymbols");e.exports=r},{"./_copyObject":112,"./_getSymbols":127}],114:[function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=t("./_copyObject"),o=t("./_getSymbolsIn");e.exports=r},{"./_copyObject":112,"./_getSymbolsIn":128}],115:[function(t,e,n){var r=t("./_root"),i=r["__core-js_shared__"];e.exports=i},{"./_root":165}],116:[function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}var i=t("./_baseRest"),o=t("./_isIterateeCall");e.exports=r},{"./_baseRest":97,"./_isIterateeCall":141}],117:[function(t,e,n){function r(t){return i(t)?void 0:t}var i=t("./isPlainObject");e.exports=r},{"./isPlainObject":191}],118:[function(t,e,n){var r=t("./_getNative"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=i},{"./_getNative":124}],119:[function(t,e,n){function r(t){return a(o(t,void 0,i),t+"")}var i=t("./flatten"),o=t("./_overRest"),a=t("./_setToString");e.exports=r},{"./_overRest":163,"./_setToString":166,"./flatten":180}],120:[function(t,e,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(t,e,n){function r(t){return i(t,a,o)}var i=t("./_baseGetAllKeys"),o=t("./_getSymbols"),a=t("./keys");e.exports=r},{"./_baseGetAllKeys":88,"./_getSymbols":127,"./keys":195}],122:[function(t,e,n){function r(t){return i(t,a,o)}var i=t("./_baseGetAllKeys"),o=t("./_getSymbolsIn"),a=t("./keysIn");e.exports=r},{"./_baseGetAllKeys":88,"./_getSymbolsIn":128,"./keysIn":196}],123:[function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=t("./_isKeyable");e.exports=r},{"./_isKeyable":143}],124:[function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=t("./_baseIsNative"),o=t("./_getValue");e.exports=r},{"./_baseIsNative":92,"./_getValue":130}],125:[function(t,e,n){var r=t("./_overArg"),i=r(Object.getPrototypeOf,Object);e.exports=i},{"./_overArg":162}],126:[function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=t("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;e.exports=r},{"./_Symbol":70}],127:[function(t,e,n){var r=t("./_arrayFilter"),i=t("./stubArray"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return a.call(t,e)}))}:i;e.exports=u},{"./_arrayFilter":75,"./stubArray":201}],128:[function(t,e,n){var r=t("./_arrayPush"),i=t("./_getPrototype"),o=t("./_getSymbols"),a=t("./stubArray"),s=Object.getOwnPropertySymbols,u=s?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;e.exports=u},{"./_arrayPush":78,"./_getPrototype":125,"./_getSymbols":127,"./stubArray":201}],129:[function(t,e,n){var r=t("./_DataView"),i=t("./_Map"),o=t("./_Promise"),a=t("./_Set"),s=t("./_WeakMap"),u=t("./_baseGetTag"),c=t("./_toSource"),l="[object Map]",h="[object Object]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",g=c(r),v=c(i),y=c(o),_=c(a),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=m||i&&x(new i)!=l||o&&x(o.resolve())!=f||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(t){
var e=u(t),n=e==h?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return m;case v:return l;case y:return f;case _:return d;case b:return p}return e}),e.exports=x},{"./_DataView":62,"./_Map":65,"./_Promise":67,"./_Set":68,"./_WeakMap":72,"./_baseGetTag":89,"./_toSource":175}],130:[function(t,e,n){function r(t,e){return null==t?void 0:t[e]}e.exports=r},{}],131:[function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=t("./_nativeCreate");e.exports=r},{"./_nativeCreate":157}],132:[function(t,e,n){function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}e.exports=r},{}],133:[function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},{"./_nativeCreate":157}],134:[function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=t("./_nativeCreate"),o=Object.prototype,a=o.hasOwnProperty;e.exports=r},{"./_nativeCreate":157}],135:[function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__";e.exports=r},{"./_nativeCreate":157}],136:[function(t,e,n){function r(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i=Object.prototype,o=i.hasOwnProperty;e.exports=r},{}],137:[function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case v:return i(t);case c:case l:return new r((+t));case y:return o(t,n);case _:case b:case x:case w:case E:case M:case T:case S:case P:return u(t,n);case h:return new r;case f:case m:return new r(t);case d:return a(t);case p:return new r;case g:return s(t)}}var i=t("./_cloneArrayBuffer"),o=t("./_cloneDataView"),a=t("./_cloneRegExp"),s=t("./_cloneSymbol"),u=t("./_cloneTypedArray"),c="[object Boolean]",l="[object Date]",h="[object Map]",f="[object Number]",d="[object RegExp]",p="[object Set]",m="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",M="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",P="[object Uint32Array]";e.exports=r},{"./_cloneArrayBuffer":105,"./_cloneDataView":107,"./_cloneRegExp":108,"./_cloneSymbol":109,"./_cloneTypedArray":110}],138:[function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:i(o(t))}var i=t("./_baseCreate"),o=t("./_getPrototype"),a=t("./_isPrototype");e.exports=r},{"./_baseCreate":85,"./_getPrototype":125,"./_isPrototype":145}],139:[function(t,e,n){function r(t){return a(t)||o(t)||!!(s&&t&&t[s])}var i=t("./_Symbol"),o=t("./isArguments"),a=t("./isArray"),s=i?i.isConcatSpreadable:void 0;e.exports=r},{"./_Symbol":70,"./isArguments":182,"./isArray":183}],140:[function(t,e,n){function r(t,e){var n=typeof t;return e=null==e?i:e,!!e&&("number"==n||"symbol"!=n&&o.test(t))&&t>-1&&t%1==0&&t<e}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},{}],141:[function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=t("./eq"),o=t("./isArrayLike"),a=t("./_isIndex"),s=t("./isObject");e.exports=r},{"./_isIndex":140,"./eq":179,"./isArrayLike":184,"./isObject":189}],142:[function(t,e,n){function r(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}var i=t("./isArray"),o=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},{"./isArray":183,"./isSymbol":193}],143:[function(t,e,n){function r(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}e.exports=r},{}],144:[function(t,e,n){function r(t){return!!o&&o in t}var i=t("./_coreJsData"),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=r},{"./_coreJsData":115}],145:[function(t,e,n){function r(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||i;return t===n}var i=Object.prototype;e.exports=r},{}],146:[function(t,e,n){function r(){this.__data__=[],this.size=0}e.exports=r},{}],147:[function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():a.call(e,n,1),--this.size,!0}var i=t("./_assocIndexOf"),o=Array.prototype,a=o.splice;e.exports=r},{"./_assocIndexOf":80}],148:[function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":80}],149:[function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":80}],150:[function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":80}],151:[function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=t("./_Hash"),o=t("./_ListCache"),a=t("./_Map");e.exports=r},{"./_Hash":63,"./_ListCache":64,"./_Map":65}],152:[function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=t("./_getMapData");e.exports=r},{"./_getMapData":123}],153:[function(t,e,n){function r(t){return i(this,t).get(t)}var i=t("./_getMapData");e.exports=r},{"./_getMapData":123}],154:[function(t,e,n){function r(t){return i(this,t).has(t)}var i=t("./_getMapData");e.exports=r},{"./_getMapData":123}],155:[function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=t("./_getMapData");e.exports=r},{"./_getMapData":123}],156:[function(t,e,n){function r(t){var e=i(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}var i=t("./memoize"),o=500;e.exports=r},{"./memoize":198}],157:[function(t,e,n){var r=t("./_getNative"),i=r(Object,"create");e.exports=i},{"./_getNative":124}],158:[function(t,e,n){var r=t("./_overArg"),i=r(Object.keys,Object);e.exports=i},{"./_overArg":162}],159:[function(t,e,n){function r(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}e.exports=r},{}],160:[function(t,e,n){var r=t("./_freeGlobal"),i="object"==typeof n&&n&&!n.nodeType&&n,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t?t:s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=u},{"./_freeGlobal":120}],161:[function(t,e,n){function r(t){return o.call(t)}var i=Object.prototype,o=i.toString;e.exports=r},{}],162:[function(t,e,n){function r(t,e){return function(n){return t(e(n))}}e.exports=r},{}],163:[function(t,e,n){function r(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),u=Array(s);++a<s;)u[a]=r[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=r[a];return c[e]=n(u),i(t,this,c)}}var i=t("./_apply"),o=Math.max;e.exports=r},{"./_apply":73}],164:[function(t,e,n){function r(t,e){return e.length<2?t:i(t,o(e,0,-1))}var i=t("./_baseGet"),o=t("./_baseSlice");e.exports=r},{"./_baseGet":87,"./_baseSlice":99}],165:[function(t,e,n){var r=t("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},{"./_freeGlobal":120}],166:[function(t,e,n){var r=t("./_baseSetToString"),i=t("./_shortOut"),o=i(r);e.exports=o},{"./_baseSetToString":98,"./_shortOut":167}],167:[function(t,e,n){function r(t){var e=0,n=0;return function(){var r=a(),s=o-(r-n);if(n=r,s>0){if(++e>=i)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var i=800,o=16,a=Date.now;e.exports=r},{}],168:[function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=t("./_ListCache");e.exports=r},{"./_ListCache":64}],169:[function(t,e,n){function r(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}e.exports=r},{}],170:[function(t,e,n){function r(t){return this.__data__.get(t)}e.exports=r},{}],171:[function(t,e,n){function r(t){return this.__data__.has(t)}e.exports=r},{}],172:[function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var i=t("./_ListCache"),o=t("./_Map"),a=t("./_MapCache"),s=200;e.exports=r},{"./_ListCache":64,"./_Map":65,"./_MapCache":66}],173:[function(t,e,n){var r=t("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});e.exports=a},{"./_memoizeCapped":156}],174:[function(t,e,n){function r(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=t("./isSymbol"),o=1/0;e.exports=r},{"./isSymbol":193}],175:[function(t,e,n){function r(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var i=Function.prototype,o=i.toString;e.exports=r},{}],176:[function(t,e,n){var r=t("./_assignValue"),i=t("./_copyObject"),o=t("./_createAssigner"),a=t("./isArrayLike"),s=t("./_isPrototype"),u=t("./keys"),c=Object.prototype,l=c.hasOwnProperty,h=o(function(t,e){if(s(e)||a(e))return void i(e,u(e),t);for(var n in e)l.call(e,n)&&r(t,n,e[n])});e.exports=h},{"./_assignValue":79,"./_copyObject":112,"./_createAssigner":116,"./_isPrototype":145,"./isArrayLike":184,"./keys":195}],177:[function(t,e,n){function r(t){return function(){return t}}e.exports=r},{}],178:[function(t,e,n){function r(t,e,n){function r(e){var n=y,r=_;return y=_=void 0,M=e,x=t.apply(r,n)}function l(t){return M=t,w=setTimeout(d,e),T?r(t):x}function h(t){var n=t-E,r=t-M,i=e-n;return S?c(i,b-r):i}function f(t){var n=t-E,r=t-M;return void 0===E||n>=e||n<0||S&&r>=b}function d(){var t=o();return f(t)?p(t):void(w=setTimeout(d,h(t)))}function p(t){return w=void 0,P&&y?r(t):(y=_=void 0,x)}function m(){void 0!==w&&clearTimeout(w),M=0,y=E=_=w=void 0}function g(){return void 0===w?x:p(o())}function v(){var t=o(),n=f(t);if(y=arguments,_=this,E=t,n){if(void 0===w)return l(E);if(S)return w=setTimeout(d,e),r(E)}return void 0===w&&(w=setTimeout(d,e)),x}var y,_,b,x,w,E,M=0,T=!1,S=!1,P=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,i(n)&&(T=!!n.leading,S="maxWait"in n,b=S?u(a(n.maxWait)||0,e):b,P="trailing"in n?!!n.trailing:P),v.cancel=m,v.flush=g,v}var i=t("./isObject"),o=t("./now"),a=t("./toNumber"),s="Expected a function",u=Math.max,c=Math.min;e.exports=r},{"./isObject":189,"./now":199,"./toNumber":203}],179:[function(t,e,n){function r(t,e){return t===e||t!==t&&e!==e}e.exports=r},{}],180:[function(t,e,n){function r(t){var e=null==t?0:t.length;return e?i(t,1):[]}var i=t("./_baseFlatten");e.exports=r},{"./_baseFlatten":86}],181:[function(t,e,n){function r(t){return t}e.exports=r},{}],182:[function(t,e,n){var r=t("./_baseIsArguments"),i=t("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};e.exports=u},{"./_baseIsArguments":90,"./isObjectLike":190}],183:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],184:[function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=t("./isFunction"),o=t("./isLength");e.exports=r},{"./isFunction":186,"./isLength":187}],185:[function(t,e,n){var r=t("./_root"),i=t("./stubFalse"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;e.exports=l},{"./_root":165,"./stubFalse":202}],186:[function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==s||e==u||e==a||e==c}var i=t("./_baseGetTag"),o=t("./isObject"),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},{"./_baseGetTag":89,"./isObject":189}],187:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;e.exports=r},{}],188:[function(t,e,n){var r=t("./_baseIsMap"),i=t("./_baseUnary"),o=t("./_nodeUtil"),a=o&&o.isMap,s=a?i(a):r;e.exports=s},{"./_baseIsMap":91,"./_baseUnary":102,"./_nodeUtil":160}],189:[function(t,e,n){function r(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}e.exports=r},{}],190:[function(t,e,n){function r(t){return null!=t&&"object"==typeof t}e.exports=r},{}],191:[function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}var i=t("./_baseGetTag"),o=t("./_getPrototype"),a=t("./isObjectLike"),s="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=l.call(Object);e.exports=r},{"./_baseGetTag":89,"./_getPrototype":125,"./isObjectLike":190}],192:[function(t,e,n){var r=t("./_baseIsSet"),i=t("./_baseUnary"),o=t("./_nodeUtil"),a=o&&o.isSet,s=a?i(a):r;e.exports=s},{"./_baseIsSet":93,"./_baseUnary":102,"./_nodeUtil":160}],193:[function(t,e,n){function r(t){return"symbol"==typeof t||o(t)&&i(t)==a}var i=t("./_baseGetTag"),o=t("./isObjectLike"),a="[object Symbol]";e.exports=r},{"./_baseGetTag":89,"./isObjectLike":190}],194:[function(t,e,n){var r=t("./_baseIsTypedArray"),i=t("./_baseUnary"),o=t("./_nodeUtil"),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},{"./_baseIsTypedArray":94,"./_baseUnary":102,"./_nodeUtil":160}],195:[function(t,e,n){function r(t){return a(t)?i(t):o(t)}var i=t("./_arrayLikeKeys"),o=t("./_baseKeys"),a=t("./isArrayLike");e.exports=r},{"./_arrayLikeKeys":76,"./_baseKeys":95,"./isArrayLike":184}],196:[function(t,e,n){function r(t){return a(t)?i(t,!0):o(t)}var i=t("./_arrayLikeKeys"),o=t("./_baseKeysIn"),a=t("./isArrayLike");e.exports=r},{"./_arrayLikeKeys":76,"./_baseKeysIn":96,"./isArrayLike":184}],197:[function(t,e,n){function r(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}e.exports=r},{}],198:[function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=t("./_MapCache"),o="Expected a function";r.Cache=i,e.exports=r},{"./_MapCache":66}],199:[function(t,e,n){var r=t("./_root"),i=function(){return r.Date.now()};e.exports=i},{"./_root":165}],200:[function(t,e,n){var r=t("./_arrayMap"),i=t("./_baseClone"),o=t("./_baseUnset"),a=t("./_castPath"),s=t("./_copyObject"),u=t("./_customOmitClone"),c=t("./_flatRest"),l=t("./_getAllKeysIn"),h=1,f=2,d=4,p=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),s(t,l(t),n),c&&(n=i(n,h|f|d,u));for(var p=e.length;p--;)o(n,e[p]);return n});e.exports=p},{"./_arrayMap":77,"./_baseClone":84,"./_baseUnset":103,"./_castPath":104,"./_copyObject":112,"./_customOmitClone":117,"./_flatRest":119,"./_getAllKeysIn":122}],201:[function(t,e,n){function r(){return[]}e.exports=r},{}],202:[function(t,e,n){function r(){return!1}e.exports=r},{}],203:[function(t,e,n){function r(t){if("number"==typeof t)return t;if(o(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||l.test(t)?h(t.slice(2),n?2:8):u.test(t)?a:+t}var i=t("./isObject"),o=t("./isSymbol"),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,h=parseInt;e.exports=r},{"./isObject":189,"./isSymbol":193}],204:[function(t,e,n){function r(t){return null==t?"":i(t)}var i=t("./_baseToString");e.exports=r},{"./_baseToString":101}],205:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(t,e){for(var n,i,u=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)a.call(n,l)&&(u[l]=n[l]);if(o){i=o(n);for(var h=0;h<i.length;h++)s.call(n,i[h])&&(u[i[h]]=n[i[h]])}}return u}},{}],206:[function(t,e,n){!function(n,r){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size"],r):"object"==typeof e&&e.exports?e.exports=r(t("ev-emitter"),t("get-size")):(n.Outlayer={},n.Outlayer.Item=r(n.EvEmitter,n.getSize))}(window,function(t,e){"use strict";function n(t){for(var e in t)return!1;return e=null,!0}function r(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function i(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var o=document.documentElement.style,a="string"==typeof o.transition?"transition":"WebkitTransition",s="string"==typeof o.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],c={transform:s,transition:a,transitionDuration:a+"Duration",transitionProperty:a+"Property",transitionDelay:a+"Delay"},l=r.prototype=Object.create(t.prototype);l.constructor=r,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var n in t){var r=c[n]||n;e[r]=t[n]}},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=t[e?"left":"right"],i=t[n?"top":"bottom"],o=parseFloat(r),a=parseFloat(i),s=this.layout.size;r.indexOf("%")!=-1&&(o=o/100*s.width),i.indexOf("%")!=-1&&(a=a/100*s.height),o=isNaN(o)?0:o,a=isNaN(a)?0:a,o-=e?s.paddingLeft:s.paddingRight,a-=n?s.paddingTop:s.paddingBottom,this.position.x=o,this.position.y=a},l.layoutPosition=function(){var t=this.layout.size,e={},n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop"),i=n?"paddingLeft":"paddingRight",o=n?"left":"right",a=n?"right":"left",s=this.position.x+t[i];e[o]=this.getXValue(s),e[a]="";var u=r?"paddingTop":"paddingBottom",c=r?"top":"bottom",l=r?"bottom":"top",h=this.position.y+t[u];e[c]=this.getYValue(h),e[l]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var n=this.position.x,r=this.position.y,i=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),i&&!this.isTransitioning)return void this.layoutPosition();var o=t-n,a=e-r,s={};s.transform=this.getTranslate(o,a),this.transition({to:s,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},l.getTranslate=function(t,e){var n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop");return t=n?t:-t,e=r?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},l._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);var r=this.element.offsetHeight;r=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var h="opacity,"+i(s);l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:h,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var f={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,r=f[t.propertyName]||t.propertyName;if(delete e.ingProperties[r],n(e.ingProperties)&&this.disableTransition(),r in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[r]),r in e.onEnd){var i=e.onEnd[r];i.call(this),delete e.onEnd[r]}this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(d)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){return a&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("visibleStyle");e[n]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var n in e)return n},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");e[n]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r})},{"ev-emitter":51,"get-size":58}],207:[function(t,e,n){!function(n,r){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,o){return r(n,t,e,i,o)}):"object"==typeof e&&e.exports?e.exports=r(n,t("ev-emitter"),t("get-size"),t("fizzy-ui-utils"),t("./item")):n.Outlayer=r(n,n.EvEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)}(window,function(t,e,n,r,i){"use strict";function o(t,e){var n=r.getQueryElement(t);if(!n)return void(u&&u.error("Bad element for "+this.constructor.namespace+": "+(n||t)));this.element=n,c&&(this.$element=c(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(e);var i=++h;this.element.outlayerGUID=i,f[i]=this,this._create();var o=this._getOption("initLayout");o&&this.layout()}function a(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function s(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),n=e&&e[1],r=e&&e[2];if(!n.length)return 0;n=parseFloat(n);var i=p[r]||1;return n*i}var u=t.console,c=t.jQuery,l=function(){},h=0,f={};o.namespace="outlayer",o.Item=i,o.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var d=o.prototype;r.extend(d,e.prototype),d.option=function(t){r.extend(this.options,t)},d._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},o.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},d._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),r.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},d.reloadItems=function(){this.items=this._itemize(this.element.children)},d._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,r=[],i=0;i<e.length;i++){var o=e[i],a=new n(o,this);r.push(a)}return r},d._filterFindItemElements=function(t){return r.filterFindElements(t,this.options.itemSelector)},d.getItemElements=function(){return this.items.map(function(t){return t.element})},d.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},d._init=d.layout,d._resetLayout=function(){this.getSize()},d.getSize=function(){this.size=n(this.element)},d._getMeasurement=function(t,e){var r,i=this.options[t];i?("string"==typeof i?r=this.element.querySelector(i):i instanceof HTMLElement&&(r=i),this[t]=r?n(r)[e]:i):this[t]=0},d.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},d._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},d._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var n=[];t.forEach(function(t){var r=this._getItemLayoutPosition(t);r.item=t,r.isInstant=e||t.isLayoutInstant,n.push(r)},this),this._processLayoutQueue(n)}},d._getItemLayoutPosition=function(){return{x:0,y:0}},d._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},d.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=s(t),this.stagger)},d._positionItem=function(t,e,n,r,i){r?t.goTo(e,n):(t.stagger(i*this.stagger),t.moveTo(e,n))},d._postLayout=function(){this.resizeContainer()},d.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},d._getContainerSize=l,d._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},d._emitCompleteOnItems=function(t,e){function n(){i.dispatchEvent(t+"Complete",null,[e])}function r(){a++,a==o&&n()}var i=this,o=e.length;if(!e||!o)return void n();var a=0;e.forEach(function(e){e.once(t,r)})},d.dispatchEvent=function(t,e,n){var r=e?[e].concat(n):n;if(this.emitEvent(t,r),c)if(this.$element=this.$element||c(this.element),e){var i=c.Event(e);i.type=t,this.$element.trigger(i,n)}else this.$element.trigger(t,n)},d.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},d.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},d.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},d.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){r.removeFrom(this.stamps,t),this.unignore(t)},this)},d._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=r.makeArray(t)},d._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},d._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},d._manageStamp=l,d._getElementOffset=function(t){var e=t.getBoundingClientRect(),r=this._boundingRect,i=n(t),o={left:e.left-r.left-i.marginLeft,top:e.top-r.top-i.marginTop,right:r.right-e.right-i.marginRight,bottom:r.bottom-e.bottom-i.marginBottom};return o},d.handleEvent=r.handleEvent,d.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},d.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},d.onresize=function(){this.resize()},r.debounceMethod(o,"onresize",100),d.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},d.needsResizeLayout=function(){var t=n(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},d.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},d.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},d.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},d.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,n){t.stagger(n*e),t.reveal()})}},d.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,n){t.stagger(n*e),t.hide()})}},d.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},d.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},d.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},d.getItems=function(t){t=r.makeArray(t);var e=[];return t.forEach(function(t){var n=this.getItem(t);n&&e.push(n)},this),e},d.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),r.removeFrom(this.items,t)},this)},d.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},o.data=function(t){t=r.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},o.create=function(t,e){var n=a(o);return n.defaults=r.extend({},o.defaults),r.extend(n.defaults,e),n.compatOptions=r.extend({},o.compatOptions),n.namespace=t,n.data=o.data,n.Item=a(i),r.htmlInit(n,t),c&&c.bridget&&c.bridget(t,n),n};var p={ms:1,s:1e3};return o.Item=i,o})},{"./item":206,"ev-emitter":51,"fizzy-ui-utils":57,"get-size":58}],208:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){g&&p&&(g=!1,
p.length?m=p.concat(m):v=-1,m.length&&u())}function u(){if(!g){var t=o(s);g=!0;for(var e=m.length;e;){for(p=m,m=[];++v<e;)p&&p[v].run();v=-1,e=m.length}p=null,g=!1,a(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var h,f,d=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,m=[],g=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||g||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],209:[function(t,e,n){(function(t){!function(n){function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?s:u)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}var f=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return a(this,new l(t,e,n)),n},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(o,t)},n)}e[o]=a,0===--i&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){f(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},"undefined"!=typeof e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],210:[function(t,e,n){"use strict";function r(t,e,n,r,i){}e.exports=r},{"./lib/ReactPropTypesSecret":214,"fbjs/lib/invariant":55,"fbjs/lib/warning":56}],211:[function(t,e,n){"use strict";var r=t("fbjs/lib/emptyFunction"),i=t("fbjs/lib/invariant"),o=t("./lib/ReactPropTypesSecret");e.exports=function(){function t(t,e,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=r,n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":214,"fbjs/lib/emptyFunction":53,"fbjs/lib/invariant":55}],212:[function(t,e,n){"use strict";var r=t("fbjs/lib/emptyFunction"),i=t("fbjs/lib/invariant"),o=t("fbjs/lib/warning"),a=t("./lib/ReactPropTypesSecret"),s=t("./checkPropTypes");e.exports=function(t,e){function n(t){var e=t&&(P&&t[P]||t[C]);if("function"==typeof e)return e}function u(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function c(t){this.message=t,this.stack=""}function l(t){function n(n,r,o,s,u,l,h){if(s=s||A,l=l||o,h!==a)if(e)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[o]?n?new c(null===r[o]?"The "+u+" `"+l+"` is marked as required "+("in `"+s+"`, but its value is `null`."):"The "+u+" `"+l+"` is marked as required in "+("`"+s+"`, but its value is `undefined`.")):null:t(r,o,s,u,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function h(t){function e(e,n,r,i,o,a){var s=e[n],u=E(s);if(u!==t){var l=M(s);return new c("Invalid "+i+" `"+o+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return l(e)}function f(){return l(r.thatReturnsNull)}function d(t){function e(e,n,r,i,o){if("function"!=typeof t)return new c("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){var u=E(s);return new c("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<s.length;l++){var h=t(s,l,r,i,o+"["+l+"]",a);if(h instanceof Error)return h}return null}return l(e)}function p(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){var s=E(a);return new c("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return l(e)}function m(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||A,s=S(e[n]);return new c("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return l(e)}function g(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(u(a,t[s]))return null;var l=JSON.stringify(t);return new c("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return Array.isArray(t)?l(e):r.thatReturnsNull}function v(t){function e(e,n,r,i,o){if("function"!=typeof t)return new c("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=E(s);if("object"!==u)return new c("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var l in s)if(s.hasOwnProperty(l)){var h=t(s,l,r,i,o+"."+l,a);if(h instanceof Error)return h}return null}return l(e)}function y(t){function e(e,n,r,i,o){for(var s=0;s<t.length;s++){var u=t[s];if(null==u(e,n,r,i,o,a))return null}return new c("Invalid "+i+" `"+o+"` supplied to "+("`"+r+"`."))}if(!Array.isArray(t))return r.thatReturnsNull;for(var n=0;n<t.length;n++){var i=t[n];if("function"!=typeof i)return o(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",T(i),n),r.thatReturnsNull}return l(e)}function _(){function t(t,e,n,r,i){return x(t[e])?null:new c("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return l(t)}function b(t){function e(e,n,r,i,o){var s=e[n],u=E(s);if("object"!==u)return new c("Invalid "+i+" `"+o+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var l in t){var h=t[l];if(h){var f=h(s,l,r,i,o+"."+l,a);if(f)return f}}return null}return l(e)}function x(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(x);if(null===e||t(e))return!0;var r=n(e);if(!r)return!1;var i,o=r.call(e);if(r!==e.entries){for(;!(i=o.next()).done;)if(!x(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!x(a[1]))return!1}return!0;default:return!1}}function w(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function E(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":w(e,t)?"symbol":e}function M(t){if("undefined"==typeof t||null===t)return""+t;var e=E(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function T(t){var e=M(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function S(t){return t.constructor&&t.constructor.name?t.constructor.name:A}var P="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",A="<<anonymous>>",L={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:f(),arrayOf:d,element:p(),instanceOf:m,node:_(),objectOf:v,oneOf:g,oneOfType:y,shape:b};return c.prototype=Error.prototype,L.checkPropTypes=s,L.PropTypes=L,L}},{"./checkPropTypes":210,"./lib/ReactPropTypesSecret":214,"fbjs/lib/emptyFunction":53,"fbjs/lib/invariant":55,"fbjs/lib/warning":56}],213:[function(t,e,n){e.exports=t("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":211,"./factoryWithTypeCheckers":212}],214:[function(t,e,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},{}],215:[function(t,e,n){"use strict"},{"fbjs/lib/EventListener":218,"fbjs/lib/ExecutionEnvironment":219,"fbjs/lib/camelizeStyleName":221,"fbjs/lib/containsNode":222,"fbjs/lib/emptyFunction":223,"fbjs/lib/emptyObject":224,"fbjs/lib/focusNode":225,"fbjs/lib/getActiveElement":226,"fbjs/lib/hyphenateStyleName":228,"fbjs/lib/invariant":229,"fbjs/lib/performanceNow":233,"fbjs/lib/shallowEqual":234,"fbjs/lib/warning":235,"object-assign":205,"prop-types":239,"prop-types/checkPropTypes":236,react:321}],216:[function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),e.name="Invariant Violation",e.framesToPop=1,e}function i(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function o(){if(Ce)for(var t in Ae){var e=Ae[t],n=Ce.indexOf(t);if(-1<n?void 0:r("96",t),!Le.plugins[n]){e.extractEvents?void 0:r("97",t),Le.plugins[n]=e,n=e.eventTypes;for(var i in n){var o=void 0,s=n[i],u=e,c=i;Le.eventNameDispatchConfigs.hasOwnProperty(c)?r("99",c):void 0,Le.eventNameDispatchConfigs[c]=s;var l=s.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&a(l[o],u,c);o=!0}else s.registrationName?(a(s.registrationName,u,c),o=!0):o=!1;o?void 0:r("98",i,t)}}}}function a(t,e,n){Le.registrationNameModules[t]?r("100",t):void 0,Le.registrationNameModules[t]=e,Le.registrationNameDependencies[t]=e.eventTypes[n].dependencies}function s(t,e){return(t&e)===e}function u(t){for(var e;e=t._renderedComponent;)t=e;return t}function c(t,e){t=u(t),t._hostNode=e,e[We]=t}function l(t,e){if(!(t._flags&Ge.hasCachedChildNodes)){var n=t._renderedChildren;e=e.firstChild;var i;t:for(i in n)if(n.hasOwnProperty(i)){var o=n[i],a=u(o)._domID;if(0!==a){for(;null!==e;e=e.nextSibling){var s=e,l=a;if(s.nodeType===Be&&s.getAttribute(He)===""+l||s.nodeType===Fe&&s.nodeValue===" react-text: "+l+" "||s.nodeType===Fe&&s.nodeValue===" react-empty: "+l+" "){c(o,e);continue t}}r("32",a)}}t._flags|=Ge.hasCachedChildNodes}}function h(t){if(t[We])return t[We];for(var e=[];!t[We];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}var n=t[We];if(n.tag===ze||n.tag===Ue)return n;for(;t&&(n=t[We]);t=e.pop()){var r=n;e.length&&l(n,t)}return r}function f(t){if("function"==typeof t.getName)return t.getName();if("number"==typeof t.tag){if(t=t.type,"string"==typeof t)return t;if("function"==typeof t)return t.displayName||t.name}return null}function d(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if((e.effectTag&nn)!==en)return 1;for(;e.return;)if(e=e.return,(e.effectTag&nn)!==en)return 1}return e.tag===Qe?2:3}function p(t){2!==d(t)?r("188"):void 0}function m(t){var e=t.alternate;if(!e)return e=d(t),3===e?r("188"):void 0,1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return p(o),t;if(s===i)return p(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s?void 0:r("189")}}n.alternate!==i?r("190"):void 0}return n.tag!==Qe?r("188"):void 0,n.stateNode.current===n?t:e}function g(t,e,n,r,i,o,a,s,u){on._hasCaughtError=!1,on._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){on._caughtError=t,on._hasCaughtError=!0}}function v(){if(on._hasRethrowError){var t=on._rethrowError;throw on._rethrowError=null,on._hasRethrowError=!1,t}}function y(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=sn.getNodeFromInstance(r),an.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function _(t){if(t=un.getInstanceFromNode(t))if("number"==typeof t.tag){cn&&"function"==typeof cn.restoreControlledState?void 0:r("194");var e=un.getFiberCurrentPropsFromNode(t.stateNode);cn.restoreControlledState(t.stateNode,t.type,e)}else"function"!=typeof t.restoreControlledState?r("195"):void 0,t.restoreControlledState()}function b(t,e,n,r,i,o){return t(e,n,r,i,o)}function x(t,e){return t(e)}function w(t,e){return x(t,e)}function E(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===mn?t.parentNode:t}function M(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n=e;if("number"==typeof n.tag){for(;n.return;)n=n.return;n=n.tag!==gn?null:n.stateNode.containerInfo}else{for(;n._hostParent;)n=n._hostParent;n=Ye.getNodeFromInstance(n).parentNode}if(!n)break;t.ancestors.push(e),e=Ye.getClosestInstanceFromNode(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],yn._handleTopLevel(t.topLevelType,e,t.nativeEvent,E(t.nativeEvent))}function T(t,e){return null==e?r("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function S(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function P(t,e){t&&(un.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))}function C(t){return P(t,!0)}function A(t){return P(t,!1)}function L(t,e,n){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==e&&"input"!==e&&"select"!==e&&"textarea"!==e);default:return!1}}function O(t,e){if(!ge.canUseDOM||e&&!("addEventListener"in document))return!1;e="on"+t;var n=e in document;return n||(n=document.createElement("div"),n.setAttribute(e,"return;"),n="function"==typeof n[e]),!n&&Se&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function R(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function k(t){if(En[t])return En[t];if(!wn[t])return t;var e,n=wn[t];for(e in n)if(n.hasOwnProperty(e)&&e in Mn)return En[t]=n[e];return""}function N(t){return Object.prototype.hasOwnProperty.call(t,Cn)||(t[Cn]=Pn++,Sn[t[Cn]]={}),Sn[t[Cn]]}function I(t){return!!Bn.hasOwnProperty(t)||!Un.hasOwnProperty(t)&&(zn.test(t)?Bn[t]=!0:(Un[t]=!0,!1))}function D(){return null}function j(t){var e="";return me.Children.forEach(t,function(t){null==t||"string"!=typeof t&&"number"!=typeof t||(e+=t)}),e}function z(t,e,n){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r)}else{for(n=""+n,e=null,r=0;r<t.length;r++){if(t[r].value===n)return void(t[r].selected=!0);null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function U(t,e){e&&(Qn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?r("137",t,""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?r("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML?void 0:r("61")),null!=e.style&&"object"!=typeof e.style?r("62",""):void 0)}function B(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function F(t){var e=B(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(t){r=""+t,n.set.call(this,t)}}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}function H(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function G(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===rr)return void(n.nodeValue=e)}t.textContent=e}function V(t,e){ur(e,t.nodeType===ar||t.nodeType===sr?t:t.ownerDocument)}function W(t,e){return t!==kr&&t!==Rr||e!==kr&&e!==Rr?t===Or&&e!==Or?-255:t!==Or&&e===Or?255:t-e:0}function q(){return{first:null,last:null,hasForceUpdate:!1,callbackList:null}}function Y(t,e,n,r){null!==n?n.next=e:(e.next=t.first,t.first=e),null!==r?e.next=r:t.last=e}function Z(t,e){e=e.priorityLevel;var n=null;if(null!==t.last&&0>=W(t.last.priorityLevel,e))n=t.last;else for(t=t.first;null!==t&&0>=W(t.priorityLevel,e);)n=t,t=t.next;return n}function X(t,e){var n=t.alternate,r=t.updateQueue;null===r&&(r=t.updateQueue=q()),null!==n?(t=n.updateQueue,null===t&&(t=n.updateQueue=q())):t=null,Dr=r,jr=t!==r?t:null;var i=Dr;n=jr;var o=Z(i,e),a=null!==o?o.next:i.first;return null===n?(Y(i,e,o,a),null):(r=Z(n,e),t=null!==r?r.next:n.first,Y(i,e,o,a),a===t&&null!==a||o===r&&null!==o?(null===r&&(n.first=e),null===t&&(n.last=null),null):(e={priorityLevel:e.priorityLevel,partialState:e.partialState,callback:e.callback,isReplace:e.isReplace,isForced:e.isForced,isTopLevelUnmount:e.isTopLevelUnmount,next:null},Y(n,e,r,t),e))}function K(t,e,n,r){return t=t.partialState,"function"==typeof t?t.call(e,n,r):t}function J(t,e,n){t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n}function Q(t){return t.tag===Gr&&null!=t.type.childContextTypes}function $(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!=typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in i?void 0:r("108",f(t)||"Unknown",o);return ve({},e,n)}function tt(t,e,n){this.tag=t,this.key=e,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=li,this.lastEffect=this.firstEffect=this.nextEffect=null,this.pendingWorkPriority=ui,this.alternate=null}function et(t,e,n){var i=void 0;return"function"==typeof t?(i=t.prototype&&t.prototype.isReactComponent?new tt(ti,e,n):new tt($r,e,n),i.type=t):"string"==typeof t?(i=new tt(ni,e,n),i.type=t):"object"==typeof t&&null!==t&&"number"==typeof t.tag?i=t:r("130",null==t?t:typeof t,""),i}function nt(t){return null===t||"undefined"==typeof t?null:(t=Fi&&t[Fi]||t["@@iterator"],"function"==typeof t?t:null)}function rt(t,e){var n=e.ref;if(null!==n&&"function"!=typeof n){if(e._owner){e=e._owner;var i=void 0;e&&("number"==typeof e.tag?(e.tag!==Ri?r("110"):void 0,i=e.stateNode):i=e.getPublicInstance()),i?void 0:r("147",n);var o=""+n;return null!==t&&null!==t.ref&&t.ref._stringRef===o?t.ref:(t=function(t){var e=i.refs===be?i.refs={}:i.refs;null===t?delete e[o]:e[o]=t},t._stringRef=o,t)}"string"!=typeof n?r("148"):void 0,e._owner?void 0:r("149",n)}return n}function it(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function ot(t,e){function n(n,r){if(e){if(!t){if(null===r.alternate)return;r=r.alternate}var i=n.lastEffect;null!==i?(i.nextEffect=r,n.lastEffect=r):n.firstEffect=n.lastEffect=r,r.nextEffect=null,r.effectTag=Bi}}function i(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function o(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,n){return t?(e=Ei(e,n),e.index=0,e.sibling=null,e):(e.pendingWorkPriority=n,e.effectTag=zi,e.index=0,e.sibling=null,e)}function s(t,n,r){return t.index=r,e?(r=t.alternate,null!==r?(r=r.index,r<n?(t.effectTag=Ui,n):r):(t.effectTag=Ui,n)):n}function u(t){return e&&null===t.alternate&&(t.effectTag=Ui),t}function c(t,e,n,r){return null===e||e.tag!==ki?(n=Si(n,t.internalContextTag,r),n.return=t,n):(e=a(e,r),e.pendingProps=n,e.return=t,e)}function l(t,e,n,r){return null===e||e.type!==n.type?(r=Mi(n,t.internalContextTag,r),r.ref=rt(e,n),r.return=t,r):(r=a(e,r),r.ref=rt(e,n),r.pendingProps=n.props,r.return=t,r)}function h(t,e,n,r){return null===e||e.tag!==Ii?(n=Pi(n,t.internalContextTag,r),n.return=t,n):(e=a(e,r),e.pendingProps=n,e.return=t,e)}function f(t,e,n,r){return null===e||e.tag!==Di?(e=Ci(n,t.internalContextTag,r),e.type=n.value,e.return=t,e):(e=a(e,r),e.type=n.value,e.return=t,e)}function d(t,e,n,r){return null===e||e.tag!==Ni||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(n=Ai(n,t.internalContextTag,r),n.return=t,n):(e=a(e,r),e.pendingProps=n.children||[],e.return=t,e)}function p(t,e,n,r){return null===e||e.tag!==ji?(n=Ti(n,t.internalContextTag,r),n.return=t,n):(e=a(e,r),e.pendingProps=n,e.return=t,e)}function m(t,e,n){if("string"==typeof e||"number"==typeof e)return e=Si(""+e,t.internalContextTag,n),e.return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Hi:return n=Mi(e,t.internalContextTag,n),n.ref=rt(null,e),n.return=t,n;case bi:return e=Pi(e,t.internalContextTag,n),e.return=t,e;case xi:return n=Ci(e,t.internalContextTag,n),n.type=e.value,n.return=t,n;case wi:return e=Ai(e,t.internalContextTag,n),e.return=t,e}if(Li(e)||nt(e))return e=Ti(e,t.internalContextTag,n),e.return=t,e;it(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:c(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Hi:return n.key===i?l(t,e,n,r):null;case bi:return n.key===i?h(t,e,n,r):null;case xi:return null===i?f(t,e,n,r):null;case wi:return n.key===i?d(t,e,n,r):null}if(Li(n)||nt(n))return null!==i?null:p(t,e,n,r);it(t,n)}return null}function v(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return t=t.get(n)||null,c(e,t,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Hi:return t=t.get(null===r.key?n:r.key)||null,l(e,t,r,i);case bi:return t=t.get(null===r.key?n:r.key)||null,h(e,t,r,i);case xi:return t=t.get(n)||null,f(e,t,r,i);case wi:return t=t.get(null===r.key?n:r.key)||null,d(e,t,r,i)}if(Li(r)||nt(r))return t=t.get(n)||null,p(e,t,r,i);it(e,r)}return null}function y(t,r,a,u){for(var c=null,l=null,h=r,f=r=0,d=null;null!==h&&f<a.length;f++){h.index>f?(d=h,h=null):d=h.sibling;var p=g(t,h,a[f],u);if(null===p){null===h&&(h=d);break}e&&h&&null===p.alternate&&n(t,h),r=s(p,r,f),null===l?c=p:l.sibling=p,l=p,h=d}if(f===a.length)return i(t,h),c;if(null===h){for(;f<a.length;f++)(h=m(t,a[f],u))&&(r=s(h,r,f),null===l?c=h:l.sibling=h,l=h);return c}for(h=o(t,h);f<a.length;f++)(d=v(h,t,f,a[f],u))&&(e&&null!==d.alternate&&h.delete(null===d.key?f:d.key),r=s(d,r,f),null===l?c=d:l.sibling=d,l=d);return e&&h.forEach(function(e){return n(t,e)}),c}function _(t,a,u,c){var l=nt(u);"function"!=typeof l?r("150"):void 0,u=l.call(u),null==u?r("151"):void 0;for(var h=l=null,f=a,d=a=0,p=null,y=u.next();null!==f&&!y.done;d++,y=u.next()){f.index>d?(p=f,f=null):p=f.sibling;var _=g(t,f,y.value,c);if(null===_){f||(f=p);break}e&&f&&null===_.alternate&&n(t,f),a=s(_,a,d),null===h?l=_:h.sibling=_,h=_,f=p}if(y.done)return i(t,f),l;if(null===f){for(;!y.done;d++,y=u.next())y=m(t,y.value,c),null!==y&&(a=s(y,a,d),null===h?l=y:h.sibling=y,h=y);return l}for(f=o(t,f);!y.done;d++,y=u.next())y=v(f,t,d,y.value,c),null!==y&&(e&&null!==y.alternate&&f.delete(null===y.key?d:y.key),a=s(y,a,d),null===h?l=y:h.sibling=y,h=y);return e&&f.forEach(function(e){return n(t,e)}),l}return function(t,e,o,s){var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case Hi:t:{var l=o.key;for(c=e;null!==c;){if(c.key===l){if(c.type===o.type){i(t,c.sibling),e=a(c,s),e.ref=rt(c,o),e.pendingProps=o.props,e.return=t,t=e;break t}i(t,c);break}n(t,c),c=c.sibling}s=Mi(o,t.internalContextTag,s),s.ref=rt(e,o),s.return=t,t=s}return u(t);case bi:t:{for(c=o.key;null!==e;){if(e.key===c){if(e.tag===Ii){i(t,e.sibling),e=a(e,s),e.pendingProps=o,e.return=t,t=e;break t}i(t,e);break}n(t,e),e=e.sibling}o=Pi(o,t.internalContextTag,s),o.return=t,t=o}return u(t);case xi:t:{if(null!==e){if(e.tag===Di){i(t,e.sibling),e=a(e,s),e.type=o.value,e.return=t,t=e;break t}i(t,e)}e=Ci(o,t.internalContextTag,s),e.type=o.value,e.return=t,t=e}return u(t);case wi:t:{for(c=o.key;null!==e;){if(e.key===c){if(e.tag===Ni&&e.stateNode.containerInfo===o.containerInfo&&e.stateNode.implementation===o.implementation){i(t,e.sibling),e=a(e,s),e.pendingProps=o.children||[],e.return=t,t=e;break t}i(t,e);break}n(t,e),e=e.sibling}o=Ai(o,t.internalContextTag,s),o.return=t,t=o}return u(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==e&&e.tag===ki?(i(t,e.sibling),e=a(e,s),e.pendingProps=o,e.return=t,t=e):(i(t,e),o=Si(o,t.internalContextTag,s),o.return=t,t=o),u(t);if(Li(o))return y(t,e,o,s);if(nt(o))return _(t,e,o,s);if(c&&it(t,o),"undefined"==typeof o)switch(t.tag){case Ri:case Oi:o=t.type,r("152",o.displayName||o.name||"Component")}return i(t,e)}}function at(t,e,n,i){function o(t,e){e.updater=a,t.stateNode=e,Ze.set(e,t)}var a={isMounted:io,enqueueSetState:function(n,r,i){n=Ze.get(n);var o=e(n,!1);$i(n,r,void 0===i?null:i,o),t(n,o)},enqueueReplaceState:function(n,r,i){n=Ze.get(n);var o=e(n,!1);to(n,r,void 0===i?null:i,o),t(n,o)},enqueueForceUpdate:function(n,r){n=Ze.get(n);var i=e(n,!1);eo(n,void 0===r?null:r,i),t(n,i)}};return{adoptClassInstance:o,constructClassInstance:function(t,e){var n=t.type,r=Ji(t),i=Qi(t),a=i?Ki(t,r):be;return e=new n(e,a),o(t,e),i&&Xi(t,r,a),e},mountClassInstance:function(t,e){var n=t.alternate,i=t.stateNode,o=i.state||null,s=t.pendingProps;s?void 0:r("158");var u=Ji(t);i.props=s,i.state=o,i.refs=be,i.context=Ki(t,u),Cr.enableAsyncSubtreeAPI&&null!=t.type&&null!=t.type.prototype&&!0===t.type.prototype.unstable_isAsyncReactComponent&&(t.internalContextTag|=Zi),"function"==typeof i.componentWillMount&&(u=i.state,i.componentWillMount(),u!==i.state&&a.enqueueReplaceState(i,i.state,null),u=t.updateQueue,null!==u&&(i.state=no(n,t,u,i,o,s,e))),"function"==typeof i.componentDidMount&&(t.effectTag|=Yi)},updateClassInstance:function(t,e,o){var s=e.stateNode;s.props=e.memoizedProps,s.state=e.memoizedState;var u=e.memoizedProps,c=e.pendingProps;c||(c=u,null==c?r("159"):void 0);var l=s.context,h=Ji(e);if(h=Ki(e,h),"function"!=typeof s.componentWillReceiveProps||u===c&&l===h||(l=s.state,s.componentWillReceiveProps(c,h),s.state!==l&&a.enqueueReplaceState(s,s.state,null)),l=e.memoizedState,o=null!==e.updateQueue?no(t,e,e.updateQueue,s,l,c,o):l,!(u!==c||l!==o||ro()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate))return"function"!=typeof s.componentDidUpdate||u===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=Yi),!1;var f=c;if(null===u||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)f=!0;else{var d=e.stateNode,p=e.type;f="function"==typeof d.shouldComponentUpdate?d.shouldComponentUpdate(f,o,h):!p.prototype||!p.prototype.isPureReactComponent||(!xe(u,f)||!xe(l,o))}return f?("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(c,o,h),"function"==typeof s.componentDidUpdate&&(e.effectTag|=Yi)):("function"!=typeof s.componentDidUpdate||u===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=Yi),n(e,c),i(e,o)),s.props=c,s.state=o,s.context=h,f}}}function st(t,e,n,i,o){function a(t,e,n){s(t,e,n,e.pendingWorkPriority)}function s(t,e,n,r){e.child=null===t?oo(e,e.child,n,r):t.child===e.child?ao(e,e.child,n,r):so(e,e.child,n,r)}function u(t,e){var n=e.ref;null===n||t&&t.ref===n||(e.effectTag|=No)}function c(t,e,n,r){if(u(t,e),!n)return r&&go(e,!1),h(t,e);n=e.stateNode,Io.current=e;var i=n.render();return e.effectTag|=Lo,a(t,e,i),e.memoizedState=n.state,e.memoizedProps=n.props,r&&go(e,!0),e.child}function l(t){var e=t.stateNode;e.pendingContext?mo(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mo(t,e.context,!1),v(t,e.containerInfo)}function h(t,e){return uo(t,e),e.child}function f(t,e){switch(e.tag){case bo:l(e);break;case _o:po(e);break;case Eo:v(e,e.stateNode.containerInfo)}return null}var d=t.shouldSetTextContent,p=t.useSyncScheduling,m=t.shouldDeprioritizeSubtree,g=e.pushHostContext,v=e.pushHostContainer,y=n.enterHydrationState,_=n.resetHydrationState,b=n.tryToClaimNextHydratableInstance;t=at(i,o,function(t,e){t.memoizedProps=e},function(t,e){t.memoizedState=e});var x=t.adoptClassInstance,w=t.constructClassInstance,E=t.mountClassInstance,M=t.updateClassInstance;return{beginWork:function(t,e,n){if(e.pendingWorkPriority===Co||e.pendingWorkPriority>n)return f(t,e);switch(e.tag){case vo:null!==t?r("155"):void 0;var i=e.type,o=e.pendingProps,s=ho(e);return s=lo(e,s),i=i(o,s),e.effectTag|=Lo,"object"==typeof i&&null!==i&&"function"==typeof i.render?(e.tag=_o,o=po(e),x(e,i),E(e,n),e=c(t,e,!0,o)):(e.tag=yo,a(t,e,i),e.memoizedProps=o,e=e.child),e;case yo:t:{if(o=e.type,n=e.pendingProps,i=e.memoizedProps,fo())null===n&&(n=i);else if(null===n||i===n){e=h(t,e);break t}i=ho(e),i=lo(e,i),o=o(n,i),e.effectTag|=Lo,a(t,e,o),e.memoizedProps=n,e=e.child}return e;case _o:return o=po(e),i=void 0,null===t?e.stateNode?r("153"):(w(e,e.pendingProps),E(e,n),i=!0):i=M(t,e,n),c(t,e,i,o);case bo:return l(e),i=e.updateQueue,null!==i?(o=e.memoizedState,i=co(t,e,i,null,o,null,n),o===i?(_(),e=h(t,e)):(o=i.element,null!==t&&null!==t.child||!y(e)?(_(),a(t,e,o)):(e.effectTag|=Oo,e.child=oo(e,e.child,o,n)),e.memoizedState=i,e=e.child)):(_(),e=h(t,e)),e;case xo:g(e),null===t&&b(e),o=e.type;var T=e.memoizedProps;return i=e.pendingProps,null===i&&(i=T,null===i?r("154"):void 0),s=null!==t?t.memoizedProps:null,fo()||null!==i&&T!==i?(T=i.children,d(o,i)?T=null:s&&d(o,s)&&(e.effectTag|=Ro),u(t,e),n!==Ao&&!p&&m(o,i)?(e.pendingWorkPriority=Ao,e=null):(a(t,e,T),e.memoizedProps=i,e=e.child)):e=h(t,e),e;case wo:return null===t&&b(e),t=e.pendingProps,null===t&&(t=e.memoizedProps),e.memoizedProps=t,null;case To:e.tag=Mo;case Mo:return n=e.pendingProps,fo()?null===n&&(n=t&&t.memoizedProps,null===n?r("154"):void 0):null!==n&&e.memoizedProps!==n||(n=e.memoizedProps),o=n.children,i=e.pendingWorkPriority,e.stateNode=null===t?oo(e,e.stateNode,o,i):t.child===e.child?ao(e,e.stateNode,o,i):so(e,e.stateNode,o,i),
e.memoizedProps=n,e.stateNode;case So:return null;case Eo:t:{if(v(e,e.stateNode.containerInfo),n=e.pendingWorkPriority,o=e.pendingProps,fo())null===o&&(o=t&&t.memoizedProps,null==o?r("154"):void 0);else if(null===o||e.memoizedProps===o){e=h(t,e);break t}null===t?e.child=so(e,e.child,o,n):a(t,e,o),e.memoizedProps=o,e=e.child}return e;case Po:t:{if(n=e.pendingProps,fo())null===n&&(n=e.memoizedProps);else if(null===n||e.memoizedProps===n){e=h(t,e);break t}a(t,e,n),e.memoizedProps=n,e=e.child}return e;default:r("156")}},beginFailedWork:function(t,e,n){switch(e.tag){case _o:po(e);break;case bo:l(e);break;default:r("157")}return e.effectTag|=ko,null===t?e.child=null:e.child!==t.child&&(e.child=t.child),e.pendingWorkPriority===Co||e.pendingWorkPriority>n?f(t,e):(e.firstEffect=null,e.lastEffect=null,s(t,e,null,n),e.tag===_o&&(t=e.stateNode,e.memoizedProps=t.props,e.memoizedState=t.state),e.child)}}}function ut(t,e,n){var i=t.createInstance,o=t.createTextInstance,a=t.appendInitialChild,s=t.finalizeInitialChildren,u=t.prepareUpdate,c=e.getRootHostContainer,l=e.popHostContext,h=e.getHostContext,f=e.popHostContainer,d=n.prepareToHydrateHostInstance,p=n.prepareToHydrateHostTextInstance,m=n.popHydrationState;return{completeWork:function(t,e,n){var g=e.pendingProps;switch(null===g?g=e.memoizedProps:e.pendingWorkPriority===$o&&n!==$o||(e.pendingProps=null),e.tag){case Bo:return null;case Fo:return jo(e),null;case Ho:return f(e),zo(e),g=e.stateNode,g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),null!==t&&null!==t.child||(m(e),e.effectTag&=~Ko),null;case Go:l(e),n=c();var v=e.type;if(null!==t&&null!=e.stateNode){var y=t.memoizedProps,_=e.stateNode,b=h();g=u(_,v,y,g,n,b),(e.updateQueue=g)&&(e.effectTag|=Qo),t.ref!==e.ref&&(e.effectTag|=Jo)}else{if(!g)return null===e.stateNode?r("166"):void 0,null;if(t=h(),m(e))d(e,n,t)&&(e.effectTag|=Qo);else{t=i(v,g,n,t,e);t:for(y=e.child;null!==y;){if(y.tag===Go||y.tag===Vo)a(t,y.stateNode);else if(y.tag!==Wo&&null!==y.child){y=y.child;continue}if(y===e)break t;for(;null===y.sibling;){if(null===y.return||y.return===e)break t;y=y.return}y=y.sibling}s(t,v,g,n)&&(e.effectTag|=Qo),e.stateNode=t}null!==e.ref&&(e.effectTag|=Jo)}return null;case Vo:if(t&&null!=e.stateNode)t.memoizedProps!==g&&(e.effectTag|=Qo);else{if("string"!=typeof g)return null===e.stateNode?r("166"):void 0,null;t=c(),n=h(),m(e)?p(e)&&(e.effectTag|=Qo):e.stateNode=o(g,t,n,e)}return null;case qo:(g=e.memoizedProps)?void 0:r("165"),e.tag=Yo,n=[];t:for((v=e.stateNode)&&(v.return=e);null!==v;){if(v.tag===Go||v.tag===Vo||v.tag===Wo)r("164");else if(v.tag===Zo)n.push(v.type);else if(null!==v.child){v.child.return=v,v=v.child;continue}for(;null===v.sibling;){if(null===v.return||v.return===e)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}return v=g.handler,g=v(g.props,n),e.child=Do(e,null!==t?t.child:null,g,e.pendingWorkPriority),e.child;case Yo:return e.tag=qo,null;case Zo:return null;case Xo:return null;case Wo:return e.effectTag|=Qo,f(e),null;case Uo:r("167");default:r("156")}}}}function ct(t){return function(e){try{return t(e)}catch(t){}}}function lt(t,e){function n(t){var n=t.ref;if(null!==n)try{n(null)}catch(n){e(t,n)}}function i(t){return t.tag===oa||t.tag===ia||t.tag===sa}function o(t){for(var e=t;;)if(s(e),null!==e.child&&e.tag!==sa)e.child.return=e,e=e.child;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function a(t){for(var e=t,n=!1,i=void 0,a=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n?r("160"):void 0,n.tag){case oa:i=n.stateNode,a=!1;break t;case ia:i=n.stateNode.containerInfo,a=!0;break t;case sa:i=n.stateNode.containerInfo,a=!0;break t}n=n.return}n=!0}if(e.tag===oa||e.tag===aa)o(e),a?v(i,e.stateNode):g(i,e.stateNode);else if(e.tag===sa?i=e.stateNode.containerInfo:s(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,e.tag===sa&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function s(t){switch("function"==typeof la&&la(t),t.tag){case ra:n(t);var r=t.stateNode;if("function"==typeof r.componentWillUnmount)try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(n){e(t,n)}break;case oa:n(t);break;case ua:o(t.stateNode);break;case sa:a(t)}}var u=t.commitMount,c=t.commitUpdate,l=t.resetTextContent,h=t.commitTextUpdate,f=t.appendChild,d=t.appendChildToContainer,p=t.insertBefore,m=t.insertInContainerBefore,g=t.removeChild,v=t.removeChildFromContainer,y=t.getPublicInstance;return{commitPlacement:function(t){t:{for(var e=t.return;null!==e;){if(i(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var o=e=void 0;switch(n.tag){case oa:e=n.stateNode,o=!1;break;case ia:e=n.stateNode.containerInfo,o=!0;break;case sa:e=n.stateNode.containerInfo,o=!0;break;default:r("161")}n.effectTag&pa&&(l(e),n.effectTag&=~pa);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||i(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==oa&&n.tag!==aa;){if(n.effectTag&ha)continue e;if(null===n.child||n.tag===sa)continue e;n.child.return=n,n=n.child}if(!(n.effectTag&ha)){n=n.stateNode;break t}}for(var a=t;;){if(a.tag===oa||a.tag===aa)n?o?m(e,a.stateNode,n):p(e,a.stateNode,n):o?d(e,a.stateNode):f(e,a.stateNode);else if(a.tag!==sa&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},commitDeletion:function(t){a(t),t.return=null,t.child=null,t.alternate&&(t.alternate.child=null,t.alternate.return=null)},commitWork:function(t,e){switch(e.tag){case ra:break;case oa:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&c(n,a,o,t,i,e)}break;case aa:null===e.stateNode?r("162"):void 0,n=e.memoizedProps,h(e.stateNode,null!==t?t.memoizedProps:n,n);break;case ia:break;case sa:break;default:r("163")}},commitLifeCycles:function(t,e){switch(e.tag){case ra:var n=e.stateNode;if(e.effectTag&fa)if(null===t)n.props=e.memoizedProps,n.state=e.memoizedState,n.componentDidMount();else{var i=t.memoizedProps;t=t.memoizedState,n.props=e.memoizedProps,n.state=e.memoizedState,n.componentDidUpdate(i,t)}e.effectTag&da&&null!==e.updateQueue&&ca(e,e.updateQueue,n);break;case ia:t=e.updateQueue,null!==t&&ca(e,t,e.child&&e.child.stateNode);break;case oa:n=e.stateNode,null===t&&e.effectTag&fa&&u(n,e.type,e.memoizedProps,e);break;case aa:break;case sa:break;default:r("163")}},commitAttachRef:function(t){var e=t.ref;if(null!==e){var n=t.stateNode;switch(t.tag){case oa:e(y(n));break;default:e(n)}}},commitDetachRef:function(t){t=t.ref,null!==t&&t(null)}}}function ht(t){function e(t){return t===ya?r("174"):void 0,t}var n=t.getChildHostContext,i=t.getRootHostContext,o=ma(ya),a=ma(ya),s=ma(ya);return{getHostContext:function(){return e(o.current)},getRootHostContainer:function(){return e(s.current)},popHostContainer:function(t){ga(o,t),ga(a,t),ga(s,t)},popHostContext:function(t){a.current===t&&(ga(o,t),ga(a,t))},pushHostContainer:function(t,e){va(s,e,t),e=i(e),va(a,t,t),va(o,e,t)},pushHostContext:function(t){var r=e(s.current),i=e(o.current);r=n(i,t.type,r),i!==r&&(va(a,t,t),va(o,r,t))},resetHostContainer:function(){o.current=ya,s.current=ya}}}function ft(t){function e(t,e){var n=Ma();n.stateNode=e,n.return=t,n.effectTag=wa,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function n(t,e){switch(t.tag){case _a:return a(e,t.type,t.pendingProps);case ba:return s(e,t.pendingProps);default:return!1}}function i(t){for(t=t.return;null!==t&&t.tag!==_a&&t.tag!==xa;)t=t.return;p=t}var o=t.shouldSetTextContent,a=t.canHydrateInstance,s=t.canHydrateTextInstance,u=t.getNextHydratableSibling,c=t.getFirstHydratableChild,l=t.hydrateInstance,h=t.hydrateTextInstance,f=t.didNotHydrateInstance,d=t.didNotFindHydratableInstance;if(t=t.didNotFindHydratableTextInstance,!(a&&s&&u&&c&&l&&h&&f&&d&&t))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var p=null,m=null,g=!1;return{enterHydrationState:function(t){return m=c(t.stateNode.containerInfo),p=t,g=!0},resetHydrationState:function(){m=p=null,g=!1},tryToClaimNextHydratableInstance:function(t){if(g){var r=m;if(r){if(!n(t,r)){if(r=u(r),!r||!n(t,r))return t.effectTag|=Ea,g=!1,void(p=t);e(p,m)}t.stateNode=r,p=t,m=c(r)}else t.effectTag|=Ea,g=!1,p=t}},prepareToHydrateHostInstance:function(t,e,n){return e=l(t.stateNode,t.type,t.memoizedProps,e,n,t),t.updateQueue=e,null!==e},prepareToHydrateHostTextInstance:function(t){return h(t.stateNode,t.memoizedProps,t)},popHydrationState:function(t){if(t!==p)return!1;if(!g)return i(t),g=!0,!1;var n=t.type;if(t.tag!==_a||"head"!==n&&"body"!==n&&!o(n,t.memoizedProps))for(n=m;n;)e(t,n),n=u(n);return i(t),m=p?u(t.stateNode):null,!0}}}function dt(t){function e(){for(;null!==q&&q.current.pendingWorkPriority===Oa;){q.isScheduled=!1;var t=q.nextScheduledRoot;if(q.nextScheduledRoot=null,q===Y)return Y=q=null,G=Oa,null;q=t}t=q;for(var e=null,n=Oa;null!==t;)t.current.pendingWorkPriority!==Oa&&(n===Oa||n>t.current.pendingWorkPriority)&&(n=t.current.pendingWorkPriority,e=t),t=t.nextScheduledRoot;null!==e?(G=n,Sa(),Qa(),w(),H=Ca(e.current,n),e!==it&&(rt=0,it=e)):(G=Oa,it=H=null)}function n(n){tt=!0,W=null;var i=n.stateNode;if(i.current===n?r("177"):void 0,G!==Ra&&G!==ka||rt++,Pa.current=null,n.effectTag>za)if(null!==n.lastEffect){n.lastEffect.nextEffect=n;var o=n.firstEffect}else o=n;else o=n.firstEffect;for(I(),V=o;null!==V;){var a=!1,s=void 0;try{for(;null!==V;){var u=V.effectTag;if(u&Ga&&t.resetTextContent(V.stateNode),u&qa){var c=V.alternate;null!==c&&R(c)}switch(u&~(Va|Wa|Ga|qa|za)){case Ua:P(V),V.effectTag&=~Ua;break;case Fa:P(V),V.effectTag&=~Ua,A(V.alternate,V);break;case Ba:A(V.alternate,V);break;case Ha:et=!0,C(V),et=!1}V=V.nextEffect}}catch(t){a=!0,s=t}a&&(null===V?r("178"):void 0,h(V,s),null!==V&&(V=V.nextEffect))}for(D(),i.current=n,V=o;null!==V;){i=!1,o=void 0;try{for(;null!==V;){var l=V.effectTag;if(l&(Ba|Va)&&L(V.alternate,V),l&qa&&O(V),l&Wa)switch(a=V,s=void 0,null!==X&&(s=X.get(a),X.delete(a),null==s&&null!==a.alternate&&(a=a.alternate,s=X.get(a),X.delete(a))),null==s?r("184"):void 0,a.tag){case Ka:a.stateNode.componentDidCatch(s.error,{componentStack:s.componentStack});break;case Ya:null===Q&&(Q=s.error);break;default:r("157")}var f=V.nextEffect;V.nextEffect=null,V=f}}catch(t){i=!0,o=t}i&&(null===V?r("178"):void 0,h(V,o),null!==V&&(V=V.nextEffect))}tt=!1,"function"==typeof La&&La(n.stateNode),J&&(J.forEach(v),J=null),e()}function i(t){for(;;){var e=S(t.alternate,t,G),n=t.return,r=t.sibling,i=t;if(!(i.pendingWorkPriority!==Oa&&i.pendingWorkPriority>G)){for(var o=Ja(i),a=i.child;null!==a;)o=Aa(o,a.pendingWorkPriority),a=a.sibling;i.pendingWorkPriority=o}if(null!==e)return e;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),t.effectTag>za&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==r)return r;if(null===n){W=t;break}t=n}return null}function o(t){var e=M(t.alternate,t,G);return null===e&&(e=i(t)),Pa.current=null,e}function a(t){var e=T(t.alternate,t,G);return null===e&&(e=i(t)),Pa.current=null,e}function s(t){l(Da,t)}function u(){if(null!==X&&0<X.size&&G===ka)for(;null!==H;){var t=H;if(H=null!==X&&(X.has(t)||null!==t.alternate&&X.has(t.alternate))?a(H):o(H),null===H&&(null===W?r("179"):void 0,j=ka,n(W),j=G,null===X||0===X.size||G!==ka))break}}function c(t,i){if(null!==W?(j=ka,n(W),u()):null===H&&e(),!(G===Oa||G>t)){j=G;t:for(;;){if(G<=ka)for(;null!==H&&(H=o(H),!(null===H&&(null===W?r("179"):void 0,j=ka,n(W),j=G,u(),G===Oa||G>t||G>ka))););else if(null!==i)for(;null!==H&&!U;)if(1<i.timeRemaining()){if(H=o(H),null===H)if(null===W?r("179"):void 0,1<i.timeRemaining()){if(j=ka,n(W),j=G,u(),G===Oa||G>t||G<Na)break}else U=!0}else U=!0;switch(G){case Ra:case ka:if(G<=t)continue t;break t;case Na:case Ia:case Da:if(null===i)break t;if(!U&&G<=t)continue t;break t;case Oa:break t;default:r("181")}}}}function l(t,e){z?r("182"):void 0,z=!0;var n=j,i=!1,o=null;try{c(t,e)}catch(t){i=!0,o=t}for(;i;){if($){Q=o;break}var u=H;if(null===u)$=!0;else{var l=h(u,o);if(null===l?r("183"):void 0,!$){try{i=l,o=t,l=e;for(var f=i;null!==u;){switch(u.tag){case Ka:Ta(u);break;case Za:x(u);break;case Ya:b(u);break;case Xa:b(u)}if(u===f||u.alternate===f)break;u=u.return}H=a(i),c(o,l)}catch(t){i=!0,o=t;continue}break}}}if(j=n,null!==e&&(Z=!1),G>ka&&!Z&&(k(s),Z=!0),t=Q,$=U=z=!1,it=K=X=Q=null,rt=0,null!==t)throw t}function h(t,e){var n=Pa.current=null,r=!1,i=!1,o=null;if(t.tag===Ya)n=t,d(t)&&($=!0);else for(var a=t.return;null!==a&&null===n;){if(a.tag===Ka?"function"==typeof a.stateNode.componentDidCatch&&(r=!0,o=f(a),n=a,i=!0):a.tag===Ya&&(n=a),d(a)){if(et||null!==J&&(J.has(a)||null!==a.alternate&&J.has(a.alternate)))return null;n=null,i=!1}a=a.return}if(null!==n){null===K&&(K=new Set),K.add(n);var s="";a=t;do{t:switch(a.tag){case di:case pi:case mi:case gi:var u=a._debugOwner,c=a._debugSource,l=f(a),h=null;u&&(h=f(u)),u=c,l="\n    in "+(l||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":h?" (created by "+h+")":"");break t;default:l=""}s+=l,a=a.return}while(a);a=s,t=f(t),null===X&&(X=new Map),e={componentName:t,componentStack:a,error:e,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:o,willRetry:i},X.set(n,e);try{console.error(e.error)}catch(t){console.error(t)}return tt?(null===J&&(J=new Set),J.add(n)):v(n),n}return null===Q&&(Q=e),null}function d(t){return null!==K&&(K.has(t)||null!==t.alternate&&K.has(t.alternate))}function p(t,e){return m(t,e,!1)}function m(t,e){rt>nt&&($=!0,r("185")),!z&&e<=G&&(H=null);for(var n=!0;null!==t&&n;){if(n=!1,(t.pendingWorkPriority===Oa||t.pendingWorkPriority>e)&&(n=!0,t.pendingWorkPriority=e),null!==t.alternate&&(t.alternate.pendingWorkPriority===Oa||t.alternate.pendingWorkPriority>e)&&(n=!0,t.alternate.pendingWorkPriority=e),null===t.return){if(t.tag!==Ya)break;var i=t.stateNode;if(e===Oa||i.isScheduled||(i.isScheduled=!0,Y?Y.nextScheduledRoot=i:q=i,Y=i),!z)switch(e){case Ra:F?l(Ra,null):l(ka,null);break;case ka:B?void 0:r("186");break;default:Z||(k(s),Z=!0)}}t=t.return}}function g(t,e){var n=j;return n===Oa&&(n=!N||t.internalContextTag&ja||e?Ia:Ra),n===Ra&&(z||B)?ka:n}function v(t){m(t,ka,!0)}var y=ht(t),_=ft(t),b=y.popHostContainer,x=y.popHostContext,w=y.resetHostContainer,E=st(t,y,_,p,g),M=E.beginWork,T=E.beginFailedWork,S=ut(t,y,_).completeWork;y=lt(t,h);var P=y.commitPlacement,C=y.commitDeletion,A=y.commitWork,L=y.commitLifeCycles,O=y.commitAttachRef,R=y.commitDetachRef,k=t.scheduleDeferredCallback,N=t.useSyncScheduling,I=t.prepareForCommit,D=t.resetAfterCommit,j=Oa,z=!1,U=!1,B=!1,F=!1,H=null,G=Oa,V=null,W=null,q=null,Y=null,Z=!1,X=null,K=null,J=null,Q=null,$=!1,tt=!1,et=!1,nt=1e3,rt=0,it=null;return{scheduleUpdate:p,getPriorityContext:g,batchedUpdates:function(t,e){var n=B;B=!0;try{return t(e)}finally{B=n,z||B||l(ka,null)}},unbatchedUpdates:function(t){var e=F,n=B;F=B,B=!1;try{return t()}finally{B=n,F=e}},flushSync:function(t){var e=B,n=j;B=!0,j=Ra;try{return t()}finally{B=e,j=n,z?r("187"):void 0,l(ka,null)}},deferredUpdates:function(t){var e=j;j=Ia;try{return t()}finally{j=e}}}}function pt(){r("196")}function mt(t){return t?(t=Ze.get(t),"number"==typeof t.tag?pt(t):t._processChildContext(t._context)):be}function gt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vt(t,e){var n=gt(t);t=0;for(var r;n;){if(n.nodeType===as){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=gt(n)}}function yt(){return!ss&&ge.canUseDOM&&(ss="textContent"in document.documentElement?"textContent":"innerText"),ss}function _t(){r("211")}function bt(){r("212")}function xt(t){if(null==t)return null;if(t.nodeType===fs)return t;var e=Ze.get(t);return e?"number"==typeof e.tag?_t(e):bt(e):void("function"==typeof t.render?r("188"):r("213",Object.keys(t)))}function wt(t){if(void 0!==t._hostParent)return t._hostParent;if("number"==typeof t.tag){do t=t.return;while(t&&t.tag!==ds);if(t)return t}return null}function Et(t,e){for(var n=0,r=t;r;r=wt(r))n++;r=0;for(var i=e;i;i=wt(i))r++;for(;0<n-r;)t=wt(t),n--;for(;0<r-n;)e=wt(e),r--;for(;n--;){if(t===e||t===e.alternate)return t;t=wt(t),e=wt(e)}return null}function Mt(t,e,n){(e=ms(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function Tt(t){t&&t.dispatchConfig.phasedRegistrationNames&&ps.traverseTwoPhase(t._targetInst,Mt,t)}function St(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?ps.getParentInstance(e):null,ps.traverseTwoPhase(e,Mt,t)}}function Pt(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=ms(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function Ct(t){t&&t.dispatchConfig.registrationName&&Pt(t._targetInst,null,t)}function At(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var i in t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?_e.thatReturnsTrue:_e.thatReturnsFalse,this.isPropagationStopped=_e.thatReturnsFalse,this}function Lt(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Ot(t){t instanceof this?void 0:r("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Rt(t){t.eventPool=[],t.getPooled=Lt,t.release=Ot}function kt(t,e,n,r){return At.call(this,t,e,n,r)}function Nt(t,e,n,r){return At.call(this,t,e,n,r)}function It(t,e){switch(t){case"topKeyUp":return-1!==ws.indexOf(e.keyCode);case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Dt(t){return t=t.detail,"object"==typeof t&&"data"in t?t.data:null}function jt(t,e){switch(t){case"topCompositionEnd":return Dt(e);case"topKeyPress":return 32!==e.which?null:(Os=!0,As);case"topTextInput":return t=e.data,t===As&&Os?null:t;default:return null}}function zt(t,e){if(Rs)return"topCompositionEnd"===t||!Es&&It(t,e)?(t=_s.getData(),_s.reset(),Rs=!1,t):null;switch(t){case"topPaste":return null;case"topKeyPress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"topCompositionEnd":return Cs?null:e.data;default:return null}}function Ut(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ns[t.type]:"textarea"===e}function Bt(t,e,n){return t=At.getPooled(Is.change,t,e,n),t.type="change",fn.enqueueStateRestore(n),gs.accumulateTwoPhaseDispatches(t),t}function Ft(t){xn.enqueueEvents(t),xn.processEventQueue(!1)}function Ht(t){var e=Ye.getNodeFromInstance(t);if($n.updateValueIfChanged(e))return t}function Gt(t,e){if("topChange"===t)return e}function Vt(){Ds&&(Ds.detachEvent("onpropertychange",Wt),js=Ds=null)}function Wt(t){"value"===t.propertyName&&Ht(js)&&(t=Bt(js,t,E(t)),pn.batchedUpdates(Ft,t))}function qt(t,e,n){"topFocus"===t?(Vt(),Ds=e,js=n,Ds.attachEvent("onpropertychange",Wt)):"topBlur"===t&&Vt()}function Yt(t){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return Ht(js)}function Zt(t,e){if("topClick"===t)return Ht(e)}function Xt(t,e){if("topInput"===t||"topChange"===t)return Ht(e)}function Kt(t,e,n,r){return At.call(this,t,e,n,r)}function Jt(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Bs[t])&&!!e[t]}function Qt(){return Jt}function $t(t,e,n,r){return At.call(this,t,e,n,r)}function te(t,e){if(Xs||null==qs||qs!==Me())return null;var n=qs;return"selectionStart"in n&&hs.hasSelectionCapabilities(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Zs&&xe(Zs,n)?null:(Zs=n,t=At.getPooled(Ws.select,Ys,t,e),t.type="select",t.target=qs,gs.accumulateTwoPhaseDispatches(t),t)}function ee(t,e,n,r){return At.call(this,t,e,n,r)}function ne(t,e,n,r){return At.call(this,t,e,n,r)}function re(t,e,n,r){return At.call(this,t,e,n,r)}function ie(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,0===t&&13===e&&(t=13)):t=e,32<=t||13===t?t:0}function oe(t,e,n,r){return At.call(this,t,e,n,r)}function ae(t,e,n,r){return At.call(this,t,e,n,r)}function se(t,e,n,r){return At.call(this,t,e,n,r)}function ue(t,e,n,r){return At.call(this,t,e,n,r)}function ce(t,e,n,r){return At.call(this,t,e,n,r)}function le(t){return t[1].toUpperCase()}function he(t){return!(!t||t.nodeType!==pu&&t.nodeType!==vu&&t.nodeType!==yu&&(t.nodeType!==gu||" react-mount-point-unstable "!==t.nodeValue))}function fe(t){return t=t?t.nodeType===vu?t.documentElement:t.firstChild:null,!(!t||t.nodeType!==pu||!t.hasAttribute(_u))}function de(t,e,n,i,o){he(n)?void 0:r("200");var a=n._reactRootContainer;if(a)Du.updateContainer(e,a,t,o);else{if(!i&&!fe(n))for(i=void 0;i=n.lastChild;)n.removeChild(i);var s=Du.createContainer(n);a=n._reactRootContainer=s,Du.unbatchedUpdates(function(){Du.updateContainer(e,s,t,o)})}return Du.getPublicRootInstance(a)}function pe(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return he(e)?void 0:r("200"),_i.createPortal(t,e,null,n)}var me=t("react");t("fbjs/lib/invariant");var ge=t("fbjs/lib/ExecutionEnvironment"),ve=t("object-assign"),ye=t("fbjs/lib/EventListener"),_e=t("fbjs/lib/emptyFunction"),be=t("fbjs/lib/emptyObject"),xe=t("fbjs/lib/shallowEqual"),we=t("fbjs/lib/containsNode"),Ee=t("fbjs/lib/focusNode"),Me=t("fbjs/lib/getActiveElement");me?void 0:r("227");var Te,Se,Pe={Namespaces:{html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},getIntrinsicNamespace:i,getChildNamespace:function(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?i(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}},Ce=null,Ae={},Le={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){Ce?r("101"):void 0,Ce=Array.prototype.slice.call(t),o()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];Ae.hasOwnProperty(e)&&Ae[e]===i||(Ae[e]?r("102",e):void 0,Ae[e]=i,n=!0)}n&&o()}},Oe=Le,Re={children:!0,dangerouslySetInnerHTML:!0,autoFocus:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,style:!0},ke={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=ke,n=t.Properties||{},i=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{};t=t.DOMMutationMethods||{};for(var a in n){Ne.properties.hasOwnProperty(a)?r("48",a):void 0;var u=a.toLowerCase(),c=n[a];u={attributeName:u,attributeNamespace:null,propertyName:a,mutationMethod:null,mustUseProperty:s(c,e.MUST_USE_PROPERTY),hasBooleanValue:s(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:s(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:s(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:s(c,e.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:s(c,e.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue?void 0:r("50",a),o.hasOwnProperty(a)&&(u.attributeName=o[a]),i.hasOwnProperty(a)&&(u.attributeNamespace=i[a]),t.hasOwnProperty(a)&&(u.mutationMethod=t[a]),Ne.properties[a]=u}}},Ne={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},shouldSetAttribute:function(t,e){if(Ne.isReservedProp(t)||!("o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1]))return!1;if(null===e)return!0;switch(typeof e){case"boolean":return Ne.shouldAttributeAcceptBooleanValue(t);case"undefined":case"number":case"string":case"object":return!0;default:return!1}},getPropertyInfo:function(t){return Ne.properties.hasOwnProperty(t)?Ne.properties[t]:null},shouldAttributeAcceptBooleanValue:function(t){if(Ne.isReservedProp(t))return!0;var e=Ne.getPropertyInfo(t);return e?e.hasBooleanValue||e.hasStringBooleanValue||e.hasOverloadedBooleanValue:(t=t.toLowerCase().slice(0,5),"data-"===t||"aria-"===t)},isReservedProp:function(t){return Re.hasOwnProperty(t)},injection:ke},Ie=Ne,De={IndeterminateComponent:0,FunctionalComponent:1,ClassComponent:2,HostRoot:3,HostPortal:4,HostComponent:5,HostText:6,CoroutineComponent:7,CoroutineHandlerPhase:8,YieldComponent:9,Fragment:10},je={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11},ze=De.HostComponent,Ue=De.HostText,Be=je.ELEMENT_NODE,Fe=je.COMMENT_NODE,He=Ie.ID_ATTRIBUTE_NAME,Ge={hasCachedChildNodes:1},Ve=Math.random().toString(36).slice(2),We="__reactInternalInstance$"+Ve,qe="__reactEventHandlers$"+Ve,Ye={getClosestInstanceFromNode:h,getInstanceFromNode:function(t){var e=t[We];return e?e.tag===ze||e.tag===Ue?e:e._hostNode===t?e:null:(e=h(t),null!=e&&e._hostNode===t?e:null)},getNodeFromInstance:function(t){if(t.tag===ze||t.tag===Ue)return t.stateNode;if(void 0===t._hostNode?r("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:r("34"),t=t._hostParent;for(;e.length;t=e.pop())l(t,t._hostNode);return t._hostNode},precacheChildNodes:l,precacheNode:c,uncacheNode:function(t){var e=t._hostNode;e&&(delete e[We],t._hostNode=null)},precacheFiberNode:function(t,e){e[We]=t},getFiberCurrentPropsFromNode:function(t){return t[qe]||null},updateFiberProps:function(t,e){t[qe]=e}},Ze={remove:function(t){t._reactInternalFiber=void 0},get:function(t){return t._reactInternalFiber},has:function(t){return void 0!==t._reactInternalFiber},set:function(t,e){t._reactInternalFiber=e}},Xe={ReactCurrentOwner:me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner},Ke={NoEffect:0,PerformedWork:1,Placement:2,Update:4,PlacementAndUpdate:6,Deletion:8,ContentReset:16,Callback:32,Err:64,Ref:128},Je=De.HostComponent,Qe=De.HostRoot,$e=De.HostPortal,tn=De.HostText,en=Ke.NoEffect,nn=Ke.Placement,rn={isFiberMounted:function(t){return 2===d(t)},isMounted:function(t){return!!(t=Ze.get(t))&&2===d(t)},findCurrentFiberUsingSlowPath:m,findCurrentHostFiber:function(t){if(t=m(t),!t)return null;for(var e=t;;){if(e.tag===Je||e.tag===tn)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null},findCurrentHostFiberWithNoPortals:function(t){if(t=m(t),!t)return null;for(var e=t;;){if(e.tag===Je||e.tag===tn)return e;if(e.child&&e.tag!==$e)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}},on={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(t){"function"!=typeof t.invokeGuardedCallback?r("197"):void 0,g=t.invokeGuardedCallback}},invokeGuardedCallback:function(t,e,n,r,i,o,a,s,u){g.apply(on,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,r,i,o,a,s,u){if(on.invokeGuardedCallback.apply(this,arguments),on.hasCaughtError()){var c=on.clearCaughtError();on._hasRethrowError||(on._hasRethrowError=!0,on._rethrowError=c)}},rethrowCaughtError:function(){return v.apply(on,arguments)},hasCaughtError:function(){return on._hasCaughtError},clearCaughtError:function(){if(on._hasCaughtError){var t=on._caughtError;return on._caughtError=null,on._hasCaughtError=!1,t}r("198")}},an=on,sn={isEndish:function(t){return"topMouseUp"===t||"topTouchEnd"===t||"topTouchCancel"===t},isMoveish:function(t){return"topMouseMove"===t||"topTouchMove"===t},isStartish:function(t){return"topMouseDown"===t||"topTouchStart"===t},executeDirectDispatch:function(t){var e=t._dispatchListeners,n=t._dispatchInstances;return Array.isArray(e)?r("103"):void 0,t.currentTarget=e?sn.getNodeFromInstance(n):null,e=e?e(t):null,t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,e},executeDispatchesInOrder:function(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)y(t,e,n[i],r[i]);else n&&y(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(t){t:{var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r])){e=n[r];break t}}else if(e&&e(t,n)){e=n;break t}e=null}return t._dispatchInstances=null,t._dispatchListeners=null,e},hasDispatches:function(t){return!!t._dispatchListeners},getFiberCurrentPropsFromNode:function(t){return Te.getFiberCurrentPropsFromNode(t)},getInstanceFromNode:function(t){return Te.getInstanceFromNode(t)},getNodeFromInstance:function(t){return Te.getNodeFromInstance(t)},injection:{injectComponentTree:function(t){Te=t}}},un=sn,cn=null,ln=null,hn=null,fn={injection:{injectFiberControlledHostComponent:function(t){cn=t}},enqueueStateRestore:function(t){ln?hn?hn.push(t):hn=[t]:ln=t},restoreStateIfNeeded:function(){if(ln){var t=ln,e=hn;if(hn=ln=null,_(t),e)for(t=0;t<e.length;t++)_(e[t])}}},dn=!1,pn={batchedUpdates:function(t,e){if(dn)return b(w,t,e);dn=!0;try{return b(w,t,e)}finally{dn=!1,fn.restoreStateIfNeeded()}},injection:{injectStackBatchedUpdates:function(t){b=t},injectFiberBatchedUpdates:function(t){x=t}}},mn=je.TEXT_NODE,gn=De.HostRoot,vn=[],yn={_enabled:!0,_handleTopLevel:null,setHandleTopLevel:function(t){yn._handleTopLevel=t},setEnabled:function(t){yn._enabled=!!t},isEnabled:function(){return yn._enabled},trapBubbledEvent:function(t,e,n){return n?ye.listen(n,e,yn.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){return n?ye.capture(n,e,yn.dispatchEvent.bind(null,t)):null},dispatchEvent:function(t,e){if(yn._enabled){var n=E(e);if(n=Ye.getClosestInstanceFromNode(n),null===n||"number"!=typeof n.tag||rn.isFiberMounted(n)||(n=null),vn.length){var r=vn.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{pn.batchedUpdates(M,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>vn.length&&vn.push(t)}}}},_n=yn,bn=null,xn={injection:{injectEventPluginOrder:Oe.injectEventPluginOrder,injectEventPluginsByName:Oe.injectEventPluginsByName},getListener:function(t,e){if("number"==typeof t.tag){var n=t.stateNode;if(!n)return null;var i=un.getFiberCurrentPropsFromNode(n);if(!i)return null;if(n=i[e],L(e,t.type,i))return null}else{if(i=t._currentElement,"string"==typeof i||"number"==typeof i||!t._rootNodeID)return null;if(t=i.props,n=t[e],L(e,i.type,t))return null}return n&&"function"!=typeof n?r("231",e,typeof n):void 0,n},extractEvents:function(t,e,n,r){for(var i,o=Oe.plugins,a=0;a<o.length;a++){var s=o[a];
s&&(s=s.extractEvents(t,e,n,r))&&(i=T(i,s))}return i},enqueueEvents:function(t){t&&(bn=T(bn,t))},processEventQueue:function(t){var e=bn;bn=null,t?S(e,C):S(e,A),bn?r("95"):void 0,an.rethrowCaughtError()}};ge.canUseDOM&&(Se=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var wn={animationend:R("Animation","AnimationEnd"),animationiteration:R("Animation","AnimationIteration"),animationstart:R("Animation","AnimationStart"),transitionend:R("Transition","TransitionEnd")},En={},Mn={};ge.canUseDOM&&(Mn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var Tn={topAbort:"abort",topAnimationEnd:k("animationend")||"animationend",topAnimationIteration:k("animationiteration")||"animationiteration",topAnimationStart:k("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:k("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},Sn={},Pn=0,Cn="_reactListenersID"+(""+Math.random()).slice(2),An=ve({},{handleTopLevel:function(t,e,n,r){t=xn.extractEvents(t,e,n,r),xn.enqueueEvents(t),xn.processEventQueue(!1)}},{setEnabled:function(t){_n&&_n.setEnabled(t)},isEnabled:function(){return!(!_n||!_n.isEnabled())},listenTo:function(t,e){var n=N(e);t=Oe.registrationNameDependencies[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topWheel"===i?O("wheel")?_n.trapBubbledEvent("topWheel","wheel",e):O("mousewheel")?_n.trapBubbledEvent("topWheel","mousewheel",e):_n.trapBubbledEvent("topWheel","DOMMouseScroll",e):"topScroll"===i?_n.trapCapturedEvent("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(_n.trapCapturedEvent("topFocus","focus",e),_n.trapCapturedEvent("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(O("cancel",!0)&&_n.trapCapturedEvent("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(O("close",!0)&&_n.trapCapturedEvent("topClose","close",e),n.topClose=!0):Tn.hasOwnProperty(i)&&_n.trapBubbledEvent(i,Tn[i],e),n[i]=!0)}},isListeningToAllDependencies:function(t,e){e=N(e),t=Oe.registrationNameDependencies[t];for(var n=0;n<t.length;n++){var r=t[n];if(!e.hasOwnProperty(r)||!e[r])return!1}return!0},trapBubbledEvent:function(t,e,n){return _n.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return _n.trapCapturedEvent(t,e,n)}}),Ln={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},On=["Webkit","ms","Moz","O"];Object.keys(Ln).forEach(function(t){On.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ln[e]=Ln[t]})});var Rn={isUnitlessNumber:Ln,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}},kn=Rn.isUnitlessNumber,Nn=!1;if(ge.canUseDOM){var In=document.createElement("div").style;try{In.font=""}catch(t){Nn=!0}}var Dn,jn={createDangerousStringForStyles:function(){},setValueForStyles:function(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];if(i=null==o||"boolean"==typeof o||""===o?"":r||"number"!=typeof o||0===o||kn.hasOwnProperty(i)&&kn[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r)t.setProperty(n,i);else if(i)t[n]=i;else if(r=Nn&&Rn.shorthandPropertyExpansions[n])for(var a in r)t[a]="";else t[n]=""}}},zn=new RegExp("^["+Ie.ATTRIBUTE_NAME_START_CHAR+"]["+Ie.ATTRIBUTE_NAME_CHAR+"]*$"),Un={},Bn={},Fn={setAttributeForID:function(t,e){t.setAttribute(Ie.ID_ATTRIBUTE_NAME,e)},setAttributeForRoot:function(t){t.setAttribute(Ie.ROOT_ATTRIBUTE_NAME,"")},getValueForProperty:function(){},getValueForAttribute:function(){},setValueForProperty:function(t,e,n){var r=Ie.getPropertyInfo(e);if(r&&Ie.shouldSetAttribute(e,n)){var i=r.mutationMethod;i?i(t,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Fn.deleteValueForProperty(t,e):r.mustUseProperty?t[r.propertyName]=n:(e=r.attributeName,(i=r.attributeNamespace)?t.setAttributeNS(i,e,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?t.setAttribute(e,""):t.setAttribute(e,""+n))}else Fn.setValueForAttribute(t,e,Ie.shouldSetAttribute(e,n)?n:null)},setValueForAttribute:function(t,e,n){I(e)&&(null==n?t.removeAttribute(e):t.setAttribute(e,""+n))},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=Ie.getPropertyInfo(e);n?(e=n.mutationMethod)?e(t,void 0):n.mustUseProperty?t[n.propertyName]=!n.hasBooleanValue&&"":t.removeAttribute(n.attributeName):t.removeAttribute(e)}},Hn=Fn,Gn=Xe.ReactDebugCurrentFrame,Vn={current:null,phase:null,resetCurrentFiber:function(){Gn.getCurrentStack=null,Vn.current=null,Vn.phase=null},setCurrentFiber:function(t,e){Gn.getCurrentStack=D,Vn.current=t,Vn.phase=e},getCurrentFiberOwnerName:function(){return null},getCurrentFiberStackAddendum:D},Wn=Vn,qn={getHostProps:function(t,e){var n=e.value,r=e.checked;return ve({type:void 0,step:void 0,min:void 0,max:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked})},initWrapperState:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}},updateWrapper:function(t,e){var n=e.checked;null!=n&&Hn.setValueForProperty(t,"checked",n||!1),n=e.value,null!=n?0===n&&""===t.value?t.value="0":"number"===e.type?(e=parseFloat(t.value)||0,(n!=e||n==e&&t.value!=n)&&(t.value=""+n)):t.value!==""+n&&(t.value=""+n):(null==e.value&&null!=e.defaultValue&&t.defaultValue!==""+e.defaultValue&&(t.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked))},postMountWrapper:function(t,e){switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":t.value="",t.value=t.defaultValue;break;default:t.value=t.value}e=t.name,""!==e&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==e&&(t.name=e)},restoreControlledState:function(t,e){qn.updateWrapper(t,e);var n=e.name;if("radio"===e.type&&null!=n){for(e=t;e.parentNode;)e=e.parentNode;for(n=e.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Ye.getFiberCurrentPropsFromNode(i);o?void 0:r("90"),qn.updateWrapper(i,o)}}}}},Yn=qn,Zn={validateProps:function(){},postMountWrapper:function(t,e){null!=e.value&&t.setAttribute("value",e.value)},getHostProps:function(t,e){return t=ve({children:void 0},e),(e=j(e.children))&&(t.children=e),t}},Xn={getHostProps:function(t,e){return ve({},e,{value:void 0})},initWrapperState:function(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}},postMountWrapper:function(t,e){t.multiple=!!e.multiple;var n=e.value;null!=n?z(t,!!e.multiple,n):null!=e.defaultValue&&z(t,!!e.multiple,e.defaultValue)},postUpdateWrapper:function(t,e){t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=!!e.multiple;var r=e.value;null!=r?z(t,!!e.multiple,r):n!==!!e.multiple&&(null!=e.defaultValue?z(t,!!e.multiple,e.defaultValue):z(t,!!e.multiple,e.multiple?[]:""))},restoreControlledState:function(t,e){var n=e.value;null!=n&&z(t,!!e.multiple,n)}},Kn={getHostProps:function(t,e){return null!=e.dangerouslySetInnerHTML?r("91"):void 0,ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})},initWrapperState:function(t,e){var n=e.value,i=n;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n?r("92"):void 0,Array.isArray(e)&&(1>=e.length?void 0:r("93"),e=e[0]),n=""+e),null==n&&(n=""),i=n),t._wrapperState={initialValue:""+i}},updateWrapper:function(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)},restoreControlledState:function(t,e){Kn.updateWrapper(t,e)}},Jn=Kn,Qn=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),$n={_getTrackerFromNode:function(t){return t._valueTracker},track:function(t){t._valueTracker||(t._valueTracker=F(t))},updateValueIfChanged:function(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B(t)?t.checked?"true":"false":t.value),t=r,t!==n&&(e.setValue(t),!0)},stopTracking:function(t){(t=t._valueTracker)&&t.stopTracking()}},tr=Pe.Namespaces,er=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==tr.svg||"innerHTML"in t)t.innerHTML=e;else for(Dn=Dn||document.createElement("div"),Dn.innerHTML="<svg>"+e+"</svg>",e=Dn.firstChild;e.firstChild;)t.appendChild(e.firstChild)}),nr=/["'&<>]/,rr=je.TEXT_NODE;ge.canUseDOM&&("textContent"in document.documentElement||(G=function(t,e){if(t.nodeType===rr)t.nodeValue=e;else{if("boolean"==typeof e||"number"==typeof e)e=""+e;else{e=""+e;var n=nr.exec(e);if(n){var r,i="",o=0;for(r=n.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==r&&(i+=e.substring(o,r)),o=r+1,i+=n}e=o!==r?i+e.substring(o,r):i}}er(t,e)}}));var ir=G,or=Wn.getCurrentFiberOwnerName,ar=je.DOCUMENT_NODE,sr=je.DOCUMENT_FRAGMENT_NODE,ur=An.listenTo,cr=Oe.registrationNameModules,lr=Pe.Namespaces.html,hr=Pe.getIntrinsicNamespace,fr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},dr={createElement:function(t,e,n,r){return n=n.nodeType===ar?n:n.ownerDocument,r===lr&&(r=hr(t)),r===lr?"script"===t?(t=n.createElement("div"),t.innerHTML="<script></script>",t=t.removeChild(t.firstChild)):t="string"==typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(r,t),t},createTextNode:function(t,e){return(e.nodeType===ar?e:e.ownerDocument).createTextNode(t)},setInitialProperties:function(t,e,n,r){var i=H(e,n);switch(e){case"iframe":case"object":An.trapBubbledEvent("topLoad","load",t);var o=n;break;case"video":case"audio":for(o in fr)fr.hasOwnProperty(o)&&An.trapBubbledEvent(o,fr[o],t);o=n;break;case"source":An.trapBubbledEvent("topError","error",t),o=n;break;case"img":case"image":An.trapBubbledEvent("topError","error",t),An.trapBubbledEvent("topLoad","load",t),o=n;break;case"form":An.trapBubbledEvent("topReset","reset",t),An.trapBubbledEvent("topSubmit","submit",t),o=n;break;case"details":An.trapBubbledEvent("topToggle","toggle",t),o=n;break;case"input":Yn.initWrapperState(t,n),o=Yn.getHostProps(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(r,"onChange");break;case"option":Zn.validateProps(t,n),o=Zn.getHostProps(t,n);break;case"select":Xn.initWrapperState(t,n),o=Xn.getHostProps(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(r,"onChange");break;case"textarea":Jn.initWrapperState(t,n),o=Jn.getHostProps(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(r,"onChange");break;default:o=n}U(e,o,or);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?jn.setValueForStyles(t,u):"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,null!=u&&er(t,u)):"children"===a?"string"==typeof u?ir(t,u):"number"==typeof u&&ir(t,""+u):"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?null!=u&&V(r,a):i?Hn.setValueForAttribute(t,a,u):null!=u&&Hn.setValueForProperty(t,a,u))}switch(e){case"input":$n.track(t),Yn.postMountWrapper(t,n);break;case"textarea":$n.track(t),Jn.postMountWrapper(t,n);break;case"option":Zn.postMountWrapper(t,n);break;case"select":Xn.postMountWrapper(t,n);break;default:"function"==typeof o.onClick&&(t.onclick=_e)}},diffProperties:function(t,e,n,r,i){var o=null;switch(e){case"input":n=Yn.getHostProps(t,n),r=Yn.getHostProps(t,r),o=[];break;case"option":n=Zn.getHostProps(t,n),r=Zn.getHostProps(t,r),o=[];break;case"select":n=Xn.getHostProps(t,n),r=Xn.getHostProps(t,r),o=[];break;case"textarea":n=Jn.getHostProps(t,n),r=Jn.getHostProps(t,r),o=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(t.onclick=_e)}U(e,r,or);var a,s;t=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in e=n[a])e.hasOwnProperty(s)&&(t||(t={}),t[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var u=r[a];if(e=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&u!==e&&(null!=u||null!=e))if("style"===a)if(e){for(s in e)!e.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in u)u.hasOwnProperty(s)&&e[s]!==u[s]&&(t||(t={}),t[s]=u[s])}else t||(o||(o=[]),o.push(a,t)),t=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,e=e?e.__html:void 0,null!=u&&e!==u&&(o=o||[]).push(a,""+u)):"children"===a?e===u||"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&(cr.hasOwnProperty(a)?(null!=u&&V(i,a),o||e===u||(o=[])):(o=o||[]).push(a,u))}return t&&(o=o||[]).push("style",t),o},updateProperties:function(t,e,n,r,i){H(n,r),r=H(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?jn.setValueForStyles(t,s):"dangerouslySetInnerHTML"===a?er(t,s):"children"===a?ir(t,s):r?null!=s?Hn.setValueForAttribute(t,a,s):Hn.deleteValueForAttribute(t,a):null!=s?Hn.setValueForProperty(t,a,s):Hn.deleteValueForProperty(t,a)}switch(n){case"input":Yn.updateWrapper(t,i),$n.updateValueIfChanged(t);break;case"textarea":Jn.updateWrapper(t,i);break;case"select":Xn.postUpdateWrapper(t,i)}},diffHydratedProperties:function(t,e,n,r,i){switch(e){case"iframe":case"object":An.trapBubbledEvent("topLoad","load",t);break;case"video":case"audio":for(var o in fr)fr.hasOwnProperty(o)&&An.trapBubbledEvent(o,fr[o],t);break;case"source":An.trapBubbledEvent("topError","error",t);break;case"img":case"image":An.trapBubbledEvent("topError","error",t),An.trapBubbledEvent("topLoad","load",t);break;case"form":An.trapBubbledEvent("topReset","reset",t),An.trapBubbledEvent("topSubmit","submit",t);break;case"details":An.trapBubbledEvent("topToggle","toggle",t);break;case"input":Yn.initWrapperState(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(i,"onChange");break;case"option":Zn.validateProps(t,n);break;case"select":Xn.initWrapperState(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(i,"onChange");break;case"textarea":Jn.initWrapperState(t,n),An.trapBubbledEvent("topInvalid","invalid",t),V(i,"onChange")}U(e,n,or),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"==typeof o?t.textContent!==o&&(r=["children",o]):"number"==typeof o&&t.textContent!==""+o&&(r=["children",""+o]):cr.hasOwnProperty(a)&&null!=o&&V(i,a));switch(e){case"input":$n.track(t),Yn.postMountWrapper(t,n);break;case"textarea":$n.track(t),Jn.postMountWrapper(t,n);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(t.onclick=_e)}return r},diffHydratedText:function(t,e){return t.nodeValue!==e},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":Yn.restoreControlledState(t,n);break;case"textarea":Jn.restoreControlledState(t,n);break;case"select":Xn.restoreControlledState(t,n)}}},pr=void 0;if(ge.canUseDOM)if("function"!=typeof requestIdleCallback){var mr=null,gr=null,vr=!1,yr=!1,_r=0,br=33,xr=33,wr={timeRemaining:"object"==typeof performance&&"function"==typeof performance.now?function(){return _r-performance.now()}:function(){return _r-Date.now()}},Er="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){t.source===window&&t.data===Er&&(vr=!1,t=gr,gr=null,null!==t&&t(wr))},!1);var Mr=function(t){yr=!1;var e=t-_r+xr;e<xr&&br<xr?(8>e&&(e=8),xr=e<br?br:e):br=e,_r=t+xr,vr||(vr=!0,window.postMessage(Er,"*")),e=mr,mr=null,null!==e&&e(t)};pr=function(t){return gr=t,yr||(yr=!0,requestAnimationFrame(Mr)),0}}else pr=requestIdleCallback;else pr=function(t){return setTimeout(function(){t({timeRemaining:function(){return 1/0}})}),0};var Tr,Sr,Pr={rIC:pr},Cr={enableAsyncSubtreeAPI:!0},Ar={NoWork:0,SynchronousPriority:1,TaskPriority:2,HighPriority:3,LowPriority:4,OffscreenPriority:5},Lr=Ke.Callback,Or=Ar.NoWork,Rr=Ar.SynchronousPriority,kr=Ar.TaskPriority,Nr=De.ClassComponent,Ir=De.HostRoot,Dr=void 0,jr=void 0,zr={addUpdate:function(t,e,n,r){X(t,{priorityLevel:r,partialState:e,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:!1,next:null})},addReplaceUpdate:function(t,e,n,r){X(t,{priorityLevel:r,partialState:e,callback:n,isReplace:!0,isForced:!1,isTopLevelUnmount:!1,next:null})},addForceUpdate:function(t,e,n){X(t,{priorityLevel:n,partialState:null,callback:e,isReplace:!1,isForced:!0,isTopLevelUnmount:!1,next:null})},getUpdatePriority:function(t){var e=t.updateQueue;return null===e||t.tag!==Nr&&t.tag!==Ir?Or:null!==e.first?e.first.priorityLevel:Or},addTopLevelUpdate:function(t,e,n,r){var i=null===e.element;e={priorityLevel:r,partialState:e,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:i,next:null},t=X(t,e),i&&(i=Dr,n=jr,null!==i&&null!==e.next&&(e.next=null,i.last=e),null!==n&&null!==t&&null!==t.next&&(t.next=null,n.last=e))},beginUpdateQueue:function(t,e,n,r,i,o,a){null!==t&&t.updateQueue===n&&(n=e.updateQueue={first:n.first,last:n.last,callbackList:null,hasForceUpdate:!1}),t=n.callbackList;for(var s=n.hasForceUpdate,u=!0,c=n.first;null!==c&&0>=W(c.priorityLevel,a);){n.first=c.next,null===n.first&&(n.last=null);var l;c.isReplace?(i=K(c,r,i,o),u=!0):(l=K(c,r,i,o))&&(i=u?ve({},i,l):ve(i,l),u=!1),c.isForced&&(s=!0),null===c.callback||c.isTopLevelUnmount&&null!==c.next||(t=null!==t?t:[],t.push(c.callback),e.effectTag|=Lr),c=c.next}return n.callbackList=t,n.hasForceUpdate=s,null!==n.first||null!==t||s||(e.updateQueue=null),i},commitCallbacks:function(t,e,n){if(t=e.callbackList,null!==t)for(e.callbackList=null,e=0;e<t.length;e++){var i=t[e];"function"!=typeof i?r("191",i):void 0,i.call(n)}}},Ur=[],Br=-1,Fr={createCursor:function(t){return{current:t}},isEmpty:function(){return-1===Br},pop:function(t){0>Br||(t.current=Ur[Br],Ur[Br]=null,Br--)},push:function(t,e){Br++,Ur[Br]=t.current,t.current=e},reset:function(){for(;-1<Br;)Ur[Br]=null,Br--}},Hr=rn.isFiberMounted,Gr=De.ClassComponent,Vr=De.HostRoot,Wr=Fr.createCursor,qr=Fr.pop,Yr=Fr.push,Zr=Wr(be),Xr=Wr(!1),Kr=be,Jr={getUnmaskedContext:function(t){return Q(t)?Kr:Zr.current},cacheContext:J,getMaskedContext:function(t,e){var n=t.type.contextTypes;if(!n)return be;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&J(t,e,o),o},hasContextChanged:function(){return Xr.current},isContextConsumer:function(t){return t.tag===Gr&&null!=t.type.contextTypes},isContextProvider:Q,popContextProvider:function(t){Q(t)&&(qr(Xr,t),qr(Zr,t))},popTopLevelContextObject:function(t){qr(Xr,t),qr(Zr,t)},pushTopLevelContextObject:function(t,e,n){null!=Zr.cursor?r("168"):void 0,Yr(Zr,e,t),Yr(Xr,n,t)},processChildContext:$,pushContextProvider:function(t){if(!Q(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||be,Kr=Zr.current,Yr(Zr,e,t),Yr(Xr,Xr.current,t),!0},invalidateContextProvider:function(t,e){var n=t.stateNode;if(n?void 0:r("169"),e){var i=$(t,Kr,!0);n.__reactInternalMemoizedMergedChildContext=i,qr(Xr,t),qr(Zr,t),Yr(Zr,i,t)}else qr(Xr,t);Yr(Xr,e,t)},resetContext:function(){Kr=be,Zr.current=be,Xr.current=!1},findCurrentUnmaskedContext:function(t){for(Hr(t)&&t.tag===Gr?void 0:r("170");t.tag!==Vr;){if(Q(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;(t=t.return)?void 0:r("171")}return t.stateNode.context}},Qr={NoContext:0,AsyncUpdates:1},$r=De.IndeterminateComponent,ti=De.ClassComponent,ei=De.HostRoot,ni=De.HostComponent,ri=De.HostText,ii=De.HostPortal,oi=De.CoroutineComponent,ai=De.YieldComponent,si=De.Fragment,ui=Ar.NoWork,ci=Qr.NoContext,li=Ke.NoEffect,hi={createWorkInProgress:function(t,e){var n=t.alternate;return null===n?(n=new tt(t.tag,t.key,t.internalContextTag),n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.effectTag=li,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.pendingWorkPriority=e,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n},createHostRootFiber:function(){return new tt(ei,null,ci)},createFiberFromElement:function(t,e,n){return e=et(t.type,t.key,e,null),e.pendingProps=t.props,e.pendingWorkPriority=n,e},createFiberFromFragment:function(t,e,n){return e=new tt(si,null,e),e.pendingProps=t,e.pendingWorkPriority=n,e},createFiberFromText:function(t,e,n){return e=new tt(ri,null,e),e.pendingProps=t,e.pendingWorkPriority=n,e},createFiberFromElementType:et,createFiberFromHostInstanceForDeletion:function(){var t=new tt(ni,null,ci);return t.type="DELETED",t},createFiberFromCoroutine:function(t,e,n){return e=new tt(oi,t.key,e),e.type=t.handler,e.pendingProps=t,e.pendingWorkPriority=n,e},createFiberFromYield:function(t,e){return new tt(ai,null,e)},createFiberFromPortal:function(t,e,n){return e=new tt(ii,t.key,e),e.pendingProps=t.children||[],e.pendingWorkPriority=n,e.stateNode={containerInfo:t.containerInfo,implementation:t.implementation},e},largerPriority:function(t,e){return t!==ui&&(e===ui||e>t)?t:e}},fi=hi.createHostRootFiber,di=De.IndeterminateComponent,pi=De.FunctionalComponent,mi=De.ClassComponent,gi=De.HostComponent;"function"==typeof Symbol&&Symbol.for?(Tr=Symbol.for("react.coroutine"),Sr=Symbol.for("react.yield")):(Tr=60104,Sr=60105);var vi={createCoroutine:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Tr,key:null==r?null:""+r,children:t,handler:e,props:n}},createYield:function(t){return{$$typeof:Sr,value:t}},isCoroutine:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===Tr},isYield:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===Sr},REACT_YIELD_TYPE:Sr,REACT_COROUTINE_TYPE:Tr},yi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.portal")||60106,_i={createPortal:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:yi,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}},isPortal:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===yi},REACT_PORTAL_TYPE:yi},bi=vi.REACT_COROUTINE_TYPE,xi=vi.REACT_YIELD_TYPE,wi=_i.REACT_PORTAL_TYPE,Ei=hi.createWorkInProgress,Mi=hi.createFiberFromElement,Ti=hi.createFiberFromFragment,Si=hi.createFiberFromText,Pi=hi.createFiberFromCoroutine,Ci=hi.createFiberFromYield,Ai=hi.createFiberFromPortal,Li=Array.isArray,Oi=De.FunctionalComponent,Ri=De.ClassComponent,ki=De.HostText,Ni=De.HostPortal,Ii=De.CoroutineComponent,Di=De.YieldComponent,ji=De.Fragment,zi=Ke.NoEffect,Ui=Ke.Placement,Bi=Ke.Deletion,Fi="function"==typeof Symbol&&Symbol.iterator,Hi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Gi=ot(!0,!0),Vi=ot(!1,!0),Wi=ot(!1,!1),qi={reconcileChildFibers:Gi,reconcileChildFibersInPlace:Vi,mountChildFibersInPlace:Wi,cloneChildFibers:function(t,e){if(null!==t&&e.child!==t.child?r("153"):void 0,null!==e.child){t=e.child;var n=Ei(t,t.pendingWorkPriority);for(n.pendingProps=t.pendingProps,e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=Ei(t,t.pendingWorkPriority),n.pendingProps=t.pendingProps,n.return=e;n.sibling=null}}},Yi=Ke.Update,Zi=Qr.AsyncUpdates,Xi=Jr.cacheContext,Ki=Jr.getMaskedContext,Ji=Jr.getUnmaskedContext,Qi=Jr.isContextConsumer,$i=zr.addUpdate,to=zr.addReplaceUpdate,eo=zr.addForceUpdate,no=zr.beginUpdateQueue,ro=Jr.hasContextChanged,io=rn.isMounted,oo=qi.mountChildFibersInPlace,ao=qi.reconcileChildFibers,so=qi.reconcileChildFibersInPlace,uo=qi.cloneChildFibers,co=zr.beginUpdateQueue,lo=Jr.getMaskedContext,ho=Jr.getUnmaskedContext,fo=Jr.hasContextChanged,po=Jr.pushContextProvider,mo=Jr.pushTopLevelContextObject,go=Jr.invalidateContextProvider,vo=De.IndeterminateComponent,yo=De.FunctionalComponent,_o=De.ClassComponent,bo=De.HostRoot,xo=De.HostComponent,wo=De.HostText,Eo=De.HostPortal,Mo=De.CoroutineComponent,To=De.CoroutineHandlerPhase,So=De.YieldComponent,Po=De.Fragment,Co=Ar.NoWork,Ao=Ar.OffscreenPriority,Lo=Ke.PerformedWork,Oo=Ke.Placement,Ro=Ke.ContentReset,ko=Ke.Err,No=Ke.Ref,Io=Xe.ReactCurrentOwner,Do=qi.reconcileChildFibers,jo=Jr.popContextProvider,zo=Jr.popTopLevelContextObject,Uo=De.IndeterminateComponent,Bo=De.FunctionalComponent,Fo=De.ClassComponent,Ho=De.HostRoot,Go=De.HostComponent,Vo=De.HostText,Wo=De.HostPortal,qo=De.CoroutineComponent,Yo=De.CoroutineHandlerPhase,Zo=De.YieldComponent,Xo=De.Fragment,Ko=Ke.Placement,Jo=Ke.Ref,Qo=Ke.Update,$o=Ar.OffscreenPriority,ta=null,ea=null,na={injectInternals:function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e.supportsFiber)return!0;try{var n=e.inject(t);ta=ct(function(t){return e.onCommitFiberRoot(n,t)}),ea=ct(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0},onCommitRoot:function(t){"function"==typeof ta&&ta(t)},onCommitUnmount:function(t){"function"==typeof ea&&ea(t)}},ra=De.ClassComponent,ia=De.HostRoot,oa=De.HostComponent,aa=De.HostText,sa=De.HostPortal,ua=De.CoroutineComponent,ca=zr.commitCallbacks,la=na.onCommitUnmount,ha=Ke.Placement,fa=Ke.Update,da=Ke.Callback,pa=Ke.ContentReset,ma=Fr.createCursor,ga=Fr.pop,va=Fr.push,ya={},_a=De.HostComponent,ba=De.HostText,xa=De.HostRoot,wa=Ke.Deletion,Ea=Ke.Placement,Ma=hi.createFiberFromHostInstanceForDeletion,Ta=Jr.popContextProvider,Sa=Fr.reset,Pa=Xe.ReactCurrentOwner,Ca=hi.createWorkInProgress,Aa=hi.largerPriority,La=na.onCommitRoot,Oa=Ar.NoWork,Ra=Ar.SynchronousPriority,ka=Ar.TaskPriority,Na=Ar.HighPriority,Ia=Ar.LowPriority,Da=Ar.OffscreenPriority,ja=Qr.AsyncUpdates,za=Ke.PerformedWork,Ua=Ke.Placement,Ba=Ke.Update,Fa=Ke.PlacementAndUpdate,Ha=Ke.Deletion,Ga=Ke.ContentReset,Va=Ke.Callback,Wa=Ke.Err,qa=Ke.Ref,Ya=De.HostRoot,Za=De.HostComponent,Xa=De.HostPortal,Ka=De.ClassComponent,Ja=zr.getUpdatePriority,Qa=Jr.resetContext;mt._injectFiber=function(t){pt=t};var $a=zr.addTopLevelUpdate,ts=Jr.findCurrentUnmaskedContext,es=Jr.isContextProvider,ns=Jr.processChildContext,rs=De.HostComponent,is=rn.findCurrentHostFiber,os=rn.findCurrentHostFiberWithNoPortals;mt._injectFiber(function(t){var e=ts(t);return es(t)?ns(t,e,!1):e});var as=je.TEXT_NODE,ss=null,us={getOffsets:function(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,r=e.anchorOffset,i=e.focusNode,o=e.focusOffset,a=e.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(t){return null}e=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset?0:a.toString().length;var s=a.cloneRange();return s.selectNodeContents(t),s.setEnd(a.startContainer,a.startOffset),t=s.startContainer===s.endContainer&&s.startOffset===s.endOffset?0:s.toString().length,a=t+e,e=document.createRange(),e.setStart(n,r),e.setEnd(i,o),n=e.collapsed,{start:n?a:t,end:n?t:a}},setOffsets:function(t,e){if(window.getSelection){var n=window.getSelection(),r=t[yt()].length,i=Math.min(e.start,r);if(e=void 0===e.end?i:Math.min(e.end,r),!n.extend&&i>e&&(r=e,e=i,i=r),r=vt(t,i),t=vt(t,e),r&&t){var o=document.createRange();o.setStart(r.node,r.offset),n.removeAllRanges(),i>e?(n.addRange(o),n.extend(t.node,t.offset)):(o.setEnd(t.node,t.offset),n.addRange(o))}}}},cs=je.ELEMENT_NODE,ls={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=Me();return{focusedElem:t,selectionRange:ls.hasSelectionCapabilities(t)?ls.getSelection(t):null}},restoreSelection:function(t){var e=Me(),n=t.focusedElem;if(t=t.selectionRange,e!==n&&we(document.documentElement,n)){for(ls.hasSelectionCapabilities(n)&&ls.setSelection(n,t),e=[],t=n;t=t.parentNode;)t.nodeType===cs&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(Ee(n),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}},getSelection:function(t){return("selectionStart"in t?{start:t.selectionStart,end:t.selectionEnd}:us.getOffsets(t))||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;void 0===r&&(r=n),"selectionStart"in t?(t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length)):us.setOffsets(t,e);
}},hs=ls,fs=je.ELEMENT_NODE;xt._injectFiber=function(t){_t=t},xt._injectStack=function(t){bt=t};var ds=De.HostComponent,ps={isAncestor:function(t,e){for(;e;){if(t===e||t===e.alternate)return!0;e=wt(e)}return!1},getLowestCommonAncestor:Et,getParentInstance:function(t){return wt(t)},traverseTwoPhase:function(t,e,n){for(var r=[];t;)r.push(t),t=wt(t);for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)},traverseEnterLeave:function(t,e,n,r,i){for(var o=t&&e?Et(t,e):null,a=[];t&&t!==o;)a.push(t),t=wt(t);for(t=[];e&&e!==o;)t.push(e),e=wt(e);for(e=0;e<a.length;e++)n(a[e],"bubbled",r);for(e=t.length;0<e--;)n(t[e],"captured",i)}},ms=xn.getListener,gs={accumulateTwoPhaseDispatches:function(t){S(t,Tt)},accumulateTwoPhaseDispatchesSkipTarget:function(t){S(t,St)},accumulateDirectDispatches:function(t){S(t,Ct)},accumulateEnterLeaveDispatches:function(t,e,n,r){ps.traverseEnterLeave(n,r,Pt,t,e)}},vs={_root:null,_startText:null,_fallbackText:null},ys={initialize:function(t){return vs._root=t,vs._startText=ys.getText(),!0},reset:function(){vs._root=null,vs._startText=null,vs._fallbackText=null},getData:function(){if(vs._fallbackText)return vs._fallbackText;var t,e,n=vs._startText,r=n.length,i=ys.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return vs._fallbackText=i.slice(t,1<e?1-e:void 0),vs._fallbackText},getText:function(){return"value"in vs._root?vs._root.value:vs._root[yt()]}},_s=ys,bs="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),xs={type:null,target:null,currentTarget:_e.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};ve(At.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=_e.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=_e.thatReturnsTrue)},persist:function(){this.isPersistent=_e.thatReturnsTrue},isPersistent:_e.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<bs.length;e++)this[bs[e]]=null}}),At.Interface=xs,At.augmentClass=function(t,e){function n(){}n.prototype=this.prototype;var r=new n;ve(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=ve({},this.Interface,e),t.augmentClass=this.augmentClass,Rt(t)},Rt(At),At.augmentClass(kt,{data:null}),At.augmentClass(Nt,{data:null});var ws=[9,13,27,32],Es=ge.canUseDOM&&"CompositionEvent"in window,Ms=null;ge.canUseDOM&&"documentMode"in document&&(Ms=document.documentMode);var Ts;if(Ts=ge.canUseDOM&&"TextEvent"in window&&!Ms){var Ss=window.opera;Ts=!("object"==typeof Ss&&"function"==typeof Ss.version&&12>=parseInt(Ss.version(),10))}var Ps=Ts,Cs=ge.canUseDOM&&(!Es||Ms&&8<Ms&&11>=Ms),As=String.fromCharCode(32),Ls={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Os=!1,Rs=!1,ks={eventTypes:Ls,extractEvents:function(t,e,n,r){var i;if(Es)t:{switch(t){case"topCompositionStart":var o=Ls.compositionStart;break t;case"topCompositionEnd":o=Ls.compositionEnd;break t;case"topCompositionUpdate":o=Ls.compositionUpdate;break t}o=void 0}else Rs?It(t,n)&&(o=Ls.compositionEnd):"topKeyDown"===t&&229===n.keyCode&&(o=Ls.compositionStart);return o?(Cs&&(Rs||o!==Ls.compositionStart?o===Ls.compositionEnd&&Rs&&(i=_s.getData()):Rs=_s.initialize(r)),o=kt.getPooled(o,e,n,r),i?o.data=i:(i=Dt(n),null!==i&&(o.data=i)),gs.accumulateTwoPhaseDispatches(o),i=o):i=null,(t=Ps?jt(t,n):zt(t,n))?(e=Nt.getPooled(Ls.beforeInput,e,n,r),e.data=t,gs.accumulateTwoPhaseDispatches(e)):e=null,[i,e]}},Ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Is={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Ds=null,js=null,zs=!1;ge.canUseDOM&&(zs=O("input")&&(!document.documentMode||9<document.documentMode));var Us={eventTypes:Is,_isInputEventSupported:zs,extractEvents:function(t,e,n,r){var i=e?Ye.getNodeFromInstance(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Gt;else if(Ut(i))if(zs)a=Xt;else{a=Yt;var s=qt}else o=i.nodeName,!o||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=Zt);return a&&(a=a(t,e))?Bt(a,n,r):(s&&s(t,i,e),void("topBlur"===t&&null!=e&&(t=e._wrapperState||i._wrapperState)&&t.controlled&&"number"===i.type&&(t=""+i.value,i.getAttribute("value")!==t&&i.setAttribute("value",t))))}};At.augmentClass(Kt,{view:function(t){return t.view?t.view:(t=E(t),t.window===t?t:(t=t.ownerDocument)?t.defaultView||t.parentWindow:window)},detail:function(t){return t.detail||0}});var Bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};Kt.augmentClass($t,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qt,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}});var Fs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Hs={eventTypes:Fs,extractEvents:function(t,e,n,r){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==t&&"topMouseOver"!==t)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===t?(t=e,e=(e=n.relatedTarget||n.toElement)?Ye.getClosestInstanceFromNode(e):null):t=null,t===e)return null;var o=null==t?i:Ye.getNodeFromInstance(t);i=null==e?i:Ye.getNodeFromInstance(e);var a=$t.getPooled(Fs.mouseLeave,t,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=$t.getPooled(Fs.mouseEnter,e,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,gs.accumulateEnterLeaveDispatches(a,n,t,e),[a,n]}},Gs=je.DOCUMENT_NODE,Vs=ge.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Ws={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},qs=null,Ys=null,Zs=null,Xs=!1,Ks=An.isListeningToAllDependencies,Js={eventTypes:Ws,extractEvents:function(t,e,n,r){var i=r.window===r?r.document:r.nodeType===Gs?r:r.ownerDocument;if(!i||!Ks("onSelect",i))return null;switch(i=e?Ye.getNodeFromInstance(e):window,t){case"topFocus":(Ut(i)||"true"===i.contentEditable)&&(qs=i,Ys=e,Zs=null);break;case"topBlur":Zs=Ys=qs=null;break;case"topMouseDown":Xs=!0;break;case"topContextMenu":case"topMouseUp":return Xs=!1,te(n,r);case"topSelectionChange":if(Vs)break;case"topKeyDown":case"topKeyUp":return te(n,r)}return null}};At.augmentClass(ee,{animationName:null,elapsedTime:null,pseudoElement:null}),At.augmentClass(ne,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kt.augmentClass(re,{relatedTarget:null});var Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};Kt.augmentClass(oe,{key:function(t){if(t.key){var e=Qs[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=ie(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?$s[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qt,charCode:function(t){return"keypress"===t.type?ie(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ie(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),$t.augmentClass(ae,{dataTransfer:null}),Kt.augmentClass(se,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qt}),At.augmentClass(ue,{propertyName:null,elapsedTime:null,pseudoElement:null}),$t.augmentClass(ce,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null});var tu={},eu={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(t){var e=t[0].toUpperCase()+t.slice(1),n="on"+e;e="top"+e,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[e]},tu[t]=n,eu[e]=n});var nu={eventTypes:tu,extractEvents:function(t,e,n,i){var o=eu[t];if(!o)return null;switch(t){case"topAbort":case"topCancel":case"topCanPlay":case"topCanPlayThrough":case"topClose":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topToggle":case"topVolumeChange":case"topWaiting":var a=At;break;case"topKeyPress":if(0===ie(n))return null;case"topKeyDown":case"topKeyUp":a=oe;break;case"topBlur":case"topFocus":a=re;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=$t;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=ae;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=se;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=ee;break;case"topTransitionEnd":a=ue;break;case"topScroll":a=Kt;break;case"topWheel":a=ce;break;case"topCopy":case"topCut":case"topPaste":a=ne}return a?void 0:r("86",t),t=a.getPooled(o,e,n,i),gs.accumulateTwoPhaseDispatches(t),t}};_n.setHandleTopLevel(An.handleTopLevel),xn.injection.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),un.injection.injectComponentTree(Ye),xn.injection.injectEventPluginsByName({SimpleEventPlugin:nu,EnterLeaveEventPlugin:Hs,ChangeEventPlugin:Us,SelectEventPlugin:Js,BeforeInputEventPlugin:ks});var ru=Ie.injection.MUST_USE_PROPERTY,iu=Ie.injection.HAS_BOOLEAN_VALUE,ou=Ie.injection.HAS_NUMERIC_VALUE,au=Ie.injection.HAS_POSITIVE_NUMERIC_VALUE,su=Ie.injection.HAS_STRING_BOOLEAN_VALUE,uu={Properties:{allowFullScreen:iu,allowTransparency:su,async:iu,autoPlay:iu,capture:iu,checked:ru|iu,cols:au,contentEditable:su,controls:iu,default:iu,defer:iu,disabled:iu,download:Ie.injection.HAS_OVERLOADED_BOOLEAN_VALUE,draggable:su,formNoValidate:iu,hidden:iu,loop:iu,multiple:ru|iu,muted:ru|iu,noValidate:iu,open:iu,playsInline:iu,readOnly:iu,required:iu,reversed:iu,rows:au,rowSpan:ou,scoped:iu,seamless:iu,selected:ru|iu,size:au,start:ou,span:au,spellCheck:su,style:0,itemScope:iu,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:su},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(t,e){return null==e?t.removeAttribute("value"):void("number"!==t.type||!1===t.hasAttribute("value")?t.setAttribute("value",""+e):t.validity&&!t.validity.badInput&&t.ownerDocument.activeElement!==t&&t.setAttribute("value",""+e))}}},cu=Ie.injection.HAS_STRING_BOOLEAN_VALUE,lu={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},hu={Properties:{autoReverse:cu,externalResourcesRequired:cu,preserveAlpha:cu},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:lu.xlink,xlinkArcrole:lu.xlink,xlinkHref:lu.xlink,xlinkRole:lu.xlink,xlinkShow:lu.xlink,xlinkTitle:lu.xlink,xlinkType:lu.xlink,xmlBase:lu.xml,xmlLang:lu.xml,xmlSpace:lu.xml}},fu=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(t){var e=t.replace(fu,le);hu.Properties[e]=0,hu.DOMAttributeNames[e]=t}),Ie.injection.injectDOMPropertyConfig(uu),Ie.injection.injectDOMPropertyConfig(hu);var du=na.injectInternals,pu=je.ELEMENT_NODE,mu=je.TEXT_NODE,gu=je.COMMENT_NODE,vu=je.DOCUMENT_NODE,yu=je.DOCUMENT_FRAGMENT_NODE,_u=Ie.ROOT_ATTRIBUTE_NAME,bu=Pe.getChildNamespace,xu=dr.createElement,wu=dr.createTextNode,Eu=dr.setInitialProperties,Mu=dr.diffProperties,Tu=dr.updateProperties,Su=dr.diffHydratedProperties,Pu=dr.diffHydratedText,Cu=dr.warnForDeletedHydratableElement,Au=dr.warnForDeletedHydratableText,Lu=dr.warnForInsertedHydratedElement,Ou=dr.warnForInsertedHydratedText,Ru=Ye.precacheFiberNode,ku=Ye.updateFiberProps;fn.injection.injectFiberControlledHostComponent(dr),xt._injectFiber(function(t){return Du.findHostInstance(t)});var Nu=null,Iu=null,Du=function(t){var e=t.getPublicInstance;t=dt(t);var n=t.scheduleUpdate,r=t.getPriorityContext;return{createContainer:function(t){var e=fi();return t={current:e,containerInfo:t,isScheduled:!1,nextScheduledRoot:null,context:null,pendingContext:null},e.stateNode=t},updateContainer:function(t,e,i,o){var a=e.current;i=mt(i),null===e.context?e.context=i:e.pendingContext=i,e=o,o=r(a,Cr.enableAsyncSubtreeAPI&&null!=t&&null!=t.type&&null!=t.type.prototype&&!0===t.type.prototype.unstable_isAsyncReactComponent),t={element:t},$a(a,t,void 0===e?null:e,o),n(a,o)},batchedUpdates:t.batchedUpdates,unbatchedUpdates:t.unbatchedUpdates,deferredUpdates:t.deferredUpdates,flushSync:t.flushSync,getPublicRootInstance:function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case rs:return e(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:function(t){return t=is(t),null===t?null:t.stateNode},findHostInstanceWithNoPortals:function(t){return t=os(t),null===t?null:t.stateNode}}}({getRootHostContext:function(t){if(t.nodeType===vu)t=(t=t.documentElement)?t.namespaceURI:bu(null,"");else{var e=t.nodeType===gu?t.parentNode:t;t=e.namespaceURI||null,e=e.tagName,t=bu(t,e)}return t},getChildHostContext:function(t,e){return bu(t,e)},getPublicInstance:function(t){return t},prepareForCommit:function(){Nu=An.isEnabled(),Iu=hs.getSelectionInformation(),An.setEnabled(!1)},resetAfterCommit:function(){hs.restoreSelection(Iu),Iu=null,An.setEnabled(Nu),Nu=null},createInstance:function(t,e,n,r,i){return t=xu(t,e,n,r),Ru(i,t),ku(t,e),t},appendInitialChild:function(t,e){t.appendChild(e)},finalizeInitialChildren:function(t,e,n,r){Eu(t,e,n,r);t:{switch(e){case"button":case"input":case"select":case"textarea":t=!!n.autoFocus;break t}t=!1}return t},prepareUpdate:function(t,e,n,r,i){return Mu(t,e,n,r,i)},commitMount:function(t){t.focus()},commitUpdate:function(t,e,n,r,i){ku(t,i),Tu(t,e,n,r,i)},shouldSetTextContent:function(t,e){return"textarea"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&"string"==typeof e.dangerouslySetInnerHTML.__html},resetTextContent:function(t){t.textContent=""},shouldDeprioritizeSubtree:function(t,e){return!!e.hidden},createTextInstance:function(t,e,n,r){return t=wu(t,e),Ru(r,t),t},commitTextUpdate:function(t,e,n){t.nodeValue=n},appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){t.nodeType===gu?t.parentNode.insertBefore(e,t):t.appendChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},insertInContainerBefore:function(t,e,n){t.nodeType===gu?t.parentNode.insertBefore(e,n):t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){t.nodeType===gu?t.parentNode.removeChild(e):t.removeChild(e)},canHydrateInstance:function(t,e){return t.nodeType===pu&&e===t.nodeName.toLowerCase()},canHydrateTextInstance:function(t,e){return""!==e&&t.nodeType===mu},getNextHydratableSibling:function(t){for(t=t.nextSibling;t&&t.nodeType!==pu&&t.nodeType!==mu;)t=t.nextSibling;return t},getFirstHydratableChild:function(t){for(t=t.firstChild;t&&t.nodeType!==pu&&t.nodeType!==mu;)t=t.nextSibling;return t},hydrateInstance:function(t,e,n,r,i,o){return Ru(o,t),ku(t,n),Su(t,e,n,i,r)},hydrateTextInstance:function(t,e,n){return Ru(n,t),Pu(t,e)},didNotHydrateInstance:function(t,e){1===e.nodeType?Cu(t,e):Au(t,e)},didNotFindHydratableInstance:function(t,e,n){Lu(t,e,n)},didNotFindHydratableTextInstance:function(t,e){Ou(t,e)},scheduleDeferredCallback:Pr.rIC,useSyncScheduling:!0});pn.injection.injectFiberBatchedUpdates(Du.batchedUpdates);var ju={createPortal:pe,hydrate:function(t,e,n){return de(null,t,e,!0,n)},render:function(t,e,n){return de(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return null!=t&&Ze.has(t)?void 0:r("38"),de(t,e,n,!1,i)},unmountComponentAtNode:function(t){return he(t)?void 0:r("40"),!!t._reactRootContainer&&(Du.unbatchedUpdates(function(){de(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},findDOMNode:xt,unstable_createPortal:pe,unstable_batchedUpdates:pn.batchedUpdates,unstable_deferredUpdates:Du.deferredUpdates,flushSync:Du.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:xn,EventPluginRegistry:Oe,EventPropagators:gs,ReactControlledComponent:fn,ReactDOMComponentTree:Ye,ReactDOMEventListener:_n}};du({findFiberByHostInstance:Ye.getClosestInstanceFromNode,findHostInstanceByFiber:Du.findHostInstance,bundleType:0,version:"16.0.0",rendererPackageName:"react-dom"}),e.exports=ju},{"fbjs/lib/EventListener":218,"fbjs/lib/ExecutionEnvironment":219,"fbjs/lib/containsNode":222,"fbjs/lib/emptyFunction":223,"fbjs/lib/emptyObject":224,"fbjs/lib/focusNode":225,"fbjs/lib/getActiveElement":226,"fbjs/lib/invariant":229,"fbjs/lib/shallowEqual":234,"object-assign":205,react:321}],217:[function(t,e,n){"use strict";function r(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}r(),e.exports=t("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.development.js":215,"./cjs/react-dom.production.min.js":216}],218:[function(t,e,n){"use strict";var r=t("./emptyFunction"),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},{"./emptyFunction":223}],219:[function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},{}],220:[function(t,e,n){"use strict";function r(t){return t.replace(i,function(t,e){return e.toUpperCase()})}var i=/-(.)/g;e.exports=r},{}],221:[function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=t("./camelize"),o=/^-ms-/;e.exports=r},{"./camelize":220}],222:[function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=t("./isTextNode");e.exports=r},{"./isTextNode":231}],223:[function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},e.exports=i},{}],224:[function(t,e,n){"use strict";var r={};e.exports=r},{}],225:[function(t,e,n){"use strict";function r(t){try{t.focus()}catch(t){}}e.exports=r},{}],226:[function(t,e,n){"use strict";function r(t){if(t=t||("undefined"!=typeof document?document:void 0),"undefined"==typeof t)return null;try{return t.activeElement||t.body}catch(e){return t.body}}e.exports=r},{}],227:[function(t,e,n){"use strict";function r(t){return t.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=r},{}],228:[function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=t("./hyphenate"),o=/^ms-/;e.exports=r},{"./hyphenate":227}],229:[function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};e.exports=r},{}],230:[function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"==typeof n.Node?t instanceof n.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}e.exports=r},{}],231:[function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=t("./isNode");e.exports=r},{"./isNode":230}],232:[function(t,e,n){"use strict";var r,i=t("./ExecutionEnvironment");i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}},{"./ExecutionEnvironment":219}],233:[function(t,e,n){"use strict";var r,i=t("./performance");r=i.now?function(){return i.now()}:function(){return Date.now()},e.exports=r},{"./performance":232}],234:[function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},{}],235:[function(t,e,n){"use strict";var r=t("./emptyFunction"),i=r;e.exports=i},{"./emptyFunction":223}],236:[function(t,e,n){"use strict";function r(t,e,n,r,i){}e.exports=r},{"./lib/ReactPropTypesSecret":240,"fbjs/lib/invariant":229,"fbjs/lib/warning":235}],237:[function(t,e,n){"use strict";var r=t("fbjs/lib/emptyFunction"),i=t("fbjs/lib/invariant"),o=t("./lib/ReactPropTypesSecret");e.exports=function(){function t(t,e,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":240,"fbjs/lib/emptyFunction":223,"fbjs/lib/invariant":229}],238:[function(t,e,n){"use strict";var r=t("fbjs/lib/emptyFunction"),i=t("fbjs/lib/invariant"),o=t("fbjs/lib/warning"),a=t("object-assign"),s=t("./lib/ReactPropTypesSecret"),u=t("./checkPropTypes");e.exports=function(t,e){function n(t){var e=t&&(A&&t[A]||t[L]);if("function"==typeof e)return e}function c(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function l(t){this.message=t,this.stack=""}function h(t){function n(n,r,o,a,u,c,h){if(a=a||O,c=c||o,h!==s)if(e)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[o]?n?new l(null===r[o]?"The "+u+" `"+c+"` is marked as required "+("in `"+a+"`, but its value is `null`."):"The "+u+" `"+c+"` is marked as required in "+("`"+a+"`, but its value is `undefined`.")):null:t(r,o,a,u,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function f(t){function e(e,n,r,i,o,a){var s=e[n],u=T(s);if(u!==t){var c=S(s);return new l("Invalid "+i+" `"+o+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return h(e)}function d(){return h(r.thatReturnsNull)}function p(t){function e(e,n,r,i,o){if("function"!=typeof t)return new l("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=e[n];if(!Array.isArray(a)){var u=T(a);return new l("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<a.length;c++){var h=t(a,c,r,i,o+"["+c+"]",s);if(h instanceof Error)return h}return null}return h(e)}function m(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){var s=T(a);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return h(e)}function g(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||O,s=C(e[n]);return new l("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return h(e)}function v(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(c(a,t[s]))return null;var u=JSON.stringify(t);return new l("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return Array.isArray(t)?h(e):r.thatReturnsNull}function y(t){function e(e,n,r,i,o){if("function"!=typeof t)return new l("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=e[n],u=T(a);if("object"!==u)return new l("Invalid "+i+" `"+o+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var c in a)if(a.hasOwnProperty(c)){var h=t(a,c,r,i,o+"."+c,s);if(h instanceof Error)return h}return null}return h(e)}function _(t){function e(e,n,r,i,o){for(var a=0;a<t.length;a++){var u=t[a];if(null==u(e,n,r,i,o,s))return null}return new l("Invalid "+i+" `"+o+"` supplied to "+("`"+r+"`."))}if(!Array.isArray(t))return r.thatReturnsNull;for(var n=0;n<t.length;n++){var i=t[n];if("function"!=typeof i)return o(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",P(i),n),r.thatReturnsNull}return h(e)}function b(){function t(t,e,n,r,i){return E(t[e])?null:new l("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return h(t)}function x(t){function e(e,n,r,i,o){var a=e[n],u=T(a);if("object"!==u)return new l("Invalid "+i+" `"+o+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var c in t){var h=t[c];if(h){var f=h(a,c,r,i,o+"."+c,s);if(f)return f}}return null}return h(e)}function w(t){function e(e,n,r,i,o){var u=e[n],c=T(u);if("object"!==c)return new l("Invalid "+i+" `"+o+"` of type `"+c+"` "+("supplied to `"+r+"`, expected `object`."));var h=a({},e[n],t);for(var f in h){var d=t[f];if(!d)return new l("Invalid "+i+" `"+o+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var p=d(u,f,r,i,o+"."+f,s);if(p)return p}return null}return h(e)}function E(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(E);if(null===e||t(e))return!0;var r=n(e);if(!r)return!1;var i,o=r.call(e);if(r!==e.entries){for(;!(i=o.next()).done;)if(!E(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!E(a[1]))return!1}return!0;default:return!1}}function M(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function T(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":M(e,t)?"symbol":e}function S(t){if("undefined"==typeof t||null===t)return""+t;var e=T(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function P(t){var e=S(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function C(t){return t.constructor&&t.constructor.name?t.constructor.name:O}var A="function"==typeof Symbol&&Symbol.iterator,L="@@iterator",O="<<anonymous>>",R={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(),arrayOf:p,element:m(),instanceOf:g,node:b(),objectOf:y,oneOf:v,oneOfType:_,shape:x,exact:w};return l.prototype=Error.prototype,R.checkPropTypes=u,R.PropTypes=R,R}},{"./checkPropTypes":236,"./lib/ReactPropTypesSecret":240,"fbjs/lib/emptyFunction":223,"fbjs/lib/invariant":229,"fbjs/lib/warning":235,"object-assign":205}],239:[function(t,e,n){e.exports=t("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":237,
"./factoryWithTypeCheckers":238}],240:[function(t,e,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},{}],241:[function(t,e,n){!function(r,i){if("object"==typeof n&&"object"==typeof e)e.exports=i(t("react"),t("prop-types"));else if("function"==typeof define&&define.amd)define(["react","prop-types"],i);else{var o="object"==typeof n?i(t("react"),t("prop-types")):i(r.react,r["prop-types"]);for(var a in o)("object"==typeof n?n:r)[a]=o[a]}}("undefined"!=typeof self?self:this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function r(t){console.warn("[react-ga]",t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){return t.replace(/^\s+|\s+$/g,"")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){return(0,w.default)(t,z)}function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0];if("function"==typeof F){if("string"!=typeof i)return void(0,L.default)("ga command must be a string");!B&&Array.isArray(t)||F.apply(void 0,n),Array.isArray(t)&&t.forEach(function(t){F.apply(void 0,o([t+"."+i].concat(n.slice(1))))})}}function u(t,e){return t?(e&&(e.debug&&e.debug===!0&&(j=!0),e.titleCase===!1&&(z=!1)),void(e&&e.gaOptions?F("create",t,e.gaOptions):F("create",t,"auto"))):void(0,L.default)("gaTrackingID is required in initialize()")}function c(t,e){if(e&&e.testMode===!0)U=!0;else{if("undefined"==typeof window)return!1;(0,C.default)(e)}return B=!e||"boolean"!=typeof e.alwaysSendToDefaultTracker||e.alwaysSendToDefaultTracker,Array.isArray(t)?t.forEach(function(t){return"object"!==("undefined"==typeof t?"undefined":b(t))?void(0,L.default)("All configs must be an object"):void u(t.trackingId,t)}):u(t,e),!0}function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length>0&&(F.apply(void 0,e),j&&((0,R.default)("called ga('arguments');"),(0,R.default)("with arguments: "+JSON.stringify(e)))),window.ga}function h(t,e){return t?"object"!==("undefined"==typeof t?"undefined":b(t))?void(0,L.default)("Expected `fieldsObject` arg to be an Object"):(0===Object.keys(t).length&&(0,L.default)("empty `fieldsObject` given to .set()"),s(e,"set",t),void(j&&((0,R.default)("called ga('set', fieldsObject);"),(0,R.default)("with fieldsObject: "+JSON.stringify(t))))):void(0,L.default)("`fieldsObject` is required in .set()")}function f(t,e){s(e,"send",t),j&&((0,R.default)("called ga('send', fieldObject);"),(0,R.default)("with fieldObject: "+JSON.stringify(t)),(0,R.default)("with trackers: "+JSON.stringify(e)))}function d(t,e,n){if(!t)return void(0,L.default)("path is required in .pageview()");var r=(0,S.default)(t);if(""===r)return void(0,L.default)("path cannot be an empty string in .pageview()");var i={};if(n&&(i.title=n),"function"==typeof l&&(s(e,"send",_({hitType:"pageview",page:r},i)),j)){(0,R.default)("called ga('send', 'pageview', path);");var o="";n&&(o=" and title: "+n),(0,R.default)("with path: "+r+o)}}function p(t,e){if(!t)return void(0,L.default)("modalName is required in .modalview(modalName)");var n=(0,M.default)((0,S.default)(t));if(""===n)return void(0,L.default)("modalName cannot be an empty string or a single / in .modalview()");if("function"==typeof l){var r="/modal/"+n;s(e,"send","pageview",r),j&&((0,R.default)("called ga('send', 'pageview', path);"),(0,R.default)("with path: "+r))}}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.category,n=t.variable,r=t.value,i=t.label,o=arguments[1];if("function"==typeof l){if(!e||!n||!r||"number"!=typeof r)return void(0,L.default)("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number");var s={hitType:"timing",timingCategory:a(e),timingVar:a(n),timingValue:r};i&&(s.timingLabel=a(i)),f(s,o)}}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=t.category,r=t.action,o=t.label,s=t.value,u=t.nonInteraction,c=t.transport,h=i(t,["category","action","label","value","nonInteraction","transport"]);if("function"==typeof l){if(!n||!r)return void(0,L.default)("args.category AND args.action are required in event()");var d={hitType:"event",eventCategory:a(n),eventAction:a(r)};o&&(d.eventLabel=a(o)),"undefined"!=typeof s&&("number"!=typeof s?(0,L.default)("Expected `args.value` arg to be a Number."):d.eventValue=s),"undefined"!=typeof u&&("boolean"!=typeof u?(0,L.default)("`args.nonInteraction` must be a boolean."):d.nonInteraction=u),"undefined"!=typeof c&&("string"!=typeof c?(0,L.default)("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(c)===-1&&(0,L.default)("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),d.transport=c)),Object.keys(h).filter(function(t){return"dimension"===t.substr(0,"dimension".length)}).forEach(function(t){d[t]=h[t]}),Object.keys(h).filter(function(t){return"metric"===t.substr(0,"metric".length)}).forEach(function(t){d[t]=h[t]}),f(d,e)}}function v(t,e){var n=t.description,r=t.fatal;if("function"==typeof l){var i={hitType:"exception"};n&&(i.exDescription=a(n)),"undefined"!=typeof r&&("boolean"!=typeof r?(0,L.default)("`args.fatal` must be a boolean."):i.exFatal=r),f(i,e)}}function y(t,e,n){if("function"!=typeof e)return void(0,L.default)("hitCallback function is required");if("function"==typeof l){if(!t||!t.label)return void(0,L.default)("args.label is required in outboundLink()");var r={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:a(t.label)},i=!1,o=function(){i=!0,e()},s=setTimeout(o,250),u=function(){clearTimeout(s),i||e()};r.hitCallback=u,f(r,n)}else setTimeout(e,0)}Object.defineProperty(e,"__esModule",{value:!0}),e.testModeAPI=e.OutboundLink=e.plugin=void 0;var _=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.initialize=c,e.ga=l,e.set=h,e.send=f,e.pageview=d,e.modalview=p,e.timing=m,e.event=g,e.exception=v,e.outboundLink=y;var x=n(3),w=r(x),E=n(6),M=r(E),T=n(1),S=r(T),P=n(7),C=r(P),A=n(0),L=r(A),O=n(8),R=r(O),k=n(9),N=r(k),I=n(10),D=r(I),j=!1,z=!0,U=!1,B=!0,F=function(){var t;return U?N.default.ga.apply(N.default,arguments):window.ga?(t=window).ga.apply(t,arguments):(0,L.default)("ReactGA.initialize must be called first or GoogleAnalytics should be loaded manually")},H=e.plugin={require:function(t,e){if("function"==typeof l){if(!t)return void(0,L.default)("`name` is required in .require()");var n=(0,S.default)(t);if(""===n)return void(0,L.default)("`name` cannot be an empty string in .require()");if(e){if("object"!==("undefined"==typeof e?"undefined":b(e)))return void(0,L.default)("Expected `options` arg to be an Object");0===Object.keys(e).length&&(0,L.default)("Empty `options` given to .require()"),l("require",n,e),j&&(0,R.default)("called ga('require', '"+n+"', "+JSON.stringify(e))}else l("require",n),j&&(0,R.default)("called ga('require', '"+n+"');")}},execute:function(t,e){var n=void 0,r=void 0;if(1===(arguments.length<=2?0:arguments.length-2)?n=arguments.length<=2?void 0:arguments[2]:(r=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3]),"function"==typeof l)if("string"!=typeof t)(0,L.default)("Expected `pluginName` arg to be a String.");else if("string"!=typeof e)(0,L.default)("Expected `action` arg to be a String.");else{var i=t+":"+e;n=n||null,r&&n?(l(i,r,n),j&&((0,R.default)("called ga('"+i+"');"),(0,R.default)('actionType: "'+r+'" with payload: '+JSON.stringify(n)))):n?(l(i,n),j&&((0,R.default)("called ga('"+i+"');"),(0,R.default)("with payload: "+JSON.stringify(n)))):(l(i),j&&(0,R.default)("called ga('"+i+"');"))}}};D.default.origTrackLink=D.default.trackLink,D.default.trackLink=y;var G=e.OutboundLink=D.default;e.testModeAPI=N.default;e.default={initialize:c,ga:l,set:h,send:f,pageview:d,modalview:p,timing:m,event:g,exception:v,plugin:H,outboundLink:y,OutboundLink:G,testModeAPI:N.default}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return(0,a.default)(t)?((0,l.default)("This arg looks like an email address, redacting."),h):e?(0,u.default)(t):t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(4),a=r(o),s=n(5),u=r(s),c=n(0),l=r(c),h="REDACTED (Potential Email Address)"},function(t,e,n){"use strict";function r(t){return/[^@]+@[^@]+/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(0,a.default)(t).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(t,e,n){return e>0&&e+t.length!==n.length&&t.search(s)>-1&&":"!==n.charAt(e-2)&&("-"!==n.charAt(e+t.length)||"-"===n.charAt(e-1))&&n.charAt(e-1).search(/[^\s-]/)<0?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1?t:t.charAt(0).toUpperCase()+t.substr(1)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(1),a=r(o),s=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i},function(t,e,n){"use strict";function r(t){return"/"===t.substring(0,1)?t.substring(1):t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){!function(t,e,n,r,i,o,a){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,o=e.createElement(n),a=e.getElementsByTagName(n)[0],o.async=1,o.src=r,a.parentNode.insertBefore(o,a)}(window,document,"script",t&&t.gaAddress?t.gaAddress:"https://www.google-analytics.com/analytics.js","ga")}},function(t,e,n){"use strict";function r(t){console.info("[react-ga]",t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.gaCalls=[];e.default={calls:r,ga:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.push([].concat(e))}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(11),l=r(c),h=n(12),f=r(h),d=n(0),p=r(d),m="_blank",g=1,v=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.handleClick=function(t){var n=r.props,i=n.target,o=n.eventLabel,a=n.to,s=n.onClick,u={label:o},c=i!==m,l=!(t.ctrlKey||t.shiftKey||t.metaKey||t.button===g);c&&l?(t.preventDefault(),e.trackLink(u,function(){window.location.href=a})):e.trackLink(u,function(){}),s&&s(t)},a=n,o(r,a)}return a(e,t),u(e,[{key:"render",value:function(){var t=s({},this.props,{href:this.props.to,onClick:this.handleClick});return delete t.eventLabel,l.default.createElement("a",t)}}]),e}(c.Component);v.propTypes={eventLabel:f.default.string.isRequired,target:f.default.string,to:f.default.string,onClick:f.default.func},v.defaultProps={target:null,to:null,onClick:null},v.trackLink=function(){(0,p.default)("ga tracking not enabled")},e.default=v},function(e,n){e.exports=t},function(t,n){t.exports=e}])})},{"prop-types":248,react:321}],242:[function(t,e,n){arguments[4][223][0].apply(n,arguments)},{dup:223}],243:[function(t,e,n){arguments[4][229][0].apply(n,arguments)},{dup:229}],244:[function(t,e,n){arguments[4][235][0].apply(n,arguments)},{"./emptyFunction":242,dup:235}],245:[function(t,e,n){arguments[4][236][0].apply(n,arguments)},{"./lib/ReactPropTypesSecret":249,dup:236,"fbjs/lib/invariant":243,"fbjs/lib/warning":244}],246:[function(t,e,n){arguments[4][237][0].apply(n,arguments)},{"./lib/ReactPropTypesSecret":249,dup:237,"fbjs/lib/emptyFunction":242,"fbjs/lib/invariant":243}],247:[function(t,e,n){arguments[4][238][0].apply(n,arguments)},{"./checkPropTypes":245,"./lib/ReactPropTypesSecret":249,dup:238,"fbjs/lib/emptyFunction":242,"fbjs/lib/invariant":243,"fbjs/lib/warning":244,"object-assign":205}],248:[function(t,e,n){arguments[4][239][0].apply(n,arguments)},{"./factoryWithThrowingShims":246,"./factoryWithTypeCheckers":247,dup:239}],249:[function(t,e,n){arguments[4][240][0].apply(n,arguments)},{dup:240}],250:[function(t,e,n){var r="undefined"!=typeof window,i=r?window.Masonry||t("masonry-layout"):null,o=r?t("imagesloaded"):null,a=t("lodash/assign"),s=t("element-resize-detector"),u=t("lodash/debounce"),c=t("lodash/omit"),l=t("prop-types"),h=t("react"),f=t("create-react-class"),d={enableResizableChildren:l.bool,disableImagesLoaded:l.bool,onImagesLoaded:l.func,updateOnEachImageLoad:l.bool,options:l.object,imagesLoadedOptions:l.object,elementType:l.string,onLayoutComplete:l.func,onRemoveComplete:l.func},p=f({masonry:!1,erd:void 0,latestKnownDomChildren:[],displayName:"MasonryComponent",imagesLoadedCancelRef:void 0,propTypes:d,getDefaultProps:function(){return{enableResizableChildren:!1,disableImagesLoaded:!1,updateOnEachImageLoad:!1,options:{},imagesLoadedOptions:{},className:"",elementType:"div",onLayoutComplete:function(){},onRemoveComplete:function(){}}},initializeMasonry:function(t){this.masonry&&!t||(this.masonry=new i(this.masonryContainer,this.props.options),this.props.onLayoutComplete&&this.masonry.on("layoutComplete",this.props.onLayoutComplete),this.props.onRemoveComplete&&this.masonry.on("removeComplete",this.props.onRemoveComplete),this.latestKnownDomChildren=this.getCurrentDomChildren())},getCurrentDomChildren:function(){var t=this.masonryContainer,e=this.props.options.itemSelector?t.querySelectorAll(this.props.options.itemSelector):t.children;return Array.prototype.slice.call(e)},diffDomChildren:function(){var t=!1,e=this.latestKnownDomChildren.filter(function(t){return!!t.parentNode});e.length!==this.latestKnownDomChildren.length&&(t=!0);var n=this.getCurrentDomChildren(),r=e.filter(function(t){return!~n.indexOf(t)}),i=n.filter(function(t){return!~e.indexOf(t)}),o=0,a=i.filter(function(t){var e=o===n.indexOf(t);return e&&o++,e}),s=i.filter(function(t){return a.indexOf(t)===-1}),u=[];return 0===r.length&&(u=e.filter(function(t,e){return e!==n.indexOf(t)})),this.latestKnownDomChildren=n,{old:e,new:n,removed:r,appended:s,prepended:a,moved:u,forceItemReload:t}},performLayout:function(){var t=this.diffDomChildren(),e=t.forceItemReload||t.moved.length>0;t.removed.length>0&&(this.props.enableResizableChildren&&t.removed.forEach(this.erd.removeAllListeners,this.erd),this.masonry.remove(t.removed),e=!0),t.appended.length>0&&(this.masonry.appended(t.appended),0===t.prepended.length&&(e=!0),this.props.enableResizableChildren&&t.appended.forEach(this.listenToElementResize,this)),t.prepended.length>0&&(this.masonry.prepended(t.prepended),this.props.enableResizableChildren&&t.prepended.forEach(this.listenToElementResize,this)),e&&this.masonry.reloadItems(),this.masonry.layout()},derefImagesLoaded:function(){this.imagesLoadedCancelRef(),this.imagesLoadedCancelRef=void 0},imagesLoaded:function(){if(!this.props.disableImagesLoaded){this.imagesLoadedCancelRef&&this.derefImagesLoaded();var t=this.props.updateOnEachImageLoad?"progress":"always",e=u(function(t){this.props.onImagesLoaded&&this.props.onImagesLoaded(t),this.masonry.layout()}.bind(this),100),n=o(this.masonryContainer,this.props.imagesLoadedOptions).on(t,e);this.imagesLoadedCancelRef=function(){n.off(t,e),e.cancel()}}},initializeResizableChildren:function(){this.props.enableResizableChildren&&(this.erd=s({strategy:"scroll"}),this.latestKnownDomChildren.forEach(this.listenToElementResize,this))},listenToElementResize:function(t){this.erd.listenTo(t,function(){this.masonry.layout()}.bind(this))},destroyErd:function(){this.erd&&this.latestKnownDomChildren.forEach(this.erd.uninstall,this.erd)},componentDidMount:function(){this.initializeMasonry(),this.initializeResizableChildren(),this.imagesLoaded()},componentDidUpdate:function(){this.performLayout(),this.imagesLoaded()},componentWillUnmount:function(){this.destroyErd(),this.props.onLayoutComplete&&this.masonry.off("layoutComplete",this.props.onLayoutComplete),this.props.onRemoveComplete&&this.masonry.off("removeComplete",this.props.onRemoveComplete),this.derefImagesLoaded(),this.masonry.destroy()},setRef:function(t){this.masonryContainer=t},render:function(){var t=c(this.props,Object.keys(d));return h.createElement(this.props.elementType,a({},t,{ref:this.setRef}),this.props.children)}});e.exports=p,e.exports.default=p},{"create-react-class":6,"element-resize-detector":44,imagesloaded:59,"lodash/assign":176,"lodash/debounce":178,"lodash/omit":200,"masonry-layout":251,"prop-types":213,react:321}],251:[function(t,e,n){!function(n,r){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],r):"object"==typeof e&&e.exports?e.exports=r(t("outlayer"),t("get-size")):n.Masonry=r(n.Outlayer,n.getSize)}(window,function(t,e){"use strict";var n=t.create("masonry");n.compatOptions.fitWidth="isFitWidth";var r=n.prototype;return r._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},r.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],n=t&&t.element;this.columnWidth=n&&e(n).outerWidth||this.containerWidth}var r=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,o=i/r,a=r-i%r,s=a&&a<1?"round":"floor";o=Math[s](o),this.cols=Math.max(o,1)},r.getContainerWidth=function(){var t=this._getOption("fitWidth"),n=t?this.element.parentNode:this.element,r=e(n);this.containerWidth=r&&r.innerWidth},r._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&e<1?"round":"ceil",r=Math[n](t.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);for(var i=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",o=this[i](r,t),a={x:this.columnWidth*o.col,y:o.y},s=o.y+t.size.outerHeight,u=r+o.col,c=o.col;c<u;c++)this.colYs[c]=s;return a},r._getTopColPosition=function(t){var e=this._getTopColGroup(t),n=Math.min.apply(Math,e);return{col:e.indexOf(n),y:n}},r._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],n=this.cols+1-t,r=0;r<n;r++)e[r]=this._getColGroupY(r,t);return e},r._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var n=this.colYs.slice(t,t+e);return Math.max.apply(Math,n)},r._getHorizontalColPosition=function(t,e){var n=this.horizontalColIndex%this.cols,r=t>1&&n+t>this.cols;n=r?0:n;var i=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=i?n+t:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,t)}},r._manageStamp=function(t){var n=e(t),r=this._getElementOffset(t),i=this._getOption("originLeft"),o=i?r.left:r.right,a=o+n.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var u=Math.floor(a/this.columnWidth);u-=a%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var c=this._getOption("originTop"),l=(c?r.top:r.bottom)+n.outerHeight,h=s;h<=u;h++)this.colYs[h]=Math.max(l,this.colYs[h])},r._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},r._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},r.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},n})},{"get-size":58,outlayer:207}],252:[function(t,e,n){"use strict";function r(t,e,n){function r(){return a=!0,s?void(c=[].concat(Array.prototype.slice.call(arguments))):void n.apply(this,arguments)}function i(){if(!a&&(u=!0,!s)){for(s=!0;!a&&o<t&&u;)u=!1,e.call(this,o++,i,r);return s=!1,a?void n.apply(this,c):void(o>=t&&u&&(a=!0,n()))}}var o=0,a=!1,s=!1,u=!1,c=void 0;i()}function i(t,e,n){function r(t,e,r){a||(e?(a=!0,n(e)):(o[t]=r,a=++s===i,a&&n(null,o)))}var i=t.length,o=[];if(0===i)return n(null,o);var a=!1,s=0;t.forEach(function(t,n){e(t,n,function(t,e){r(n,t,e)})})}n.__esModule=!0,n.loopAsync=r,n.mapAsync=i},{}],253:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"@@contextSubscriber/"+t}function o(t){var e,n,r=i(t),o=r+"/listeners",a=r+"/eventIndex",s=r+"/subscribe";return n={childContextTypes:(e={},e[r]=c.isRequired,e),getChildContext:function(){var t;return t={},t[r]={eventIndex:this[a],subscribe:this[s]},t},componentWillMount:function(){this[o]=[],this[a]=0},componentWillReceiveProps:function(){this[a]++},componentDidUpdate:function(){var t=this;this[o].forEach(function(e){return e(t[a])})}},n[s]=function(t){var e=this;return this[o].push(t),function(){e[o]=e[o].filter(function(e){return e!==t})}},n}function a(t){var e,n,r=i(t),o=r+"/lastRenderedEventIndex",a=r+"/handleContextUpdate",s=r+"/unsubscribe";return n={contextTypes:(e={},e[r]=c,e),getInitialState:function(){var t;return this.context[r]?(t={},t[o]=this.context[r].eventIndex,t):{}},componentDidMount:function(){this.context[r]&&(this[s]=this.context[r].subscribe(this[a]))},componentWillReceiveProps:function(){var t;this.context[r]&&this.setState((t={},t[o]=this.context[r].eventIndex,t))},componentWillUnmount:function(){this[s]&&(this[s](),this[s]=null)}},n[a]=function(t){if(t!==this.state[o]){var e;this.setState((e={},e[o]=t,e))}},n}n.__esModule=!0,n.ContextProvider=o,n.ContextSubscriber=a;var s=t("prop-types"),u=r(s),c=u.default.shape({subscribe:u.default.func.isRequired,eventIndex:u.default.number.isRequired})},{"prop-types":213}],254:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("react"),a=r(o),s=t("create-react-class"),u=r(s),c=t("./Link"),l=r(c),h=(0,u.default)({displayName:"IndexLink",render:function(){return a.default.createElement(l.default,i({},this.props,{onlyActiveOnIndex:!0}))}});n.default=h,e.exports=n.default},{"./Link":258,"create-react-class":6,react:321}],255:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("create-react-class"),o=r(i),a=t("prop-types"),s=t("./routerWarning"),u=(r(s),t("invariant")),c=r(u),l=t("./Redirect"),h=r(l),f=t("./InternalPropTypes"),d=(0,o.default)({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(t,e){e&&(e.indexRoute=h.default.createRouteFromReactElement(t))}},propTypes:{to:a.string.isRequired,query:a.object,state:a.object,onEnter:f.falsy,children:f.falsy},render:function(){(0,c.default)(!1)}});n.default=d,e.exports=n.default},{"./InternalPropTypes":257,"./Redirect":262,"./routerWarning":282,"create-react-class":6,invariant:60,"prop-types":213}],256:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("create-react-class"),o=r(i),a=t("prop-types"),s=t("./routerWarning"),u=(r(s),t("invariant")),c=r(u),l=t("./RouteUtils"),h=t("./InternalPropTypes"),f=(0,o.default)({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(t,e){e&&(e.indexRoute=(0,l.createRouteFromReactElement)(t))}},propTypes:{path:h.falsy,component:h.component,components:h.components,getComponent:a.func,getComponents:a.func},render:function(){(0,c.default)(!1)}});n.default=f,e.exports=n.default},{"./InternalPropTypes":257,"./RouteUtils":264,"./routerWarning":282,"create-react-class":6,invariant:60,"prop-types":213}],257:[function(t,e,n){"use strict";function r(t,e,n){if(t[e])return new Error("<"+n+'> should not have a "'+e+'" prop')}n.__esModule=!0,n.routes=n.route=n.components=n.component=n.history=void 0,n.falsy=r;var i=t("prop-types"),o=(n.history=(0,i.shape)({listen:i.func.isRequired,push:i.func.isRequired,replace:i.func.isRequired,go:i.func.isRequired,goBack:i.func.isRequired,goForward:i.func.isRequired}),n.component=(0,i.oneOfType)([i.func,i.string])),a=(n.components=(0,i.oneOfType)([o,i.object]),n.route=(0,i.oneOfType)([i.object,i.element]));n.routes=(0,i.oneOfType)([a,(0,i.arrayOf)(a)])},{"prop-types":213}],258:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){return 0===t.button}function a(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function u(t,e){return"function"==typeof t?t(e.location):t}n.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=t("react"),h=r(l),f=t("create-react-class"),d=r(f),p=t("prop-types"),m=t("invariant"),g=r(m),v=t("./PropTypes"),y=t("./ContextUtils"),_=(0,d.default)({displayName:"Link",mixins:[(0,y.ContextSubscriber)("router")],contextTypes:{router:v.routerShape},propTypes:{to:(0,p.oneOfType)([p.string,p.object,p.func]),activeStyle:p.object,activeClassName:p.string,onlyActiveOnIndex:p.bool.isRequired,onClick:p.func,target:p.string},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(t){if(this.props.onClick&&this.props.onClick(t),!t.defaultPrevented){var e=this.context.router;e?void 0:(0,g.default)(!1),!a(t)&&o(t)&&(this.props.target||(t.preventDefault(),e.push(u(this.props.to,e))))}},render:function(){var t=this.props,e=t.to,n=t.activeClassName,r=t.activeStyle,o=t.onlyActiveOnIndex,a=i(t,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),l=this.context.router;if(l){if(!e)return h.default.createElement("a",a);var f=u(e,l);a.href=l.createHref(f),(n||null!=r&&!s(r))&&l.isActive(f,o)&&(n&&(a.className?a.className+=" "+n:a.className=n),r&&(a.style=c({},a.style,r)))}return h.default.createElement("a",c({},a,{onClick:this.handleClick}))}});n.default=_,e.exports=n.default},{"./ContextUtils":253,"./PropTypes":261,"create-react-class":6,invariant:60,"prop-types":213,react:321}],259:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(t){for(var e="",n=[],r=[],o=void 0,a=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)|\\\(|\\\)/g;o=s.exec(t);)o.index!==a&&(r.push(t.slice(a,o.index)),e+=i(t.slice(a,o.index))),o[1]?(e+="([^/]+)",n.push(o[1])):"**"===o[0]?(e+="(.*)",n.push("splat")):"*"===o[0]?(e+="(.*?)",n.push("splat")):"("===o[0]?e+="(?:":")"===o[0]?e+=")?":"\\("===o[0]?e+="\\(":"\\)"===o[0]&&(e+="\\)"),r.push(o[0]),a=s.lastIndex;return a!==t.length&&(r.push(t.slice(a,t.length)),e+=i(t.slice(a,t.length))),{pattern:t,regexpSource:e,paramNames:n,tokens:r}}function a(t){return d[t]||(d[t]=o(t)),d[t]}function s(t,e){"/"!==t.charAt(0)&&(t="/"+t);var n=a(t),r=n.regexpSource,i=n.paramNames,o=n.tokens;"/"!==t.charAt(t.length-1)&&(r+="/?"),"*"===o[o.length-1]&&(r+="$");var s=e.match(new RegExp("^"+r,"i"));if(null==s)return null;var u=s[0],c=e.substr(u.length);if(c){if("/"!==u.charAt(u.length-1))return null;c="/"+c}return{remainingPathname:c,paramNames:i,paramValues:s.slice(1).map(function(t){return t&&decodeURIComponent(t)})}}function u(t){return a(t).paramNames}function c(t,e){var n=s(t,e);if(!n)return null;var r=n.paramNames,i=n.paramValues,o={};return r.forEach(function(t,e){o[t]=i[e]}),o}function l(t,e){e=e||{};for(var n=a(t),r=n.tokens,i=0,o="",s=0,u=[],c=void 0,l=void 0,h=void 0,d=0,p=r.length;d<p;++d)if(c=r[d],"*"===c||"**"===c)h=Array.isArray(e.splat)?e.splat[s++]:e.splat,null!=h||i>0?void 0:(0,f.default)(!1),null!=h&&(o+=encodeURI(h));else if("("===c)u[i]="",i+=1;else if(")"===c){var m=u.pop();i-=1,i?u[i-1]+=m:o+=m}else if("\\("===c)o+="(";else if("\\)"===c)o+=")";else if(":"===c.charAt(0))if(l=c.substring(1),h=e[l],null!=h||i>0?void 0:(0,f.default)(!1),null==h){if(i){u[i-1]="";for(var g=r.indexOf(c),v=r.slice(g,r.length),y=-1,_=0;_<v.length;_++)if(")"==v[_]){y=_;break}y>0?void 0:(0,f.default)(!1),d=g+y-1}}else i?u[i-1]+=encodeURIComponent(h):o+=encodeURIComponent(h);else i?u[i-1]+=c:o+=c;return i<=0?void 0:(0,f.default)(!1),o.replace(/\/+/g,"/")}n.__esModule=!0,n.compilePattern=a,n.matchPattern=s,n.getParamNames=u,n.getParams=c,n.formatPattern=l;var h=t("invariant"),f=r(h),d=Object.create(null)},{invariant:60}],260:[function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.then}n.__esModule=!0,n.isPromise=r},{}],261:[function(t,e,n){"use strict";n.__esModule=!0,n.locationShape=n.routerShape=void 0;var r=t("prop-types");n.routerShape=(0,r.shape)({push:r.func.isRequired,replace:r.func.isRequired,go:r.func.isRequired,goBack:r.func.isRequired,goForward:r.func.isRequired,setRouteLeaveHook:r.func.isRequired,isActive:r.func.isRequired}),n.locationShape=(0,r.shape)({pathname:r.string.isRequired,search:r.string.isRequired,state:r.object,action:r.string.isRequired,key:r.string})},{"prop-types":213}],262:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("create-react-class"),o=r(i),a=t("prop-types"),s=t("invariant"),u=r(s),c=t("./RouteUtils"),l=t("./PatternUtils"),h=t("./InternalPropTypes"),f=(0,o.default)({displayName:"Redirect",statics:{createRouteFromReactElement:function(t){var e=(0,c.createRouteFromReactElement)(t);return e.from&&(e.path=e.from),e.onEnter=function(t,n){var r=t.location,i=t.params,o=void 0;if("/"===e.to.charAt(0))o=(0,l.formatPattern)(e.to,i);else if(e.to){var a=t.routes.indexOf(e),s=f.getRoutePattern(t.routes,a-1),u=s.replace(/\/*$/,"/")+e.to;o=(0,l.formatPattern)(u,i)}else o=r.pathname;n({pathname:o,query:e.query||r.query,state:e.state||r.state})},e},getRoutePattern:function(t,e){for(var n="",r=e;r>=0;r--){var i=t[r],o=i.path||"";if(n=o.replace(/\/*$/,"/")+n,0===o.indexOf("/"))break}return"/"+n}},propTypes:{path:a.string,from:a.string,to:a.string.isRequired,
query:a.object,state:a.object,onEnter:h.falsy,children:h.falsy},render:function(){(0,u.default)(!1)}});n.default=f,e.exports=n.default},{"./InternalPropTypes":257,"./PatternUtils":259,"./RouteUtils":264,"create-react-class":6,invariant:60,"prop-types":213}],263:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("create-react-class"),o=r(i),a=t("prop-types"),s=t("invariant"),u=r(s),c=t("./RouteUtils"),l=t("./InternalPropTypes"),h=(0,o.default)({displayName:"Route",statics:{createRouteFromReactElement:c.createRouteFromReactElement},propTypes:{path:a.string,component:l.component,components:l.components,getComponent:a.func,getComponents:a.func},render:function(){(0,u.default)(!1)}});n.default=h,e.exports=n.default},{"./InternalPropTypes":257,"./RouteUtils":264,"create-react-class":6,invariant:60,"prop-types":213}],264:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return null==t||f.default.isValidElement(t)}function o(t){return i(t)||Array.isArray(t)&&t.every(i)}function a(t,e){return l({},t,e)}function s(t){var e=t.type,n=a(e.defaultProps,t.props);if(n.children){var r=u(n.children,n);r.length&&(n.childRoutes=r),delete n.children}return n}function u(t,e){var n=[];return f.default.Children.forEach(t,function(t){if(f.default.isValidElement(t))if(t.type.createRouteFromReactElement){var r=t.type.createRouteFromReactElement(t,e);r&&n.push(r)}else n.push(s(t))}),n}function c(t){return o(t)?t=u(t):t&&!Array.isArray(t)&&(t=[t]),t}n.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.isReactChildren=o,n.createRouteFromReactElement=s,n.createRoutesFromReactChildren=u,n.createRoutes=c;var h=t("react"),f=r(h)},{react:321}],265:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}n.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=t("invariant"),s=r(a),u=t("react"),c=r(u),l=t("create-react-class"),h=r(l),f=t("prop-types"),d=t("./createTransitionManager"),p=r(d),m=t("./InternalPropTypes"),g=t("./RouterContext"),v=r(g),y=t("./RouteUtils"),_=t("./RouterUtils"),b=t("./routerWarning"),x=(r(b),{history:f.object,children:m.routes,routes:m.routes,render:f.func,createElement:f.func,onError:f.func,onUpdate:f.func,matchContext:f.object}),w=(0,h.default)({displayName:"Router",propTypes:x,getDefaultProps:function(){return{render:function(t){return c.default.createElement(v.default,t)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(t){if(!this.props.onError)throw t;this.props.onError.call(this,t)},createRouterObject:function(t){var e=this.props.matchContext;if(e)return e.router;var n=this.props.history;return(0,_.createRouterObject)(n,this.transitionManager,t)},createTransitionManager:function(){var t=this.props.matchContext;if(t)return t.transitionManager;var e=this.props.history,n=this.props,r=n.routes,i=n.children;return e.getCurrentLocation?void 0:(0,s.default)(!1),(0,p.default)(e,(0,y.createRoutes)(r||i))},componentWillMount:function(){var t=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(e,n){e?t.handleError(e):((0,_.assignRouterState)(t.router,n),t.setState(n,t.props.onUpdate))})},componentWillReceiveProps:function(t){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function t(){var e=this.state,n=e.location,r=e.routes,a=e.params,s=e.components,u=this.props,c=u.createElement,t=u.render,l=i(u,["createElement","render"]);return null==n?null:(Object.keys(x).forEach(function(t){return delete l[t]}),t(o({},l,{router:this.router,location:n,routes:r,params:a,components:s,createElement:c})))}});n.default=w,e.exports=n.default},{"./InternalPropTypes":257,"./RouteUtils":264,"./RouterContext":266,"./RouterUtils":267,"./createTransitionManager":274,"./routerWarning":282,"create-react-class":6,invariant:60,"prop-types":213,react:321}],266:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t("invariant"),s=r(a),u=t("react"),c=r(u),l=t("create-react-class"),h=r(l),f=t("prop-types"),d=t("./getRouteParams"),p=r(d),m=t("./ContextUtils"),g=t("./RouteUtils"),v=(0,h.default)({displayName:"RouterContext",mixins:[(0,m.ContextProvider)("router")],propTypes:{router:f.object.isRequired,location:f.object.isRequired,routes:f.array.isRequired,params:f.object.isRequired,components:f.array.isRequired,createElement:f.func.isRequired},getDefaultProps:function(){return{createElement:c.default.createElement}},childContextTypes:{router:f.object.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(t,e){return null==t?null:this.props.createElement(t,e)},render:function(){var t=this,e=this.props,n=e.location,r=e.routes,a=e.params,u=e.components,l=e.router,h=null;return u&&(h=u.reduceRight(function(e,s,u){if(null==s)return e;var c=r[u],h=(0,p.default)(c,a),f={location:n,params:a,route:c,router:l,routeParams:h,routes:r};if((0,g.isReactChildren)(e))f.children=e;else if(e)for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(f[d]=e[d]);if("object"===("undefined"==typeof s?"undefined":o(s))){var m={};for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(m[v]=t.createElement(s[v],i({key:v},f)));return m}return t.createElement(s,f)},h)),null===h||h===!1||c.default.isValidElement(h)?void 0:(0,s.default)(!1),h}});n.default=v,e.exports=n.default},{"./ContextUtils":253,"./RouteUtils":264,"./getRouteParams":276,"create-react-class":6,invariant:60,"prop-types":213,react:321}],267:[function(t,e,n){"use strict";function r(t,e,n){var r=o({},t,{setRouteLeaveHook:e.listenBeforeLeavingRoute,isActive:e.isActive});return i(r,n)}function i(t,e){var n=e.location,r=e.params,i=e.routes;return t.location=n,t.params=r,t.routes=i,t}n.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.createRouterObject=r,n.assignRouterState=i},{}],268:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){function t(t,e,n,r){var i=t.length<n,o=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(t.apply(e,r),i){var a=r[r.length-1];a()}};return r.add(o),o}function e(e){return e.reduce(function(e,n){return n.onEnter&&e.push(t(n.onEnter,n,3,c)),e},[])}function n(e){return e.reduce(function(e,n){return n.onChange&&e.push(t(n.onChange,n,4,l)),e},[])}function r(t,e,n){function r(t){i=t}if(!t)return void n();var i=void 0;(0,o.loopAsync)(t,function(t,n,o){e(t,r,function(t){t||i?o(t,i):n()})},n)}function i(t,n,i){c.clear();var o=e(t);return r(o.length,function(t,e,r){var i=function(){c.has(o[t])&&(r.apply(void 0,arguments),c.remove(o[t]))};o[t](n,e,i)},i)}function s(t,e,i,o){l.clear();var a=n(t);return r(a.length,function(t,n,r){var o=function(){l.has(a[t])&&(r.apply(void 0,arguments),l.remove(a[t]))};a[t](e,i,n,o)},o)}function u(t,e){for(var n=0,r=t.length;n<r;++n)t[n].onLeave&&t[n].onLeave.call(t[n],e)}var c=new a,l=new a;return{runEnterHooks:i,runChangeHooks:s,runLeaveHooks:u}}n.__esModule=!0,n.default=i;var o=t("./AsyncUtils"),a=function t(){var e=this;r(this,t),this.hooks=[],this.add=function(t){return e.hooks.push(t)},this.remove=function(t){return e.hooks=e.hooks.filter(function(e){return e!==t})},this.has=function(t){return e.hooks.indexOf(t)!==-1},this.clear=function(){return e.hooks=[]}};e.exports=n.default},{"./AsyncUtils":252}],269:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("react"),a=r(o),s=t("./RouterContext"),u=r(s),c=t("./routerWarning");r(c);n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(t){return t.renderRouterContext}).filter(Boolean),s=e.map(function(t){return t.renderRouteComponent}).filter(Boolean),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.createElement;return function(e,n){return s.reduceRight(function(t,e){return e(t,n)},t(e,n))}};return function(t){return r.reduceRight(function(e,n){return n(e,t)},a.default.createElement(u.default,i({},t,{createElement:c(t.createElement)})))}},e.exports=n.default},{"./RouterContext":266,"./routerWarning":282,react:321}],270:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("history/lib/createBrowserHistory"),o=r(i),a=t("./createRouterHistory"),s=r(a);n.default=(0,s.default)(o.default),e.exports=n.default},{"./createRouterHistory":273,"history/lib/createBrowserHistory":295}],271:[function(t,e,n){"use strict";function r(t,e,n){if(!t.path)return!1;var r=(0,o.getParamNames)(t.path);return r.some(function(t){return e.params[t]!==n.params[t]})}function i(t,e){var n=t&&t.routes,i=e.routes,o=void 0,a=void 0,s=void 0;if(n){var u=!1;o=n.filter(function(n){if(u)return!0;var o=i.indexOf(n)===-1||r(n,t,e);return o&&(u=!0),o}),o.reverse(),s=[],a=[],i.forEach(function(t){var e=n.indexOf(t)===-1,r=o.indexOf(t)!==-1;e||r?s.push(t):a.push(t)})}else o=[],a=[],s=i;return{leaveRoutes:o,changeRoutes:a,enterRoutes:s}}n.__esModule=!0;var o=t("./PatternUtils");n.default=i,e.exports=n.default},{"./PatternUtils":259}],272:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=(0,l.default)(t),n=function(){return e},r=(0,a.default)((0,u.default)(n))(t);return r}n.__esModule=!0,n.default=i;var o=t("history/lib/useQueries"),a=r(o),s=t("history/lib/useBasename"),u=r(s),c=t("history/lib/createMemoryHistory"),l=r(c);e.exports=n.default},{"history/lib/createMemoryHistory":298,"history/lib/useBasename":300,"history/lib/useQueries":301}],273:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=void 0;return s&&(e=(0,a.default)(t)()),e}n.__esModule=!0,n.default=i;var o=t("./useRouterHistory"),a=r(o),s=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=n.default},{"./useRouterHistory":283}],274:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}function o(t,e){function n(e,n){return e=t.createLocation(e),(0,d.default)(e,n,_.location,_.routes,_.params)}function r(t,n){M&&M.location===t?o(M,n):(0,v.default)(e,t,function(e,r){e?n(e):r?o(a({},r,{location:t}),n):n()})}function o(t,e){function n(n,i){return n||i?r(n,i):void(0,m.default)(t,function(n,r){n?e(n):e(null,null,_=a({},t,{components:r}))})}function r(t,n){t?e(t):e(null,n)}var i=(0,c.default)(_,t),o=i.leaveRoutes,s=i.changeRoutes,u=i.enterRoutes;E(o,_),o.filter(function(t){return u.indexOf(t)===-1}).forEach(p),w(s,_,t,function(e,i){return e||i?r(e,i):void x(u,t,n)})}function s(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.__id__||e&&(t.__id__=T++)}function u(t){return t.map(function(t){return S[s(t)]}).filter(function(t){return t})}function l(t,n){(0,v.default)(e,t,function(e,r){if(null==r)return void n();M=a({},r,{location:t});for(var i=u((0,c.default)(_,M).leaveRoutes),o=void 0,s=0,l=i.length;null==o&&s<l;++s)o=i[s](t);n(o)})}function f(){if(_.routes){for(var t=u(_.routes),e=void 0,n=0,r=t.length;"string"!=typeof e&&n<r;++n)e=t[n]();return e}}function p(t){var e=s(t);e&&(delete S[e],i(S)||(P&&(P(),P=null),C&&(C(),C=null)))}function g(e,n){var r=!i(S),o=s(e,!0);return S[o]=n,r&&(P=t.listenBefore(l),t.listenBeforeUnload&&(C=t.listenBeforeUnload(f))),function(){p(e)}}function y(e){function n(n){_.location===n?e(null,_):r(n,function(n,r,i){n?e(n):r?t.replace(r):i&&e(null,i)})}var i=t.listen(n);return _.location?e(null,_):n(t.getCurrentLocation()),i}var _={},b=(0,h.default)(),x=b.runEnterHooks,w=b.runChangeHooks,E=b.runLeaveHooks,M=void 0,T=1,S=Object.create(null),P=void 0,C=void 0;return{isActive:n,match:r,listenBeforeLeavingRoute:g,listen:y}}n.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=o;var s=t("./routerWarning"),u=(r(s),t("./computeChangedRoutes")),c=r(u),l=t("./TransitionUtils"),h=r(l),f=t("./isActive"),d=r(f),p=t("./getComponents"),m=r(p),g=t("./matchRoutes"),v=r(g);e.exports=n.default},{"./TransitionUtils":268,"./computeChangedRoutes":271,"./getComponents":275,"./isActive":279,"./matchRoutes":281,"./routerWarning":282}],275:[function(t,e,n){"use strict";function r(t,e,n){if(e.component||e.components)return void n(null,e.component||e.components);var r=e.getComponent||e.getComponents;if(r){var i=r.call(e,t,n);(0,a.isPromise)(i)&&i.then(function(t){return n(null,t)},n)}else n()}function i(t,e){(0,o.mapAsync)(t.routes,function(e,n,i){r(t,e,i)},e)}n.__esModule=!0;var o=t("./AsyncUtils"),a=t("./PromiseUtils");n.default=i,e.exports=n.default},{"./AsyncUtils":252,"./PromiseUtils":260}],276:[function(t,e,n){"use strict";function r(t,e){var n={};return t.path?((0,i.getParamNames)(t.path).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}),n):n}n.__esModule=!0;var i=t("./PatternUtils");n.default=r,e.exports=n.default},{"./PatternUtils":259}],277:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("history/lib/createHashHistory"),o=r(i),a=t("./createRouterHistory"),s=r(a);n.default=(0,s.default)(o.default),e.exports=n.default},{"./createRouterHistory":273,"history/lib/createHashHistory":296}],278:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.createMemoryHistory=n.hashHistory=n.browserHistory=n.applyRouterMiddleware=n.formatPattern=n.useRouterHistory=n.match=n.routerShape=n.locationShape=n.RouterContext=n.createRoutes=n.Route=n.Redirect=n.IndexRoute=n.IndexRedirect=n.withRouter=n.IndexLink=n.Link=n.Router=void 0;var i=t("./RouteUtils");Object.defineProperty(n,"createRoutes",{enumerable:!0,get:function(){return i.createRoutes}});var o=t("./PropTypes");Object.defineProperty(n,"locationShape",{enumerable:!0,get:function(){return o.locationShape}}),Object.defineProperty(n,"routerShape",{enumerable:!0,get:function(){return o.routerShape}});var a=t("./PatternUtils");Object.defineProperty(n,"formatPattern",{enumerable:!0,get:function(){return a.formatPattern}});var s=t("./Router"),u=r(s),c=t("./Link"),l=r(c),h=t("./IndexLink"),f=r(h),d=t("./withRouter"),p=r(d),m=t("./IndexRedirect"),g=r(m),v=t("./IndexRoute"),y=r(v),_=t("./Redirect"),b=r(_),x=t("./Route"),w=r(x),E=t("./RouterContext"),M=r(E),T=t("./match"),S=r(T),P=t("./useRouterHistory"),C=r(P),A=t("./applyRouterMiddleware"),L=r(A),O=t("./browserHistory"),R=r(O),k=t("./hashHistory"),N=r(k),I=t("./createMemoryHistory"),D=r(I);n.Router=u.default,n.Link=l.default,n.IndexLink=f.default,n.withRouter=p.default,n.IndexRedirect=g.default,n.IndexRoute=y.default,n.Redirect=b.default,n.Route=w.default,n.RouterContext=M.default,n.match=S.default,n.useRouterHistory=C.default,n.applyRouterMiddleware=L.default,n.browserHistory=R.default,n.hashHistory=N.default,n.createMemoryHistory=D.default},{"./IndexLink":254,"./IndexRedirect":255,"./IndexRoute":256,"./Link":258,"./PatternUtils":259,"./PropTypes":261,"./Redirect":262,"./Route":263,"./RouteUtils":264,"./Router":265,"./RouterContext":266,"./applyRouterMiddleware":269,"./browserHistory":270,"./createMemoryHistory":272,"./hashHistory":277,"./match":280,"./useRouterHistory":283,"./withRouter":284}],279:[function(t,e,n){"use strict";function r(t,e){if(t==e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return r(t,e[n])});if("object"===("undefined"==typeof t?"undefined":u(t))){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))if(void 0===t[n]){if(void 0!==e[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(e,n))return!1;if(!r(t[n],e[n]))return!1}return!0}return String(t)===String(e)}function i(t,e){return"/"!==e.charAt(0)&&(e="/"+e),"/"!==t.charAt(t.length-1)&&(t+="/"),"/"!==e.charAt(e.length-1)&&(e+="/"),e===t}function o(t,e,n){for(var r=t,i=[],o=[],a=0,s=e.length;a<s;++a){var u=e[a],l=u.path||"";if("/"===l.charAt(0)&&(r=t,i=[],o=[]),null!==r&&l){var h=(0,c.matchPattern)(l,r);if(h?(r=h.remainingPathname,i=[].concat(i,h.paramNames),o=[].concat(o,h.paramValues)):r=null,""===r)return i.every(function(t,e){return String(o[e])===String(n[t])})}}return!1}function a(t,e){return null==e?null==t:null==t||r(t,e)}function s(t,e,n,r,s){var u=t.pathname,c=t.query;return null!=n&&("/"!==u.charAt(0)&&(u="/"+u),!!(i(u,n.pathname)||!e&&o(u,r,s))&&a(c,n.query))}n.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=s;var c=t("./PatternUtils");e.exports=n.default},{"./PatternUtils":259}],280:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){var n=t.history,r=t.routes,o=t.location,u=i(t,["history","routes","location"]);n||o?void 0:(0,c.default)(!1),n=n?n:(0,h.default)(u);var l=(0,d.default)(n,(0,p.createRoutes)(r));o=o?n.createLocation(o):n.getCurrentLocation(),l.match(o,function(t,r,i){var o=void 0;if(i){var u=(0,m.createRouterObject)(n,l,i);o=a({},i,{router:u,matchContext:{transitionManager:l,router:u}})}e(t,r&&n.createLocation(r,s.REPLACE),o)})}n.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=t("history/lib/Actions"),u=t("invariant"),c=r(u),l=t("./createMemoryHistory"),h=r(l),f=t("./createTransitionManager"),d=r(f),p=t("./RouteUtils"),m=t("./RouterUtils");n.default=o,e.exports=n.default},{"./RouteUtils":264,"./RouterUtils":267,"./createMemoryHistory":272,"./createTransitionManager":274,"history/lib/Actions":285,invariant:60}],281:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){if(t.childRoutes)return[null,t.childRoutes];if(!t.getChildRoutes)return[];var o=!0,a=void 0,u={location:e,params:s(n,r)},c=t.getChildRoutes(u,function(t,e){return e=!t&&(0,m.createRoutes)(e),o?void(a=[t,e]):void i(t,e)});return(0,f.isPromise)(c)&&c.then(function(t){return i(null,(0,m.createRoutes)(t))},i),o=!1,a}function o(t,e,n,r,a){if(t.indexRoute)a(null,t.indexRoute);else if(t.getIndexRoute){var u={location:e,params:s(n,r)},c=t.getIndexRoute(u,function(t,e){a(t,!t&&(0,m.createRoutes)(e)[0])});(0,f.isPromise)(c)&&c.then(function(t){return a(null,(0,m.createRoutes)(t)[0])},a)}else if(t.childRoutes||t.getChildRoutes){var l=function(t,i){if(t)return void a(t);var s=i.filter(function(t){return!t.path});(0,h.loopAsync)(s.length,function(t,i,a){o(s[t],e,n,r,function(e,n){if(e||n){var r=[s[t]].concat(Array.isArray(n)?n:[n]);a(e,r)}else i()})},function(t,e){a(null,e)})},d=i(t,e,n,r,l);d&&l.apply(void 0,d)}else a()}function a(t,e,n){return e.reduce(function(t,e,r){var i=n&&n[r];return Array.isArray(t[e])?t[e].push(i):e in t?t[e]=[t[e],i]:t[e]=i,t},t)}function s(t,e){return a({},t,e)}function u(t,e,n,r,a,u){var l=t.path||"";if("/"===l.charAt(0)&&(n=e.pathname,r=[],a=[]),null!==n&&l){try{var h=(0,d.matchPattern)(l,n);h?(n=h.remainingPathname,r=[].concat(r,h.paramNames),a=[].concat(a,h.paramValues)):n=null}catch(t){u(t)}if(""===n){var f={routes:[t],params:s(r,a)};return void o(t,e,r,a,function(t,e){if(t)u(t);else{if(Array.isArray(e)){var n;(n=f.routes).push.apply(n,e)}else e&&f.routes.push(e);u(null,f)}})}}if(null!=n||t.childRoutes){var p=function(i,o){i?u(i):o?c(o,e,function(e,n){e?u(e):n?(n.routes.unshift(t),u(null,n)):u()},n,r,a):u()},m=i(t,e,r,a,p);m&&p.apply(void 0,m)}else u()}function c(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===r&&("/"!==e.pathname.charAt(0)&&(e=l({},e,{pathname:"/"+e.pathname})),r=e.pathname),(0,h.loopAsync)(t.length,function(n,a,s){u(t[n],e,r,i,o,function(t,e){t||e?s(t,e):a()})},n)}n.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=c;var h=t("./AsyncUtils"),f=t("./PromiseUtils"),d=t("./PatternUtils"),p=t("./routerWarning"),m=(r(p),t("./RouteUtils"));e.exports=n.default},{"./AsyncUtils":252,"./PatternUtils":259,"./PromiseUtils":260,"./RouteUtils":264,"./routerWarning":282}],282:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(e.indexOf("deprecated")!==-1){if(u[e])return;u[e]=!0}e="[react-router] "+e;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.default.apply(void 0,[t,e].concat(r))}function o(){u={}}n.__esModule=!0,n.default=i,n._resetWarned=o;var a=t("warning"),s=r(a),u={}},{warning:330}],283:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(e){var n=(0,a.default)((0,u.default)(t))(e);return n}}n.__esModule=!0,n.default=i;var o=t("history/lib/useQueries"),a=r(o),s=t("history/lib/useBasename"),u=r(s);e.exports=n.default},{"history/lib/useBasename":300,"history/lib/useQueries":301}],284:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.displayName||t.name||"Component"}function o(t,e){var n=e&&e.withRef,r=(0,f.default)({displayName:"WithRouter",mixins:[(0,m.ContextSubscriber)("router")],contextTypes:{router:g.routerShape},propTypes:{router:g.routerShape},getWrappedInstance:function(){return n?void 0:(0,u.default)(!1),this.wrappedInstance},render:function(){var e=this,r=this.props.router||this.context.router;if(!r)return l.default.createElement(t,this.props);var i=r.params,o=r.location,s=r.routes,u=a({},this.props,{router:r,params:i,location:o,routes:s});return n&&(u.ref=function(t){e.wrappedInstance=t}),l.default.createElement(t,u)}});return r.displayName="withRouter("+i(t)+")",r.WrappedComponent=t,(0,p.default)(r,t)}n.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=o;var s=t("invariant"),u=r(s),c=t("react"),l=r(c),h=t("create-react-class"),f=r(h),d=t("hoist-non-react-statics"),p=r(d),m=t("./ContextUtils"),g=t("./PropTypes");e.exports=n.default},{"./ContextUtils":253,"./PropTypes":261,"create-react-class":6,"hoist-non-react-statics":302,invariant:60,react:321}],285:[function(t,e,n){"use strict";n.__esModule=!0;n.PUSH="PUSH",n.REPLACE="REPLACE",n.POP="POP"},{}],286:[function(t,e,n){"use strict";n.__esModule=!0;n.loopAsync=function(t,e,n){var r=0,i=!1,o=!1,a=!1,s=void 0,u=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i=!0,o?void(s=e):void n.apply(void 0,e)},c=function c(){if(!i&&(a=!0,!o)){for(o=!0;!i&&r<t&&a;)a=!1,e(r++,c,u);return o=!1,i?void n.apply(void 0,s):void(r>=t&&a&&(i=!0,n()))}};c()}},{}],287:[function(t,e,n){"use strict";n.__esModule=!0,n.go=n.replaceLocation=n.pushLocation=n.startListener=n.getUserConfirmation=n.getCurrentLocation=void 0;var r=t("./LocationUtils"),i=t("./DOMUtils"),o=t("./DOMStateStorage"),a=t("./PathUtils"),s=t("./ExecutionEnvironment"),u="popstate",c="hashchange",l=s.canUseDOM&&!(0,i.supportsPopstateOnHashchange)(),h=function(t){var e=t&&t.key;return(0,r.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:e?(0,o.readState)(e):void 0},void 0,e)},f=n.getCurrentLocation=function(){var t=void 0;try{t=window.history.state||{}}catch(e){t={}}return h(t)},d=(n.getUserConfirmation=function(t,e){return e(window.confirm(t))},n.startListener=function(t){var e=function(e){(0,i.isExtraneousPopstateEvent)(e)||t(h(e.state))};(0,i.addEventListener)(window,u,e);var n=function(){return t(f())};return l&&(0,i.addEventListener)(window,c,n),function(){(0,i.removeEventListener)(window,u,e),l&&(0,i.removeEventListener)(window,c,n)}},function(t,e){var n=t.state,r=t.key;void 0!==n&&(0,o.saveState)(r,n),e({key:r},(0,a.createPath)(t))});n.pushLocation=function(t){return d(t,function(t,e){return window.history.pushState(t,null,e)})},n.replaceLocation=function(t){return d(t,function(t,e){return window.history.replaceState(t,null,e)})},n.go=function(t){t&&window.history.go(t)}},{"./DOMStateStorage":288,"./DOMUtils":289,"./ExecutionEnvironment":290,"./LocationUtils":292,"./PathUtils":293}],288:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.readState=n.saveState=void 0;var i=t("warning"),o=(r(i),{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),a={SecurityError:!0},s="@@History/",u=function(t){return s+t};n.saveState=function(t,e){if(window.sessionStorage)try{null==e?window.sessionStorage.removeItem(u(t)):window.sessionStorage.setItem(u(t),JSON.stringify(e))}catch(t){if(a[t.name])return;if(o[t.name]&&0===window.sessionStorage.length)return;throw t}},n.readState=function(t){var e=void 0;try{e=window.sessionStorage.getItem(u(t))}catch(t){if(a[t.name])return}if(e)try{return JSON.parse(e)}catch(t){}}},{warning:330}],289:[function(t,e,n){"use strict";n.__esModule=!0;n.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},n.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},n.supportsHistory=function(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")===-1&&t.indexOf("Android 4.0")===-1||t.indexOf("Mobile Safari")===-1||t.indexOf("Chrome")!==-1||t.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)},n.supportsGoWithoutReloadUsingHash=function(){return window.navigator.userAgent.indexOf("Firefox")===-1},n.supportsPopstateOnHashchange=function(){return window.navigator.userAgent.indexOf("Trident")===-1},n.isExtraneousPopstateEvent=function(t){return void 0===t.state&&navigator.userAgent.indexOf("CriOS")===-1}},{}],290:[function(t,e,n){"use strict";n.__esModule=!0;n.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],291:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.replaceLocation=n.pushLocation=n.startListener=n.getCurrentLocation=n.go=n.getUserConfirmation=void 0;var i=t("./BrowserProtocol");Object.defineProperty(n,"getUserConfirmation",{enumerable:!0,get:function(){return i.getUserConfirmation}}),Object.defineProperty(n,"go",{enumerable:!0,get:function(){return i.go}});var o=t("warning"),a=(r(o),t("./LocationUtils")),s=t("./DOMUtils"),u=t("./DOMStateStorage"),c=t("./PathUtils"),l="hashchange",h=function(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)},f=function(t){return window.location.hash=t},d=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},p=n.getCurrentLocation=function(t,e){var n=t.decodePath(h()),r=(0,c.getQueryStringValueFromPath)(n,e),i=void 0;r&&(n=(0,c.stripQueryStringValueFromPath)(n,e),i=(0,u.readState)(r));var o=(0,c.parsePath)(n);return o.state=i,(0,a.createLocation)(o,void 0,r)},m=void 0,g=(n.startListener=function(t,e,n){var r=function(){var r=h(),i=e.encodePath(r);if(r!==i)d(i);else{var o=p(e,n);if(m&&o.key&&m.key===o.key)return;m=o,t(o)}},i=h(),o=e.encodePath(i);return i!==o&&d(o),(0,s.addEventListener)(window,l,r),function(){return(0,s.removeEventListener)(window,l,r)}},function(t,e,n,r){var i=t.state,o=t.key,a=e.encodePath((0,c.createPath)(t));void 0!==i&&(a=(0,c.addQueryStringValueToPath)(a,n,o),(0,u.saveState)(o,i)),m=t,r(a)});n.pushLocation=function(t,e,n){return g(t,e,n,function(t){h()!==t&&f(t)})},n.replaceLocation=function(t,e,n){return g(t,e,n,function(t){h()!==t&&d(t)})}},{"./BrowserProtocol":287,"./DOMStateStorage":288,"./DOMUtils":289,"./LocationUtils":292,"./PathUtils":293,warning:330}],292:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.locationsAreEqual=n.statesAreEqual=n.createLocation=n.createQuery=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=t("invariant"),s=r(a),u=t("warning"),c=(r(u),t("./PathUtils")),l=t("./Actions"),h=(n.createQuery=function(t){return o(Object.create(null),t)},n.createLocation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.POP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="string"==typeof t?(0,c.parsePath)(t):t,i=r.pathname||"/",o=r.search||"",a=r.hash||"",s=r.state;return{pathname:i,search:o,hash:a,state:s,action:e,key:n}},function(t){return"[object Date]"===Object.prototype.toString.call(t)}),f=n.statesAreEqual=function t(e,n){if(e===n)return!0;var r="undefined"==typeof e?"undefined":i(e),o="undefined"==typeof n?"undefined":i(n);if(r!==o)return!1;if("function"===r?(0,s.default)(!1):void 0,"object"===r){if(h(e)&&h(n)?(0,s.default)(!1):void 0,!Array.isArray(e)){var a=Object.keys(e),u=Object.keys(n);return a.length===u.length&&a.every(function(r){return t(e[r],n[r])})}return Array.isArray(n)&&e.length===n.length&&e.every(function(e,r){return t(e,n[r])})}return!1};n.locationsAreEqual=function(t,e){return t.key===e.key&&t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&f(t.state,e.state)}},{"./Actions":285,"./PathUtils":293,invariant:60,warning:330}],293:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.createPath=n.parsePath=n.getQueryStringValueFromPath=n.stripQueryStringValueFromPath=n.addQueryStringValueToPath=void 0;var i=t("warning"),o=(r(i),n.addQueryStringValueToPath=function(t,e,n){var r=a(t),i=r.pathname,o=r.search,u=r.hash;return s({pathname:i,search:o+(o.indexOf("?")===-1?"?":"&")+e+"="+n,hash:u})},n.stripQueryStringValueFromPath=function(t,e){var n=a(t),r=n.pathname,i=n.search,o=n.hash;return s({pathname:r,search:i.replace(new RegExp("([?&])"+e+"=[a-zA-Z0-9]+(&?)"),function(t,e,n){return"?"===e?e:n}),hash:o})},n.getQueryStringValueFromPath=function(t,e){var n=a(t),r=n.search,i=r.match(new RegExp("[?&]"+e+"=([a-zA-Z0-9]+)"));return i&&i[1]},function(t){var e=t.match(/^(https?:)?\/\/[^\/]*/);return null==e?t:t.substring(e[0].length)}),a=n.parsePath=function(t){
var e=o(t),n="",r="",i=e.indexOf("#");i!==-1&&(r=e.substring(i),e=e.substring(0,i));var a=e.indexOf("?");return a!==-1&&(n=e.substring(a),e=e.substring(0,a)),""===e&&(e="/"),{pathname:e,search:n,hash:r}},s=n.createPath=function(t){if(null==t||"string"==typeof t)return t;var e=t.basename,n=t.pathname,r=t.search,i=t.hash,o=(e||"")+n;return r&&"?"!==r&&(o+=r),i&&(o+=i),o}},{warning:330}],294:[function(t,e,n){"use strict";n.__esModule=!0,n.replaceLocation=n.pushLocation=n.getCurrentLocation=n.go=n.getUserConfirmation=void 0;var r=t("./BrowserProtocol");Object.defineProperty(n,"getUserConfirmation",{enumerable:!0,get:function(){return r.getUserConfirmation}}),Object.defineProperty(n,"go",{enumerable:!0,get:function(){return r.go}});var i=t("./LocationUtils"),o=t("./PathUtils");n.getCurrentLocation=function(){return(0,i.createLocation)(window.location)},n.pushLocation=function(t){return window.location.href=(0,o.createPath)(t),!1},n.replaceLocation=function(t){return window.location.replace((0,o.createPath)(t)),!1}},{"./BrowserProtocol":287,"./LocationUtils":292,"./PathUtils":293}],295:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=t("invariant"),s=i(a),u=t("./ExecutionEnvironment"),c=t("./BrowserProtocol"),l=r(c),h=t("./RefreshProtocol"),f=r(h),d=t("./DOMUtils"),p=t("./createHistory"),m=i(p),g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.canUseDOM?void 0:(0,s.default)(!1);var e=t.forceRefresh||!(0,d.supportsHistory)(),n=e?f:l,r=n.getUserConfirmation,i=n.getCurrentLocation,a=n.pushLocation,c=n.replaceLocation,h=n.go,p=(0,m.default)(o({getUserConfirmation:r},t,{getCurrentLocation:i,pushLocation:a,replaceLocation:c,go:h})),g=0,v=void 0,y=function(t,e){1===++g&&(v=l.startListener(p.transitionTo));var n=e?p.listenBefore(t):p.listen(t);return function(){n(),0===--g&&v()}},_=function(t){return y(t,!0)},b=function(t){return y(t,!1)};return o({},p,{listenBefore:_,listen:b})};n.default=g},{"./BrowserProtocol":287,"./DOMUtils":289,"./ExecutionEnvironment":290,"./RefreshProtocol":294,"./createHistory":297,invariant:60}],296:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=t("warning"),s=(i(a),t("invariant")),u=i(s),c=t("./ExecutionEnvironment"),l=t("./DOMUtils"),h=t("./HashProtocol"),f=r(h),d=t("./createHistory"),p=i(d),m="_k",g=function(t){return"/"===t.charAt(0)?t:"/"+t},v={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!"+t},decodePath:function(t){return"!"===t.charAt(0)?t.substring(1):t}},noslash:{encodePath:function(t){return"/"===t.charAt(0)?t.substring(1):t},decodePath:g},slash:{encodePath:g,decodePath:g}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.canUseDOM?void 0:(0,u.default)(!1);var e=t.queryKey,n=t.hashType;"string"!=typeof e&&(e=m),null==n&&(n="slash"),n in v||(n="slash");var r=v[n],i=f.getUserConfirmation,a=function(){return f.getCurrentLocation(r,e)},s=function(t){return f.pushLocation(t,r,e)},h=function(t){return f.replaceLocation(t,r,e)},d=(0,p.default)(o({getUserConfirmation:i},t,{getCurrentLocation:a,pushLocation:s,replaceLocation:h,go:f.go})),g=0,y=void 0,_=function(t,n){1===++g&&(y=f.startListener(d.transitionTo,r,e));var i=n?d.listenBefore(t):d.listen(t);return function(){i(),0===--g&&y()}},b=function(t){return _(t,!0)},x=function(t){return _(t,!1)},w=((0,l.supportsGoWithoutReloadUsingHash)(),function(t){d.go(t)}),E=function(t){return"#"+r.encodePath(d.createHref(t))};return o({},d,{listenBefore:b,listen:x,go:w,createHref:E})};n.default=y},{"./DOMUtils":289,"./ExecutionEnvironment":290,"./HashProtocol":291,"./createHistory":297,invariant:60,warning:330}],297:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("./AsyncUtils"),o=t("./PathUtils"),a=t("./runTransitionHook"),s=r(a),u=t("./Actions"),c=t("./LocationUtils"),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getCurrentLocation,n=t.getUserConfirmation,r=t.pushLocation,a=t.replaceLocation,l=t.go,h=t.keyLength,f=void 0,d=void 0,p=[],m=[],g=[],v=function(){return d&&d.action===u.POP?g.indexOf(d.key):f?g.indexOf(f.key):-1},y=function(t){var e=v();f=t,f.action===u.PUSH?g=[].concat(g.slice(0,e+1),[f.key]):f.action===u.REPLACE&&(g[e]=f.key),m.forEach(function(t){return t(f)})},_=function(t){return p.push(t),function(){return p=p.filter(function(e){return e!==t})}},b=function(t){return m.push(t),function(){return m=m.filter(function(e){return e!==t})}},x=function(t,e){(0,i.loopAsync)(p.length,function(e,n,r){(0,s.default)(p[e],t,function(t){return null!=t?r(t):n()})},function(t){n&&"string"==typeof t?n(t,function(t){return e(t!==!1)}):e(t!==!1)})},w=function(t){f&&(0,c.locationsAreEqual)(f,t)||d&&(0,c.locationsAreEqual)(d,t)||(d=t,x(t,function(e){if(d===t)if(d=null,e){if(t.action===u.PUSH){var n=(0,o.createPath)(f),i=(0,o.createPath)(t);i===n&&(0,c.statesAreEqual)(f.state,t.state)&&(t.action=u.REPLACE)}t.action===u.POP?y(t):t.action===u.PUSH?r(t)!==!1&&y(t):t.action===u.REPLACE&&a(t)!==!1&&y(t)}else if(f&&t.action===u.POP){var s=g.indexOf(f.key),h=g.indexOf(t.key);s!==-1&&h!==-1&&l(s-h)}}))},E=function(t){return w(A(t,u.PUSH))},M=function(t){return w(A(t,u.REPLACE))},T=function(){return l(-1)},S=function(){return l(1)},P=function(){return Math.random().toString(36).substr(2,h||6)},C=function(t){return(0,o.createPath)(t)},A=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P();return(0,c.createLocation)(t,e,n)};return{getCurrentLocation:e,listenBefore:_,listen:b,transitionTo:w,push:E,replace:M,go:l,goBack:T,goForward:S,createKey:P,createPath:o.createPath,createHref:C,createLocation:A}};n.default=l},{"./Actions":285,"./AsyncUtils":286,"./LocationUtils":292,"./PathUtils":293,"./runTransitionHook":299}],298:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("warning"),a=(r(o),t("invariant")),s=r(a),u=t("./LocationUtils"),c=t("./PathUtils"),l=t("./createHistory"),h=r(l),f=t("./Actions"),d=function(t){return t.filter(function(t){return t.state}).reduce(function(t,e){return t[e.key]=e.state,t},{})},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t)?t={entries:t}:"string"==typeof t&&(t={entries:[t]});var e=function(){var t=m[g],e=(0,c.createPath)(t),n=void 0,r=void 0;t.key&&(n=t.key,r=_(n));var o=(0,c.parsePath)(e);return(0,u.createLocation)(i({},o,{state:r}),void 0,n)},n=function(t){var e=g+t;return e>=0&&e<m.length},r=function(t){if(t&&n(t)){g+=t;var r=e();l.transitionTo(i({},r,{action:f.POP}))}},o=function(t){g+=1,g<m.length&&m.splice(g),m.push(t),y(t.key,t.state)},a=function(t){m[g]=t,y(t.key,t.state)},l=(0,h.default)(i({},t,{getCurrentLocation:e,pushLocation:o,replaceLocation:a,go:r})),p=t,m=p.entries,g=p.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(t){return(0,u.createLocation)(t)}),null==g?g=m.length-1:g>=0&&g<m.length?void 0:(0,s.default)(!1);var v=d(m),y=function(t,e){return v[t]=e},_=function(t){return v[t]};return i({},l,{canGo:n})};n.default=p},{"./Actions":285,"./LocationUtils":292,"./PathUtils":293,"./createHistory":297,invariant:60,warning:330}],299:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=t("warning"),o=(r(i),function(t,e,n){var r=t(e,n);t.length<2&&n(r)});n.default=o},{warning:330}],300:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("./runTransitionHook"),a=r(o),s=t("./PathUtils"),u=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t(e),r=e.basename,o=function(t){return t?(r&&null==t.basename&&(0===t.pathname.toLowerCase().indexOf(r.toLowerCase())?(t.pathname=t.pathname.substring(r.length),t.basename=r,""===t.pathname&&(t.pathname="/")):t.basename=""),t):t},u=function(t){if(!r)return t;var e="string"==typeof t?(0,s.parsePath)(t):t,n=e.pathname,o="/"===r.slice(-1)?r:r+"/",a="/"===n.charAt(0)?n.slice(1):n,u=o+a;return i({},e,{pathname:u})},c=function(){return o(n.getCurrentLocation())},l=function(t){return n.listenBefore(function(e,n){return(0,a.default)(t,o(e),n)})},h=function(t){return n.listen(function(e){return t(o(e))})},f=function(t){return n.push(u(t))},d=function(t){return n.replace(u(t))},p=function(t){return n.createPath(u(t))},m=function(t){return n.createHref(u(t))},g=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return o(n.createLocation.apply(n,[u(t)].concat(r)))};return i({},n,{getCurrentLocation:c,listenBefore:l,listen:h,push:f,replace:d,createPath:p,createHref:m,createLocation:g})}};n.default=u},{"./PathUtils":293,"./runTransitionHook":299}],301:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("query-string"),a=t("./runTransitionHook"),s=r(a),u=t("./LocationUtils"),c=t("./PathUtils"),l=function(t){return(0,o.stringify)(t).replace(/%20/g,"+")},h=o.parse,f=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t(e),r=e.stringifyQuery,o=e.parseQueryString;"function"!=typeof r&&(r=l),"function"!=typeof o&&(o=h);var a=function(t){return t?(null==t.query&&(t.query=o(t.search.substring(1))),t):t},f=function(t,e){if(null==e)return t;var n="string"==typeof t?(0,c.parsePath)(t):t,o=r(e),a=o?"?"+o:"";return i({},n,{search:a})},d=function(){return a(n.getCurrentLocation())},p=function(t){return n.listenBefore(function(e,n){return(0,s.default)(t,a(e),n)})},m=function(t){return n.listen(function(e){return t(a(e))})},g=function(t){return n.push(f(t,t.query))},v=function(t){return n.replace(f(t,t.query))},y=function(t){return n.createPath(f(t,t.query))},_=function(t){return n.createHref(f(t,t.query))},b=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=n.createLocation.apply(n,[f(t,t.query)].concat(r));return t.query&&(o.query=(0,u.createQuery)(t.query)),a(o)};return i({},n,{getCurrentLocation:d,listenBefore:p,listen:m,push:g,replace:v,createPath:y,createHref:_,createLocation:b})}};n.default=f},{"./LocationUtils":292,"./PathUtils":293,"./runTransitionHook":299,"query-string":303}],302:[function(t,e,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(t,e,n){if("string"!=typeof e){var a=Object.getOwnPropertyNames(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e)));for(var s=0;s<a.length;++s)if(!(r[a[s]]||i[a[s]]||n&&n[a[s]]))try{t[a[s]]=e[a[s]]}catch(t){}}return t}},{}],303:[function(t,e,n){"use strict";function r(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[o(e,t),"[",r,"]"].join(""):[o(e,t),"[",o(r,t),"]=",o(n,t)].join("")};case"bracket":return function(e,n){return null===n?o(e,t):[o(e,t),"[]=",o(n,t)].join("")};default:return function(e,n){return null===n?o(e,t):[o(e,t),"=",o(n,t)].join("")}}}function i(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){return e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),void(r[t][e[1]]=n)):void(r[t]=n)};case"bracket":return function(t,n,r){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===r[t]?void(r[t]=[n]):void(r[t]=[].concat(r[t],n)):void(r[t]=n)};default:return function(t,e,n){return void 0===n[t]?void(n[t]=e):void(n[t]=[].concat(n[t],e))}}}function o(t,e){return e.encode?e.strict?s(t):encodeURIComponent(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var s=t("strict-uri-encode"),u=t("object-assign");n.extract=function(t){return t.split("?")[1]||""},n.parse=function(t,e){e=u({arrayFormat:"none"},e);var n=i(e),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(i),o,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=a(n):t[e]=n,t},Object.create(null))):r},n.stringify=function(t,e){var n={encode:!0,strict:!0,arrayFormat:"none"};e=u(n,e);var i=r(e);return t?Object.keys(t).sort().map(function(n){var r=t[n];if(void 0===r)return"";if(null===r)return o(n,e);if(Array.isArray(r)){var a=[];return r.slice().forEach(function(t){void 0!==t&&a.push(i(n,t,a.length))}),a.join("&")}return o(n,e)+"="+o(r,e)}).filter(function(t){return t.length>0}).join("&"):""}},{"object-assign":205,"strict-uri-encode":304}],304:[function(t,e,n){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},{}],305:[function(t,e,n){!function(e,r){if("function"==typeof define&&define.amd)define(["exports","react","prop-types"],r);else if("undefined"!=typeof n)r(n,t("react"),t("prop-types"));else{var i={exports:{}};r(i.exports,e.react,e.propTypes),e.index=i.exports}}(this,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(e),u=r(n),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={originalX:0,originalY:0},r.onTouchStart=r.onTouchStart.bind(r),r.onTouchMove=r.onTouchMove.bind(r),r.onTouchEnd=r.onTouchEnd.bind(r),r.getModifiedProps=r.getModifiedProps.bind(r),r.getDelta=r.getDelta.bind(r),r}return a(e,t),l(e,[{key:"onTouchStart",value:function(t){var e=t.changedTouches[0],n=this.getCurrentPosition(e);this.setState({originalX:n.x,originalY:n.y})}},{key:"onTouchMove",value:function(t){var e=t.changedTouches[0],n=this.getDelta(e),r=this.getCurrentPosition(e);this.props.onSwiping&&this.props.onSwiping(t,this.state.originalX,this.state.originalY,r.x,r.y,n.x,n.y)}},{key:"onTouchEnd",value:function(t){var e=t.changedTouches[0],n=this.getDelta(e),r=this.getCurrentPosition(e);Math.abs(n.x)>this.props.threshold&&(n.x>0&&this.props.onSwipedRight&&this.props.onSwipedRight(t,this.state.originalX,r.x),n.x<0&&this.props.onSwipedLeft&&this.props.onSwipedLeft(t,this.state.originalX,r.x)),Math.abs(n.y)>this.props.threshold&&(n.y>0&&this.props.onSwipedDown&&this.props.onSwipedDown(t,this.state.originalY,r.y),n.y<0&&this.props.onSwipedUp&&this.props.onSwipedUp(t,this.state.originalY,r.y)),this.props.onSwiped&&this.props.onSwiped(t,this.state.originalX,this.state.originalY,r.x,r.y,n.x,n.y),this.setState({originalX:0,originalY:0})}},{key:"getCurrentPosition",value:function(t){return{x:parseInt(t.screenX),y:parseInt(t.screenY)}}},{key:"getDelta",value:function(t){return{x:parseInt(t.screenX)-this.state.originalX,y:parseInt(t.screenY)-this.state.originalY}}},{key:"getModifiedProps",value:function(){var t=c({},this.props,{onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove});return delete t.children,delete t.onSwiping,delete t.onSwiped,delete t.onSwipedUp,delete t.onSwipedDown,delete t.onSwipedLeft,delete t.onSwipedRight,delete t.nodeName,delete t.threshold,t}},{key:"render",value:function(){var t=this.getModifiedProps();return s.default.createElement(this.props.nodeName,t,this.props.children)}}]),e}(s.default.Component);h.defaultProps={threshold:10,nodeName:"div"},h.propTypes={children:u.default.element.isRequired,onSwiping:u.default.func,onSwiped:u.default.func,onSwipedUp:u.default.func,onSwipedDown:u.default.func,onSwipedLeft:u.default.func,onSwipedRight:u.default.func,nodeName:u.default.string,threshold:u.default.number},t.default=h})},{"prop-types":314,react:318}],306:[function(t,e,n){e.exports=t("./dist/index")},{"./dist/index":305}],307:[function(t,e,n){arguments[4][223][0].apply(n,arguments)},{dup:223}],308:[function(t,e,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],309:[function(t,e,n){arguments[4][229][0].apply(n,arguments)},{dup:229}],310:[function(t,e,n){arguments[4][235][0].apply(n,arguments)},{"./emptyFunction":307,dup:235}],311:[function(t,e,n){arguments[4][236][0].apply(n,arguments)},{"./lib/ReactPropTypesSecret":315,dup:236,"fbjs/lib/invariant":309,"fbjs/lib/warning":310}],312:[function(t,e,n){arguments[4][237][0].apply(n,arguments)},{"./lib/ReactPropTypesSecret":315,dup:237,"fbjs/lib/emptyFunction":307,"fbjs/lib/invariant":309}],313:[function(t,e,n){arguments[4][238][0].apply(n,arguments)},{"./checkPropTypes":311,"./lib/ReactPropTypesSecret":315,dup:238,"fbjs/lib/emptyFunction":307,"fbjs/lib/invariant":309,"fbjs/lib/warning":310,"object-assign":205}],314:[function(t,e,n){arguments[4][239][0].apply(n,arguments)},{"./factoryWithThrowingShims":312,"./factoryWithTypeCheckers":313,dup:239}],315:[function(t,e,n){arguments[4][240][0].apply(n,arguments)},{dup:240}],316:[function(t,e,n){"use strict"},{"fbjs/lib/emptyFunction":307,"fbjs/lib/emptyObject":308,"fbjs/lib/invariant":309,"fbjs/lib/warning":310,"object-assign":205,"prop-types/checkPropTypes":311}],317:[function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);y(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||R}function o(){}function a(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||R}function s(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)I.call(e,r)&&!D.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:w,type:t,key:o,ref:a,props:i,_owner:N.current}}function u(t){return"object"==typeof t&&null!==t&&t.$$typeof===w}function c(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function l(t,e,n,r){if(z.length){var i=z.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>z.length&&z.push(t)}function f(t,e,n,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case w:case E:a=!0}}if(a)return n(i,t,""===e?"."+d(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+d(o,s);a+=f(o,u,n,i)}else if(null===t||"undefined"==typeof t?u=null:(u=O&&t[O]||t["@@iterator"],u="function"==typeof u?u:null),"function"==typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+d(o,s++),a+=f(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function d(t,e){return"object"==typeof t&&null!==t&&null!=t.key?c(t.key):e.toString(36)}function p(t,e){t.func.call(t.context,e,t.count++)}function m(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?g(t,r,n,b.thatReturnsArgument):null!=t&&(u(t)&&(e=i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(j,"$&/")+"/")+n,t={$$typeof:w,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),r.push(t))}function g(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(j,"$&/")+"/"),e=l(e,o,r,i),null==t||f(t,"",m,e),h(e)}var v=t("object-assign"),y=t("fbjs/lib/invariant"),_=t("fbjs/lib/emptyObject"),b=t("fbjs/lib/emptyFunction"),x="function"==typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,E=x?Symbol.for("react.portal"):60106,M=x?Symbol.for("react.fragment"):60107,T=x?Symbol.for("react.strict_mode"):60108,S=x?Symbol.for("react.profiler"):60114,P=x?Symbol.for("react.provider"):60109,C=x?Symbol.for("react.context"):60110,A=x?Symbol.for("react.async_mode"):60111,L=x?Symbol.for("react.forward_ref"):60112;x&&Symbol.for("react.timeout");var O="function"==typeof Symbol&&Symbol.iterator,R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?r("85"):void 0,this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=i.prototype;var k=a.prototype=new o;k.constructor=a,v(k,i.prototype),k.isPureReactComponent=!0;var N={current:null},I=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0},j=/\/+/g,z=[],U={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return g(t,r,null,e,n),r},forEach:function(t,e,n){return null==t?t:(e=l(null,null,e,n),null==t||f(t,"",p,e),void h(e))},count:function(t){return null==t?0:f(t,"",b.thatReturnsNull,null)},toArray:function(t){var e=[];return g(t,e,null,b.thatReturnsArgument),e},only:function(t){return u(t)?void 0:r("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:C,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_currentValue2:t,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},t.Provider={$$typeof:P,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:L,render:t}},Fragment:M,StrictMode:T,unstable_AsyncMode:A,unstable_Profiler:S,createElement:s,cloneElement:function(t,e,n){null===t||void 0===t?r("267",t):void 0;var i=void 0,o=v({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,u=N.current),void 0!==e.key&&(a=""+e.key);var c=void 0;t.type&&t.type.defaultProps&&(c=t.type.defaultProps);for(i in e)I.call(e,i)&&!D.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(i=arguments.length-2,1===i)o.children=n;else if(1<i){c=Array(i);for(var l=0;l<i;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:w,type:t.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(t){var e=s.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:v}},B={default:U},F=B&&U||B;e.exports=F.default?F.default:F},{"fbjs/lib/emptyFunction":307,"fbjs/lib/emptyObject":308,"fbjs/lib/invariant":309,"object-assign":205}],318:[function(t,e,n){"use strict";e.exports=t("./cjs/react.production.min.js")},{"./cjs/react.development.js":316,"./cjs/react.production.min.js":317}],319:[function(t,e,n){"use strict"},{"fbjs/lib/emptyFunction":322,"fbjs/lib/emptyObject":323,"fbjs/lib/invariant":324,"fbjs/lib/warning":325,"object-assign":205,"prop-types/checkPropTypes":326}],320:[function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),e.name="Invariant Violation",e.framesToPop=1,e}function i(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||b}function o(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||b}function a(){}function s(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||b}function u(t,e,n,r,i,o,a){return{$$typeof:S,type:t,key:e,ref:n,props:a,_owner:o}}function c(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function l(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function f(t,e,n,i){var o=typeof t;if("undefined"!==o&&"boolean"!==o||(t=null),null===t||"string"===o||"number"===o||"object"===o&&t.$$typeof===A)return n(i,t,""===e?"."+d(t,0):e),1;var a=0;if(e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+d(o,s);a+=f(o,u,n,i)}else if(u=C&&t[C]||t["@@iterator"],"function"==typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+d(o,s++),a+=f(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function d(t,e){return"object"==typeof t&&null!==t&&null!=t.key?c(t.key):e.toString(36)}function p(t,e){t.func.call(t.context,e,t.count++)}function m(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?g(t,r,n,_.thatReturnsArgument):null!=t&&(u.isValidElement(t)&&(t=u.cloneAndReplaceKey(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(L,"$&/")+"/")+n)),r.push(t))}function g(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(L,"$&/")+"/"),e=l(e,o,r,i),null==t||f(t,"",m,e),h(e)}var v=t("object-assign"),y=t("fbjs/lib/emptyObject");t("fbjs/lib/invariant");var _=t("fbjs/lib/emptyFunction"),b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?r("85"):void 0,this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},a.prototype=i.prototype;var x=o.prototype=new a;x.constructor=o,v(x,i.prototype),x.isPureReactComponent=!0;var w=s.prototype=new a;w.constructor=s,v(w,i.prototype),w.unstable_isAsyncReactComponent=!0,w.render=function(){return this.props.children};var E={Component:i,PureComponent:o,AsyncComponent:s},M={current:null},T=Object.prototype.hasOwnProperty,S="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,P={key:!0,ref:!0,__self:!0,__source:!0};u.createElement=function(t,e,n){var r,i={},o=null,a=null,s=null,c=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),s=void 0===e.__self?null:e.__self,c=void 0===e.__source?null:e.__source,e)T.call(e,r)&&!P.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var h=Array(l),f=0;f<l;f++)h[f]=arguments[f+2];i.children=h}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===i[r]&&(i[r]=l[r]);return u(t,o,a,s,c,M.current,i)},u.createFactory=function(t){var e=u.createElement.bind(null,t);return e.type=t,e},u.cloneAndReplaceKey=function(t,e){return u(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},u.cloneElement=function(t,e,n){var r=v({},t.props),i=t.key,o=t.ref,a=t._self,s=t._source,c=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,c=M.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)T.call(e,h)&&!P.hasOwnProperty(h)&&(r[h]=void 0===e[h]&&void 0!==l?l[h]:e[h])}var h=arguments.length-2;if(1===h)r.children=n;else if(1<h){l=Array(h);for(var f=0;f<h;f++)l[f]=arguments[f+2];r.children=l}return u(t.type,i,o,a,s,c,r)},u.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===S};var C="function"==typeof Symbol&&Symbol.iterator,A="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,L=/\/+/g,O=[],R={forEach:function(t,e,n){return null==t?t:(e=l(null,null,e,n),null==t||f(t,"",p,e),void h(e))},map:function(t,e,n){if(null==t)return t;var r=[];return g(t,r,null,e,n),r},count:function(t){return null==t?0:f(t,"",_.thatReturnsNull,null)},toArray:function(t){var e=[];return g(t,e,null,_.thatReturnsArgument),e}};e.exports={Children:{map:R.map,forEach:R.forEach,count:R.count,toArray:R.toArray,only:function(t){return u.isValidElement(t)?void 0:r("143"),t}},Component:E.Component,PureComponent:E.PureComponent,unstable_AsyncComponent:E.AsyncComponent,createElement:u.createElement,cloneElement:u.cloneElement,isValidElement:u.isValidElement,createFactory:u.createFactory,version:"16.0.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:M,assign:v}}},{"fbjs/lib/emptyFunction":322,"fbjs/lib/emptyObject":323,"fbjs/lib/invariant":324,"object-assign":205}],321:[function(t,e,n){arguments[4][318][0].apply(n,arguments)},{"./cjs/react.development.js":319,"./cjs/react.production.min.js":320,dup:318}],322:[function(t,e,n){arguments[4][223][0].apply(n,arguments)},{dup:223}],323:[function(t,e,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],324:[function(t,e,n){arguments[4][229][0].apply(n,arguments)},{dup:229}],325:[function(t,e,n){arguments[4][235][0].apply(n,arguments)},{"./emptyFunction":322,dup:235}],326:[function(t,e,n){arguments[4][236][0].apply(n,arguments)},{"./lib/ReactPropTypesSecret":327,dup:236,"fbjs/lib/invariant":324,"fbjs/lib/warning":325}],327:[function(t,e,n){arguments[4][240][0].apply(n,arguments)},{dup:240}],328:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.THREE={})}(this,function(t){"use strict";function e(){}function n(t,e){this.x=t||0,this.y=e||0}function r(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function i(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function o(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");
}function s(t,e,r,i,o,u,c,l,h,f){Object.defineProperty(this,"id",{value:Pu++}),this.uuid=Su.generateUUID(),this.name="",this.image=void 0!==t?t:s.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:s.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ss,this.wrapT=void 0!==i?i:ss,this.magFilter=void 0!==o?o:fs,this.minFilter=void 0!==u?u:ps,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:As,this.type=void 0!==l?l:ms,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:gu,this.version=0,this.onUpdate=null}function u(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function c(t,e,n){this.width=t,this.height=e,this.scissor=new u(0,0,t,e),this.scissorTest=!1,this.viewport=new u(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=fs),this.texture=new s((void 0),(void 0),n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function l(t,e,n){c.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function h(t,e,n,r,i,o,a,u,c,l,h,f){s.call(this,null,o,a,u,c,l,r,i,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:cs,this.minFilter=void 0!==l?l:cs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function f(t,e){this.min=void 0!==t?t:new o((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new o((-(1/0)),(-(1/0)),(-(1/0)))}function d(t,e){this.center=void 0!==t?t:new o,this.radius=void 0!==e?e:0}function p(t,e){this.normal=void 0!==t?t:new o(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,n,r,i,o){this.planes=[void 0!==t?t:new p,void 0!==e?e:new p,void 0!==n?n:new p,void 0!==r?r:new p,void 0!==i?i:new p,void 0!==o?o:new p]}function g(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function v(t){function e(e,n){var r=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=t.FLOAT;return r instanceof Float32Array?a=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=t.UNSIGNED_SHORT:r instanceof Int16Array?a=t.SHORT:r instanceof Uint32Array?a=t.UNSIGNED_INT:r instanceof Int32Array?a=t.INT:r instanceof Int8Array?a=t.BYTE:r instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function n(e,n,r){var i=n.array,o=n.updateRange;t.bindBuffer(r,e),n.dynamic===!1?t.bufferData(r,i,t.STATIC_DRAW):o.count===-1?t.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),a.get(t)}function i(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=a.get(e);n&&(t.deleteBuffer(n.buffer),a.delete(e))}function o(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var i=a.get(t);void 0===i?a.set(t,e(t,r)):i.version<t.version&&(n(i.buffer,t,r),i.version=t.version)}var a=new WeakMap;return{get:r,remove:i,update:o}}function y(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||y.DefaultOrder}function _(){this.mask=1}function b(){function t(){u.setFromEuler(s,!1)}function e(){s.setFromQuaternion(u,void 0,!1)}Object.defineProperty(this,"id",{value:zl++}),this.uuid=Su.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=b.DefaultUp.clone();var n=new o,s=new y,u=new i,c=new o(1,1,1);s.onChange(t),u.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:s},quaternion:{enumerable:!0,value:u},scale:{enumerable:!0,value:c},modelViewMatrix:{value:new r},normalMatrix:{value:new a}}),this.matrix=new r,this.matrixWorld=new r,this.matrixAutoUpdate=b.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function x(){b.call(this),this.type="Camera",this.matrixWorldInverse=new r,this.projectionMatrix=new r}function w(t,e,n,r,i,o){x.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function E(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new o,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new g,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function M(){Object.defineProperty(this,"id",{value:Ul+=2}),this.uuid=Su.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function T(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function S(t,e,n){T.call(this,new Int8Array(t),e,n)}function P(t,e,n){T.call(this,new Uint8Array(t),e,n)}function C(t,e,n){T.call(this,new Uint8ClampedArray(t),e,n)}function A(t,e,n){T.call(this,new Int16Array(t),e,n)}function L(t,e,n){T.call(this,new Uint16Array(t),e,n)}function O(t,e,n){T.call(this,new Int32Array(t),e,n)}function R(t,e,n){T.call(this,new Uint32Array(t),e,n)}function k(t,e,n){T.call(this,new Float32Array(t),e,n)}function N(t,e,n){T.call(this,new Float64Array(t),e,n)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function D(t){if(0===t.length)return-(1/0);for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}function j(){Object.defineProperty(this,"id",{value:Bl+=2}),this.uuid=Su.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function z(t,e,n,r,i,o){M.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new U(t,e,n,r,i,o)),this.mergeVertices()}function U(t,e,n,r,i,a){function s(t,e,n,r,i,a,s,m,g,v,y){var _,b,x=a/g,w=s/v,E=a/2,M=s/2,T=m/2,S=g+1,P=v+1,C=0,A=0,L=new o;for(b=0;b<P;b++){var O=b*w-M;for(_=0;_<S;_++){var R=_*x-E;L[t]=R*r,L[e]=O*i,L[n]=T,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=m>0?1:-1,h.push(L.x,L.y,L.z),f.push(_/g),f.push(1-b/v),C+=1}}for(b=0;b<v;b++)for(_=0;_<g;_++){var k=d+_+S*b,N=d+_+S*(b+1),I=d+(_+1)+S*(b+1),D=d+(_+1)+S*b;c.push(k,N,D),c.push(N,I,D),A+=6}u.addGroup(p,A,y),p+=A,d+=C}j.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var u=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var c=[],l=[],h=[],f=[],d=0,p=0;s("z","y","x",-1,-1,n,e,t,a,i,0),s("z","y","x",1,-1,n,e,-t,a,i,1),s("x","z","y",1,1,t,n,e,r,a,2),s("x","z","y",1,-1,t,n,-e,r,a,3),s("x","y","z",1,-1,t,e,n,r,i,4),s("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new k(l,3)),this.addAttribute("normal",new k(h,3)),this.addAttribute("uv",new k(f,2))}function B(t,e,n,r){M.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new F(t,e,n,r)),this.mergeVertices()}function F(t,e,n,r){j.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},t=t||1,e=e||1;var i,o,a=t/2,s=e/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,h=c+1,f=t/u,d=e/c,p=[],m=[],g=[],v=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<l;i++){var _=i*f-a;m.push(_,-y,0),g.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var b=i+l*o,x=i+l*(o+1),w=i+1+l*(o+1),E=i+1+l*o;p.push(b,x,E),p.push(x,w,E)}this.setIndex(p),this.addAttribute("position",new k(m,3)),this.addAttribute("normal",new k(g,3)),this.addAttribute("uv",new k(v,2))}function H(){Object.defineProperty(this,"id",{value:Fl++}),this.uuid=Su.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ma,this.side=aa,this.flatShading=!1,this.vertexColors=ha,this.opacity=1,this.transparent=!1,this.blendSrc=Aa,this.blendDst=La,this.blendEquation=ba,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ua,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function G(t){H.call(this),this.type="MeshBasicMaterial",this.color=new g(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Va,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function V(t){H.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function W(t,e){this.origin=void 0!==t?t:new o,this.direction=void 0!==e?e:new o}function q(t,e){this.start=void 0!==t?t:new o,this.end=void 0!==e?e:new o}function Y(t,e,n){this.a=void 0!==t?t:new o,this.b=void 0!==e?e:new o,this.c=void 0!==n?n:new o}function Z(t,e){b.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new G({color:16777215*Math.random()}),this.drawMode=du,this.updateMorphTargets()}function X(t,e,n,r){function i(e,r,i,h){var f=r.background;null===f?o(c,l):f&&f.isColor&&(o(f,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&f.isCubeTexture?(void 0===u&&(u=new Z(new U(1,1,1),new V({uniforms:jl.cube.uniforms,vertexShader:jl.cube.vertexShader,fragmentShader:jl.cube.fragmentShader,side:sa,depthTest:!0,depthWrite:!1,fog:!1})),u.geometry.removeAttribute("normal"),u.geometry.removeAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(u.geometry)),u.material.uniforms.tCube.value=f,e.push(u,u.geometry,u.material,0,null)):f&&f.isTexture&&(void 0===a&&(a=new w((-1),1,1,(-1),0,1),s=new Z(new F(2,2),new G({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=f,t.renderBufferDirect(a,null,s.geometry,s.material,s,null))}function o(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}var a,s,u,c=new g(0),l=0;return{getClearColor:function(){return c},setClearColor:function(t,e){c.set(t),l=void 0!==e?e:1,o(c,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,o(c,l)},render:i}}function K(t,e,n){function r(t){a=t}function i(e,r){t.drawArrays(a,e,r),n.update(r,a)}function o(t,r,i){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=t.attributes.position;s.isInterleavedBufferAttribute?(i=s.data.count,o.drawArraysInstancedANGLE(a,0,i,t.maxInstancedCount)):o.drawArraysInstancedANGLE(a,r,i,t.maxInstancedCount),n.update(i,a,t.maxInstancedCount)}var a;this.setMode=r,this.render=i,this.renderInstances=o}function J(t,e,n){function r(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=n.logarithmicDepthBuffer===!0,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=l>0,y=!!e.get("OES_texture_float"),_=v&&y;return{getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:_}}function Q(){function t(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function e(t,e,r,i){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=l.value,i!==!0||null===a){var s=r+4*o,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===a||a.length<s)&&(a=new Float32Array(s));for(var f=0,d=r;f!==o;++f,d+=4)u.copy(t[f]).applyMatrix4(h,c),u.normal.toArray(a,d),a[d+3]=u.constant}l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,s=!1,u=new p,c=new a,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==i||o;return o=n,r=e(t,a,0),i=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,a,u,c,h,f){if(!o||null===n||0===n.length||s&&!u)s?e(null):t();else{var d=s?0:i,p=4*d,m=h.clippingState||null;l.value=m,m=e(n,c,p,f);for(var g=0;g!==p;++g)m[g]=r[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function $(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function tt(t,e,n){function r(t){var i=t.target,o=s[i.id];null!==o.index&&e.remove(o.index);for(var a in o.attributes)e.remove(o.attributes[a]);i.removeEventListener("dispose",r),delete s[i.id];var c=u[i.id];c&&(e.remove(c),delete u[i.id]),c=u[o.id],c&&(e.remove(c),delete u[o.id]),n.memory.geometries--}function i(t,e){var i=s[e.id];return i?i:(e.addEventListener("dispose",r),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new j).setFromObject(t)),i=e._bufferGeometry),s[e.id]=i,n.memory.geometries++,i)}function o(n){var r=n.index,i=n.attributes;null!==r&&e.update(r,t.ELEMENT_ARRAY_BUFFER);for(var o in i)e.update(i[o],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,c=s.length;u<c;u++)e.update(s[u],t.ARRAY_BUFFER)}function a(n){var r=u[n.id];if(r)return r;var i=[],o=n.index,a=n.attributes;if(null!==o)for(var s=o.array,c=0,l=s.length;c<l;c+=3){var h=s[c+0],f=s[c+1],d=s[c+2];i.push(h,f,f,d,d,h)}else for(var s=a.position.array,c=0,l=s.length/3-1;c<l;c+=3){var h=c+0,f=c+1,d=c+2;i.push(h,f,f,d,d,h)}return r=new(D(i)>65535?R:L)(i,1),e.update(r,t.ELEMENT_ARRAY_BUFFER),u[n.id]=r,r}var s={},u={};return{get:i,update:o,getWireframeAttribute:a}}function et(t,e,n){function r(t){s=t}function i(t){u=t.type,c=t.bytesPerElement}function o(e,r){t.drawElements(s,r,u,e*c),n.update(r,s)}function a(t,r,i){var o=e.get("ANGLE_instanced_arrays");return null===o?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(o.drawElementsInstancedANGLE(s,i,u,r*c,t.maxInstancedCount),void n.update(i,s,t.maxInstancedCount))}var s,u,c;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a}function nt(t){function e(e,n,r){switch(r=r||1,i.calls++,n){case t.TRIANGLES:i.triangles+=r*(e/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:i.triangles+=r*(e-2);break;case t.LINES:i.lines+=r*(e/2);break;case t.LINE_STRIP:i.lines+=r*(e-1);break;case t.LINE_LOOP:i.lines+=r*e;break;case t.POINTS:i.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}var r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:r,render:i,programs:null,autoReset:!0,reset:n,update:e}}function rt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function it(t){function e(e,i,o,a){var s=e.morphTargetInfluences,u=s.length,c=n[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];n[i.id]=c}for(var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal,l=0;l<u;l++){var d=c[l];0!==d[1]&&(h&&i.removeAttribute("morphTarget"+l),f&&i.removeAttribute("morphNormal"+l))}for(var l=0;l<u;l++){var d=c[l];d[0]=l,d[1]=s[l]}c.sort(rt);for(var l=0;l<8;l++){var d=c[l];if(d){var p=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+l,h[p]),f&&i.addAttribute("morphNormal"+l,f[p]),r[l]=m;continue}}r[l]=0}a.getUniforms().setValue(t,"morphTargetInfluences",r)}var n={},r=new Float32Array(8);return{update:e}}function ot(t,e){function n(n){var r=e.render.frame,o=n.geometry,a=t.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),t.update(a),i[a.id]=r),a}function r(){i={}}var i={};return{update:n,dispose:r}}function at(t,e,n,r,i,o,a,u,c,l){t=void 0!==t?t:[],e=void 0!==e?e:$a,s.call(this,t,e,n,r,i,o,a,u,c,l),this.flipY=!1}function st(){this.seq=[],this.map={}}function ut(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Vl[i];if(void 0===o&&(o=new Float32Array(i),Vl[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function ct(t,e){var n=Wl[e];void 0===n&&(n=new Int32Array(e),Wl[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function lt(t,e){t.uniform1f(this.addr,e)}function ht(t,e){t.uniform1i(this.addr,e)}function ft(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function dt(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function pt(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function mt(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function gt(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(Yl.set(e.elements),t.uniformMatrix3fv(this.addr,!1,Yl))}function vt(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(ql.set(e.elements),t.uniformMatrix4fv(this.addr,!1,ql))}function yt(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTexture2D(e||Hl,r)}function _t(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTextureCube(e||Gl,r)}function bt(t,e){t.uniform2iv(this.addr,e)}function xt(t,e){t.uniform3iv(this.addr,e)}function wt(t,e){t.uniform4iv(this.addr,e)}function Et(t){switch(t){case 5126:return lt;case 35664:return ft;case 35665:return dt;case 35666:return pt;case 35674:return mt;case 35675:return gt;case 35676:return vt;case 35678:case 36198:return yt;case 35680:return _t;case 5124:case 35670:return ht;case 35667:case 35671:return bt;case 35668:case 35672:return xt;case 35669:case 35673:return wt}}function Mt(t,e){t.uniform1fv(this.addr,e)}function Tt(t,e){t.uniform1iv(this.addr,e)}function St(t,e){t.uniform2fv(this.addr,ut(e,this.size,2))}function Pt(t,e){t.uniform3fv(this.addr,ut(e,this.size,3))}function Ct(t,e){t.uniform4fv(this.addr,ut(e,this.size,4))}function At(t,e){t.uniformMatrix2fv(this.addr,!1,ut(e,this.size,4))}function Lt(t,e){t.uniformMatrix3fv(this.addr,!1,ut(e,this.size,9))}function Ot(t,e){t.uniformMatrix4fv(this.addr,!1,ut(e,this.size,16))}function Rt(t,e,n){var r=e.length,i=ct(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(e[o]||Hl,i[o])}function kt(t,e,n){var r=e.length,i=ct(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(e[o]||Gl,i[o])}function Nt(t){switch(t){case 5126:return Mt;case 35664:return St;case 35665:return Pt;case 35666:return Ct;case 35674:return At;case 35675:return Lt;case 35676:return Ot;case 35678:return Rt;case 35680:return kt;case 5124:case 35670:return Tt;case 35667:case 35671:return bt;case 35668:case 35672:return xt;case 35669:case 35673:return wt}}function It(t,e,n){this.id=t,this.addr=n,this.setValue=Et(e.type)}function Dt(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=Nt(e.type)}function jt(t){this.id=t,st.call(this)}function zt(t,e){t.seq.push(e),t.map[e.id]=e}function Ut(t,e,n){var r=t.name,i=r.length;for(Zl.lastIndex=0;;){var o=Zl.exec(r),a=Zl.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s=0|s),void 0===c||"["===c&&a+2===i){zt(n,void 0===c?new It(s,t,e):new Dt(s,t,e));break}var l=n.map,h=l[s];void 0===h&&(h=new jt(s),zt(n,h)),n=h}}function Bt(t,e,n){st.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i),a=t.getUniformLocation(e,o.name);Ut(o,a,this)}}function Ft(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Ht(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),Ft(n)),r}function Gt(t){switch(t){case gu:return["Linear","( value )"];case vu:return["sRGB","( value )"];case _u:return["RGBE","( value )"];case xu:return["RGBM","( value, 7.0 )"];case wu:return["RGBM","( value, 16.0 )"];case Eu:return["RGBD","( value, 256.0 )"];case yu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Vt(t,e){var n=Gt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Wt(t,e){var n=Gt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qt(t,e){var n;switch(e){case Za:n="Linear";break;case Xa:n="Reinhard";break;case Ka:n="Uncharted2";break;case Ja:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yt(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Kt).join("\n")}function Zt(t){var e=[];for(var n in t){var r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join("\n")}function Xt(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function Kt(t){return""!==t}function Jt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Qt(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function $t(t){function e(t,e){var n=kl[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return $t(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(n,e)}function te(t){function e(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function ee(t,e,n,r,i,o){var a=t.context,s=r.defines,u=i.vertexShader,c=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===ia?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===oa&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case $a:case ts:h="ENVMAP_TYPE_CUBE";break;case is:case os:h="ENVMAP_TYPE_CUBE_UV";break;case es:case ns:h="ENVMAP_TYPE_EQUIREC";break;case rs:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case ts:case ns:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case Va:d="ENVMAP_BLENDING_MULTIPLY";break;case Wa:d="ENVMAP_BLENDING_MIX";break;case qa:d="ENVMAP_BLENDING_ADD"}}var p,m,g=t.gammaFactor>0?t.gammaFactor:1,v=Yt(r.extensions,o,e),y=Zt(s),_=a.createProgram();r.isRawShaderMaterial?(p=[y].filter(Kt).join("\n"),p.length>0&&(p+="\n"),m=[v,y].filter(Kt).join("\n"),m.length>0&&(m+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kt).join("\n"),m=[v,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+g,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ya?"#define TONE_MAPPING":"",o.toneMapping!==Ya?kl.tonemapping_pars_fragment:"",o.toneMapping!==Ya?qt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?kl.encodings_pars_fragment:"",o.mapEncoding?Vt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Vt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Vt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Wt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Kt).join("\n")),u=$t(u),u=Jt(u,o),u=Qt(u,o),c=$t(c),c=Jt(c,o),c=Qt(c,o),u=te(u),c=te(c);var b=p+u,x=m+c,w=Ht(a,a.VERTEX_SHADER,b),E=Ht(a,a.FRAGMENT_SHADER,x);
a.attachShader(_,w),a.attachShader(_,E),void 0!==r.index0AttributeName?a.bindAttribLocation(_,0,r.index0AttributeName):o.morphTargets===!0&&a.bindAttribLocation(_,0,"position"),a.linkProgram(_);var M=a.getProgramInfoLog(_).trim(),T=a.getShaderInfoLog(w).trim(),S=a.getShaderInfoLog(E).trim(),P=!0,C=!0;a.getProgramParameter(_,a.LINK_STATUS)===!1?(P=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(_,a.VALIDATE_STATUS),"gl.getProgramInfoLog",M,T,S)):""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==T&&""!==S||(C=!1),C&&(this.diagnostics={runnable:P,material:r,programLog:M,vertexShader:{log:T,prefix:p},fragmentShader:{log:S,prefix:m}}),a.deleteShader(w),a.deleteShader(E);var A;this.getUniforms=function(){return void 0===A&&(A=new Bt(a,_,t)),A};var L;return this.getAttributes=function(){return void 0===L&&(L=Xt(a,_)),L},this.destroy=function(){a.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=Xl++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=w,this.fragmentShader=E,this}function ne(t,e,n){function r(t){var e=t.skeleton,r=e.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function i(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=gu,n===gu&&e&&(n=yu),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(e,o,s,u,c,l,h){var f=a[e.type],d=h.isSkinnedMesh?r(h):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision),p!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead."));var m=t.getRenderTarget(),g={shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:i(m?m.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:i(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:i(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===is||e.envMap.mapping===os),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:i(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!u,useFog:e.fog,fogExp:u&&u.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===ua,flipSided:e.side===sa,depthPacking:void 0!==e.depthPacking&&e.depthPacking};return g},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var o=0;o<s.length;o++)r.push(n[s[o]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.join()},this.acquireProgram=function(n,r,i,a){for(var s,u=0,c=o.length;u<c;u++){var l=o[u];if(l.code===a){s=l,++s.usedTimes;break}}return void 0===s&&(s=new ee(t,e,a,n,r,i),o.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},this.programs=o}function re(){function t(t){var e=i.get(t);return void 0===e&&(e={},i.set(t,e)),e}function e(t){i.delete(t)}function n(t,e,n){i.get(t)[e]=n}function r(){i=new WeakMap}var i=new WeakMap;return{get:t,remove:e,update:n,dispose:r}}function ie(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oe(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ae(){function t(){i=0,o.length=0,a.length=0}function e(t,e,n,s,u){var c=r[i];void 0===c?(c={id:t.id,object:t,geometry:e,material:n,program:n.program,renderOrder:t.renderOrder,z:s,group:u},r[i]=c):(c.id=t.id,c.object=t,c.geometry=e,c.material=n,c.program=n.program,c.renderOrder=t.renderOrder,c.z=s,c.group=u),(n.transparent===!0?a:o).push(c),i++}function n(){o.length>1&&o.sort(ie),a.length>1&&a.sort(oe)}var r=[],i=0,o=[],a=[];return{opaque:o,transparent:a,init:t,push:e,sort:n}}function se(){function t(t,e){var r=t.id+","+e.id,i=n[r];return void 0===i&&(i=new ae,n[r]=i),i}function e(){n={}}var n={};return{get:t,dispose:e}}function ue(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new o,color:new g,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new o,direction:new o,color:new g,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new o,color:new g,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new o,skyColor:new g,groundColor:new g};break;case"RectAreaLight":r={color:new g,position:new o,halfWidth:new o,halfHeight:new o}}return t[e.id]=r,r}}}function ce(){function t(t,r,o){for(var u=0,c=0,l=0,h=0,f=0,d=0,p=0,m=0,g=o.matrixWorldInverse,v=0,y=t.length;v<y;v++){var _=t[v],b=_.color,x=_.intensity,w=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)u+=b.r*x,c+=b.g*x,l+=b.b*x;else if(_.isDirectionalLight){var M=e.get(_);if(M.color.copy(_.color).multiplyScalar(_.intensity),M.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(g),M.shadow=_.castShadow,_.castShadow){var T=_.shadow;M.shadowBias=T.bias,M.shadowRadius=T.radius,M.shadowMapSize=T.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=_.shadow.matrix,n.directional[h]=M,h++}else if(_.isSpotLight){var M=e.get(_);if(M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(g),M.color.copy(b).multiplyScalar(x),M.distance=w,M.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(g),M.coneCos=Math.cos(_.angle),M.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),M.decay=0===_.distance?0:_.decay,M.shadow=_.castShadow,_.castShadow){var T=_.shadow;M.shadowBias=T.bias,M.shadowRadius=T.radius,M.shadowMapSize=T.mapSize}n.spotShadowMap[d]=E,n.spotShadowMatrix[d]=_.shadow.matrix,n.spot[d]=M,d++}else if(_.isRectAreaLight){var M=e.get(_);M.color.copy(b).multiplyScalar(x),M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(g),s.identity(),a.copy(_.matrixWorld),a.premultiply(g),s.extractRotation(a),M.halfWidth.set(.5*_.width,0,0),M.halfHeight.set(0,.5*_.height,0),M.halfWidth.applyMatrix4(s),M.halfHeight.applyMatrix4(s),n.rectArea[p]=M,p++}else if(_.isPointLight){var M=e.get(_);if(M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(g),M.color.copy(_.color).multiplyScalar(_.intensity),M.distance=_.distance,M.decay=0===_.distance?0:_.decay,M.shadow=_.castShadow,_.castShadow){var T=_.shadow;M.shadowBias=T.bias,M.shadowRadius=T.radius,M.shadowMapSize=T.mapSize,M.shadowCameraNear=T.camera.near,M.shadowCameraFar=T.camera.far}n.pointShadowMap[f]=E,n.pointShadowMatrix[f]=_.shadow.matrix,n.point[f]=M,f++}else if(_.isHemisphereLight){var M=e.get(_);M.direction.setFromMatrixPosition(_.matrixWorld),M.direction.transformDirection(g),M.direction.normalize(),M.skyColor.copy(_.color).multiplyScalar(x),M.groundColor.copy(_.groundColor).multiplyScalar(x),n.hemi[m]=M,m++}}n.ambient[0]=u,n.ambient[1]=c,n.ambient[2]=l,n.directional.length=h,n.spot.length=d,n.rectArea.length=p,n.point.length=f,n.hemi.length=m,n.hash=n.id+","+h+","+f+","+d+","+p+","+m+","+r.length}var e=new ue,n={id:Kl++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new o,a=new r,s=new r;return{setup:t,state:n}}function le(){function t(){a.length=0,s.length=0,u.length=0}function e(t){a.push(t)}function n(t){s.push(t)}function r(t){u.push(t)}function i(t){o.setup(a,s,t)}var o=new ce,a=[],s=[],u=[],c={lightsArray:a,shadowsArray:s,spritesArray:u,lights:o};return{init:t,state:c,setupLights:i,pushLight:e,pushShadow:n,pushSprite:r}}function he(){function t(t,e){var r=t.id+","+e.id,i=n[r];return void 0===i&&(i=new le,n[r]=i),i}function e(){n={}}var n={};return{get:t,dispose:e}}function fe(t){H.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function de(t){H.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new o,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function pe(t,e,i){function a(e,n,r,i,o,a){var s=e.geometry,u=null,c=b,l=e.customDepthMaterial;if(r&&(c=x,l=e.customDistanceMaterial),l)u=l;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&n.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var f=e.isSkinnedMesh&&n.skinning,d=0;h&&(d|=v),f&&(d|=y),u=c[d]}if(t.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=u.uuid,m=n.uuid,g=w[p];void 0===g&&(g={},w[p]=g);var _=g[m];void 0===_&&(_=u.clone(),g[m]=_),u=_}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:E[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function s(n,r,i,o){if(n.visible!==!1){var u=n.layers.test(r.layers);if(u&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||l.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var c=e.update(n),h=n.material;if(Array.isArray(h))for(var f=c.groups,d=0,p=f.length;d<p;d++){var m=f[d],v=h[m.materialIndex];if(v&&v.visible){var y=a(n,v,o,g,i.near,i.far);t.renderBufferDirect(i,null,c,y,n,m)}}else if(h.visible){var y=a(n,h,o,g,i.near,i.far);t.renderBufferDirect(i,null,c,y,n,null)}}for(var _=n.children,b=0,x=_.length;b<x;b++)s(_[b],r,i,o)}}for(var l=new m,h=new r,f=new n,d=new n(i,i),p=new o,g=new o,v=1,y=2,_=(v|y)+1,b=new Array(_),x=new Array(_),w={},E={0:sa,1:aa,2:ua},M=[new o(1,0,0),new o((-1),0,0),new o(0,0,1),new o(0,0,(-1)),new o(0,1,0),new o(0,(-1),0)],T=[new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,0,1),new o(0,0,(-1))],S=[new u,new u,new u,new u,new u,new u],P=0;P!==_;++P){var C=0!==(P&v),A=0!==(P&y),L=new fe({depthPacking:Tu,morphTargets:C,skinning:A});b[P]=L;var O=new de({morphTargets:C,skinning:A});x[P]=O}var R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ia,this.render=function(e,n,r){if(R.enabled!==!1&&(R.autoUpdate!==!1||R.needsUpdate!==!1)&&0!==e.length){var i=t.context,o=t.state;o.disable(i.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var a,u=0,m=e.length;u<m;u++){var v=e[u],y=v.shadow,_=v&&v.isPointLight;if(void 0!==y){var b=y.camera;if(f.copy(y.mapSize),f.min(d),_){var x=f.x,w=f.y;S[0].set(2*x,w,x,w),S[1].set(0,w,x,w),S[2].set(3*x,w,x,w),S[3].set(x,w,x,w),S[4].set(3*x,0,x,w),S[5].set(x,0,x,w),f.x*=4,f.y*=2}if(null===y.map){var E={minFilter:cs,magFilter:cs,format:As};y.map=new c(f.x,f.y,E),y.map.texture.name=v.name+".shadowMap",b.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(v);var P=y.map,C=y.matrix;g.setFromMatrixPosition(v.matrixWorld),b.position.copy(g),_?(a=6,C.makeTranslation(-g.x,-g.y,-g.z)):(a=1,p.setFromMatrixPosition(v.target.matrixWorld),b.lookAt(p),b.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(b.projectionMatrix),C.multiply(b.matrixWorldInverse)),t.setRenderTarget(P),t.clear();for(var A=0;A<a;A++){if(_){p.copy(b.position),p.add(M[A]),b.up.copy(T[A]),b.lookAt(p),b.updateMatrixWorld();var L=S[A];o.viewport(L)}h.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),l.setFromMatrix(h),s(n,r,b,_)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}R.needsUpdate=!1}}}function me(t,e,n,r,i,o,a,u,c){s.call(this,t,e,n,r,i,o,a,u,c),this.needsUpdate=!0}function ge(t,e,n,r,a){function s(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);l=e.createBuffer(),h=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),f=u(),d={position:e.getAttribLocation(f,"position"),uv:e.getAttribLocation(f,"uv")},p={uvOffset:e.getUniformLocation(f,"uvOffset"),uvScale:e.getUniformLocation(f,"uvScale"),rotation:e.getUniformLocation(f,"rotation"),center:e.getUniformLocation(f,"center"),scale:e.getUniformLocation(f,"scale"),color:e.getUniformLocation(f,"color"),map:e.getUniformLocation(f,"map"),opacity:e.getUniformLocation(f,"opacity"),modelViewMatrix:e.getUniformLocation(f,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(f,"projectionMatrix"),fogType:e.getUniformLocation(f,"fogType"),fogDensity:e.getUniformLocation(f,"fogDensity"),fogNear:e.getUniformLocation(f,"fogNear"),fogFar:e.getUniformLocation(f,"fogFar"),fogColor:e.getUniformLocation(f,"fogColor"),fogDepth:e.getUniformLocation(f,"fogDepth"),alphaTest:e.getUniformLocation(f,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),m=new me(r)}function u(){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(r,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(n),e.compileShader(r),e.attachShader(t,n),e.attachShader(t,r),e.linkProgram(t),t}function c(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var l,h,f,d,p,m,g=new o,v=new i,y=new o;this.render=function(i,o,a){if(0!==i.length){void 0===f&&s(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.position),n.enableAttribute(d.uv),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,l),e.vertexAttribPointer(d.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(d.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.uniformMatrix4fv(p.projectionMatrix,!1,a.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(p.map,0);var u=0,_=0,b=o.fog;b?(e.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(e.uniform1f(p.fogNear,b.near),e.uniform1f(p.fogFar,b.far),e.uniform1i(p.fogType,1),u=1,_=1):b.isFogExp2&&(e.uniform1f(p.fogDensity,b.density),e.uniform1i(p.fogType,2),u=2,_=2)):(e.uniform1i(p.fogType,0),u=0,_=0);for(var x=0,w=i.length;x<w;x++){var E=i[x];E.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}i.sort(c);for(var M=[],T=[],x=0,w=i.length;x<w;x++){var E=i[x],S=E.material;if(S.visible!==!1){E.onBeforeRender(t,o,a,void 0,S,void 0),e.uniform1f(p.alphaTest,S.alphaTest),e.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(g,v,y),M[0]=y.x,M[1]=y.y,T[0]=E.center.x-.5,T[1]=E.center.y-.5;var P=0;o.fog&&S.fog&&(P=_),u!==P&&(e.uniform1i(p.fogType,P),u=P),null!==S.map?(e.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),e.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(e.uniform2f(p.uvOffset,0,0),e.uniform2f(p.uvScale,1,1)),e.uniform1f(p.opacity,S.opacity),e.uniform3f(p.color,S.color.r,S.color.g,S.color.b),e.uniform1f(p.rotation,S.rotation),e.uniform2fv(p.center,T),e.uniform2fv(p.scale,M),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),r.setTexture2D(S.map||m,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),E.onAfterRender(t,o,a,void 0,S,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}function ve(t,e,n){function r(){var e=!1,n=new u,r=null,i=new u(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){s===!0&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),i.equals(n)===!1&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function i(){var e=!1,n=null,r=null,i=null;return{setTest:function(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case Da:t.depthFunc(t.NEVER);break;case ja:t.depthFunc(t.ALWAYS);break;case za:t.depthFunc(t.LESS);break;case Ua:t.depthFunc(t.LEQUAL);break;case Ba:t.depthFunc(t.EQUAL);break;case Fa:t.depthFunc(t.GEQUAL);break;case Ha:t.depthFunc(t.GREATER);break;case Ga:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function o(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}function a(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<r;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}function s(){for(var t=0,e=N.length;t<e;t++)N[t]=0}function c(n){if(N[n]=1,0===I[n]&&(t.enableVertexAttribArray(n),I[n]=1),0!==D[n]){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),D[n]=0}}function l(n,r){if(N[n]=1,0===I[n]&&(t.enableVertexAttribArray(n),I[n]=1),D[n]!==r){var i=e.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(n,r),D[n]=r}}function h(){for(var e=0,n=I.length;e!==n;++e)I[e]!==N[e]&&(t.disableVertexAttribArray(e),I[e]=0)}function f(e){j[e]!==!0&&(t.enable(e),j[e]=!0)}function d(e){j[e]!==!1&&(t.disable(e),j[e]=!1)}function p(){if(null===z&&(z=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)z.push(n[r]);return z}function m(e){return U!==e&&(t.useProgram(e),U=e,!0)}function g(e,r,i,o,a,s,u,c){if(e!==pa?f(t.BLEND):d(t.BLEND),e!==_a){if(e!==B||c!==Y)switch(e){case ga:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case va:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case ya:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}F=null,H=null,G=null,V=null,W=null,q=null}else a=a||r,s=s||i,u=u||o,r===F&&a===V||(t.blendEquationSeparate(n.convert(r),n.convert(a)),F=r,V=a),i===H&&o===G&&s===W&&u===q||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),H=i,G=o,W=s,q=u);B=e,Y=c}function v(e,n){e.side===ua?d(t.CULL_FACE):f(t.CULL_FACE);var r=e.side===sa;n&&(r=!r),y(r),e.transparent===!0?g(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):g(pa),O.setFunc(e.depthFunc),O.setTest(e.depthTest),O.setMask(e.depthWrite),L.setMask(e.colorWrite),x(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function y(e){Z!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),Z=e)}function _(e){e!==Jo?(f(t.CULL_FACE),e!==X&&(e===Qo?t.cullFace(t.BACK):e===$o?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),X=e}function b(e){e!==K&&(tt&&t.lineWidth(e),K=e)}function x(e,n,r){e?(f(t.POLYGON_OFFSET_FILL),J===n&&Q===r||(t.polygonOffset(n,r),J=n,Q=r)):d(t.POLYGON_OFFSET_FILL)}function w(e){e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST)}function E(e){void 0===e&&(e=t.TEXTURE0+$-1),rt!==e&&(t.activeTexture(e),rt=e)}function M(e,n){null===rt&&E();var r=it[rt];void 0===r&&(r={type:void 0,texture:void 0},it[rt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||st[e]),r.type=e,r.texture=n)}function T(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function S(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function P(e){ot.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),ot.copy(e))}function C(e){at.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),at.copy(e))}function A(){for(var e=0;e<I.length;e++)1===I[e]&&(t.disableVertexAttribArray(e),I[e]=0);j={},z=null,rt=null,it={},U=null,B=null,Z=null,X=null,L.reset(),O.reset(),R.reset()}var L=new r,O=new i,R=new o,k=t.getParameter(t.MAX_VERTEX_ATTRIBS),N=new Uint8Array(k),I=new Uint8Array(k),D=new Uint8Array(k),j={},z=null,U=null,B=null,F=null,H=null,G=null,V=null,W=null,q=null,Y=!1,Z=null,X=null,K=null,J=null,Q=null,$=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),tt=!1,et=0,nt=t.getParameter(t.VERSION);nt.indexOf("WebGL")!==-1?(et=parseFloat(/^WebGL\ ([0-9])/.exec(nt)[1]),tt=et>=1):nt.indexOf("OpenGL ES")!==-1&&(et=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(nt)[1]),tt=et>=2);var rt=null,it={},ot=new u,at=new u,st={};return st[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),st[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),L.setClear(0,0,0,1),O.setClear(1),R.setClear(0),f(t.DEPTH_TEST),O.setFunc(Ua),y(!1),_(Qo),f(t.CULL_FACE),f(t.BLEND),g(ma),{buffers:{color:L,depth:O,stencil:R},initAttributes:s,enableAttribute:c,enableAttributeAndDivisor:l,disableUnusedAttributes:h,enable:f,disable:d,getCompressedTextureFormats:p,useProgram:m,setBlending:g,setMaterial:v,setFlipSided:y,setCullFace:_,setLineWidth:b,setPolygonOffset:x,setScissorTest:w,activeTexture:E,bindTexture:M,compressedTexImage2D:T,texImage2D:S,scissor:P,viewport:C,reset:A}}function ye(t,e,n,r,i,o,a){function s(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function u(t){return Su.isPowerOfTwo(t.width)&&Su.isPowerOfTwo(t.height)}function c(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){void 0===L&&(L=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),L.width=Su.floorPowerOfTwo(t.width),L.height=Su.floorPowerOfTwo(t.height);var e=L.getContext("2d");return e.drawImage(t,0,0,L.width,L.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+L.width+"x"+L.height,t),L}return t}function l(t){return t.wrapS!==ss||t.wrapT!==ss||t.minFilter!==cs&&t.minFilter!==fs}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==cs&&t.minFilter!==fs}function f(e,n,i,o){t.generateMipmap(e);var a=r.get(n);a.__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function d(e){return e===cs||e===ls||e===hs?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),g(e),e.isVideoTexture&&delete R[e.id],a.memory.textures--}function m(t){var e=t.target;e.removeEventListener("dispose",m),v(e),a.memory.textures--}function g(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.remove(e)}function v(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}}function y(e,i){var o=r.get(e);if(e.isVideoTexture&&A(e),e.version>0&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(a.complete!==!1)return void w(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function _(e,c){var l=r.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",p),l.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var d=e&&e.isCompressedTexture,m=e.image[0]&&e.image[0].isDataTexture,g=[],v=0;v<6;v++)d||m?g[v]=m?e.image[v].image:e.image[v]:g[v]=s(e.image[v],i.maxCubemapSize);var y=g[0],_=u(y),b=o.convert(e.format),w=o.convert(e.type);x(t.TEXTURE_CUBE_MAP,e,_);for(var v=0;v<6;v++)if(d)for(var E,M=g[v].mipmaps,T=0,S=M.length;T<S;T++)E=M[T],e.format!==As&&e.format!==Cs?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,E.width,E.height,0,b,w,E.data);else m?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,g[v].width,g[v].height,0,b,w,g[v].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,w,g[v]);d?l.__maxMipLevel=M.length-1:l.__maxMipLevel=0,h(e,_)&&f(t.TEXTURE_CUBE_MAP,e,y.width,y.height),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function b(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)}function x(n,a,s){var u;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),
t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===ss&&a.wrapT===ss||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,d(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,d(a.minFilter)),a.minFilter!==cs&&a.minFilter!==fs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===xs&&null===e.get("OES_texture_float_linear"))return;if(a.type===ws&&null===e.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function w(e,r,d){void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+d),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var m=s(r.image,i.maxTextureSize);l(r)&&u(m)===!1&&(m=c(m));var g=u(m),v=o.convert(r.format),y=o.convert(r.type);x(t.TEXTURE_2D,r,g);var _,b=r.mipmaps;if(r.isDepthTexture){var w=t.DEPTH_COMPONENT;if(r.type===xs){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");w=t.DEPTH_COMPONENT32F}else O&&(w=t.DEPTH_COMPONENT16);r.format===ks&&w===t.DEPTH_COMPONENT&&r.type!==ys&&r.type!==bs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ys,y=o.convert(r.type)),r.format===Ns&&(w=t.DEPTH_STENCIL,r.type!==Ss&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ss,y=o.convert(r.type))),n.texImage2D(t.TEXTURE_2D,0,w,m.width,m.height,0,v,y,null)}else if(r.isDataTexture)if(b.length>0&&g){for(var E=0,M=b.length;E<M;E++)_=b[E],n.texImage2D(t.TEXTURE_2D,E,v,_.width,_.height,0,v,y,_.data);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,m.width,m.height,0,v,y,m.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,M=b.length;E<M;E++)_=b[E],r.format!==As&&r.format!==Cs?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(t.TEXTURE_2D,E,v,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,E,v,_.width,_.height,0,v,y,_.data);e.__maxMipLevel=b.length-1}else if(b.length>0&&g){for(var E=0,M=b.length;E<M;E++)_=b[E],n.texImage2D(t.TEXTURE_2D,E,v,v,y,_);r.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,v,y,m),e.__maxMipLevel=0;h(r,g)&&f(t.TEXTURE_2D,r,m.width,m.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function E(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function T(e,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ks)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==Ns)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}function S(e){var n=r.get(e),i=e.isWebGLRenderTargetCube===!0;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),M(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),M(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function P(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",m),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=e.isWebGLRenderTargetCube===!0,c=u(e);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),x(t.TEXTURE_CUBE_MAP,e.texture,c);for(var l=0;l<6;l++)E(i.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);h(e.texture,c)&&f(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),x(t.TEXTURE_2D,e.texture,c),E(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),h(e.texture,c)&&f(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function C(e){var i=e.texture,o=u(e);if(h(i,o)){var a=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=r.get(i).__webglTexture;n.bindTexture(a,s),f(a,i,e.width,e.height),n.bindTexture(a,null)}}function A(t){var e=t.id,n=a.render.frame;R[e]!==n&&(R[e]=n,t.update())}var L,O="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,R={};this.setTexture2D=y,this.setTextureCube=_,this.setTextureCubeDynamic=b,this.setupRenderTarget=P,this.updateRenderTargetMipmap=C}function _e(t,e){function n(n){var r;if(n===as)return t.REPEAT;if(n===ss)return t.CLAMP_TO_EDGE;if(n===us)return t.MIRRORED_REPEAT;if(n===cs)return t.NEAREST;if(n===ls)return t.NEAREST_MIPMAP_NEAREST;if(n===hs)return t.NEAREST_MIPMAP_LINEAR;if(n===fs)return t.LINEAR;if(n===ds)return t.LINEAR_MIPMAP_NEAREST;if(n===ps)return t.LINEAR_MIPMAP_LINEAR;if(n===ms)return t.UNSIGNED_BYTE;if(n===Es)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ms)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Ts)return t.UNSIGNED_SHORT_5_6_5;if(n===gs)return t.BYTE;if(n===vs)return t.SHORT;if(n===ys)return t.UNSIGNED_SHORT;if(n===_s)return t.INT;if(n===bs)return t.UNSIGNED_INT;if(n===xs)return t.FLOAT;if(n===ws&&(r=e.get("OES_texture_half_float"),null!==r))return r.HALF_FLOAT_OES;if(n===Ps)return t.ALPHA;if(n===Cs)return t.RGB;if(n===As)return t.RGBA;if(n===Ls)return t.LUMINANCE;if(n===Os)return t.LUMINANCE_ALPHA;if(n===ks)return t.DEPTH_COMPONENT;if(n===Ns)return t.DEPTH_STENCIL;if(n===ba)return t.FUNC_ADD;if(n===xa)return t.FUNC_SUBTRACT;if(n===wa)return t.FUNC_REVERSE_SUBTRACT;if(n===Ta)return t.ZERO;if(n===Sa)return t.ONE;if(n===Pa)return t.SRC_COLOR;if(n===Ca)return t.ONE_MINUS_SRC_COLOR;if(n===Aa)return t.SRC_ALPHA;if(n===La)return t.ONE_MINUS_SRC_ALPHA;if(n===Oa)return t.DST_ALPHA;if(n===Ra)return t.ONE_MINUS_DST_ALPHA;if(n===ka)return t.DST_COLOR;if(n===Na)return t.ONE_MINUS_DST_COLOR;if(n===Ia)return t.SRC_ALPHA_SATURATE;if((n===Is||n===Ds||n===js||n===zs)&&(r=e.get("WEBGL_compressed_texture_s3tc"),null!==r)){if(n===Is)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ds)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===js)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zs)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===Us||n===Bs||n===Fs||n===Hs)&&(r=e.get("WEBGL_compressed_texture_pvrtc"),null!==r)){if(n===Us)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Bs)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Fs)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Hs)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Gs&&(r=e.get("WEBGL_compressed_texture_etc1"),null!==r))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===Vs||n===Ws||n===qs||n===Ys||n===Zs||n===Xs||n===Ks||n===Js||n===Qs||n===$s||n===tu||n===eu||n===nu||n===ru)&&(r=e.get("WEBGL_compressed_texture_astc"),null!==r))return n;if((n===Ea||n===Ma)&&(r=e.get("EXT_blend_minmax"),null!==r)){if(n===Ea)return r.MIN_EXT;if(n===Ma)return r.MAX_EXT}return n===Ss&&(r=e.get("WEBGL_depth_texture"),null!==r)?r.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function be(t,e,n,r){x.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function xe(t){be.call(this),this.cameras=t||[]}function we(t){function e(){return null!==s&&s.isPresenting===!0}function n(){if(e()){var n=s.getEyeParameters("left"),r=n.renderWidth,i=n.renderHeight;b=t.getPixelRatio(),_=t.getSize(),t.setDrawingBufferSize(2*r,i,1)}else a.enabled&&t.setDrawingBufferSize(_.width,_.height,b)}var a=this,s=null,c=null,l=null,h=new r,f=new r;"undefined"!=typeof window&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var d=new r,p=new i,m=new o,g=new be;g.bounds=new u(0,0,.5,1),g.layers.enable(1);var v=new be;v.bounds=new u(.5,0,.5,1),v.layers.enable(2);var y=new xe([g,v]);y.layers.enable(1),y.layers.enable(2);var _,b;this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return s},this.setDevice=function(t){void 0!==t&&(s=t)},this.setPoseTarget=function(t){void 0!==t&&(l=t)},this.getCamera=function(t){if(null===s)return t;s.depthNear=t.near,s.depthFar=t.far,s.getFrameData(c);var e=s.stageParameters;e?h.fromArray(e.sittingToStandingTransform):h.makeTranslation(0,a.userHeight,0);var n=c.pose,r=null!==l?l:t;if(r.matrix.copy(h),r.matrix.decompose(r.position,r.quaternion,r.scale),null!==n.orientation&&(p.fromArray(n.orientation),r.quaternion.multiply(p)),null!==n.position&&(p.setFromRotationMatrix(h),m.fromArray(n.position),m.applyQuaternion(p),r.position.add(m)),r.updateMatrixWorld(),s.isPresenting===!1)return t;g.near=t.near,v.near=t.near,g.far=t.far,v.far=t.far,y.matrixWorld.copy(t.matrixWorld),y.matrixWorldInverse.copy(t.matrixWorldInverse),g.matrixWorldInverse.fromArray(c.leftViewMatrix),v.matrixWorldInverse.fromArray(c.rightViewMatrix),f.getInverse(h),g.matrixWorldInverse.multiply(f),v.matrixWorldInverse.multiply(f);var i=r.parent;null!==i&&(d.getInverse(i.matrixWorld),g.matrixWorldInverse.multiply(d),v.matrixWorldInverse.multiply(d)),g.matrixWorld.getInverse(g.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),g.projectionMatrix.fromArray(c.leftProjectionMatrix),v.projectionMatrix.fromArray(c.rightProjectionMatrix),y.projectionMatrix.copy(g.projectionMatrix);var o=s.getLayers();if(o.length){var u=o[0];null!==u.leftBounds&&4===u.leftBounds.length&&g.bounds.fromArray(u.leftBounds),null!==u.rightBounds&&4===u.rightBounds.length&&v.bounds.fromArray(u.rightBounds)}return y},this.getStandingMatrix=function(){return h},this.submitFrame=function(){e()&&s.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",n)}}function Ee(t){function e(){return null===lt?wt:1}function n(){kt=new $(st),kt.get("WEBGL_depth_texture"),kt.get("OES_texture_float"),kt.get("OES_texture_float_linear"),kt.get("OES_texture_half_float"),kt.get("OES_texture_half_float_linear"),kt.get("OES_standard_derivatives"),kt.get("OES_element_index_uint"),kt.get("ANGLE_instanced_arrays"),Jt=new _e(st,kt),Nt=new J(st,kt,t),It=new ve(st,kt,Jt),It.scissor(vt.copy(Mt).multiplyScalar(wt)),It.viewport(gt.copy(Et).multiplyScalar(wt)),Dt=new nt(st),jt=new re,zt=new ye(st,kt,It,jt,Nt,Jt,Dt),Ut=new v(st),Ft=new tt(st,Ut,Dt),Ht=new ot(Ft,Dt),Yt=new it(st),Gt=new ne(ut,kt,Nt),Vt=new se,Wt=new he,qt=new X(ut,It,Ft,q),Zt=new K(st,kt,Dt),Xt=new et(st,kt,Dt),Kt=new ge(ut,st,It,zt,Nt),Dt.programs=Gt.programs,ut.context=st,ut.capabilities=Nt,ut.extensions=kt,ut.properties=jt,ut.renderLists=Vt,ut.state=It,ut.info=Dt}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ct=!0}function a(){console.log("THREE.WebGLRenderer: Context Restored."),ct=!1,n()}function s(t){var e=t.target;e.removeEventListener("dispose",s),c(e)}function c(t){l(t),jt.remove(t)}function l(t){var e=jt.get(t).program;t.program=void 0,void 0!==e&&Gt.releaseProgram(e)}function f(t,e,n){t.render(function(t){ut.renderBufferImmediate(t,e,n)})}function d(t,e,n){if(n&&n.isInstancedBufferGeometry&&null===kt.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");It.initAttributes();var r=n.attributes,i=e.getAttributes(),o=t.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var c=u.normalized,l=u.itemSize,h=Ut.get(u);if(void 0===h)continue;var f=h.buffer,d=h.type,p=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,g=m.stride,v=u.offset;m&&m.isInstancedInterleavedBuffer?(It.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):It.enableAttribute(s),st.bindBuffer(st.ARRAY_BUFFER,f),st.vertexAttribPointer(s,l,d,c,g*p,v*p)}else u.isInstancedBufferAttribute?(It.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):It.enableAttribute(s),st.bindBuffer(st.ARRAY_BUFFER,f),st.vertexAttribPointer(s,l,d,c,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:st.vertexAttrib2fv(s,y);break;case 3:st.vertexAttrib3fv(s,y);break;case 4:st.vertexAttrib4fv(s,y);break;default:st.vertexAttrib1fv(s,y)}}}}It.disableUnusedAttributes()}function p(){te||(y(),te=!0)}function g(){te=!1}function y(){var t=Qt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(_):window.requestAnimationFrame(_)}function _(t){te!==!1&&(ee(t),y())}function b(t,e,n){if(t.visible!==!1){var r=t.layers.test(e.layers);if(r)if(t.isLight)at.pushLight(t),t.castShadow&&at.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!St.intersectsSprite(t)||at.pushSprite(t);else if(t.isImmediateRenderObject)n&&Ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Lt),rt.push(t,null,t.material,Ot.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||St.intersectsObject(t))){n&&Ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Lt);var i=Ht.update(t),o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&rt.push(t,i,l,Ot.z,c)}else o.visible&&rt.push(t,i,o,Ot.z,null)}for(var h=t.children,s=0,u=h.length;s<u;s++)b(h[s],e,n)}}function x(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){mt=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];if(s.layers.test(p.layers)){var m=p.bounds,g=m.x*bt,v=m.y*xt,y=m.z*bt,_=m.w*xt;It.viewport(gt.set(g,v,y,_).multiplyScalar(wt)),w(s,e,p,u,c,l)}}}else mt=null,w(s,e,n,u,c,l)}}function w(t,e,n,r,i,o){if(t.onBeforeRender(ut,e,n,r,i,o),at=Wt.get(e,mt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&t.matrixWorld.determinant()<0;It.setMaterial(i,a);var s=M(n,e.fog,i,t);dt="",f(t,s,i)}else ut.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(ut,e,n,r,i,o),at=Wt.get(e,mt||n)}function E(t,e,n){var r=jt.get(t),i=at.state.lights,o=at.state.shadowsArray,a=Gt.getParameters(t,i.state,o,e,Pt.numPlanes,Pt.numIntersection,n),u=Gt.getProgramCode(t,a),c=r.program,h=!0;if(void 0===c)t.addEventListener("dispose",s);else if(c.code!==u)l(t);else if(r.lightsHash!==i.state.hash)jt.update(t,"lightsHash",i.state.hash),h=!1;else{if(void 0!==a.shaderID)return;h=!1}if(h){if(a.shaderID){var f=jl[a.shaderID];r.shader={name:t.type,uniforms:Nl.clone(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,ut),c=Gt.acquireProgram(t,r.shader,a,u),r.program=c,t.program=c}var d=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<ut.maxMorphTargets;p++)d["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<ut.maxMorphNormals;p++)d["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var m=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&t.clipping!==!0||(r.numClippingPlanes=Pt.numPlanes,r.numIntersection=Pt.numIntersection,m.clippingPlanes=Pt.uniform),r.fog=e,r.lightsHash=i.state.hash,t.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),v=Bt.seqWithValue(g.seq,m);r.uniformsList=v}function M(t,e,n,r){_t=0;var i=jt.get(n),o=at.state.lights;if(Ct&&(At||t!==pt)){var a=t===pt&&n.id===ft;Pt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,a)}n.needsUpdate===!1&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Pt.numPlanes&&i.numIntersection===Pt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(E(n,e,r),n.needsUpdate=!1);var s=!1,u=!1,c=!1,l=i.program,f=l.getUniforms(),d=i.shader.uniforms;if(It.useProgram(l.program)&&(s=!0,u=!0,c=!0),n.id!==ft&&(ft=n.id,u=!0),s||t!==pt){if(f.setValue(st,"projectionMatrix",t.projectionMatrix),Nt.logarithmicDepthBuffer&&f.setValue(st,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),pt!==(mt||t)&&(pt=mt||t,u=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=f.map.cameraPosition;void 0!==p&&p.setValue(st,Ot.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(st,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){f.setOptional(st,r,"bindMatrix"),f.setOptional(st,r,"bindMatrixInverse");var m=r.skeleton;if(m){var g=m.bones;if(Nt.floatVertexTextures){if(void 0===m.boneTexture){var v=Math.sqrt(4*g.length);v=Su.ceilPowerOfTwo(v),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(m.boneMatrices);var _=new h(y,v,v,As,xs);_.needsUpdate=!0,m.boneMatrices=y,m.boneTexture=_,m.boneTextureSize=v}f.setValue(st,"boneTexture",m.boneTexture),f.setValue(st,"boneTextureSize",m.boneTextureSize)}else f.setOptional(st,m,"boneMatrices")}}return u&&(f.setValue(st,"toneMappingExposure",ut.toneMappingExposure),f.setValue(st,"toneMappingWhitePoint",ut.toneMappingWhitePoint),n.lights&&z(d,c),e&&n.fog&&A(d,e),n.isMeshBasicMaterial?T(d,n):n.isMeshLambertMaterial?(T(d,n),L(d,n)):n.isMeshPhongMaterial?(T(d,n),n.isMeshToonMaterial?R(d,n):O(d,n)):n.isMeshStandardMaterial?(T(d,n),n.isMeshPhysicalMaterial?N(d,n):k(d,n)):n.isMeshDepthMaterial?(T(d,n),I(d,n)):n.isMeshDistanceMaterial?(T(d,n),D(d,n)):n.isMeshNormalMaterial?(T(d,n),j(d,n)):n.isLineBasicMaterial?(S(d,n),n.isLineDashedMaterial&&P(d,n)):n.isPointsMaterial?C(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=Dl.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=Dl.LTC_2),Bt.upload(st,i.uniformsList,d,ut)),n.isShaderMaterial&&n.uniformsNeedUpdate===!0&&(Bt.upload(st,i.uniformsList,d,ut),n.uniformsNeedUpdate=!1),f.setValue(st,"modelViewMatrix",r.modelViewMatrix),f.setValue(st,"normalMatrix",r.normalMatrix),f.setValue(st,"modelMatrix",r.matrixWorld),l}function T(t,e){t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=jt.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),n.matrixAutoUpdate===!0&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function S(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function P(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function C(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*wt,t.scale.value=.5*xt,t.map.value=e.map,null!==e.map&&(e.map.matrixAutoUpdate===!0&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function A(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function L(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function O(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function R(t,e){O(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function k(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function N(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,k(t,e)}function I(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function D(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function j(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function z(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function U(){var t=_t;return t>=Nt.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+Nt.maxTextures),_t+=1,t}console.log("THREE.WebGLRenderer",Xo),t=t||{};var B=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),F=void 0!==t.context?t.context:null,H=void 0!==t.alpha&&t.alpha,G=void 0===t.depth||t.depth,V=void 0===t.stencil||t.stencil,W=void 0!==t.antialias&&t.antialias,q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,Y=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,Z=void 0!==t.powerPreference?t.powerPreference:"default",rt=null,at=null;this.domElement=B,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Za,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var st,ut=this,ct=!1,lt=null,ht=null,ft=-1,dt="",pt=null,mt=null,gt=new u,vt=new u,yt=null,_t=0,bt=B.width,xt=B.height,wt=1,Et=new u(0,0,bt,xt),Mt=new u(0,0,bt,xt),Tt=!1,St=new m,Pt=new Q,Ct=!1,At=!1,Lt=new r,Ot=new o;try{var Rt={alpha:H,depth:G,stencil:V,antialias:W,premultipliedAlpha:q,preserveDrawingBuffer:Y,powerPreference:Z};if(B.addEventListener("webglcontextlost",i,!1),B.addEventListener("webglcontextrestored",a,!1),st=F||B.getContext("webgl",Rt)||B.getContext("experimental-webgl",Rt),null===st)throw null!==B.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===st.getShaderPrecisionFormat&&(st.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}var kt,Nt,It,Dt,jt,zt,Ut,Ft,Ht,Gt,Vt,Wt,qt,Yt,Zt,Xt,Kt,Jt;n();var Qt=new we(ut);this.vr=Qt;var $t=new pe(ut,Ht,Nt.maxTextureSize);this.shadowMap=$t,this.getContext=function(){return st},this.getContextAttributes=function(){return st.getContextAttributes()},this.forceContextLoss=function(){var t=kt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=kt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return wt},this.setPixelRatio=function(t){void 0!==t&&(wt=t,this.setSize(bt,xt,!1))},this.getSize=function(){return{width:bt,height:xt}},this.setSize=function(t,e,n){var r=Qt.getDevice();return r&&r.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(bt=t,xt=e,B.width=t*wt,B.height=e*wt,n!==!1&&(B.style.width=t+"px",B.style.height=e+"px"),void this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:bt*wt,height:xt*wt}},this.setDrawingBufferSize=function(t,e,n){bt=t,xt=e,wt=n,B.width=t*n,B.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return gt},this.setViewport=function(t,e,n,r){Et.set(t,xt-e-r,n,r),It.viewport(gt.copy(Et).multiplyScalar(wt))},this.setScissor=function(t,e,n,r){Mt.set(t,xt-e-r,n,r),It.scissor(vt.copy(Mt).multiplyScalar(wt))},this.setScissorTest=function(t){It.setScissorTest(Tt=t)},this.getClearColor=function(){return qt.getClearColor()},this.setClearColor=function(){qt.setClearColor.apply(qt,arguments)},this.getClearAlpha=function(){return qt.getClearAlpha()},this.setClearAlpha=function(){qt.setClearAlpha.apply(qt,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=st.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=st.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=st.STENCIL_BUFFER_BIT),st.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.dispose=function(){B.removeEventListener("webglcontextlost",i,!1),B.removeEventListener("webglcontextrestored",a,!1),Vt.dispose(),Wt.dispose(),jt.dispose(),Ht.dispose(),Qt.dispose(),g()},this.renderBufferImmediate=function(t,e,n){It.initAttributes();var r=jt.get(t);t.hasPositions&&!r.position&&(r.position=st.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=st.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=st.createBuffer()),t.hasColors&&!r.color&&(r.color=st.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(st.bindBuffer(st.ARRAY_BUFFER,r.position),st.bufferData(st.ARRAY_BUFFER,t.positionArray,st.DYNAMIC_DRAW),It.enableAttribute(i.position),st.vertexAttribPointer(i.position,3,st.FLOAT,!1,0,0)),t.hasNormals){if(st.bindBuffer(st.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.flatShading===!0)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=c,s[o+2]=l,s[o+3]=u,s[o+4]=c,s[o+5]=l,s[o+6]=u,s[o+7]=c,s[o+8]=l}st.bufferData(st.ARRAY_BUFFER,t.normalArray,st.DYNAMIC_DRAW),It.enableAttribute(i.normal),st.vertexAttribPointer(i.normal,3,st.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(st.bindBuffer(st.ARRAY_BUFFER,r.uv),st.bufferData(st.ARRAY_BUFFER,t.uvArray,st.DYNAMIC_DRAW),It.enableAttribute(i.uv),st.vertexAttribPointer(i.uv,2,st.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==ha&&(st.bindBuffer(st.ARRAY_BUFFER,r.color),st.bufferData(st.ARRAY_BUFFER,t.colorArray,st.DYNAMIC_DRAW),It.enableAttribute(i.color),st.vertexAttribPointer(i.color,3,st.FLOAT,!1,0,0)),It.disableUnusedAttributes(),st.drawArrays(st.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,r,i,o,a){var s=o.isMesh&&o.matrixWorld.determinant()<0;It.setMaterial(i,s);var u=M(t,n,i,o),c=r.id+"_"+u.id+"_"+(i.wireframe===!0),l=!1;c!==dt&&(dt=c,l=!0),o.morphTargetInfluences&&(Yt.update(o,r,i,u),l=!0);var h=r.index,f=r.attributes.position,p=1;i.wireframe===!0&&(h=Ft.getWireframeAttribute(r),p=2);var m,g=Zt;null!==h&&(m=Ut.get(h),g=Xt,g.setIndex(m)),l&&(d(i,u,r),null!==h&&st.bindBuffer(st.ELEMENT_ARRAY_BUFFER,m.buffer));var v=1/0;null!==h?v=h.count:void 0!==f&&(v=f.count);var y=r.drawRange.start*p,_=r.drawRange.count*p,b=null!==a?a.start*p:0,x=null!==a?a.count*p:1/0,w=Math.max(y,b),E=Math.min(v,y+_,b+x)-1,T=Math.max(0,E-w+1);if(0!==T){if(o.isMesh)if(i.wireframe===!0)It.setLineWidth(i.wireframeLinewidth*e()),g.setMode(st.LINES);else switch(o.drawMode){case du:g.setMode(st.TRIANGLES);break;case pu:g.setMode(st.TRIANGLE_STRIP);break;case mu:g.setMode(st.TRIANGLE_FAN)}else if(o.isLine){var S=i.linewidth;void 0===S&&(S=1),It.setLineWidth(S*e()),o.isLineSegments?g.setMode(st.LINES):o.isLineLoop?g.setMode(st.LINE_LOOP):g.setMode(st.LINE_STRIP)}else o.isPoints&&g.setMode(st.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&g.renderInstances(r,w,T):g.render(w,T)}},this.compile=function(t,e){at=Wt.get(t,e),at.init(),t.traverse(function(t){t.isLight&&(at.pushLight(t),t.castShadow&&at.pushShadow(t))}),at.setupLights(e),
t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)E(e.material[n],t.fog,e);else E(e.material,t.fog,e)})};var te=!1,ee=null;this.animate=function(t){ee=t,null!==ee?p():g()},this.render=function(t,e,n,r){if(!e||!e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!ct){dt="",ft=-1,pt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Qt.enabled&&(e=Qt.getCamera(e)),at=Wt.get(t,e),at.init(),t.onBeforeRender(ut,t,e,n),Lt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),St.setFromMatrix(Lt),At=this.localClippingEnabled,Ct=Pt.init(this.clippingPlanes,At,e),rt=Vt.get(t,e),rt.init(),b(t,e,ut.sortObjects),ut.sortObjects===!0&&rt.sort(),Ct&&Pt.beginShadows();var i=at.state.shadowsArray;$t.render(i,t,e),at.setupLights(e),Ct&&Pt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),qt.render(rt,t,e,r);var o=rt.opaque,a=rt.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&x(o,t,e,s),a.length&&x(a,t,e,s)}else o.length&&x(o,t,e),a.length&&x(a,t,e);var u=at.state.spritesArray;Kt.render(u,t,e),n&&zt.updateRenderTargetMipmap(n),It.buffers.depth.setTest(!0),It.buffers.depth.setMask(!0),It.buffers.color.setMask(!0),It.setPolygonOffset(!1),t.onAfterRender(ut,t,e),Qt.enabled&&Qt.submitFrame(),rt=null,at=null}},this.allocTextureUnit=U,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),zt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),zt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?zt.setTextureCube(e,n):zt.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return lt},this.setRenderTarget=function(t){lt=t,t&&void 0===jt.get(t).__webglFramebuffer&&zt.setupRenderTarget(t);var e=null,n=!1;if(t){var r=jt.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=r[t.activeCubeFace],n=!0):e=r,gt.copy(t.viewport),vt.copy(t.scissor),yt=t.scissorTest}else gt.copy(Et).multiplyScalar(wt),vt.copy(Mt).multiplyScalar(wt),yt=Tt;if(ht!==e&&(st.bindFramebuffer(st.FRAMEBUFFER,e),ht=e),It.viewport(gt),It.scissor(vt),It.setScissorTest(yt),n){var i=jt.get(t.texture);st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=jt.get(t).__webglFramebuffer;if(a){var s=!1;a!==ht&&(st.bindFramebuffer(st.FRAMEBUFFER,a),s=!0);try{var u=t.texture,c=u.format,l=u.type;if(c!==As&&Jt.convert(c)!==st.getParameter(st.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===ms||Jt.convert(l)===st.getParameter(st.IMPLEMENTATION_COLOR_READ_TYPE)||l===xs&&(kt.get("OES_texture_float")||kt.get("WEBGL_color_buffer_float"))||l===ws&&kt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");st.checkFramebufferStatus(st.FRAMEBUFFER)===st.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&st.readPixels(e,n,r,i,Jt.convert(c),Jt.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&st.bindFramebuffer(st.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=Jt.convert(e.format);this.setTexture2D(e,0),st.copyTexImage2D(st.TEXTURE_2D,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=Jt.convert(n.format),s=Jt.convert(n.type),u=e.isDataTexture?e.image.data:e.image;this.setTexture2D(n,0),st.texSubImage2D(st.TEXTURE_2D,r||0,t.x,t.y,i,o,a,s,u)}}function Me(t,e){this.name="",this.color=new g(t),this.density=void 0!==e?e:25e-5}function Te(t,e,n){this.name="",this.color=new g(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Se(){b.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Pe(t){H.call(this),this.type="SpriteMaterial",this.color=new g(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Ce(t){b.call(this),this.type="Sprite",this.material=void 0!==t?t:new Pe,this.center=new n(.5,.5)}function Ae(){b.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Le(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new r)}}function Oe(){b.call(this),this.type="Bone"}function Re(t,e){Z.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new r,this.bindMatrixInverse=new r;var n=this.initBones(),i=new Le(n);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function ke(t){H.call(this),this.type="LineBasicMaterial",this.color=new g(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Ne(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ie(t,e)):(b.call(this),this.type="Line",this.geometry=void 0!==t?t:new j,void(this.material=void 0!==e?e:new ke({color:16777215*Math.random()})))}function Ie(t,e){Ne.call(this,t,e),this.type="LineSegments"}function De(t,e){Ne.call(this,t,e),this.type="LineLoop"}function je(t){H.call(this),this.type="PointsMaterial",this.color=new g(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function ze(t,e){b.call(this),this.type="Points",this.geometry=void 0!==t?t:new j,this.material=void 0!==e?e:new je({color:16777215*Math.random()})}function Ue(){b.call(this),this.type="Group"}function Be(t,e,n,r,i,o,a,u,c){s.call(this,t,e,n,r,i,o,a,u,c),this.generateMipmaps=!1}function Fe(t,e,n,r,i,o,a,u,c,l,h,f){s.call(this,null,o,a,u,c,l,r,i,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function He(t,e,n,r,i,o,a,u,c,l){if(l=void 0!==l?l:ks,l!==ks&&l!==Ns)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===ks&&(n=ys),void 0===n&&l===Ns&&(n=Ss),s.call(this,null,r,i,o,a,u,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:cs,this.minFilter=void 0!==u?u:cs,this.flipY=!1,this.generateMipmaps=!1}function Ge(t){j.call(this),this.type="WireframeGeometry";var e,n,r,i,a,s,u,c,l,h,f=[],d=[0,0],p={},m=["a","b","c"];if(t&&t.isGeometry){var g=t.faces;for(e=0,r=g.length;e<r;e++){var v=g[e];for(n=0;n<3;n++)u=v[m[n]],c=v[m[(n+1)%3]],d[0]=Math.min(u,c),d[1]=Math.max(u,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)s=p[l],h=t.vertices[s.index1],f.push(h.x,h.y,h.z),h=t.vertices[s.index2],f.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var y,_,b,x,w,E,M,T;if(h=new o,null!==t.index){for(y=t.attributes.position,_=t.index,b=t.groups,0===b.length&&(b=[{start:0,count:_.count,materialIndex:0}]),i=0,a=b.length;i<a;++i)for(x=b[i],w=x.start,E=x.count,e=w,r=w+E;e<r;e+=3)for(n=0;n<3;n++)u=_.getX(e+n),c=_.getX(e+(n+1)%3),d[0]=Math.min(u,c),d[1]=Math.max(u,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)s=p[l],h.fromBufferAttribute(y,s.index1),f.push(h.x,h.y,h.z),h.fromBufferAttribute(y,s.index2),f.push(h.x,h.y,h.z)}else for(y=t.attributes.position,e=0,r=y.count/3;e<r;e++)for(n=0;n<3;n++)M=3*e+n,h.fromBufferAttribute(y,M),f.push(h.x,h.y,h.z),T=3*e+(n+1)%3,h.fromBufferAttribute(y,T),f.push(h.x,h.y,h.z)}this.addAttribute("position",new k(f,3))}function Ve(t,e,n){M.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new We(t,e,n)),this.mergeVertices()}function We(t,e,n){j.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,a=[],s=[],u=[],c=[],l=1e-5,h=new o,f=new o,d=new o,p=new o,m=new o,g=e+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=e;i++){var y=i/e;t(y,v,f),s.push(f.x,f.y,f.z),y-l>=0?(t(y-l,v,d),p.subVectors(f,d)):(t(y+l,v,d),p.subVectors(d,f)),v-l>=0?(t(y,v-l,d),m.subVectors(f,d)):(t(y,v+l,d),m.subVectors(d,f)),h.crossVectors(p,m).normalize(),u.push(h.x,h.y,h.z),c.push(y,v)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var _=r*g+i,b=r*g+i+1,x=(r+1)*g+i+1,w=(r+1)*g+i;a.push(_,b,w),a.push(b,x,w)}this.setIndex(a),this.addAttribute("position",new k(s,3)),this.addAttribute("normal",new k(u,3)),this.addAttribute("uv",new k(c,2))}function qe(t,e,n,r){M.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Ye(t,e,n,r)),this.mergeVertices()}function Ye(t,e,r,i){function a(t){for(var n=new o,r=new o,i=new o,a=0;a<e.length;a+=3)f(e[a+0],n),f(e[a+1],r),f(e[a+2],i),s(n,r,i,t)}function s(t,e,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var u=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),l=a-i;for(o=0;o<=l;o++)0===o&&i===a?s[i][o]=u:s[i][o]=u.clone().lerp(c,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(h(s[i][f+1]),h(s[i+1][f]),h(s[i][f])):(h(s[i][f+1]),h(s[i+1][f+1]),h(s[i+1][f]))}}function u(t){for(var e=new o,n=0;n<v.length;n+=3)e.x=v[n+0],e.y=v[n+1],e.z=v[n+2],e.normalize().multiplyScalar(t),v[n+0]=e.x,v[n+1]=e.y,v[n+2]=e.z}function c(){for(var t=new o,e=0;e<v.length;e+=3){t.x=v[e+0],t.y=v[e+1],t.z=v[e+2];var n=m(t)/2/Math.PI+.5,r=g(t)/Math.PI+.5;y.push(n,1-r)}d(),l()}function l(){for(var t=0;t<y.length;t+=6){var e=y[t+0],n=y[t+2],r=y[t+4],i=Math.max(e,n,r),o=Math.min(e,n,r);i>.9&&o<.1&&(e<.2&&(y[t+0]+=1),n<.2&&(y[t+2]+=1),r<.2&&(y[t+4]+=1))}}function h(t){v.push(t.x,t.y,t.z)}function f(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function d(){for(var t=new o,e=new o,r=new o,i=new o,a=new n,s=new n,u=new n,c=0,l=0;c<v.length;c+=9,l+=6){t.set(v[c+0],v[c+1],v[c+2]),e.set(v[c+3],v[c+4],v[c+5]),r.set(v[c+6],v[c+7],v[c+8]),a.set(y[l+0],y[l+1]),s.set(y[l+2],y[l+3]),u.set(y[l+4],y[l+5]),i.copy(t).add(e).add(r).divideScalar(3);var h=m(i);p(a,l+0,t,h),p(s,l+2,e,h),p(u,l+4,r,h)}}function p(t,e,n,r){r<0&&1===t.x&&(y[e]=t.x-1),0===n.x&&0===n.z&&(y[e]=r/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function g(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}j.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:i},r=r||1,i=i||0;var v=[],y=[];a(i),u(r),c(),this.addAttribute("position",new k(v,3)),this.addAttribute("normal",new k(v.slice(),3)),this.addAttribute("uv",new k(y,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Ze(t,e){M.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Xe(t,e)),this.mergeVertices()}function Xe(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ye.call(this,n,r,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ke(t,e){M.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Je(t,e)),this.mergeVertices()}function Je(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ye.call(this,n,r,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Qe(t,e){M.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $e(t,e)),this.mergeVertices()}function $e(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ye.call(this,r,i,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function tn(t,e){M.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new en(t,e)),this.mergeVertices()}function en(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ye.call(this,i,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nn(t,e,n,r,i,o){M.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new rn(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function rn(t,e,r,i,a){function s(){for(f=0;f<e;f++)u(f);u(a===!1?e:0),l(),c()}function u(n){v=t.getPointAt(n/e,v);var o=h.normals[n],a=h.binormals[n];for(d=0;d<=i;d++){var s=d/i*Math.PI*2,u=Math.sin(s),c=-Math.cos(s);m.x=c*o.x+u*a.x,m.y=c*o.y+u*a.y,m.z=c*o.z+u*a.z,m.normalize(),_.push(m.x,m.y,m.z),p.x=v.x+r*m.x,p.y=v.y+r*m.y,p.z=v.z+r*m.z,y.push(p.x,p.y,p.z)}}function c(){for(d=1;d<=e;d++)for(f=1;f<=i;f++){var t=(i+1)*(d-1)+(f-1),n=(i+1)*d+(f-1),r=(i+1)*d+f,o=(i+1)*(d-1)+f;x.push(t,n,o),x.push(n,r,o)}}function l(){for(f=0;f<=e;f++)for(d=0;d<=i;d++)g.x=f/e,g.y=d/i,b.push(g.x,g.y)}j.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:i,closed:a},e=e||64,r=r||1,i=i||8,a=a||!1;var h=t.computeFrenetFrames(e,a);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var f,d,p=new o,m=new o,g=new n,v=new o,y=[],_=[],b=[],x=[];s(),this.setIndex(x),this.addAttribute("position",new k(y,3)),this.addAttribute("normal",new k(_,3)),this.addAttribute("uv",new k(b,2))}function on(t,e,n,r,i,o,a){M.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new an(t,e,n,r,i,o)),this.mergeVertices()}function an(t,e,n,r,i,a){function s(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}j.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var u,c,l=[],h=[],f=[],d=[],p=new o,m=new o,g=new o,v=new o,y=new o,_=new o,b=new o;for(u=0;u<=n;++u){var x=u/n*i*Math.PI*2;for(s(x,i,a,t,g),s(x+.01,i,a,t,v),_.subVectors(v,g),b.addVectors(v,g),y.crossVectors(_,b),b.crossVectors(y,_),y.normalize(),b.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,E=-e*Math.cos(w),M=e*Math.sin(w);p.x=g.x+(E*b.x+M*y.x),p.y=g.y+(E*b.y+M*y.y),p.z=g.z+(E*b.z+M*y.z),h.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),f.push(m.x,m.y,m.z),d.push(u/n),d.push(c/r)}}for(c=1;c<=n;c++)for(u=1;u<=r;u++){var T=(r+1)*(c-1)+(u-1),S=(r+1)*c+(u-1),P=(r+1)*c+u,C=(r+1)*(c-1)+u;l.push(T,S,C),l.push(S,P,C)}this.setIndex(l),this.addAttribute("position",new k(h,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(d,2))}function sn(t,e,n,r,i){M.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new un(t,e,n,r,i)),this.mergeVertices()}function un(t,e,n,r,i){j.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,s,u=[],c=[],l=[],h=[],f=new o,d=new o,p=new o;for(a=0;a<=n;a++)for(s=0;s<=r;s++){var m=s/r*i,g=a/n*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),c.push(d.x,d.y,d.z),f.x=t*Math.cos(m),f.y=t*Math.sin(m),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(s/r),h.push(a/n)}for(a=1;a<=n;a++)for(s=1;s<=r;s++){var v=(r+1)*a+s-1,y=(r+1)*(a-1)+s-1,_=(r+1)*(a-1)+s,b=(r+1)*a+s;u.push(v,y,b),u.push(y,_,b)}this.setIndex(u),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function cn(t,e,n,r,i){var o,a;if(i===Dn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=kn(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=kn(o,t[o],t[o+1],a);return a&&Pn(a,a.next)&&(Nn(a),a=a.next),a}function ln(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!Pn(r,r.next)&&0!==Sn(r.prev,r,r.next))r=r.next;else{if(Nn(r),r=e=r.prev,r===r.next)break;n=!0}while(n||r!==e);return e}function hn(t,e,n,r,i,o,a){if(t){!a&&o&&bn(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?dn(t,r,i,o):fn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Nn(t),t=u.next,c=u.next;else if(t=u,t===c){a?1===a?(t=pn(t,e,n),hn(t,e,n,r,i,o,2)):2===a&&mn(t,e,n,r,i,o):hn(ln(t),e,n,r,i,o,1);break}}}function fn(t){var e=t.prev,n=t,r=t.next;if(Sn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Mn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Sn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function dn(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Sn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=wn(s,u,e,n,r),f=wn(c,l,e,n,r),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Mn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Sn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Mn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Sn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function pn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Pn(i,o)&&Cn(i,r,r.next,o)&&Ln(i,o)&&Ln(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Nn(r),Nn(r.next),r=t=o),r=r.next}while(r!==t);return r}function mn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Tn(a,s)){var u=Rn(a,s);return a=ln(a,a.next),u=ln(u,u.next),hn(a,e,n,r,i,o),void hn(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function gn(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,u=cn(t,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(En(u));for(c.sort(vn),i=0;i<c.length;i++)yn(c[i],n),n=ln(n,n.next);return n}function vn(t,e){return t.x-e.x}function yn(t,e){if(e=_n(t,e)){var n=Rn(e,t);ln(n,n.next)}}function _n(t,e){var n,r=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Mn(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<f||u===f&&r.x>n.x)&&Ln(r,t)&&(n=r,f=u)),r=r.next;return n}function bn(t,e,n,r){var i=t;do null===i.z&&(i.z=wn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,xn(i)}function xn(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,r);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function wn(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function En(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function Mn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Tn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!An(t,e)&&Ln(t,e)&&Ln(e,t)&&On(t,e)}function Sn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Pn(t,e){return t.x===e.x&&t.y===e.y}function Cn(t,e,n,r){return!!(Pn(t,e)&&Pn(n,r)||Pn(t,r)&&Pn(n,e))||Sn(t,e,n)>0!=Sn(t,e,r)>0&&Sn(n,r,t)>0!=Sn(n,r,e)>0}function An(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Cn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Ln(t,e){return Sn(t.prev,t,t.next)<0?Sn(t,e,t.next)>=0&&Sn(t,t.prev,e)>=0:Sn(t,e,t.prev)<0||Sn(t,t.next,e)<0}function On(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Rn(t,e){var n=new In(t.i,t.x,t.y),r=new In(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function kn(t,e,n,r){var i=new In(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Nn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function In(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function jn(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function zn(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Un(t,e){M.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Bn(t,e)),this.mergeVertices()}function Bn(t,e){function r(t){function r(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function u(t,e,r){var i,o,a,s=t.x-e.x,u=t.y-e.y,c=r.x-t.x,l=r.y-t.y,h=s*s+u*u,f=s*l-u*c;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(c*c+l*l),m=e.x-u/d,g=e.y+s/d,v=r.x-l/p,y=r.y+c/p,_=((v-m)*l-(y-g)*c)/(s*l-u*c);i=m+s*_-t.x,o=g+u*_-t.y;var b=i*i+o*o;if(b<=2)return new n(i,o);a=Math.sqrt(b/2)}else{var x=!1;s>Number.EPSILON?c>Number.EPSILON&&(x=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(x=!0):Math.sign(u)===Math.sign(l)&&(x=!0),x?(i=-u,o=s,a=Math.sqrt(h)):(i=s,o=u,a=Math.sqrt(h/2))}return new n(i/a,o/a)}function c(){var t=a.length/3;if(S){var e=0,n=Z*e;for(J=0;J<X;J++)Y=B[J],d(Y[2]+n,Y[1]+n,Y[0]+n);for(e=M+2*A,n=Z*e,J=0;J<X;J++)Y=B[J],d(Y[0]+n,Y[1]+n,Y[2]+n)}else{for(J=0;J<X;J++)Y=B[J],d(Y[2],Y[1],Y[0]);for(J=0;J<X;J++)Y=B[J],d(Y[0]+Z*M,Y[1]+Z*M,Y[2]+Z*M)}i.addGroup(t,a.length/3-t,0)}function l(){var t=a.length/3,e=0;for(h(F,e),e+=F.length,N=0,I=z.length;N<I;N++)k=z[N],h(k,e),e+=k.length;i.addGroup(t,a.length/3-t,1)}function h(t,e){var n,r;for(J=t.length;--J>=0;){n=J,r=J-1,r<0&&(r=t.length-1);var i=0,o=M+2*A;for(i=0;i<o;i++){var a=Z*i,s=Z*(i+1),u=e+n+a,c=e+r+a,l=e+r+s,h=e+n+s;p(u,c,l,h)}}}function f(t,e,n){w.push(t),w.push(e),w.push(n)}function d(t,e,n){m(t),m(e),m(n);var r=a.length/3,o=O.generateTopUV(i,a,r-3,r-2,r-1);g(o[0]),g(o[1]),g(o[2])}function p(t,e,n,r){m(t),m(e),m(r),m(e),m(n),m(r);var o=a.length/3,s=O.generateSideWallUV(i,a,o-6,o-3,o-2,o-1);g(s[0]),g(s[1]),g(s[3]),g(s[1]),g(s[2]),g(s[3])}function m(t){a.push(w[3*t+0]),a.push(w[3*t+1]),a.push(w[3*t+2])}function g(t){s.push(t.x),s.push(t.y)}var v,y,_,b,x,w=[],E=void 0!==e.curveSegments?e.curveSegments:12,M=void 0!==e.steps?e.steps:1,T=void 0!==e.amount?e.amount:100,S=void 0===e.bevelEnabled||e.bevelEnabled,P=void 0!==e.bevelThickness?e.bevelThickness:6,C=void 0!==e.bevelSize?e.bevelSize:P-2,A=void 0!==e.bevelSegments?e.bevelSegments:3,L=e.extrudePath,O=void 0!==e.UVGenerator?e.UVGenerator:$l,R=!1;L&&(v=L.getSpacedPoints(M),R=!0,S=!1,y=L.computeFrenetFrames(M,!1),_=new o,b=new o,x=new o),S||(A=0,P=0,C=0);var k,N,I,D=t.extractPoints(E),j=D.shape,z=D.holes,U=!Ql.isClockWise(j);if(U)for(j=j.reverse(),N=0,I=z.length;N<I;N++)k=z[N],Ql.isClockWise(k)&&(z[N]=k.reverse());var B=Ql.triangulateShape(j,z),F=j;for(N=0,I=z.length;N<I;N++)k=z[N],j=j.concat(k);for(var H,G,V,W,q,Y,Z=j.length,X=B.length,K=[],J=0,Q=F.length,$=Q-1,tt=J+1;J<Q;J++,$++,tt++)$===Q&&($=0),tt===Q&&(tt=0),K[J]=u(F[J],F[$],F[tt]);var et,nt=[],rt=K.concat();for(N=0,I=z.length;N<I;N++){for(k=z[N],et=[],J=0,Q=k.length,$=Q-1,tt=J+1;J<Q;J++,$++,tt++)$===Q&&($=0),tt===Q&&(tt=0),et[J]=u(k[J],k[$],k[tt]);nt.push(et),rt=rt.concat(et)}for(H=0;H<A;H++){for(V=H/A,W=P*Math.cos(V*Math.PI/2),G=C*Math.sin(V*Math.PI/2),J=0,Q=F.length;J<Q;J++)q=r(F[J],K[J],G),f(q.x,q.y,-W);for(N=0,I=z.length;N<I;N++)for(k=z[N],et=nt[N],J=0,Q=k.length;J<Q;J++)q=r(k[J],et[J],G),f(q.x,q.y,-W)}for(G=C,J=0;J<Z;J++)q=S?r(j[J],rt[J],G):j[J],R?(b.copy(y.normals[0]).multiplyScalar(q.x),_.copy(y.binormals[0]).multiplyScalar(q.y),x.copy(v[0]).add(b).add(_),f(x.x,x.y,x.z)):f(q.x,q.y,0);var it;for(it=1;it<=M;it++)for(J=0;J<Z;J++)q=S?r(j[J],rt[J],G):j[J],R?(b.copy(y.normals[it]).multiplyScalar(q.x),_.copy(y.binormals[it]).multiplyScalar(q.y),x.copy(v[it]).add(b).add(_),f(x.x,x.y,x.z)):f(q.x,q.y,T/M*it);for(H=A-1;H>=0;H--){for(V=H/A,W=P*Math.cos(V*Math.PI/2),G=C*Math.sin(V*Math.PI/2),J=0,Q=F.length;J<Q;J++)q=r(F[J],K[J],G),f(q.x,q.y,T+W);for(N=0,I=z.length;N<I;N++)for(k=z[N],et=nt[N],J=0,Q=k.length;J<Q;J++)q=r(k[J],et[J],G),R?f(q.x,q.y+v[M-1].y,v[M-1].x+W):f(q.x,q.y,T+W)}c(),l()}j.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var i=this,a=[],s=[],u=0,c=t.length;u<c;u++){var l=t[u];r(l,e)}this.addAttribute("position",new k(a,3)),this.addAttribute("uv",new k(s,2)),this.computeVertexNormals()}function Fn(t,e){M.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Hn(t,e)),this.mergeVertices()}function Hn(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new M;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Bn.call(this,r,e),this.type="TextBufferGeometry"}function Gn(t,e,n,r,i,o,a){M.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Vn(t,e,n,r,i,o,a)),this.mergeVertices()}function Vn(t,e,n,r,i,a,s){j.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;var u,c,l=a+s,h=0,f=[],d=new o,p=new o,m=[],g=[],v=[],y=[];for(c=0;c<=n;c++){var _=[],b=c/n;for(u=0;u<=e;u++){var x=u/e;d.x=-t*Math.cos(r+x*i)*Math.sin(a+b*s),d.y=t*Math.cos(a+b*s),d.z=t*Math.sin(r+x*i)*Math.sin(a+b*s),g.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),y.push(x,1-b),_.push(h++)}f.push(_)}for(c=0;c<n;c++)for(u=0;u<e;u++){var w=f[c][u+1],E=f[c][u],M=f[c+1][u],T=f[c+1][u+1];(0!==c||a>0)&&m.push(w,E,T),(c!==n-1||l<Math.PI)&&m.push(E,M,T)}this.setIndex(m),this.addAttribute("position",new k(g,3)),this.addAttribute("normal",new k(v,3)),this.addAttribute("uv",new k(y,2))}function Wn(t,e,n,r,i,o){M.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new qn(t,e,n,r,i,o)),this.mergeVertices()}function qn(t,e,r,i,a,s){j.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},t=t||.5,e=e||1,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var u,c,l,h=[],f=[],d=[],p=[],m=t,g=(e-t)/i,v=new o,y=new n;for(c=0;c<=i;c++){for(l=0;l<=r;l++)u=a+l/r*s,v.x=m*Math.cos(u),v.y=m*Math.sin(u),f.push(v.x,v.y,v.z),d.push(0,0,1),y.x=(v.x/e+1)/2,y.y=(v.y/e+1)/2,p.push(y.x,y.y);m+=g}for(c=0;c<i;c++){var _=c*(r+1);for(l=0;l<r;l++){u=l+_;var b=u,x=u+r+1,w=u+r+2,E=u+1;h.push(b,x,E),h.push(x,w,E)}}this.setIndex(h),this.addAttribute("position",new k(f,3)),this.addAttribute("normal",new k(d,3)),this.addAttribute("uv",new k(p,2))}function Yn(t,e,n,r){M.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Zn(t,e,n,r)),this.mergeVertices()}function Zn(t,e,r,i){j.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:i},e=Math.floor(e)||12,r=r||0,i=i||2*Math.PI,i=Su.clamp(i,0,2*Math.PI);var a,s,u,c=[],l=[],h=[],f=1/e,d=new o,p=new n;for(s=0;s<=e;s++){var m=r+s*f*i,g=Math.sin(m),v=Math.cos(m);for(u=0;u<=t.length-1;u++)d.x=t[u].x*g,d.y=t[u].y,d.z=t[u].x*v,l.push(d.x,d.y,d.z),p.x=s/e,p.y=u/(t.length-1),h.push(p.x,p.y)}for(s=0;s<e;s++)for(u=0;u<t.length-1;u++){a=u+s*t.length;var y=a,_=a+t.length,b=a+t.length+1,x=a+1;c.push(y,_,x),c.push(_,b,x)}if(this.setIndex(c),this.addAttribute("position",new k(l,3)),this.addAttribute("uv",new k(h,2)),this.computeVertexNormals(),i===2*Math.PI){var w=this.attributes.normal.array,E=new o,M=new o,T=new o;for(a=e*t.length*3,s=0,u=0;s<t.length;s++,u+=3)E.x=w[u+0],E.y=w[u+1],E.z=w[u+2],M.x=w[a+u+0],M.y=w[a+u+1],M.z=w[a+u+2],T.addVectors(E,M).normalize(),w[u+0]=w[a+u+0]=T.x,w[u+1]=w[a+u+1]=T.y,w[u+2]=w[a+u+2]=T.z}}function Xn(t,e){M.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Kn(t,e)),this.mergeVertices()}function Kn(t,e){function n(t){var n,s,c,l=i.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;if(Ql.isClockWise(f)===!1)for(f=f.reverse(),n=0,s=d.length;n<s;n++)c=d[n],Ql.isClockWise(c)===!0&&(d[n]=c.reverse());var p=Ql.triangulateShape(f,d);for(n=0,s=d.length;n<s;n++)c=d[n],f=f.concat(c);for(n=0,s=f.length;n<s;n++){var m=f[n];i.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=p.length;n<s;n++){var g=p[n],v=g[0]+l,y=g[1]+l,_=g[2]+l;r.push(v,y,_),u+=3}}j.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],i=[],o=[],a=[],s=0,u=0;if(Array.isArray(t)===!1)n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new k(i,3)),this.addAttribute("normal",new k(o,3)),this.addAttribute("uv",new k(a,2))}function Jn(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Qn(t,e){j.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(Su.DEG2RAD*e),u=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(o=new M,o.fromBufferGeometry(t)):o=t.clone(),
o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],g=0;g<3;g++)n=m[l[g]],r=m[l[(g+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),i=u[0]+","+u[1],void 0===c[i]?c[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:c[i].face2=d;for(i in c){var v=c[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new k(a,3))}function $n(t,e,n,r,i,o,a,s){M.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new tr(t,e,n,r,i,o,a,s)),this.mergeVertices()}function tr(t,e,r,i,a,s,u,c){function l(){var n,s,l=new o,h=new o,x=0,w=(e-t)/r;for(s=0;s<=a;s++){var E=[],M=s/a,T=M*(e-t)+t;for(n=0;n<=i;n++){var S=n/i,P=S*c+u,C=Math.sin(P),A=Math.cos(P);h.x=T*C,h.y=-M*r+_,h.z=T*A,p.push(h.x,h.y,h.z),l.set(C,w,A).normalize(),m.push(l.x,l.y,l.z),g.push(S,1-M),E.push(v++)}y.push(E)}for(n=0;n<i;n++)for(s=0;s<a;s++){var L=y[s][n],O=y[s+1][n],R=y[s+1][n+1],k=y[s][n+1];d.push(L,O,k),d.push(O,R,k),x+=6}f.addGroup(b,x,0),b+=x}function h(r){var a,s,l,h=new n,y=new o,x=0,w=r===!0?t:e,E=r===!0?1:-1;for(s=v,a=1;a<=i;a++)p.push(0,_*E,0),m.push(0,E,0),g.push(.5,.5),v++;for(l=v,a=0;a<=i;a++){var M=a/i,T=M*c+u,S=Math.cos(T),P=Math.sin(T);y.x=w*P,y.y=_*E,y.z=w*S,p.push(y.x,y.y,y.z),m.push(0,E,0),h.x=.5*S+.5,h.y=.5*P*E+.5,g.push(h.x,h.y),v++}for(a=0;a<i;a++){var C=s+a,A=l+a;r===!0?d.push(A,A+1,C):d.push(A+1,A,C),x+=3}f.addGroup(b,x,r===!0?1:2),b+=x}j.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:c};var f=this;t=void 0!==t?t:1,e=void 0!==e?e:1,r=r||1,i=Math.floor(i)||8,a=Math.floor(a)||1,s=void 0!==s&&s,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],m=[],g=[],v=0,y=[],_=r/2,b=0;l(),s===!1&&(t>0&&h(!0),e>0&&h(!1)),this.setIndex(d),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(m,3)),this.addAttribute("uv",new k(g,2))}function er(t,e,n,r,i,o,a){$n.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function nr(t,e,n,r,i,o,a){tr.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function rr(t,e,n,r){M.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ir(t,e,n,r)),this.mergeVertices()}function ir(t,e,r,i){j.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var a,s,u=[],c=[],l=[],h=[],f=new o,d=new n;for(c.push(0,0,0),l.push(0,0,1),h.push(.5,.5),s=0,a=3;s<=e;s++,a+=3){var p=r+s/e*i;f.x=t*Math.cos(p),f.y=t*Math.sin(p),c.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(c[a]/t+1)/2,d.y=(c[a+1]/t+1)/2,h.push(d.x,d.y)}for(a=1;a<=e;a++)u.push(a,a+1,0);this.setIndex(u),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function or(t){H.call(this),this.type="ShadowMaterial",this.color=new g(0),this.transparent=!0,this.setValues(t)}function ar(t){V.call(this,t),this.type="RawShaderMaterial"}function sr(t){H.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new g(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ur(t){sr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function cr(t){H.call(this),this.type="MeshPhongMaterial",this.color=new g(16777215),this.specular=new g(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Va,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function lr(t){cr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function hr(t){H.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function fr(t){H.call(this),this.type="MeshLambertMaterial",this.color=new g(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Va,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function dr(t){ke.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function pr(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,i===!1&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function mr(t){this.manager=void 0!==t?t:rh}function gr(t){this.manager=void 0!==t?t:rh,this._parser=null}function vr(t){this.manager=void 0!==t?t:rh,this._parser=null}function yr(t){this.manager=void 0!==t?t:rh}function _r(t){this.manager=void 0!==t?t:rh}function br(t){this.manager=void 0!==t?t:rh}function xr(){this.type="Curve",this.arcLengthDivisions=200}function wr(t,e,n,r,i,o,a,s){xr.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Er(t,e,n,r,i,o){wr.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Mr(){function t(t,o,a,s){e=t,n=a,r=-3*t+3*o-2*a-s,i=2*t-2*o+a+s}var e=0,n=0,r=0,i=0;return{initCatmullRom:function(e,n,r,i,o){t(n,r,o*(r-e),o*(i-n))},initNonuniformCatmullRom:function(e,n,r,i,o,a,s){var u=(n-e)/o-(r-e)/(o+a)+(r-n)/a,c=(r-n)/a-(i-n)/(a+s)+(i-r)/s;u*=a,c*=a,t(n,r,u,c)},calc:function(t){var o=t*t,a=o*t;return e+n*t+r*o+i*a}}}function Tr(t,e,n,r){xr.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Sr(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t,u=t*s;return(2*n-2*r+o+a)*u+(-3*n+3*r-2*o-a)*s+o*t+n}function Pr(t,e){var n=1-t;return n*n*e}function Cr(t,e){return 2*(1-t)*t*e}function Ar(t,e){return t*t*e}function Lr(t,e,n,r){return Pr(t,e)+Cr(t,n)+Ar(t,r)}function Or(t,e){var n=1-t;return n*n*n*e}function Rr(t,e){var n=1-t;return 3*n*n*t*e}function kr(t,e){return 3*(1-t)*t*t*e}function Nr(t,e){return t*t*t*e}function Ir(t,e,n,r,i){return Or(t,e)+Rr(t,n)+kr(t,r)+Nr(t,i)}function Dr(t,e,r,i){xr.call(this),this.type="CubicBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=r||new n,this.v3=i||new n}function jr(t,e,n,r){xr.call(this),this.type="CubicBezierCurve3",this.v0=t||new o,this.v1=e||new o,this.v2=n||new o,this.v3=r||new o}function zr(t,e){xr.call(this),this.type="LineCurve",this.v1=t||new n,this.v2=e||new n}function Ur(t,e){xr.call(this),this.type="LineCurve3",this.v1=t||new o,this.v2=e||new o}function Br(t,e,r){xr.call(this),this.type="QuadraticBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=r||new n}function Fr(t,e,n){xr.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new o,this.v1=e||new o,this.v2=n||new o}function Hr(t){xr.call(this),this.type="SplineCurve",this.points=t||[]}function Gr(){xr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Vr(t){Gr.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function Wr(t){Vr.call(this,t),this.uuid=Su.generateUUID(),this.type="Shape",this.holes=[]}function qr(t,e){b.call(this),this.type="Light",this.color=new g(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Yr(t,e,n){qr.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(b.DefaultUp),this.updateMatrix(),this.groundColor=new g(e)}function Zr(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new r}function Xr(){Zr.call(this,new be(50,1,.5,500))}function Kr(t,e,n,r,i,o){qr.call(this,t,e),this.type="SpotLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Xr}function Jr(t,e,n,r){qr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Zr(new be(90,1,.5,500))}function Qr(){Zr.call(this,new w((-5),5,5,(-5),.5,500))}function $r(t,e){qr.call(this,t,e),this.type="DirectionalLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,this.shadow=new Qr}function ti(t,e){qr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ei(t,e,n,r){qr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ni(t,e,n,r){fi.call(this,t,e,n,r)}function ri(t,e,n){fi.call(this,t,e,n)}function ii(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function oi(t,e,n,r){ii.call(this,t,e,n,r)}function ai(t,e,n,r){fi.call(this,t,e,n,r)}function si(t,e,n,r){fi.call(this,t,e,n,r)}function ui(t,e,n,r){fi.call(this,t,e,n,r)}function ci(t,e,n,r){ii.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function li(t,e,n,r){ii.call(this,t,e,n,r)}function hi(t,e,n,r){ii.call(this,t,e,n,r)}function fi(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=lh.convertArray(e,this.TimeBufferType),this.values=lh.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function di(t,e,n,r){fi.call(this,t,e,n,r)}function pi(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Su.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function mi(t){this.manager=void 0!==t?t:rh,this.textures={}}function gi(t){this.manager=void 0!==t?t:rh}function vi(){}function yi(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:rh,this.withCredentials=!1}function _i(t){this.manager=void 0!==t?t:rh,this.texturePath=""}function bi(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:rh,this.options=void 0}function xi(){this.type="ShapePath",this.color=new g,this.subPaths=[],this.currentPath=null}function wi(t){this.type="Font",this.data=t}function Ei(t,e,n,r){for(var i=String(t).split(""),o=e/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,s=[],u=0,c=0,l=0;l<i.length;l++){var h=i[l];if("\n"===h)u=0,c-=a;else{var f=Mi(h,n,o,u,c,r);u+=f.offsetX,s.push(f.path)}}return s}function Mi(t,e,n,r,i,o){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,u,c,l,h,f,d,p,m=new xi;if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,y=g.length;v<y;){var _=g[v++];switch(_){case"m":s=g[v++]*n+r,u=g[v++]*n+i,m.moveTo(s,u);break;case"l":s=g[v++]*n+r,u=g[v++]*n+i,m.lineTo(s,u);break;case"q":c=g[v++]*n+r,l=g[v++]*n+i,h=g[v++]*n+r,f=g[v++]*n+i,m.quadraticCurveTo(h,f,c,l);break;case"b":c=g[v++]*n+r,l=g[v++]*n+i,h=g[v++]*n+r,f=g[v++]*n+i,d=g[v++]*n+r,p=g[v++]*n+i,m.bezierCurveTo(h,f,d,p,c,l)}}return{offsetX:a.ha*n,path:m}}}function Ti(t){this.manager=void 0!==t?t:rh}function Si(t){this.manager=void 0!==t?t:rh}function Pi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new be,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new be,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ci(t,e,n){b.call(this),this.type="CubeCamera";var r=90,i=1,a=new be(r,i,t,e);a.up.set(0,-1,0),a.lookAt(new o(1,0,0)),this.add(a);var s=new be(r,i,t,e);s.up.set(0,-1,0),s.lookAt(new o((-1),0,0)),this.add(s);var u=new be(r,i,t,e);u.up.set(0,0,1),u.lookAt(new o(0,1,0)),this.add(u);var c=new be(r,i,t,e);c.up.set(0,0,-1),c.lookAt(new o(0,(-1),0)),this.add(c);var h=new be(r,i,t,e);h.up.set(0,-1,0),h.lookAt(new o(0,0,1)),this.add(h);var f=new be(r,i,t,e);f.up.set(0,-1,0),f.lookAt(new o(0,0,(-1))),this.add(f);var d={format:Cs,magFilter:fs,minFilter:fs};this.renderTarget=new l(n,n,d),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,a,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,u,n),n.activeCubeFace=3,t.render(e,c,n),n.activeCubeFace=4,t.render(e,h,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,f,n),t.setRenderTarget(null)},this.clear=function(t,e,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,n,r);t.setRenderTarget(null)}}function Ai(){b.call(this),this.type="AudioListener",this.context=vh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Li(t){b.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Oi(t){Li.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ri(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function ki(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ni(t,e,n){var r=n||Ii.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Ii(t,e,n){this.path=e,this.parsedPath=n||Ii.parseTrackName(e),this.node=Ii.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Di(){this.uuid=Su.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function ji(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:lu,endingEnd:lu},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ou,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function zi(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ui(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Bi(){j.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Fi(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=r===!0}function Hi(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Gi(t,e,n){Hi.call(this,t,e),this.meshPerAttribute=n||1}function Vi(t,e,n){T.call(this,t,e),this.meshPerAttribute=n||1}function Wi(t,e,n,r){this.ray=new W(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function qi(t,e){return t.distance-e.distance}function Yi(t,e,n,r){if(t.visible!==!1&&(t.raycast(e,n),r===!0))for(var i=t.children,o=0,a=i.length;o<a;o++)Yi(i[o],e,n,!0)}function Zi(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Xi(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Ki(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Ji(t,e){this.min=void 0!==t?t:new n((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new n((-(1/0)),(-(1/0)))}function Qi(t){b.call(this),this.material=t,this.render=function(){}}function $i(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new j,c=new k(2*a*3,3);u.addAttribute("position",c),Ie.call(this,u,new ke({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function to(t,e){b.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new j,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1,a=32;i<a;i++,o++){var s=i/a*Math.PI*2,u=o/a*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}n.addAttribute("position",new k(r,3));var c=new ke({fog:!1});this.cone=new Ie(n,c),this.add(this.cone),this.update()}function eo(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,eo(t.children[n]));return e}function no(t){for(var e=eo(t),n=new j,r=[],i=[],o=new g(0,0,1),a=new g(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new k(r,3)),n.addAttribute("color",new k(i,3));var c=new ke({vertexColors:da,depthTest:!1,depthWrite:!1,transparent:!0});Ie.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ro(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Vn(e,4,2),i=new G({wireframe:!0,fog:!1});Z.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function io(t,e){b.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new ke({fog:!1}),r=new j;r.addAttribute("position",new T(new Float32Array(15),3)),this.line=new Ne(r,n),this.add(this.line),this.update()}function oo(t,e,n){b.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Je(e);r.rotateY(.5*Math.PI),this.material=new G({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=da);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new T(o,3)),this.add(new Z(r,this.material)),this.update()}function ao(t,e,n,r){t=t||10,e=e||10,n=new g(void 0!==n?n:4473924),r=new g(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],c=0,l=0,h=-a;c<=e;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=c===i?n:r;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var d=new j;d.addAttribute("position",new k(s,3)),d.addAttribute("color",new k(u,3));var p=new ke({vertexColors:da});Ie.call(this,d,p)}function so(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new g(void 0!==i?i:4473924),o=new g(void 0!==o?o:8947848);var a,s,u,c,l,h,f,d=[],p=[];for(c=0;c<=e;c++)u=c/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,d.push(0,0,0),d.push(a,0,s),f=1&c?i:o,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,h=t-t/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new j;m.addAttribute("position",new k(d,3)),m.addAttribute("color",new k(p,3));var v=new ke({vertexColors:da});Ie.call(this,m,v)}function uo(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new j,c=new k(2*a*3,3);u.addAttribute("position",c),Ie.call(this,u,new ke({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function co(t,e,n){b.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new j;r.addAttribute("position",new k([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new ke({fog:!1});this.lightPlane=new Ne(r,i),this.add(this.lightPlane),r=new j,r.addAttribute("position",new k([0,0,0,0,0,1],3)),this.targetLine=new Ne(r,i),this.add(this.targetLine),this.update()}function lo(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var r=new j,i=new ke({color:16777215,vertexColors:fa}),o=[],a=[],s={},u=new g(16755200),c=new g(16711680),l=new g(43775),h=new g(16777215),f=new g(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),r.addAttribute("position",new k(o,3)),r.addAttribute("color",new k(a,3)),Ie.call(this,r,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ho(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new j;i.setIndex(new T(n,1)),i.addAttribute("position",new T(r,3)),Ie.call(this,i,new ke({color:e})),this.matrixAutoUpdate=!1,this.update()}function fo(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new j;o.setIndex(new T(r,1)),o.addAttribute("position",new k(i,3)),Ie.call(this,o,new ke({color:n})),this.geometry.computeBoundingSphere()}function po(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new j;o.addAttribute("position",new k(i,3)),o.computeBoundingSphere(),Ne.call(this,o,new ke({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new j;s.addAttribute("position",new k(a,3)),s.computeBoundingSphere(),this.add(new Z(s,new G({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function mo(t,e,n,r,i,o){b.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===_h&&(_h=new j,_h.addAttribute("position",new k([0,0,0,0,1,0],3)),bh=new tr(0,.5,1,5,1),bh.translate(0,-.5,0)),this.position.copy(e),this.line=new Ne(_h,new ke({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Z(bh,new G({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function go(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new j;r.addAttribute("position",new k(e,3)),r.addAttribute("color",new k(n,3));var i=new ke({vertexColors:da});Ie.call(this,r,i)}function vo(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new E(t,e,n,i,o,a)}function yo(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function _o(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function bo(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ze(t,e)}function xo(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ce(t)}function wo(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ze(t,e)}function Eo(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function Mo(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function To(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new je(t)}function So(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o(t,e,n)}function Po(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new T(t,e).setDynamic(!0)}function Co(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new S(t,e)}function Ao(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new P(t,e)}function Lo(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new C(t,e)}function Oo(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new A(t,e)}function Ro(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new L(t,e)}function ko(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(t,e)}function No(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(t,e)}function Io(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new k(t,e)}function Do(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new N(t,e)}function jo(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Tr.call(this,t),this.type="catmullrom",this.closed=!0}function zo(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Tr.call(this,t),this.type="catmullrom"}function Uo(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Tr.call(this,t),this.type="catmullrom"}function Bo(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new go(t)}function Fo(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ho(t,e)}function Ho(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ie(new Qn(t.geometry),new ke({color:void 0!==e?e:16777215}))}function Go(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ie(new Ge(t.geometry),new ke({color:void 0!==e?e:16777215}))}function Vo(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new mr(t)}function Wo(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new vr(t)}function qo(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yo(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Zo(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){
var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}(),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}});var Xo="92",Ko={LEFT:0,MIDDLE:1,RIGHT:2},Jo=0,Qo=1,$o=2,ta=3,ea=0,na=1,ra=0,ia=1,oa=2,aa=0,sa=1,ua=2,ca=1,la=2,ha=0,fa=1,da=2,pa=0,ma=1,ga=2,va=3,ya=4,_a=5,ba=100,xa=101,wa=102,Ea=103,Ma=104,Ta=200,Sa=201,Pa=202,Ca=203,Aa=204,La=205,Oa=206,Ra=207,ka=208,Na=209,Ia=210,Da=0,ja=1,za=2,Ua=3,Ba=4,Fa=5,Ha=6,Ga=7,Va=0,Wa=1,qa=2,Ya=0,Za=1,Xa=2,Ka=3,Ja=4,Qa=300,$a=301,ts=302,es=303,ns=304,rs=305,is=306,os=307,as=1e3,ss=1001,us=1002,cs=1003,ls=1004,hs=1005,fs=1006,ds=1007,ps=1008,ms=1009,gs=1010,vs=1011,ys=1012,_s=1013,bs=1014,xs=1015,ws=1016,Es=1017,Ms=1018,Ts=1019,Ss=1020,Ps=1021,Cs=1022,As=1023,Ls=1024,Os=1025,Rs=As,ks=1026,Ns=1027,Is=33776,Ds=33777,js=33778,zs=33779,Us=35840,Bs=35841,Fs=35842,Hs=35843,Gs=36196,Vs=37808,Ws=37809,qs=37810,Ys=37811,Zs=37812,Xs=37813,Ks=37814,Js=37815,Qs=37816,$s=37817,tu=37818,eu=37819,nu=37820,ru=37821,iu=2200,ou=2201,au=2202,su=2300,uu=2301,cu=2302,lu=2400,hu=2401,fu=2402,du=0,pu=1,mu=2,gu=3e3,vu=3001,yu=3007,_u=3002,bu=3003,xu=3004,wu=3005,Eu=3006,Mu=3200,Tu=3201,Su={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255];return o.toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Su.DEG2RAD},radToDeg:function(t){return t*Su.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new n,e=new n;return function(n,r){return t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(r.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new r).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new o;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=o*c,f=o*l,d=a*c,p=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-a*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,g=s*l,v=u*c,y=u*l;e[0]=m+y*a,e[4]=v*a-g,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=g*a-v,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){var m=s*c,g=s*l,v=u*c,y=u*l;e[0]=m-y*a,e[4]=-o*l,e[8]=v+g*a,e[1]=g+v*a,e[5]=o*c,e[9]=y-m*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var h=o*c,f=o*l,d=a*c,p=a*l;e[0]=s*c,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*l,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=w-_*l,e[8]=x*l+b,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=b*l+x,e[10]=_-w*l}else if("XZY"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=_*l+w,e[5]=o*c,e[9]=b*l-x,e[2]=x*l-b,e[6]=a*c,e[10]=w*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,r=t._y,i=t._z,o=t._w,a=n+n,s=r+r,u=i+i,c=n*a,l=n*s,h=n*u,f=r*s,d=r*u,p=i*u,m=o*a,g=o*s,v=o*u;return e[0]=1-(f+p),e[4]=l-v,e[8]=h+g,e[1]=l+v,e[5]=1-(c+p),e[9]=d-m,e[2]=h-g,e[6]=d+m,e[10]=1-(c+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new o,e=new o,n=new o;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],E=r[8],M=r[12],T=r[1],S=r[5],P=r[9],C=r[13],A=r[2],L=r[6],O=r[10],R=r[14],k=r[3],N=r[7],I=r[11],D=r[15];return i[0]=o*x+a*T+s*A+u*k,i[4]=o*w+a*S+s*L+u*N,i[8]=o*E+a*P+s*O+u*I,i[12]=o*M+a*C+s*R+u*D,i[1]=c*x+l*T+h*A+f*k,i[5]=c*w+l*S+h*L+f*N,i[9]=c*E+l*P+h*O+f*I,i[13]=c*M+l*C+h*R+f*D,i[2]=d*x+p*T+m*A+g*k,i[6]=d*w+p*S+m*L+g*N,i[10]=d*E+p*P+m*O+g*I,i[14]=d*M+p*C+m*R+g*D,i[3]=v*x+y*T+_*A+b*k,i[7]=v*w+y*S+_*L+b*N,i[11]=v*E+y*P+_*O+b*I,i[15]=v*M+y*C+_*R+b*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14],d=t[3],p=t[7],m=t[11],g=t[15];return d*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+p*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+m*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+g*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15],b=d*y*h-v*p*h+v*l*m-c*y*m-d*l*_+c*p*_,x=g*p*h-f*y*h-g*l*m+u*y*m+f*l*_-u*p*_,w=f*v*h-g*d*h+g*c*m-u*v*m-f*c*_+u*d*_,E=g*d*l-f*v*l-g*c*p+u*v*p+f*c*y-u*d*y,M=i*b+o*x+a*w+s*E;if(0===M){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error(T);return console.warn(T),this.identity()}var S=1/M;return n[0]=b*S,n[1]=(v*p*s-d*y*s-v*a*m+o*y*m+d*a*_-o*p*_)*S,n[2]=(c*y*s-v*l*s+v*a*h-o*y*h-c*a*_+o*l*_)*S,n[3]=(d*l*s-c*p*s-d*a*h+o*p*h+c*a*m-o*l*m)*S,n[4]=x*S,n[5]=(f*y*s-g*p*s+g*a*m-i*y*m-f*a*_+i*p*_)*S,n[6]=(g*l*s-u*y*s-g*a*h+i*y*h+u*a*_-i*l*_)*S,n[7]=(u*p*s-f*l*s+f*a*h-i*p*h-u*a*m+i*l*m)*S,n[8]=w*S,n[9]=(g*d*s-f*v*s-g*o*m+i*v*m+f*o*_-i*d*_)*S,n[10]=(u*v*s-g*c*s+g*o*h-i*v*h-u*o*_+i*c*_)*S,n[11]=(f*c*s-u*d*s-f*o*h+i*d*h+u*o*m-i*c*m)*S,n[12]=E*S,n[13]=(f*v*a-g*d*a+g*o*p-i*v*p-f*o*y+i*d*y)*S,n[14]=(g*c*a-u*v*a-g*o*l+i*v*l+u*o*y-i*c*y)*S,n[15]=(u*d*a-f*c*a+f*o*l-i*d*l-u*o*p+i*c*p)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new o,e=new r;return function(n,r,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length(),c=this.determinant();c<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var l=1/a,h=1/s,f=1/u;return e.elements[0]*=l,e.elements[1]*=l,e.elements[2]*=l,e.elements[4]*=h,e.elements[5]*=h,e.elements[6]*=h,e.elements[8]*=f,e.elements[9]*=f,e.elements[10]*=f,r.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,h=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(i,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(l!==p||s!==h||u!==f||c!==d){var m=1-a,g=s*h+u*f+c*d+l*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var x=a*v;if(s=s*m+h*x,u=u*m+f*x,c=c*m+d*x,l=l*m+p*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(i.prototype,{set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"YXZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"ZXY"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"ZYX"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"YZX"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d):"XZY"===o&&(this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(l-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new o,n=1e-6;return function(r,i){return void 0===e&&(e=new o),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,a),c=Math.sin((1-e)*u)/s,l=Math.sin(e*u)/s;return this._w=o*c+this._w*l,this._x=n*c+this._x*l,this._y=r*c+this._y*l,this._z=i*c+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(o.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new i;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new i;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},project:function(){var t=new r;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new r;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new o,e=new o;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new o;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new o;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Su.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*y+s*x,i[6]=o*g+a*_+s*w,i[1]=u*p+c*v+l*b,i[4]=u*m+c*y+l*x,i[7]=u*g+c*_+l*w,i[2]=h*p+f*v+d*b,i[5]=h*m+f*y+d*x,i[8]=h*g+f*_+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],d=f*u-c*h,p=c*l-f*s,m=h*s-u*l,g=i*d+o*p+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(c*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,
r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Pu=0;s.DEFAULT_IMAGE=void 0,s.DEFAULT_MAPPING=Qa,s.prototype=Object.assign(Object.create(e.prototype),{constructor:s,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height;var n=e.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}var n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Su.generateUUID()),n||void 0!==t.images[i.uuid]||(t.images[i.uuid]={uuid:i.uuid,url:e(i)}),r.image=i.uuid}return n||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===Qa){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case as:t.x=t.x-Math.floor(t.x);break;case ss:t.x=t.x<0?0:1;break;case us:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case as:t.y=t.y-Math.floor(t.y);break;case ss:t.y=t.y<0?0:1;break;case us:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(s.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(u.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(l-p)<o&&Math.abs(d-m)<o){if(Math.abs(c+h)<a&&Math.abs(l+p)<a&&Math.abs(d+m)<a&&Math.abs(u+f+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var v=(u+1)/2,y=(f+1)/2,_=(g+1)/2,b=(c+h)/4,x=(l+p)/4,w=(d+m)/4;return v>y&&v>_?v<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=b/n,i=x/n):y>_?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=b/r,i=w/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=x/i,r=w/i),this.set(n,r,i,e),this}var E=Math.sqrt((m-d)*(m-d)+(l-p)*(l-p)+(h-c)*(h-c));return Math.abs(E)<.001&&(E=1),this.x=(m-d)/E,this.y=(l-p)/E,this.z=(h-c)/E,this.w=Math.acos((u+f+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new u,e=new u),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),c.prototype=Object.assign(Object.create(e.prototype),{constructor:c,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),l.prototype=Object.create(c.prototype),l.prototype.constructor=l,l.prototype.isWebGLRenderTargetCube=!0,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.isDataTexture=!0,Object.assign(f.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new o),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new o),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,r=a.length;n<r;n++)i.copy(a[n]),i.applyMatrix4(t.matrixWorld),e.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)i.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),e.expandByPoint(i)}}var e,n,r,i=new o;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new o),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new o;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){function t(t){var i,o;for(i=0,o=t.length-3;i<=o;i+=3){u.fromArray(t,i);var a=l.x*Math.abs(u.x)+l.y*Math.abs(u.y)+l.z*Math.abs(u.z),s=e.dot(u),c=n.dot(u),h=r.dot(u);if(Math.max(-Math.max(s,c,h),Math.min(s,c,h))>a)return!1}return!0}var e=new o,n=new o,r=new o,i=new o,a=new o,s=new o,u=new o,c=new o,l=new o,h=new o;return function(o){if(this.isEmpty())return!1;this.getCenter(c),l.subVectors(this.max,c),e.subVectors(o.a,c),n.subVectors(o.b,c),r.subVectors(o.c,c),i.subVectors(n,e),a.subVectors(r,n),s.subVectors(e,r);var u=[0,-i.z,i.y,0,-a.z,a.y,0,-s.z,s.y,i.z,0,-i.x,a.z,0,-a.x,s.z,0,-s.x,-i.y,i.x,0,-a.y,a.x,0,-s.y,s.x,0];return!!t(u)&&(u=[1,0,0,0,1,0,0,0,1],!!t(u)&&(h.crossVectors(i,a),u=[h.x,h.y,h.z],t(u)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new o),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new o;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new d),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o,new o,new o,new o,new o,new o,new o,new o];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(d.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new f;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).getCenter(r);for(var i=0,o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new o),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new f),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(p.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o,e=new o;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new o),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new o;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new o);var r=e.delta(t),i=this.normal.dot(r);if(0!==i){var a=-(e.start.dot(this.normal)+this.constant)/i;if(!(a<0||a>1))return n.copy(r).multiplyScalar(a).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new o),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o,e=new a;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,l-s,p-h,y-m).normalize(),e[1].setComponents(a+r,l+s,p+h,y+m).normalize(),e[2].setComponents(a+i,l+u,p+f,y+g).normalize(),e[3].setComponents(a-i,l-u,p-f,y-g).normalize(),e[4].setComponents(a-o,l-c,p-d,y-v).normalize(),e[5].setComponents(a+o,l+c,p+d,y+v).normalize(),this},intersectsObject:function(){var t=new d;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new d;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var t=new o,e=new o;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Cu="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Au="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",Lu="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ou="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",Ru="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ku="\nvec3 transformed = vec3( position );\n",Nu="\nvec3 objectNormal = vec3( normal );\n",Iu="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Du="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",ju="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",zu="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",Uu="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Bu="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Fu="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Hu="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",Gu="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Vu="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Wu="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",qu="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",Yu="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",Zu="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",Xu="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",Ku="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",Ju="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",Qu="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",$u="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",tc="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",ec="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",nc="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",rc="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",ic="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",oc="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",ac="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",sc="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",uc="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",cc="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lc="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",hc="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",fc="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",dc="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",pc="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",mc="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",gc="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",vc="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",yc="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",_c="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",bc="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",xc="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",wc="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Ec="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Mc="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",Tc="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Sc="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Pc="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Cc="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",Ac="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",Lc="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Oc="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Rc="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",kc="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Nc="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",Ic="#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Dc="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",jc="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",zc="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Uc="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",Bc="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",Fc="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",Hc="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",Gc="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Vc="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Wc="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",qc="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Yc="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Zc="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Xc="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",Kc="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",Jc="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",Qc="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",$c="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tl="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",el="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",nl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",rl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",il="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",ol="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",al="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",sl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",ul="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",ll="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",hl="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",fl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",dl="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",pl="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",ml="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",gl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",vl="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",yl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",_l="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",bl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",xl="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",wl="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",El="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Ml="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Tl="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Sl="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Pl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",Cl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",Al="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ll="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Ol="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",Rl="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",kl={
alphamap_fragment:Cu,alphamap_pars_fragment:Au,alphatest_fragment:Lu,aomap_fragment:Ou,aomap_pars_fragment:Ru,begin_vertex:ku,beginnormal_vertex:Nu,bsdfs:Iu,bumpmap_pars_fragment:Du,clipping_planes_fragment:ju,clipping_planes_pars_fragment:zu,clipping_planes_pars_vertex:Uu,clipping_planes_vertex:Bu,color_fragment:Fu,color_pars_fragment:Hu,color_pars_vertex:Gu,color_vertex:Vu,common:Wu,cube_uv_reflection_fragment:qu,defaultnormal_vertex:Yu,displacementmap_pars_vertex:Zu,displacementmap_vertex:Xu,emissivemap_fragment:Ku,emissivemap_pars_fragment:Ju,encodings_fragment:Qu,encodings_pars_fragment:$u,envmap_fragment:tc,envmap_pars_fragment:ec,envmap_pars_vertex:nc,envmap_vertex:rc,fog_vertex:ic,fog_pars_vertex:oc,fog_fragment:ac,fog_pars_fragment:sc,gradientmap_pars_fragment:uc,lightmap_fragment:cc,lightmap_pars_fragment:lc,lights_lambert_vertex:hc,lights_pars_begin:fc,lights_pars_maps:dc,lights_phong_fragment:pc,lights_phong_pars_fragment:mc,lights_physical_fragment:gc,lights_physical_pars_fragment:vc,lights_fragment_begin:yc,lights_fragment_maps:_c,lights_fragment_end:bc,logdepthbuf_fragment:xc,logdepthbuf_pars_fragment:wc,logdepthbuf_pars_vertex:Ec,logdepthbuf_vertex:Mc,map_fragment:Tc,map_pars_fragment:Sc,map_particle_fragment:Pc,map_particle_pars_fragment:Cc,metalnessmap_fragment:Ac,metalnessmap_pars_fragment:Lc,morphnormal_vertex:Oc,morphtarget_pars_vertex:Rc,morphtarget_vertex:kc,normal_fragment_begin:Nc,normal_fragment_maps:Ic,normalmap_pars_fragment:Dc,packing:jc,premultiplied_alpha_fragment:zc,project_vertex:Uc,dithering_fragment:Bc,dithering_pars_fragment:Fc,roughnessmap_fragment:Hc,roughnessmap_pars_fragment:Gc,shadowmap_pars_fragment:Vc,shadowmap_pars_vertex:Wc,shadowmap_vertex:qc,shadowmask_pars_fragment:Yc,skinbase_vertex:Zc,skinning_pars_vertex:Xc,skinning_vertex:Kc,skinnormal_vertex:Jc,specularmap_fragment:Qc,specularmap_pars_fragment:$c,tonemapping_fragment:tl,tonemapping_pars_fragment:el,uv_pars_fragment:nl,uv_pars_vertex:rl,uv_vertex:il,uv2_pars_fragment:ol,uv2_pars_vertex:al,uv2_vertex:sl,worldpos_vertex:ul,cube_frag:cl,cube_vert:ll,depth_frag:hl,depth_vert:fl,distanceRGBA_frag:dl,distanceRGBA_vert:pl,equirect_frag:ml,equirect_vert:gl,linedashed_frag:vl,linedashed_vert:yl,meshbasic_frag:_l,meshbasic_vert:bl,meshlambert_frag:xl,meshlambert_vert:wl,meshphong_frag:El,meshphong_vert:Ml,meshphysical_frag:Tl,meshphysical_vert:Sl,normal_frag:Pl,normal_vert:Cl,points_frag:Al,points_vert:Ll,shadow_frag:Ol,shadow_vert:Rl},Nl={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}},Il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(g.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=Su.euclideanModulo(e,1),n=Su.clamp(n,0,1),r=Su.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=t(o,i,e+1/3),this.g=t(o,i,e),this.b=t(o,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){var c=Il[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,r){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Dl={common:{diffuse:{value:new g(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new g(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new g(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}}},jl={basic:{uniforms:Nl.merge([Dl.common,Dl.specularmap,Dl.envmap,Dl.aomap,Dl.lightmap,Dl.fog]),vertexShader:kl.meshbasic_vert,fragmentShader:kl.meshbasic_frag},lambert:{uniforms:Nl.merge([Dl.common,Dl.specularmap,Dl.envmap,Dl.aomap,Dl.lightmap,Dl.emissivemap,Dl.fog,Dl.lights,{emissive:{value:new g(0)}}]),vertexShader:kl.meshlambert_vert,fragmentShader:kl.meshlambert_frag},phong:{uniforms:Nl.merge([Dl.common,Dl.specularmap,Dl.envmap,Dl.aomap,Dl.lightmap,Dl.emissivemap,Dl.bumpmap,Dl.normalmap,Dl.displacementmap,Dl.gradientmap,Dl.fog,Dl.lights,{emissive:{value:new g(0)},specular:{value:new g(1118481)},shininess:{value:30}}]),vertexShader:kl.meshphong_vert,fragmentShader:kl.meshphong_frag},standard:{uniforms:Nl.merge([Dl.common,Dl.envmap,Dl.aomap,Dl.lightmap,Dl.emissivemap,Dl.bumpmap,Dl.normalmap,Dl.displacementmap,Dl.roughnessmap,Dl.metalnessmap,Dl.fog,Dl.lights,{emissive:{value:new g(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:kl.meshphysical_vert,fragmentShader:kl.meshphysical_frag},points:{uniforms:Nl.merge([Dl.points,Dl.fog]),vertexShader:kl.points_vert,fragmentShader:kl.points_frag},dashed:{uniforms:Nl.merge([Dl.common,Dl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kl.linedashed_vert,fragmentShader:kl.linedashed_frag},depth:{uniforms:Nl.merge([Dl.common,Dl.displacementmap]),vertexShader:kl.depth_vert,fragmentShader:kl.depth_frag},normal:{uniforms:Nl.merge([Dl.common,Dl.bumpmap,Dl.normalmap,Dl.displacementmap,{opacity:{value:1}}]),vertexShader:kl.normal_vert,fragmentShader:kl.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kl.cube_vert,fragmentShader:kl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kl.equirect_vert,fragmentShader:kl.equirect_frag},distanceRGBA:{uniforms:Nl.merge([Dl.common,Dl.displacementmap,{referencePosition:{value:new o},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kl.distanceRGBA_vert,fragmentShader:kl.distanceRGBA_frag},shadow:{uniforms:Nl.merge([Dl.lights,Dl.fog,{color:{value:new g(0)},opacity:{value:1}}]),vertexShader:kl.shadow_vert,fragmentShader:kl.shadow_frag}};jl.physical={uniforms:Nl.merge([jl.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:kl.meshphysical_vert,fragmentShader:kl.meshphysical_frag},y.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],y.DefaultOrder="XYZ",Object.defineProperties(y.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(y.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Su.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],h=i[2],f=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new r;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new i;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var zl=0;b.DefaultUp=new o(0,1,0),b.DefaultMatrixAutoUpdate=!0,b.prototype=Object.assign(Object.create(e.prototype),{constructor:b,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new i;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new o(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new o(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new o(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new o;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new o(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new o(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new o(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new r;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new r,e=new o;return function(n,r,i){n.isVector3?e.copy(n):e.set(n,r,i),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new o),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new o,e=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new i),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new o,e=new i;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new o),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];e(t.shapes,l)}else e(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],u=0,c=this.material.length;u<c;u++)h.push(e(t.materials,this.material[u]));o.material=h}else o.material=e(t.materials,this.material);if(this.children.length>0){o.children=[];for(var u=0;u<this.children.length;u++)o.children.push(this.children[u].toJSON(t).object)}if(r){var f=n(t.geometries),d=n(t.materials),p=n(t.textures),m=n(t.images),s=n(t.shapes);f.length>0&&(i.geometries=f),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),s.length>0&&(i.shapes=s)}return i.object=o,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),x.prototype=Object.assign(Object.create(b.prototype),{constructor:x,isCamera:!0,copy:function(t,e){return b.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new o),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){b.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),w.prototype=Object.assign(Object.create(x.prototype),{constructor:w,isOrthographicCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(t){var e=b.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(E.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ul=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var s=0,u=o.vertexNormals.length;s<u;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new r;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new r;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new r;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new r;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new r;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new b;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,i){var o=void 0!==u?[f[t].clone(),f[e].clone(),f[n].clone()]:[],a=void 0!==c?[r.colors[t].clone(),r.colors[e].clone(),r.colors[n].clone()]:[],s=new E(t,e,n,o,a,i);r.faces.push(s),void 0!==l&&r.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[n].clone()]),void 0!==h&&r.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[n].clone()])}var r=this,i=null!==t.index?t.index.array:void 0,a=t.attributes,s=a.position.array,u=void 0!==a.normal?a.normal.array:void 0,c=void 0!==a.color?a.color.array:void 0,l=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=0,v=0;m<s.length;m+=3,v+=2)r.vertices.push(new o(s[m],s[m+1],s[m+2])),void 0!==u&&f.push(new o(u[m],u[m+1],u[m+2])),void 0!==c&&r.colors.push(new g(c[m],c[m+1],c[m+2])),void 0!==l&&d.push(new n(l[v],l[v+1])),void 0!==h&&p.push(new n(h[v],h[v+1]));var y=t.groups;if(y.length>0)for(var m=0;m<y.length;m++)for(var _=y[m],b=_.start,x=_.count,v=b,w=b+x;v<w;v+=3)void 0!==i?e(i[v],i[v+1],i[v+2],_.materialIndex):e(v,v+1,v+2,_.materialIndex);else if(void 0!==i)for(var m=0;m<i.length;m+=3)e(i[m],i[m+1],i[m+2]);else for(var m=0;m<s.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new r;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new o,e=new o,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],s=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,s),e.subVectors(a,s),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,i,a,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new o;if(t){var u,c,l,h=new o,f=new o;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],u=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],h.subVectors(l,c),f.subVectors(u,c),h.cross(f),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var d=a.vertexNormals;3===d.length?(d[0].copy(s[a.a]),d[1].copy(s[a.b]),d[2].copy(s[a.c])):(d[0]=s[a.a].clone(),d[1]=s[a.b].clone(),d[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();
var a=new M;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,u,c=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new o,u={a:new o,b:new o,c:new o},c.push(s),l.push(u)}var h=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=h.faceNormals[n],u=h.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new d),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,i=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],f=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new a).getNormalMatrix(e));for(var p=0,m=s.length;p<m;p++){var g=s[p],v=g.clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(var p=0,m=d.length;p<m;p++)f.push(d[p].clone());for(p=0,m=c.length;p<m;p++){var y,_,b,x=c[p],w=x.vertexNormals,M=x.vertexColors;y=new E(x.a+i,x.b+i,x.c+i),y.normal.copy(x.normal),void 0!==r&&y.normal.applyMatrix3(r).normalize();for(var T=0,S=w.length;T<S;T++)_=w[T].clone(),void 0!==r&&_.applyMatrix3(r).normalize(),y.vertexNormals.push(_);y.color.copy(x.color);for(var T=0,S=M.length;T<S;T++)b=M[T],y.vertexColors.push(b.clone());y.materialIndex=x.materialIndex+n,u.push(y)}for(p=0,m=h.length;p<m;p++){var P=h[p],C=[];if(void 0!==P){for(var T=0,S=P.length;T<S;T++)C.push(P[T].clone());l.push(C)}}},mergeMesh:function(t){return t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],l=[],h=4,f=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var d=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var m=d[n];for(this.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(m,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new o(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var u=e[r]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],h=[],f={},d=[],p={},m=[],g={},u=0;u<this.faces.length;u++){var v=this.faces[u],y=!0,_=!1,b=void 0!==this.faceVertexUvs[0][u],x=v.normal.length()>0,w=v.vertexNormals.length>0,E=1!==v.color.r||1!==v.color.g||1!==v.color.b,M=v.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,y),T=t(T,2,_),T=t(T,3,b),T=t(T,4,x),T=t(T,5,w),T=t(T,6,E),T=t(T,7,M),l.push(T),l.push(v.a,v.b,v.c),l.push(v.materialIndex),b){var S=this.faceVertexUvs[0][u];l.push(r(S[0]),r(S[1]),r(S[2]))}if(x&&l.push(e(v.normal)),w){var P=v.vertexNormals;l.push(e(P[0]),e(P[1]),e(P[2]))}if(E&&l.push(n(v.color)),M){var C=v.vertexColors;l.push(n(C[0]),n(C[1]),n(C[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,d.length>0&&(i.data.colors=d),m.length>0&&(i.data.uvs=[m]),i.data.faces=l,i},clone:function(){return(new M).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=l.length;r<i;r++){var h=l[r],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)m.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(m.normals=[],r=0,i=p[e].normals.length;r<i;r++)m.normals.push(p[e].normals[r].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,n=g.length;e<n;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],r=0,i=g[e].vertexNormals.length;r<i;r++){var y=g[e].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],r=0,i=g[e].faceNormals.length;r<i;r++)v.faceNormals.push(g[e].faceNormals[r].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var x=t.skinIndices;for(e=0,n=x.length;e<n;e++)this.skinIndices.push(x[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var M=t.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(T.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new g),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,i=0,o=t.length;i<o;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new n),e[r++]=a.x,e[r++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new o),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new u),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),S.prototype=Object.create(T.prototype),S.prototype.constructor=S,P.prototype=Object.create(T.prototype),P.prototype.constructor=P,C.prototype=Object.create(T.prototype),C.prototype.constructor=C,A.prototype=Object.create(T.prototype),A.prototype.constructor=A,L.prototype=Object.create(T.prototype),L.prototype.constructor=L,O.prototype=Object.create(T.prototype),O.prototype.constructor=O,R.prototype=Object.create(T.prototype),R.prototype.constructor=R,k.prototype=Object.create(T.prototype),k.prototype.constructor=k,N.prototype=Object.create(T.prototype),N.prototype.constructor=N,Object.assign(I.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,r=t.faces,i=t.vertices,o=t.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,u=t.morphTargets,c=u.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]=[];this.morphTargets.position=e}var h,f=t.morphNormals,d=f.length;if(d>0){h=[];for(var l=0;l<d;l++)h[l]=[];this.morphTargets.normal=h}for(var p=t.skinIndices,m=t.skinWeights,g=p.length===i.length,v=m.length===i.length,l=0;l<r.length;l++){var y=r[l];this.vertices.push(i[y.a],i[y.b],i[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w)}if(a===!0){var E=o[0][l];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new n,new n,new n))}if(s===!0){var E=o[1][l];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new n,new n,new n))}for(var M=0;M<c;M++){var T=u[M].vertices;e[M].push(T[y.a],T[y.b],T[y.c])}for(var M=0;M<d;M++){var S=f[M].vertexNormals[l];h[M].push(S.a,S.b,S.c)}g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Bl=1;j.prototype=Object.assign(Object.create(e.prototype),{constructor:j,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(D(t)>65535?R:L)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new T(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new a).getNormalMatrix(t);r.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new r;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new r;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new r;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new r;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new r;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new b;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new k(3*e.vertices.length,3),r=new k(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new k(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new k(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var r;return e.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new I).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new T(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new T(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new T(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new T(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new T(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var a in t.morphTargets){for(var s=[],u=t.morphTargets[a],c=0,l=u.length;c<l;c++){var h=u[c],f=new k(3*h.length,3);s.push(f.copyVector3sArray(h))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var d=new k(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new k(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new f,e=new o;return function(){null===this.boundingSphere&&(this.boundingSphere=new d);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new T(new Float32Array(r.length),3));else for(var i=e.normal.array,a=0,s=i.length;a<s;a++)i[a]=0;var u,c,l,h=e.normal.array,f=new o,d=new o,p=new o,m=new o,g=new o;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,_=n.length;y<_;++y)for(var b=n[y],x=b.start,w=b.count,a=x,s=x+w;a<s;a+=3)u=3*v[a+0],c=3*v[a+1],l=3*v[a+2],f.fromArray(r,u),d.fromArray(r,c),p.fromArray(r,l),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z}else for(var a=0,s=r.length;a<s;a+=9)f.fromArray(r,a),d.fromArray(r,a+3),p.fromArray(r,a+6),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,a=t.attributes[r],s=a.array,u=a.itemSize,c=0,l=u*e;c<s.length;c++,l++)o[l]=s[c];return this},normalizeNormals:function(){var t=new o;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new j,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(e.length*a),u=0,c=0,l=0,h=e.length;l<h;l++){u=e[l]*a;for(var f=0;f<a;f++)s[c++]=o[u++]}t.addAttribute(r,new T(s,a))}for(var d=this.groups,l=0,h=d.length;l<h;l++){var p=d[l];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new j).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}var l=t.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),z.prototype=Object.create(M.prototype),z.prototype.constructor=z,U.prototype=Object.create(j.prototype),U.prototype.constructor=U,B.prototype=Object.create(M.prototype),B.prototype.constructor=B,F.prototype=Object.create(j.prototype),F.prototype.constructor=F;var Fl=0;H.prototype=Object.assign(Object.create(e.prototype),{constructor:H,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===ca;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ma&&(r.blending=this.blending),this.flatShading===!0&&(r.flatShading=this.flatShading),this.side!==aa&&(r.side=this.side),this.vertexColors!==ha&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(r.morphTargets=!0),this.skinning===!0&&(r.skinning=!0),this.visible===!1&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var i=e(t.textures),o=e(t.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),G.prototype=Object.create(H.prototype),G.prototype.constructor=G,G.prototype.isMeshBasicMaterial=!0,G.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},V.prototype=Object.create(H.prototype),V.prototype.constructor=V,V.prototype.isShaderMaterial=!0,V.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Nl.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},V.prototype.toJSON=function(t){var e=H.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(W.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new o),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new o;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new o),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o,e=new o,n=new o;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,u,c,l,h=.5*r.distanceTo(i),f=-this.direction.dot(e),d=n.dot(this.direction),p=-n.dot(e),m=n.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*p-d,u=f*d-p,l=h*g,s>=0)if(u>=-l)if(u<=l){var v=1/g;s*=v,u*=v,c=s*(s+f*u+2*d)+u*(f*s+u+2*p)+m}else u=h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+m;else u=-h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+m;else u<=-l?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),c=-s*s+u*(u+2*p)+m):u<=l?(s=0,u=Math.min(Math.max(-h,-p),h),c=u*(u+2*p)+m):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),
c=-s*s+u*(u+2*p)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),c=-s*s+u*(u+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),c}}(),intersectSphere:function(){var t=new o;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(a=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new o;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new o,e=new o,n=new o,r=new o;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var c,l=this.direction.dot(r);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}t.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=c*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>l)return null;var d=-c*t.dot(r);return d<0?null:this.at(d/l,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(q.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new o),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new o),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new o),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new o,e=new o;return function(n,r){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var i=e.dot(e),o=e.dot(t),a=o/i;return r&&(a=Su.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new o),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(Y,{getNormal:function(){var t=new o;return function(e,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new o),i.subVectors(r,n),t.subVectors(e,n),i.cross(t);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}}(),getBarycoord:function(){var t=new o,e=new o,n=new o;return function(r,i,a,s,u){t.subVectors(s,i),e.subVectors(a,i),n.subVectors(r,i);var c=t.dot(t),l=t.dot(e),h=t.dot(n),f=e.dot(e),d=e.dot(n),p=c*f-l*l;if(void 0===u&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),u=new o),0===p)return u.set(-2,-1,-1);var m=1/p,g=(f*h-l*d)*m,v=(c*d-l*h)*m;return u.set(1-g-v,v,g)}}(),containsPoint:function(){var t=new o;return function(e,n,r,i){return Y.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}()}),Object.assign(Y.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new o,e=new o;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new o),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Y.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new o),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Y.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Y.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new p,e=[new q,new q,new q],n=new o,r=new o;return function(i,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new o);var s=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,n),this.containsPoint(n)===!0)a.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var u=0;u<e.length;u++){e[u].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<s&&(s=c,a.copy(r))}}return a}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Z.prototype=Object.assign(Object.create(b.prototype),{constructor:Z,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return b.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){function t(t,e,n,r,i,o,a){return Y.getBarycoord(t,e,n,r,_),i.multiplyScalar(_.x),o.multiplyScalar(_.y),a.multiplyScalar(_.z),i.add(o).add(a),i.clone()}function e(t,e,n,r,i,o,a,s){var u;if(u=e.side===sa?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==ua,s),null===u)return null;x.copy(s),x.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(x);return c<n.near||c>n.far?null:{distance:c,point:x.clone(),object:t}}function i(n,r,i,o,a,s,u,f){c.fromBufferAttribute(o,s),l.fromBufferAttribute(o,u),h.fromBufferAttribute(o,f);var d=e(n,n.material,r,i,c,l,h,b);if(d){a&&(g.fromBufferAttribute(a,s),v.fromBufferAttribute(a,u),y.fromBufferAttribute(a,f),d.uv=t(b,c,l,h,g,v,y));var p=new E(s,u,f);Y.getNormal(c,l,h,p.normal),d.face=p,d.faceIndex=s}return d}var a=new r,s=new W,u=new d,c=new o,l=new o,h=new o,f=new o,p=new o,m=new o,g=new n,v=new n,y=new n,_=new o,b=new o,x=new o;return function(n,r){var o=this.geometry,d=this.material,_=this.matrixWorld;if(void 0!==d&&(null===o.boundingSphere&&o.computeBoundingSphere(),u.copy(o.boundingSphere),u.applyMatrix4(_),n.ray.intersectsSphere(u)!==!1&&(a.getInverse(_),s.copy(n.ray).applyMatrix4(a),null===o.boundingBox||s.intersectsBox(o.boundingBox)!==!1))){var x;if(o.isBufferGeometry){var w,E,M,T,S,P=o.index,C=o.attributes.position,A=o.attributes.uv;if(null!==P)for(T=0,S=P.count;T<S;T+=3)w=P.getX(T),E=P.getX(T+1),M=P.getX(T+2),x=i(this,n,s,C,A,w,E,M),x&&(x.faceIndex=Math.floor(T/3),r.push(x));else if(void 0!==C)for(T=0,S=C.count;T<S;T+=3)w=T,E=T+1,M=T+2,x=i(this,n,s,C,A,w,E,M),x&&r.push(x)}else if(o.isGeometry){var L,O,R,k,N=Array.isArray(d),I=o.vertices,D=o.faces,j=o.faceVertexUvs[0];j.length>0&&(k=j);for(var z=0,U=D.length;z<U;z++){var B=D[z],F=N?d[B.materialIndex]:d;if(void 0!==F){if(L=I[B.a],O=I[B.b],R=I[B.c],F.morphTargets===!0){var H=o.morphTargets,G=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var V=0,W=H.length;V<W;V++){var q=G[V];if(0!==q){var Y=H[V].vertices;c.addScaledVector(f.subVectors(Y[B.a],L),q),l.addScaledVector(p.subVectors(Y[B.b],O),q),h.addScaledVector(m.subVectors(Y[B.c],R),q)}}c.add(L),l.add(O),h.add(R),L=c,O=l,R=h}if(x=e(this,F,n,s,L,O,R,b)){if(k&&k[z]){var Z=k[z];g.copy(Z[0]),v.copy(Z[1]),y.copy(Z[2]),x.uv=t(b,L,O,R,g,v,y)}x.face=B,x.faceIndex=z,r.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),at.prototype=Object.create(s.prototype),at.prototype.constructor=at,at.prototype.isCubeTexture=!0,Object.defineProperty(at.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Hl=new s,Gl=new at,Vl=[],Wl=[],ql=new Float32Array(16),Yl=new Float32Array(9);jt.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(t,e[o.id])}};var Zl=/([\w\d_]+)(\])?(\[|\.)?/g;Bt.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},Bt.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},Bt.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(t,s.value,r)}},Bt.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Xl=0,Kl=0;fe.prototype=Object.create(H.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshDepthMaterial=!0,fe.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},de.prototype=Object.create(H.prototype),de.prototype.constructor=de,de.prototype.isMeshDistanceMaterial=!0,de.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},me.prototype=Object.create(s.prototype),me.prototype.constructor=me,be.prototype=Object.assign(Object.create(x.prototype),{constructor:be,isPerspectiveCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Su.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Su.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Su.RAD2DEG*Math.atan(Math.tan(.5*Su.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Su.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far)},toJSON:function(t){var e=b.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),xe.prototype=Object.assign(Object.create(be.prototype),{constructor:xe,isArrayCamera:!0}),Me.prototype.isFogExp2=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.density)},Me.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Te.prototype.isFog=!0,Te.prototype.clone=function(){return new Te(this.color.getHex(),this.near,this.far)},Te.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Se.prototype=Object.assign(Object.create(b.prototype),{constructor:Se,copy:function(t,e){return b.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=b.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Pe.prototype=Object.create(H.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isSpriteMaterial=!0,Pe.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Ce.prototype=Object.assign(Object.create(b.prototype),{constructor:Ce,isSprite:!0,raycast:function(){var t=new o,e=new o,n=new o;return function(r,i){e.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(e,t),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(e.distanceToSquared(t)>o)){var a=r.ray.origin.distanceTo(t);a<r.near||a>r.far||i.push({distance:a,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return b.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Ae.prototype=Object.assign(Object.create(b.prototype),{constructor:Ae,copy:function(t){b.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new o;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new o,e=new o;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=b.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Le.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new r;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new r,e=new r;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:e;t.multiplyMatrices(u,r[a]),t.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Le(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),Oe.prototype=Object.assign(Object.create(b.prototype),{constructor:Oe,isBone:!0}),Re.prototype=Object.assign(Object.create(Z.prototype),{constructor:Re,isSkinnedMesh:!0,initBones:function(){var t,e,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)e=this.geometry.bones[n],t=new Oe,i.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)e=this.geometry.bones[n],e.parent!==-1&&null!==e.parent&&void 0!==i[e.parent]?i[e.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];t=1/n.manhattanLength(),t!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new u,i=this.geometry.attributes.skinWeight;for(e=0;e<i.count;e++)r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e),t=1/r.manhattanLength(),t!==1/0?r.multiplyScalar(t):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){Z.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ke.prototype=Object.create(H.prototype),ke.prototype.constructor=ke,ke.prototype.isLineBasicMaterial=!0,ke.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Ne.prototype=Object.assign(Object.create(b.prototype),{constructor:Ne,isLine:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)t.fromBufferAttribute(r,o-1),e.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices,i=n.lineDistances;i[0]=0;for(var o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var t=new r,e=new W,n=new d;return function(r,i){var a=r.linePrecision,s=a*a,u=this.geometry,c=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),r.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var l=new o,h=new o,f=new o,d=new o,p=this&&this.isLineSegments?2:1;if(u.isBufferGeometry){var m=u.index,g=u.attributes,v=g.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=p){var x=y[_],w=y[_+1];l.fromArray(v,3*x),h.fromArray(v,3*w);var E=e.distanceSqToSegment(l,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=v.length/3-1;_<b;_+=p){l.fromArray(v,3*_),h.fromArray(v,3*_+3);var E=e.distanceSqToSegment(l,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(u.isGeometry)for(var T=u.vertices,S=T.length,_=0;_<S-1;_+=p){var E=e.distanceSqToSegment(T[_],T[_+1],d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(d);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ie.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Ie,isLineSegments:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var s=n.vertices,i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);return this}}()}),De.prototype=Object.assign(Object.create(Ne.prototype),{constructor:De,isLineLoop:!0}),je.prototype=Object.create(H.prototype),je.prototype.constructor=je,je.prototype.isPointsMaterial=!0,je.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},ze.prototype=Object.assign(Object.create(b.prototype),{constructor:ze,isPoints:!0,raycast:function(){var t=new r,e=new W,n=new d;return function(r,i){function a(t,n){var o=e.distanceSqToPoint(t);if(o<f){e.closestPointToPoint(t,p),p.applyMatrix4(c);var a=r.ray.origin.distanceTo(p);if(a<r.near||a>r.far)return;i.push({distance:a,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:s})}}var s=this,u=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),n.radius+=l,r.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var h=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new o,p=new o;if(u.isBufferGeometry){var m=u.index,g=u.attributes,v=g.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length;_<b;_++){var x=y[_];d.fromArray(v,3*x),a(d,x)}else for(var _=0,w=v.length/3;_<w;_++)d.fromArray(v,3*_),a(d,_)}else for(var E=u.vertices,_=0,w=E.length;_<w;_++)a(E[_],_)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ue.prototype=Object.assign(Object.create(b.prototype),{constructor:Ue,isGroup:!0}),Be.prototype=Object.assign(Object.create(s.prototype),{constructor:Be,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Fe.prototype=Object.create(s.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isCompressedTexture=!0,He.prototype=Object.create(s.prototype),He.prototype.constructor=He,He.prototype.isDepthTexture=!0,Ge.prototype=Object.create(j.prototype),Ge.prototype.constructor=Ge,Ve.prototype=Object.create(M.prototype),Ve.prototype.constructor=Ve,We.prototype=Object.create(j.prototype),We.prototype.constructor=We,qe.prototype=Object.create(M.prototype),qe.prototype.constructor=qe,Ye.prototype=Object.create(j.prototype),Ye.prototype.constructor=Ye,Ze.prototype=Object.create(M.prototype),Ze.prototype.constructor=Ze,Xe.prototype=Object.create(Ye.prototype),Xe.prototype.constructor=Xe,Ke.prototype=Object.create(M.prototype),Ke.prototype.constructor=Ke,Je.prototype=Object.create(Ye.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(M.prototype),Qe.prototype.constructor=Qe,$e.prototype=Object.create(Ye.prototype),$e.prototype.constructor=$e,tn.prototype=Object.create(M.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(Ye.prototype),en.prototype.constructor=en,nn.prototype=Object.create(M.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(j.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(M.prototype),on.prototype.constructor=on,an.prototype=Object.create(j.prototype),an.prototype.constructor=an,sn.prototype=Object.create(M.prototype),sn.prototype.constructor=sn,un.prototype=Object.create(j.prototype),un.prototype.constructor=un;var Jl={triangulate:function(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=cn(t,0,i,n,!0),a=[];if(!o)return a;var s,u,c,l,h,f,d;if(r&&(o=gn(t,e,o,n)),t.length>80*n){s=c=t[0],u=l=t[1];for(var p=n;p<i;p+=n)h=t[p],f=t[p+1],h<s&&(s=h),f<u&&(u=f),h>c&&(c=h),f>l&&(l=f);d=Math.max(c-s,l-u),d=0!==d?1/d:0}return hn(o,a,n,s,u,d),a}},Ql={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Ql.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];jn(t),zn(n,t);var o=t.length;e.forEach(jn);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,zn(n,e[a]);for(var s=Jl.triangulate(n,r),a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};Un.prototype=Object.create(M.prototype),Un.prototype.constructor=Un,Bn.prototype=Object.create(j.prototype),Bn.prototype.constructor=Bn;var $l={generateTopUV:function(t,e,r,i,o){var a=e[3*r],s=e[3*r+1],u=e[3*i],c=e[3*i+1],l=e[3*o],h=e[3*o+1];return[new n(a,s),new n(u,c),new n(l,h)]},generateSideWallUV:function(t,e,r,i,o,a){var s=e[3*r],u=e[3*r+1],c=e[3*r+2],l=e[3*i],h=e[3*i+1],f=e[3*i+2],d=e[3*o],p=e[3*o+1],m=e[3*o+2],g=e[3*a],v=e[3*a+1],y=e[3*a+2];return Math.abs(u-h)<.01?[new n(s,1-c),new n(l,1-f),new n(d,1-m),new n(g,1-y)]:[new n(u,1-c),new n(h,1-f),new n(p,1-m),new n(v,1-y)]}};Fn.prototype=Object.create(M.prototype),Fn.prototype.constructor=Fn,Hn.prototype=Object.create(Bn.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Object.create(M.prototype),Gn.prototype.constructor=Gn,Vn.prototype=Object.create(j.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(M.prototype),Wn.prototype.constructor=Wn,qn.prototype=Object.create(j.prototype),qn.prototype.constructor=qn,Yn.prototype=Object.create(M.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(j.prototype),Zn.prototype.constructor=Zn,Xn.prototype=Object.create(M.prototype),Xn.prototype.constructor=Xn,Xn.prototype.toJSON=function(){var t=M.prototype.toJSON.call(this),e=this.parameters.shapes;return Jn(e,t)},Kn.prototype=Object.create(j.prototype),Kn.prototype.constructor=Kn,Kn.prototype.toJSON=function(){var t=j.prototype.toJSON.call(this),e=this.parameters.shapes;return Jn(e,t)},Qn.prototype=Object.create(j.prototype),Qn.prototype.constructor=Qn,$n.prototype=Object.create(M.prototype),$n.prototype.constructor=$n,tr.prototype=Object.create(j.prototype),tr.prototype.constructor=tr,er.prototype=Object.create($n.prototype),er.prototype.constructor=er,nr.prototype=Object.create(tr.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(M.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(j.prototype),ir.prototype.constructor=ir;var th=Object.freeze({WireframeGeometry:Ge,ParametricGeometry:Ve,ParametricBufferGeometry:We,TetrahedronGeometry:Ze,TetrahedronBufferGeometry:Xe,OctahedronGeometry:Ke,OctahedronBufferGeometry:Je,IcosahedronGeometry:Qe,IcosahedronBufferGeometry:$e,DodecahedronGeometry:tn,DodecahedronBufferGeometry:en,PolyhedronGeometry:qe,PolyhedronBufferGeometry:Ye,TubeGeometry:nn,TubeBufferGeometry:rn,TorusKnotGeometry:on,TorusKnotBufferGeometry:an,TorusGeometry:sn,TorusBufferGeometry:un,TextGeometry:Fn,TextBufferGeometry:Hn,SphereGeometry:Gn,SphereBufferGeometry:Vn,RingGeometry:Wn,RingBufferGeometry:qn,PlaneGeometry:B,PlaneBufferGeometry:F,LatheGeometry:Yn,LatheBufferGeometry:Zn,ShapeGeometry:Xn,ShapeBufferGeometry:Kn,ExtrudeGeometry:Un,ExtrudeBufferGeometry:Bn,EdgesGeometry:Qn,ConeGeometry:er,ConeBufferGeometry:nr,CylinderGeometry:$n,CylinderBufferGeometry:tr,CircleGeometry:rr,CircleBufferGeometry:ir,BoxGeometry:z,BoxBufferGeometry:U});or.prototype=Object.create(H.prototype),or.prototype.constructor=or,or.prototype.isShadowMaterial=!0,or.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this},ar.prototype=Object.create(V.prototype),ar.prototype.constructor=ar,ar.prototype.isRawShaderMaterial=!0,sr.prototype=Object.create(H.prototype),sr.prototype.constructor=sr,sr.prototype.isMeshStandardMaterial=!0,sr.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ur.prototype=Object.create(sr.prototype),ur.prototype.constructor=ur,ur.prototype.isMeshPhysicalMaterial=!0,ur.prototype.copy=function(t){return sr.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},cr.prototype=Object.create(H.prototype),cr.prototype.constructor=cr,cr.prototype.isMeshPhongMaterial=!0,cr.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,
this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},lr.prototype=Object.create(cr.prototype),lr.prototype.constructor=lr,lr.prototype.isMeshToonMaterial=!0,lr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},hr.prototype=Object.create(H.prototype),hr.prototype.constructor=hr,hr.prototype.isMeshNormalMaterial=!0,hr.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},fr.prototype=Object.create(H.prototype),fr.prototype.constructor=fr,fr.prototype.isMeshLambertMaterial=!0,fr.prototype.copy=function(t){return H.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},dr.prototype=Object.create(ke.prototype),dr.prototype.constructor=dr,dr.prototype.isLineDashedMaterial=!0,dr.prototype.copy=function(t){return ke.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var eh=Object.freeze({ShadowMaterial:or,SpriteMaterial:Pe,RawShaderMaterial:ar,ShaderMaterial:V,PointsMaterial:je,MeshPhysicalMaterial:ur,MeshStandardMaterial:sr,MeshPhongMaterial:cr,MeshToonMaterial:lr,MeshNormalMaterial:hr,MeshLambertMaterial:fr,MeshDepthMaterial:fe,MeshDistanceMaterial:de,MeshBasicMaterial:G,LineDashedMaterial:dr,LineBasicMaterial:ke,Material:H}),nh={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},rh=new pr,ih={};Object.assign(mr.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=nh.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0!==ih[t])return void ih[t].push({onLoad:e,onProgress:n,onError:r});var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var u=s[1],c=!!s[2],l=s[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l}window.setTimeout(function(){e&&e(h),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{ih[t]=[],ih[t].push({onLoad:e,onProgress:n,onError:r});var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(e){var n=this.response;nh.add(t,n);var r=ih[t];if(delete ih[t],200===this.status){for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onError&&s.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)}},!1),g.addEventListener("progress",function(e){for(var n=ih[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}},!1),g.addEventListener("error",function(e){var n=ih[t];delete ih[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var v in this.requestHeader)g.setRequestHeader(v,this.requestHeader[v]);g.send(null)}return i.manager.itemStart(t),g},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(gr.prototype,{load:function(t,e,n,r){function i(i){u.load(t[i],function(t){var n=o._parser(t,!0);a[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(s.minFilter=fs),s.format=n.format,s.needsUpdate=!0,e&&e(s))},n,r)}var o=this,a=[],s=new Fe;s.image=a;var u=new mr(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,h=t.length;l<h;++l)i(l);else u.load(t,function(t){var n=o._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){a[i]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+u]),a[i].format=n.format,a[i].width=n.width,a[i].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=fs),s.format=n.format,s.needsUpdate=!0,e&&e(s)},n,r);return s},setPath:function(t){return this.path=t,this}}),Object.assign(vr.prototype,{load:function(t,e,n,r){var i=this,o=new h,a=new mr(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ss,o.wrapT=void 0!==n.wrapT?n.wrapT:ss,o.magFilter=void 0!==n.magFilter?n.magFilter:fs,o.minFilter=void 0!==n.minFilter?n.minFilter:ps,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=fs),o.needsUpdate=!0,e&&e(o,n))},n,r),o}}),Object.assign(yr.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=nh.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){nh.add(t,this),e&&e(this),i.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_r.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){function i(n){a.load(t[n],function(t){o.images[n]=t,s++,6===s&&(o.needsUpdate=!0,e&&e(o))},void 0,r)}var o=new at,a=new yr(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var s=0,u=0;u<t.length;++u)i(u);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(br.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){var i=new s,o=new yr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){i.image=n;var r=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Cs:As,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(xr.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e?e:t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i],l=r[i+1],h=l-c,f=(n-c)/h,d=(i+f)/(o-1);return d},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,a,s=new o,u=[],c=[],l=[],h=new o,f=new r;for(n=0;n<=t;n++)i=n/t,u[n]=this.getTangentAt(i),u[n].normalize();c[0]=new o,l[0]=new o;var d=Number.MAX_VALUE,p=Math.abs(u[0].x),m=Math.abs(u[0].y),g=Math.abs(u[0].z);for(p<=d&&(d=p,s.set(1,0,0)),m<=d&&(d=m,s.set(0,1,0)),g<=d&&s.set(0,0,1),h.crossVectors(u[0],s).normalize(),c[0].crossVectors(u[0],h),l[0].crossVectors(u[0],c[0]),n=1;n<=t;n++)c[n]=c[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(u[n-1],u[n]),h.length()>Number.EPSILON&&(h.normalize(),a=Math.acos(Su.clamp(u[n-1].dot(u[n]),-1,1)),c[n].applyMatrix4(f.makeRotationAxis(h,a))),l[n].crossVectors(u[n],c[n]);if(e===!0)for(a=Math.acos(Su.clamp(c[0].dot(c[t]),-1,1)),a/=t,u[0].dot(h.crossVectors(c[0],c[t]))>0&&(a=-a),n=1;n<=t;n++)c[n].applyMatrix4(f.makeRotationAxis(u[n],a*n)),l[n].crossVectors(u[n],c[n]);return{tangents:u,normals:c,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),wr.prototype=Object.create(xr.prototype),wr.prototype.constructor=wr,wr.prototype.isEllipseCurve=!0,wr.prototype.getPoint=function(t,e){for(var r=e||new n,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=a?0:i),this.aClockwise!==!0||a||(o===i?o=-i:o-=i);var s=this.aStartAngle+t*o,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,d=c-this.aY;u=f*l-d*h+this.aX,c=f*h+d*l+this.aY}return r.set(u,c)},wr.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},wr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},wr.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Er.prototype=Object.create(wr.prototype),Er.prototype.constructor=Er,Er.prototype.isArcCurve=!0;var oh=new o,ah=new Mr,sh=new Mr,uh=new Mr;Tr.prototype=Object.create(xr.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isCatmullRomCurve3=!0,Tr.prototype.getPoint=function(t,e){var n=e||new o,r=this.points,i=r.length,a=(i-(this.closed?0:1))*t,s=Math.floor(a),u=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===u&&s===i-1&&(s=i-2,u=1);var c,l,h,f;if(this.closed||s>0?c=r[(s-1)%i]:(oh.subVectors(r[0],r[1]).add(r[0]),c=oh),l=r[s%i],h=r[(s+1)%i],this.closed||s+2<i?f=r[(s+2)%i]:(oh.subVectors(r[i-1],r[i-2]).add(r[i-1]),f=oh),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(c.distanceToSquared(l),d),m=Math.pow(l.distanceToSquared(h),d),g=Math.pow(h.distanceToSquared(f),d);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),ah.initNonuniformCatmullRom(c.x,l.x,h.x,f.x,p,m,g),sh.initNonuniformCatmullRom(c.y,l.y,h.y,f.y,p,m,g),uh.initNonuniformCatmullRom(c.z,l.z,h.z,f.z,p,m,g)}else"catmullrom"===this.curveType&&(ah.initCatmullRom(c.x,l.x,h.x,f.x,this.tension),sh.initCatmullRom(c.y,l.y,h.y,f.y,this.tension),uh.initCatmullRom(c.z,l.z,h.z,f.z,this.tension));return n.set(ah.calc(u),sh.calc(u),uh.calc(u)),n},Tr.prototype.copy=function(t){xr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Tr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Tr.prototype.fromJSON=function(t){xr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new o).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Dr.prototype=Object.create(xr.prototype),Dr.prototype.constructor=Dr,Dr.prototype.isCubicBezierCurve=!0,Dr.prototype.getPoint=function(t,e){var r=e||new n,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(Ir(t,i.x,o.x,a.x,s.x),Ir(t,i.y,o.y,a.y,s.y)),r},Dr.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Dr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Dr.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},jr.prototype=Object.create(xr.prototype),jr.prototype.constructor=jr,jr.prototype.isCubicBezierCurve3=!0,jr.prototype.getPoint=function(t,e){var n=e||new o,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(Ir(t,r.x,i.x,a.x,s.x),Ir(t,r.y,i.y,a.y,s.y),Ir(t,r.z,i.z,a.z,s.z)),n},jr.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},jr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},jr.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},zr.prototype=Object.create(xr.prototype),zr.prototype.constructor=zr,zr.prototype.isLineCurve=!0,zr.prototype.getPoint=function(t,e){var r=e||new n;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},zr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},zr.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},zr.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},zr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},zr.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ur.prototype=Object.create(xr.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isLineCurve3=!0,Ur.prototype.getPoint=function(t,e){var n=e||new o;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ur.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ur.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ur.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ur.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Br.prototype=Object.create(xr.prototype),Br.prototype.constructor=Br,Br.prototype.isQuadraticBezierCurve=!0,Br.prototype.getPoint=function(t,e){var r=e||new n,i=this.v0,o=this.v1,a=this.v2;return r.set(Lr(t,i.x,o.x,a.x),Lr(t,i.y,o.y,a.y)),r},Br.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Br.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Br.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Fr.prototype=Object.create(xr.prototype),Fr.prototype.constructor=Fr,Fr.prototype.isQuadraticBezierCurve3=!0,Fr.prototype.getPoint=function(t,e){var n=e||new o,r=this.v0,i=this.v1,a=this.v2;return n.set(Lr(t,r.x,i.x,a.x),Lr(t,r.y,i.y,a.y),Lr(t,r.z,i.z,a.z)),n},Fr.prototype.copy=function(t){return xr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Fr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Fr.prototype.fromJSON=function(t){return xr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hr.prototype=Object.create(xr.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isSplineCurve=!0,Hr.prototype.getPoint=function(t,e){var r=e||new n,i=this.points,o=(i.length-1)*t,a=Math.floor(o),s=o-a,u=i[0===a?a:a-1],c=i[a],l=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return r.set(Sr(s,u.x,c.x,l.x,h.x),Sr(s,u.y,c.y,l.y,h.y)),r},Hr.prototype.copy=function(t){xr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},Hr.prototype.toJSON=function(){var t=xr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},Hr.prototype.fromJSON=function(t){xr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new n).fromArray(i))}return this};var ch=Object.freeze({ArcCurve:Er,CatmullRomCurve3:Tr,CubicBezierCurve:Dr,CubicBezierCurve3:jr,EllipseCurve:wr,LineCurve:zr,LineCurve3:Ur,QuadraticBezierCurve:Br,QuadraticBezierCurve3:Fr,SplineCurve:Hr});Gr.prototype=Object.assign(Object.create(xr.prototype),{constructor:Gr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new zr(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){xr.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=xr.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){xr.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new ch[r.type]).fromJSON(r))}return this}}),Vr.prototype=Object.assign(Object.create(Gr.prototype),{constructor:Vr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var r=new zr(this.currentPoint.clone(),new n(t,e));this.curves.push(r),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,r,i){var o=new Br(this.currentPoint.clone(),new n(t,e),new n(r,i));this.curves.push(o),this.currentPoint.set(r,i)},bezierCurveTo:function(t,e,r,i,o,a){var s=new Dr(this.currentPoint.clone(),new n(t,e),new n(r,i),new n(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Hr(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+u,e+c,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){var u=new wr(t,e,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(t){return Gr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Gr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Gr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Wr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Wr,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Vr.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=Vr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){Vr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Vr).fromJSON(r))}return this}}),qr.prototype=Object.assign(Object.create(b.prototype),{constructor:qr,isLight:!0,copy:function(t){return b.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=b.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Yr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Yr,isHemisphereLight:!0,copy:function(t){return qr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Zr.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Xr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Xr,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*Su.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix())}}),Kr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Kr,isSpotLight:!0,copy:function(t){return qr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Jr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Jr,isPointLight:!0,copy:function(t){return qr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Qr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Qr}),$r.prototype=Object.assign(Object.create(qr.prototype),{constructor:$r,isDirectionalLight:!0,copy:function(t){return qr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ti.prototype=Object.assign(Object.create(qr.prototype),{constructor:ti,isAmbientLight:!0}),ei.prototype=Object.assign(Object.create(qr.prototype),{constructor:ei,isRectAreaLight:!0,copy:function(t){return qr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=qr.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),ni.prototype=Object.assign(Object.create(fi.prototype),{constructor:ni,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:su,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ri.prototype=Object.assign(Object.create(fi.prototype),{constructor:ri,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:su,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ii.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}{if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ii.prototype,{beforeStart_:ii.prototype.copySampleValue_,afterEnd_:ii.prototype.copySampleValue_}),oi.prototype=Object.assign(Object.create(ii.prototype),{constructor:oi,interpolate_:function(t,e,n,r){for(var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=t*s,c=(n-e)/(r-e),l=u+s;u!==l;u+=4)i.slerpFlat(o,0,a,u-s,a,u,c);return o}}),ai.prototype=Object.assign(Object.create(fi.prototype),{constructor:ai,ValueTypeName:"quaternion",DefaultInterpolation:uu,InterpolantFactoryMethodLinear:function(t){return new oi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),si.prototype=Object.assign(Object.create(fi.prototype),{constructor:si,ValueTypeName:"color"}),ui.prototype=Object.assign(Object.create(fi.prototype),{constructor:ui,ValueTypeName:"number"}),ci.prototype=Object.assign(Object.create(ii.prototype),{constructor:ci,DefaultSettings_:{endingStart:lu,endingEnd:lu},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case hu:i=t,a=2*e-n;break;case fu:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case hu:o=t,s=2*n-e;break;case fu:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,_=f*m-f*p,b=0;b!==a;++b)i[b]=g*o[c+b]+v*o[u+b]+y*o[s+b]+_*o[l+b];return i}}),li.prototype=Object.assign(Object.create(ii.prototype),{constructor:li,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c,h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}),hi.prototype=Object.assign(Object.create(ii.prototype),{constructor:hi,interpolate_:function(t){return this.copySampleValue_(t-1)}});var lh={arraySlice:function(t,e,n){return lh.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){
for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a)){do a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++];while(void 0!==o)}else do a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++];while(void 0!==o)}}};Object.assign(fi,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=fi._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],r=[];lh.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:lh.convertArray(t.times,Array),values:lh.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ui;case"vector":case"vector2":case"vector3":case"vector4":return di;case"color":return si;case"quaternion":return ai;case"bool":case"boolean":return ri;case"string":return ni}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(fi.prototype,{constructor:fi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:uu,InterpolantFactoryMethodDiscrete:function(t){return new hi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new li(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new ci(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case su:e=this.InterpolantFactoryMethodDiscrete;break;case uu:e=this.InterpolantFactoryMethodLinear;break;case cu:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return su;case this.InterpolantFactoryMethodLinear:return uu;case this.InterpolantFactoryMethodSmooth:return cu}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;o!==-1&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=lh.arraySlice(n,i,o),this.values=lh.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&lh.isTypedArray(r))for(var a=0,u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===cu,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a],c=t[a+1];if(u!==c&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,h=l-n,f=l+n,d=0;d!==n;++d){var p=e[l+d];if(p!==e[h+d]||p!==e[f+d]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];for(var m=a*n,g=i*n,d=0;d!==n;++d)e[g+d]=e[m+d]}++i}}if(o>0){t[i]=t[o];for(var m=o*n,g=i*n,d=0;d!==n;++d)e[g+d]=e[m+d];++i}return i!==t.length&&(this.times=lh.arraySlice(t,0,i),this.values=lh.arraySlice(e,0,i*n)),this}}),di.prototype=Object.assign(Object.create(fi.prototype),{constructor:di,ValueTypeName:"vector"}),Object.assign(pi,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(fi.parse(n[i]).scale(r));return new pi(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},i=0,o=n.length;i!==o;++i)e.push(fi.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=lh.getKeyframeOrder(s);s=lh.sortedArray(s,1,c),u=lh.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ui(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new pi(t,(-1),o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var c in r)h.push(pi.CreateFromMorphTargetSequence(c,r[c],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];lh.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)l[c[h].morphTargets[f]]=-1;for(var d in l){for(var p=[],m=[],f=0;f!==c[h].morphTargets.length;++f){var g=c[h];p.push(g.time),m.push(g.morphTarget===d?1:0)}r.push(new ui(".morphTargetInfluence["+d+"]",p,m))}o=l.length*(a||1)}else{var v=".bones["+e[u].name+"]";n(di,v+".position",c,"pos",r),n(ai,v+".quaternion",c,"rot",r),n(di,v+".scale",c,"scl",r)}}if(0===r.length)return null;var y=new pi(i,o,r);return y}}),Object.assign(pi.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(mi.prototype,{load:function(t,e,n,r){var i=this,o=new mr(i.manager);o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}var r=this.textures,i=new eh[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=(new n).fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i}}),Object.assign(gi.prototype,{load:function(t,e,n,r){var i=this,o=new mr(i.manager);o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new j,n=t.data.index;if(void 0!==n){var r=new hh[n.type](n.array);e.setIndex(new T(r,1))}var i=t.data.attributes;for(var a in i){var s=i[a],r=new hh[s.type](s.array);e.addAttribute(a,new T(r,s.itemSize,s.normalized))}var u=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==u)for(var c=0,l=u.length;c!==l;++c){var h=u[c];e.addGroup(h.start,h.count,h.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var p=new o;void 0!==f.center&&p.fromArray(f.center),e.boundingSphere=new d(p,f.radius)}return e}});var hh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};vi.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},Object.assign(vi.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t={NoBlending:pa,NormalBlending:ma,AdditiveBlending:ga,SubtractiveBlending:va,MultiplyBlending:ya,CustomBlending:_a},e=new g,n=new br,r=new mi;return function(i,o,a){function s(t,e,r,i,s){var c,l=o+t,h=vi.Handlers.get(l);null!==h?c=h.load(l):(n.setCrossOrigin(a),c=n.load(l)),void 0!==e&&(c.repeat.fromArray(e),1!==e[0]&&(c.wrapS=as),1!==e[1]&&(c.wrapT=as)),void 0!==r&&c.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(c.wrapS=as),"mirror"===i[0]&&(c.wrapS=us),"repeat"===i[1]&&(c.wrapT=as),"mirror"===i[1]&&(c.wrapT=us)),void 0!==s&&(c.anisotropy=s);var f=Su.generateUUID();return u[f]=c,f}var u={},c={uuid:Su.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(h).getHex();break;case"colorSpecular":c.specular=e.fromArray(h).getHex();break;case"colorEmissive":c.emissive=e.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=sa;break;case"doubleSided":c.side=ua;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":h===!0&&(c.vertexColors=da),"face"===h&&(c.vertexColors=fa);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(u),r.parse(c)}}()});var fh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};Object.assign(yi.prototype,{load:function(t,e,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:fh.extractUrlBase(t),a=new mr(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,o);e(u.geometry,u.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,e){function r(t,e){return t&1<<e}var i,a,s,u,c,l,h,f,d,p,m,v,y,_,b,x,w,M,T,S,P,C,A,L,O,R,k,N=t.faces,I=t.vertices,D=t.normals,j=t.colors,z=t.scale,U=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&U++;for(i=0;i<U;i++)e.faceVertexUvs[i]=[]}for(u=0,c=I.length;u<c;)M=new o,M.x=I[u++]*z,M.y=I[u++]*z,M.z=I[u++]*z,e.vertices.push(M);for(u=0,c=N.length;u<c;)if(p=N[u++],m=r(p,0),v=r(p,1),y=r(p,3),_=r(p,4),b=r(p,5),x=r(p,6),w=r(p,7),m){if(S=new E,S.a=N[u],S.b=N[u+1],S.c=N[u+3],P=new E,P.a=N[u+1],P.b=N[u+2],P.c=N[u+3],u+=4,v&&(d=N[u++],S.materialIndex=d,P.materialIndex=d),s=e.faces.length,y)for(i=0;i<U;i++)for(L=t.uvs[i],e.faceVertexUvs[i][s]=[],e.faceVertexUvs[i][s+1]=[],a=0;a<4;a++)f=N[u++],R=L[2*f],k=L[2*f+1],O=new n(R,k),2!==a&&e.faceVertexUvs[i][s].push(O),0!==a&&e.faceVertexUvs[i][s+1].push(O);if(_&&(h=3*N[u++],S.normal.set(D[h++],D[h++],D[h]),P.normal.copy(S.normal)),b)for(i=0;i<4;i++)h=3*N[u++],A=new o(D[h++],D[h++],D[h]),2!==i&&S.vertexNormals.push(A),0!==i&&P.vertexNormals.push(A);if(x&&(l=N[u++],C=j[l],S.color.setHex(C),P.color.setHex(C)),w)for(i=0;i<4;i++)l=N[u++],C=j[l],2!==i&&S.vertexColors.push(new g(C)),0!==i&&P.vertexColors.push(new g(C));e.faces.push(S),e.faces.push(P)}else{if(T=new E,T.a=N[u++],T.b=N[u++],T.c=N[u++],v&&(d=N[u++],T.materialIndex=d),s=e.faces.length,y)for(i=0;i<U;i++)for(L=t.uvs[i],e.faceVertexUvs[i][s]=[],a=0;a<3;a++)f=N[u++],R=L[2*f],k=L[2*f+1],O=new n(R,k),e.faceVertexUvs[i][s].push(O);if(_&&(h=3*N[u++],T.normal.set(D[h++],D[h++],D[h])),b)for(i=0;i<3;i++)h=3*N[u++],A=new o(D[h++],D[h++],D[h]),T.vertexNormals.push(A);if(x&&(l=N[u++],T.color.setHex(j[l])),w)for(i=0;i<3;i++)l=N[u++],T.vertexColors.push(new g(j[l]));e.faces.push(T)}}function e(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var r=0,i=t.skinWeights.length;r<i;r+=n){var o=t.skinWeights[r],a=n>1?t.skinWeights[r+1]:0,s=n>2?t.skinWeights[r+2]:0,c=n>3?t.skinWeights[r+3]:0;e.skinWeights.push(new u(o,a,s,c))}if(t.skinIndices)for(var r=0,i=t.skinIndices.length;r<i;r+=n){var l=t.skinIndices[r],h=n>1?t.skinIndices[r+1]:0,f=n>2?t.skinIndices[r+2]:0,d=n>3?t.skinIndices[r+3]:0;e.skinIndices.push(new u(l,h,f,d))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function r(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var r=0,i=t.morphTargets.length;r<i;r++){e.morphTargets[r]={},e.morphTargets[r].name=t.morphTargets[r].name,e.morphTargets[r].vertices=[];for(var a=e.morphTargets[r].vertices,s=t.morphTargets[r].vertices,u=0,c=s.length;u<c;u+=3){var l=new o;l.x=s[u]*n,l.y=s[u+1]*n,l.z=s[u+2]*n,a.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=e.faces,f=t.morphColors[0].colors,r=0,i=h.length;r<i;r++)h[r].color.fromArray(f,3*r)}}function i(t,e){var n=[],r=[];void 0!==t.animation&&r.push(t.animation),void 0!==t.animations&&(t.animations.length?r=r.concat(t.animations):r.push(t.animations));for(var i=0;i<r.length;i++){var o=pi.parseAnimation(r[i],e.bones);o&&n.push(o)}if(e.morphTargets){var a=pi.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a)}n.length>0&&(e.animations=n)}return function(n,o){void 0!==n.data&&(n=n.data),void 0!==n.scale?n.scale=1/n.scale:n.scale=1;var a=new M;if(t(n,a),e(n,a),r(n,a),i(n,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===n.materials||0===n.materials.length)return{geometry:a};var s=vi.prototype.initMaterials(n.materials,o,this.crossOrigin);return{geometry:a,materials:s}}}()}),Object.assign(_i.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this,o=new mr(i.manager);o.load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):void i.parse(o,e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new Wr).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new yi,i=new gi,o=0,a=t.length;o<a;o++){var s,u=t[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new th[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new th[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new th[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new th[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new th[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new th[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new th[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new th[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new th[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new th[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new th[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new th[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,h=u.shapes.length;l<h;l++){var f=e[u.shapes[l]];c.push(f)}s=new th[u.type](c,u.curveSegments);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),n[u.uuid]=s}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new mi;r.setTextures(e);for(var i=0,o=t.length;i<o;i++){var a=t[i];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(r.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=pi.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),a.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemEnd(t),r.manager.itemError(t)})}var r=this,i={};if(void 0!==t&&t.length>0){var o=new pr(e),a=new yr(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;i[c.uuid]=n(l)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a=t[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var u=new s(e[a.image]);u.needsUpdate=!0,u.uuid=a.uuid,void 0!==a.name&&(u.name=a.name),void 0!==a.mapping&&(u.mapping=n(a.mapping,dh)),void 0!==a.offset&&u.offset.fromArray(a.offset),void 0!==a.repeat&&u.repeat.fromArray(a.repeat),void 0!==a.center&&u.center.fromArray(a.center),void 0!==a.rotation&&(u.rotation=a.rotation),void 0!==a.wrap&&(u.wrapS=n(a.wrap[0],ph),u.wrapT=n(a.wrap[1],ph)),void 0!==a.format&&(u.format=a.format),void 0!==a.minFilter&&(u.minFilter=n(a.minFilter,mh)),void 0!==a.magFilter&&(u.magFilter=n(a.magFilter,mh)),void 0!==a.anisotropy&&(u.anisotropy=a.anisotropy),void 0!==a.flipY&&(u.flipY=a.flipY),r[a.uuid]=u}return r},parseObject:function(t,e,n){function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var o;switch(t.type){case"Scene":o=new Se,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new g(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Te(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Me(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new be(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new w(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new ti(t.color,t.intensity);break;case"DirectionalLight":o=new $r(t.color,t.intensity);break;case"PointLight":o=new Jr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new ei(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Kr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Yr(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(t.geometry),s=i(t.material);o=a.bones&&a.bones.length>0?new Re(a,s):new Z(a,s);break;case"LOD":o=new Ae;break;case"Line":o=new Ne(r(t.geometry),i(t.material),t.mode);break;case"LineLoop":o=new De(r(t.geometry),i(t.material));break;case"LineSegments":o=new Ie(r(t.geometry),i(t.material));break;case"PointCloud":case"Points":o=new ze(r(t.geometry),i(t.material));break;case"Sprite":o=new Ce(i(t.material));break;case"Group":o=new Ue;break;default:o=new b}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var u=t.children,c=0;c<u.length;c++)o.add(this.parseObject(u[c],e,n));if("LOD"===t.type)for(var l=t.levels,h=0;h<l.length;h++){var f=l[h],d=o.getObjectByProperty("uuid",f.object);void 0!==d&&o.addLevel(d,f.distance)}return o}});var dh={UVMapping:Qa,CubeReflectionMapping:$a,CubeRefractionMapping:ts,EquirectangularReflectionMapping:es,EquirectangularRefractionMapping:ns,SphericalReflectionMapping:rs,CubeUVReflectionMapping:is,CubeUVRefractionMapping:os},ph={RepeatWrapping:as,ClampToEdgeWrapping:ss,MirroredRepeatWrapping:us},mh={NearestFilter:cs,NearestMipMapNearestFilter:ls,NearestMipMapLinearFilter:hs,LinearFilter:fs,LinearMipMapNearestFilter:ds,LinearMipMapLinearFilter:ps};bi.prototype={constructor:bi,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,o=nh.get(t);return void 0!==o?(i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o):void fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(n){nh.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(xi.prototype,{moveTo:function(t,e){this.currentPath=new Vr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Wr;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],u=-u,s=e[i],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var l=c*(t.x-a.x)-u*(t.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Ql.isClockWise,o=this.subPaths;if(0===o.length)return[];if(e===!0)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],u=new Wr,u.curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=t?!l:l;var h,f=[],d=[],p=[],m=0;
d[m]=void 0,p[m]=[];for(var g=0,v=o.length;g<v;g++)s=o[g],h=s.getPoints(),a=i(h),a=t?!a:a,a?(!l&&d[m]&&m++,d[m]={s:new Wr,p:h},d[m].s.curves=s.curves,l&&m++,p[m]=[]):p[m].push({h:s,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var y=!1,_=[],b=0,x=d.length;b<x;b++)f[b]=[];for(var b=0,x=d.length;b<x;b++)for(var w=p[b],E=0;E<w.length;E++){for(var M=w[E],T=!0,S=0;S<d.length;S++)r(M.p,d[S].p)&&(b!==S&&_.push({froms:b,tos:S,hole:E}),T?(T=!1,f[S].push(M)):y=!0);T&&f[b].push(M)}_.length>0&&(y||(p=f))}for(var P,g=0,C=d.length;g<C;g++){u=d[g].s,c.push(u),P=p[g];for(var A=0,L=P.length;A<L;A++)u.holes.push(P[A].h)}return c}}),Object.assign(wi.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);for(var r=[],i=Ei(t,e,n,this.data),o=0,a=i.length;o<a;o++)Array.prototype.push.apply(r,i[o].toShapes());return r}}),Object.assign(Ti.prototype,{load:function(t,e,n,r){var i=this,o=new mr(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)},n,r)},parse:function(t){return new wi(t)},setPath:function(t){return this.path=t,this}});var gh,vh={getContext:function(){return void 0===gh&&(gh=new(window.AudioContext||window.webkitAudioContext)),gh},setContext:function(t){gh=t}};Object.assign(Si.prototype,{load:function(t,e,n,r){var i=new mr(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){var n=vh.getContext();n.decodeAudioData(t,function(t){e(t)})},n,r)}}),Object.assign(Pi.prototype,{update:function(){var t,e,n,i,o,a,s,u,c=new r,l=new r;return function(r){var h=t!==this||e!==r.focus||n!==r.fov||i!==r.aspect*this.aspect||o!==r.near||a!==r.far||s!==r.zoom||u!==this.eyeSep;if(h){t=this,e=r.focus,n=r.fov,i=r.aspect*this.aspect,o=r.near,a=r.far,s=r.zoom;var f=r.projectionMatrix.clone();u=this.eyeSep/2;var d,p,m=u*o/e,g=o*Math.tan(Su.DEG2RAD*n*.5)/s;l.elements[12]=-u,c.elements[12]=u,d=-g*i+m,p=g*i+m,f.elements[0]=2*o/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(f),d=-g*i-m,p=g*i-m,f.elements[0]=2*o/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(r.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(r.matrixWorld).multiply(c)}}()}),Ci.prototype=Object.create(b.prototype),Ci.prototype.constructor=Ci,Ai.prototype=Object.assign(Object.create(b.prototype),{constructor:Ai,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01)},updateMatrixWorld:function(){var t=new o,e=new i,n=new o,r=new o;return function(i){b.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Li.prototype=Object.assign(Object.create(b.prototype),{constructor:Li,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.isPlaying===!0&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Oi.prototype=Object.assign(Object.create(Li.prototype),{constructor:Oi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new o;return function(e){b.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Ri.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(ki.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){i.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}});var yh="\\[\\]\\.:\\/";Object.assign(Ni.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ii,{Composite:Ni,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ii.Composite(t,e,n):new Ii(t,e,n)},sanitizeNodeName:function(){var t=new RegExp("["+yh+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+yh+"]",e="[^"+yh.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),r=/(WCOD+)?/.source.replace("WCOD",e),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(t){var e=a.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&r!==-1){var i=n.nodeName.substring(r+1);s.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(Ii.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Ii.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0===s){var u=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",t)}var c=this.Versioning.None;void 0!==t.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ii.prototype,{_getValue_unbound:Ii.prototype.getValue,_setValue_unbound:Ii.prototype.setValue}),Object.assign(Di.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=r[f];if(void 0===d){d=e++,r[f]=d,t.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Ii(h,i[p],o[p]))}else if(d<n){u=t[d];var g=--n,v=t[g];r[v.uuid]=d,t[d]=v,r[f]=g,t[g]=h;for(var p=0,m=s;p!==m;++p){var y=a[p],_=y[g],b=y[d];y[d]=_,void 0===b&&(b=new Ii(h,i[p],o[p])),y[g]=b}}else t[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];n[h.uuid]=c,t[c]=h,n[u]=l,t[l]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[l],g=p[c];p[c]=m,p[l]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var h=--n,f=t[h],d=--e,p=t[d];r[f.uuid]=l,t[l]=f,r[p.uuid]=h,t[h]=p,t.pop();for(var m=0,g=o;m!==g;++m){var v=i[m],y=v[h],_=v[d];v[l]=y,v[h]=_,v.pop()}}else{var d=--e,p=t[d];r[p.uuid]=l,t[l]=p,t.pop();for(var m=0,g=o;m!==g;++m){var v=i[m];v[l]=v[d],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(l);for(var h=c,f=s.length;h!==f;++h){var d=s[h];l[h]=new Ii(d,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=t[a];e[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(ji.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(a),c[l].accumulate(r,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===iu){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=r===au;if(i===-1&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=hu,r.endingEnd=hu):(t?r.endingStart=this.zeroSlopeAtStart?hu:lu:r.endingStart=fu,e?r.endingEnd=this.zeroSlopeAtEnd?hu:lu:r.endingEnd=fu)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),zi.prototype=Object.assign(Object.create(e.prototype),{constructor:zi,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)o[l]=d;else{if(d=o[l],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[l].binding.parsedPath;d=new ki(Ii.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null;var l=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete l[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i];t:{for(var c in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new li(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?pi.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new ji(this,i,e);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?pi.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s._update(r,t,i,o)}for(var u=this._bindings,c=this._nActiveBindings,a=0;a!==c;++a)u[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ui.prototype.clone=function(){return new Ui(void 0===this.value.clone?this.value:this.value.clone())},Bi.prototype=Object.assign(Object.create(j.prototype),{constructor:Bi,isInstancedBufferGeometry:!0,copy:function(t){return j.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Fi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Fi.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Object.defineProperty(Hi.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(Hi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Gi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Gi,isInstancedInterleavedBuffer:!0,copy:function(t){return Hi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Vi.prototype=Object.assign(Object.create(T.prototype),{constructor:Vi,isInstancedBufferAttribute:!0,copy:function(t){return T.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Wi.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.");
},intersectObject:function(t,e,n){var r=n||[];return Yi(t,this,r,e),r.sort(qi),r},intersectObjects:function(t,e,n){var r=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)Yi(t[i],this,r,e);return r.sort(qi),r}}),Object.assign(Zi.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Xi.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Su.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Ki.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(Ji.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new n),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new n),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new n),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new n),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Qi.prototype=Object.create(b.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isImmediateRenderObject=!0,$i.prototype=Object.create(Ie.prototype),$i.prototype.constructor=$i,$i.prototype.update=function(){var t=new o,e=new o,n=new a;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,c=0,l=0,h=u.length;l<h;l++)for(var f=u[l],d=0,p=f.vertexNormals.length;d<p;d++){var m=s[f[r[d]]],g=f.vertexNormals[d];t.copy(m).applyMatrix4(i),e.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(a&&a.isBufferGeometry)for(var v=a.attributes.position,y=a.attributes.normal,c=0,d=0,p=v.count;d<p;d++)t.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1;o.needsUpdate=!0}}(),to.prototype=Object.create(b.prototype),to.prototype.constructor=to,to.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},to.prototype.update=function(){var t=new o,e=new o;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),no.prototype=Object.create(Ie.prototype),no.prototype.constructor=no,no.prototype.updateMatrixWorld=function(){var t=new o,e=new r,n=new r;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,b.prototype.updateMatrixWorld.call(this,r)}}(),ro.prototype=Object.create(Z.prototype),ro.prototype.constructor=ro,ro.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ro.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},io.prototype=Object.create(b.prototype),io.prototype.constructor=io,io.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},io.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=t,r[1]=-e,r[2]=0,r[3]=t,r[4]=e,r[5]=0,r[6]=-t,r[7]=e,r[8]=0,r[9]=-t,r[10]=-e,r[11]=0,r[12]=t,r[13]=-e,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},oo.prototype=Object.create(b.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},oo.prototype.update=function(){var t=new o,e=new g,n=new g;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),ao.prototype=Object.create(Ie.prototype),ao.prototype.constructor=ao,so.prototype=Object.create(Ie.prototype),so.prototype.constructor=so,uo.prototype=Object.create(Ie.prototype),uo.prototype.constructor=uo,uo.prototype.update=function(){var t=new o,e=new o,n=new a;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,c=0,l=s.length;c<l;c++){var h=s[c],f=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}i.needsUpdate=!0}}(),co.prototype=Object.create(b.prototype),co.prototype.constructor=co,co.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},co.prototype.update=function(){var t=new o,e=new o,n=new o;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),lo.prototype=Object.create(Ie.prototype),lo.prototype.constructor=lo,lo.prototype.update=function(){function t(t,o,a,s){r.set(o,a,s).unproject(i);var u=n[t];if(void 0!==u)for(var c=e.getAttribute("position"),l=0,h=u.length;l<h;l++)c.setXYZ(u[l],r.x,r.y,r.z)}var e,n,r=new o,i=new x;return function(){e=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-o,-1),t("n2",r,-o,-1),t("n3",-r,o,-1),t("n4",r,o,-1),t("f1",-r,-o,1),t("f2",r,-o,1),t("f3",-r,o,1),t("f4",r,o,1),t("u1",.7*r,1.1*o,-1),t("u2",.7*-r,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.getAttribute("position").needsUpdate=!0}}(),ho.prototype=Object.create(Ie.prototype),ho.prototype.constructor=ho,ho.prototype.update=function(){var t=new f;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ho.prototype.setFromObject=function(t){return this.object=t,this.update(),this},fo.prototype=Object.create(Ie.prototype),fo.prototype.constructor=fo,fo.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),b.prototype.updateMatrixWorld.call(this,t))},po.prototype=Object.create(Ne.prototype),po.prototype.constructor=po,po.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),b.prototype.updateMatrixWorld.call(this,t)};var _h,bh;mo.prototype=Object.create(b.prototype),mo.prototype.constructor=mo,mo.prototype.setDirection=function(){var t,e=new o;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),mo.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},mo.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},go.prototype=Object.create(Ie.prototype),go.prototype.constructor=go;var xh=0,wh=1;xr.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(xr.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Gr.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new M,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new o(i.x,i.y,i.z||0))}return e}}),Object.assign(Vr.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),jo.prototype=Object.create(Tr.prototype),zo.prototype=Object.create(Tr.prototype),Uo.prototype=Object.create(Tr.prototype),Object.assign(Uo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ao.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},no.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(vi.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),fh.extractUrlBase(t)}}),Object.assign(Ji.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(f.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),q.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Su,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Su.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Su.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(r.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new o),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),p.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},i.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(W.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Y.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Y,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Y.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Y.getNormal(t,e,n,r)}}),Object.assign(Wr.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Un(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Xn(this,t)}}),Object.assign(n.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(o.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(M.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(b.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(b.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ae.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Le.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(xr.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),be.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(qr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(T.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(j.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(j.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Bn.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ui.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(H.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new g}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===ca}}}),Object.defineProperties(cr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(V.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ee.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},
supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Ee.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(pe.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(c.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(we.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Li.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new Si;return n.load(t,function(t){e.setBuffer(t)}),this},Ri.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ci.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var Eh={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},Mh={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new br;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new _r;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},Th={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};t.WebGLRenderTargetCube=l,t.WebGLRenderTarget=c,t.WebGLRenderer=Ee,t.ShaderLib=jl,t.UniformsLib=Dl,t.UniformsUtils=Nl,t.ShaderChunk=kl,t.FogExp2=Me,t.Fog=Te,t.Scene=Se,t.Sprite=Ce,t.LOD=Ae,t.SkinnedMesh=Re,t.Skeleton=Le,t.Bone=Oe,t.Mesh=Z,t.LineSegments=Ie,t.LineLoop=De,t.Line=Ne,t.Points=ze,t.Group=Ue,t.VideoTexture=Be,t.DataTexture=h,t.CompressedTexture=Fe,t.CubeTexture=at,t.CanvasTexture=me,t.DepthTexture=He,t.Texture=s,t.CompressedTextureLoader=gr,t.DataTextureLoader=vr,t.CubeTextureLoader=_r,t.TextureLoader=br,t.ObjectLoader=_i,t.MaterialLoader=mi,t.BufferGeometryLoader=gi,t.DefaultLoadingManager=rh,t.LoadingManager=pr,t.JSONLoader=yi,t.ImageLoader=yr,t.ImageBitmapLoader=bi,t.FontLoader=Ti,t.FileLoader=mr,t.Loader=vi,t.LoaderUtils=fh,t.Cache=nh,t.AudioLoader=Si,t.SpotLightShadow=Xr,t.SpotLight=Kr,t.PointLight=Jr,t.RectAreaLight=ei,t.HemisphereLight=Yr,t.DirectionalLightShadow=Qr,t.DirectionalLight=$r,t.AmbientLight=ti,t.LightShadow=Zr,t.Light=qr,t.StereoCamera=Pi,t.PerspectiveCamera=be,t.OrthographicCamera=w,t.CubeCamera=Ci,t.ArrayCamera=xe,t.Camera=x,t.AudioListener=Ai,t.PositionalAudio=Oi,t.AudioContext=vh,t.AudioAnalyser=Ri,t.Audio=Li,t.VectorKeyframeTrack=di,t.StringKeyframeTrack=ni,t.QuaternionKeyframeTrack=ai,t.NumberKeyframeTrack=ui,t.ColorKeyframeTrack=si,t.BooleanKeyframeTrack=ri,t.PropertyMixer=ki,t.PropertyBinding=Ii,t.KeyframeTrack=fi,t.AnimationUtils=lh,t.AnimationObjectGroup=Di,t.AnimationMixer=zi,t.AnimationClip=pi,t.Uniform=Ui,t.InstancedBufferGeometry=Bi,t.BufferGeometry=j,t.Geometry=M,t.InterleavedBufferAttribute=Fi,t.InstancedInterleavedBuffer=Gi,t.InterleavedBuffer=Hi,t.InstancedBufferAttribute=Vi,t.Face3=E,t.Object3D=b,t.Raycaster=Wi,t.Layers=_,t.EventDispatcher=e,t.Clock=Zi,t.QuaternionLinearInterpolant=oi,t.LinearInterpolant=li,t.DiscreteInterpolant=hi,t.CubicInterpolant=ci,t.Interpolant=ii,t.Triangle=Y,t.Math=Su,t.Spherical=Xi,t.Cylindrical=Ki,t.Plane=p,t.Frustum=m,t.Sphere=d,t.Ray=W,t.Matrix4=r,t.Matrix3=a,t.Box3=f,t.Box2=Ji,t.Line3=q,t.Euler=y,t.Vector4=u,t.Vector3=o,t.Vector2=n,t.Quaternion=i,t.Color=g,t.ImmediateRenderObject=Qi,t.VertexNormalsHelper=$i,t.SpotLightHelper=to,t.SkeletonHelper=no,t.PointLightHelper=ro,t.RectAreaLightHelper=io,t.HemisphereLightHelper=oo,t.GridHelper=ao,t.PolarGridHelper=so,t.FaceNormalsHelper=uo,t.DirectionalLightHelper=co,t.CameraHelper=lo,t.BoxHelper=ho,t.Box3Helper=fo,t.PlaneHelper=po,t.ArrowHelper=mo,t.AxesHelper=go,t.Shape=Wr,t.Path=Vr,t.ShapePath=xi,t.Font=wi,t.CurvePath=Gr,t.Curve=xr,t.ShapeUtils=Ql,t.WebGLUtils=_e,t.WireframeGeometry=Ge,t.ParametricGeometry=Ve,t.ParametricBufferGeometry=We,t.TetrahedronGeometry=Ze,t.TetrahedronBufferGeometry=Xe,t.OctahedronGeometry=Ke,t.OctahedronBufferGeometry=Je,t.IcosahedronGeometry=Qe,t.IcosahedronBufferGeometry=$e,t.DodecahedronGeometry=tn,t.DodecahedronBufferGeometry=en,t.PolyhedronGeometry=qe,t.PolyhedronBufferGeometry=Ye,t.TubeGeometry=nn,t.TubeBufferGeometry=rn,t.TorusKnotGeometry=on,t.TorusKnotBufferGeometry=an,t.TorusGeometry=sn,t.TorusBufferGeometry=un,t.TextGeometry=Fn,t.TextBufferGeometry=Hn,t.SphereGeometry=Gn,t.SphereBufferGeometry=Vn,t.RingGeometry=Wn,t.RingBufferGeometry=qn,t.PlaneGeometry=B,t.PlaneBufferGeometry=F,t.LatheGeometry=Yn,t.LatheBufferGeometry=Zn,t.ShapeGeometry=Xn,t.ShapeBufferGeometry=Kn,t.ExtrudeGeometry=Un,t.ExtrudeBufferGeometry=Bn,t.EdgesGeometry=Qn,t.ConeGeometry=er,t.ConeBufferGeometry=nr,t.CylinderGeometry=$n,t.CylinderBufferGeometry=tr,t.CircleGeometry=rr,t.CircleBufferGeometry=ir,t.BoxGeometry=z,t.BoxBufferGeometry=U,t.ShadowMaterial=or,t.SpriteMaterial=Pe,t.RawShaderMaterial=ar,t.ShaderMaterial=V,t.PointsMaterial=je,t.MeshPhysicalMaterial=ur,t.MeshStandardMaterial=sr,t.MeshPhongMaterial=cr,t.MeshToonMaterial=lr,t.MeshNormalMaterial=hr,t.MeshLambertMaterial=fr,t.MeshDepthMaterial=fe,t.MeshDistanceMaterial=de,t.MeshBasicMaterial=G,t.LineDashedMaterial=dr;t.LineBasicMaterial=ke;t.Material=H,t.Float64BufferAttribute=N,t.Float32BufferAttribute=k,t.Uint32BufferAttribute=R,t.Int32BufferAttribute=O,t.Uint16BufferAttribute=L,t.Int16BufferAttribute=A,t.Uint8ClampedBufferAttribute=C,t.Uint8BufferAttribute=P,t.Int8BufferAttribute=S,t.BufferAttribute=T,t.ArcCurve=Er,t.CatmullRomCurve3=Tr,t.CubicBezierCurve=Dr,t.CubicBezierCurve3=jr,t.EllipseCurve=wr,t.LineCurve=zr,t.LineCurve3=Ur,t.QuadraticBezierCurve=Br,t.QuadraticBezierCurve3=Fr,t.SplineCurve=Hr,t.REVISION=Xo,t.MOUSE=Ko,t.CullFaceNone=Jo,t.CullFaceBack=Qo,t.CullFaceFront=$o,t.CullFaceFrontBack=ta,t.FrontFaceDirectionCW=ea,t.FrontFaceDirectionCCW=na,t.BasicShadowMap=ra,t.PCFShadowMap=ia,t.PCFSoftShadowMap=oa,t.FrontSide=aa,t.BackSide=sa,t.DoubleSide=ua,t.FlatShading=ca,t.SmoothShading=la,t.NoColors=ha,t.FaceColors=fa,t.VertexColors=da,t.NoBlending=pa,t.NormalBlending=ma,t.AdditiveBlending=ga,t.SubtractiveBlending=va,t.MultiplyBlending=ya,t.CustomBlending=_a,t.AddEquation=ba,t.SubtractEquation=xa,t.ReverseSubtractEquation=wa,t.MinEquation=Ea,t.MaxEquation=Ma,t.ZeroFactor=Ta,t.OneFactor=Sa,t.SrcColorFactor=Pa,t.OneMinusSrcColorFactor=Ca,t.SrcAlphaFactor=Aa,t.OneMinusSrcAlphaFactor=La,t.DstAlphaFactor=Oa,t.OneMinusDstAlphaFactor=Ra,t.DstColorFactor=ka,t.OneMinusDstColorFactor=Na,t.SrcAlphaSaturateFactor=Ia,t.NeverDepth=Da,t.AlwaysDepth=ja,t.LessDepth=za,t.LessEqualDepth=Ua,t.EqualDepth=Ba,t.GreaterEqualDepth=Fa,t.GreaterDepth=Ha,t.NotEqualDepth=Ga,t.MultiplyOperation=Va,t.MixOperation=Wa,t.AddOperation=qa,t.NoToneMapping=Ya,t.LinearToneMapping=Za,t.ReinhardToneMapping=Xa,t.Uncharted2ToneMapping=Ka,t.CineonToneMapping=Ja,t.UVMapping=Qa,t.CubeReflectionMapping=$a,t.CubeRefractionMapping=ts,t.EquirectangularReflectionMapping=es,t.EquirectangularRefractionMapping=ns,t.SphericalReflectionMapping=rs,t.CubeUVReflectionMapping=is,t.CubeUVRefractionMapping=os,t.RepeatWrapping=as,t.ClampToEdgeWrapping=ss,t.MirroredRepeatWrapping=us,t.NearestFilter=cs,t.NearestMipMapNearestFilter=ls,t.NearestMipMapLinearFilter=hs,t.LinearFilter=fs,t.LinearMipMapNearestFilter=ds,t.LinearMipMapLinearFilter=ps,t.UnsignedByteType=ms,t.ByteType=gs,t.ShortType=vs,t.UnsignedShortType=ys,t.IntType=_s,t.UnsignedIntType=bs,t.FloatType=xs,t.HalfFloatType=ws,t.UnsignedShort4444Type=Es,t.UnsignedShort5551Type=Ms,t.UnsignedShort565Type=Ts,t.UnsignedInt248Type=Ss,t.AlphaFormat=Ps,t.RGBFormat=Cs,t.RGBAFormat=As,t.LuminanceFormat=Ls,t.LuminanceAlphaFormat=Os,t.RGBEFormat=Rs,t.DepthFormat=ks,t.DepthStencilFormat=Ns,t.RGB_S3TC_DXT1_Format=Is,t.RGBA_S3TC_DXT1_Format=Ds,t.RGBA_S3TC_DXT3_Format=js,t.RGBA_S3TC_DXT5_Format=zs,t.RGB_PVRTC_4BPPV1_Format=Us,t.RGB_PVRTC_2BPPV1_Format=Bs,t.RGBA_PVRTC_4BPPV1_Format=Fs,t.RGBA_PVRTC_2BPPV1_Format=Hs,t.RGB_ETC1_Format=Gs,t.RGBA_ASTC_4x4_Format=Vs,t.RGBA_ASTC_5x4_Format=Ws,t.RGBA_ASTC_5x5_Format=qs,t.RGBA_ASTC_6x5_Format=Ys,t.RGBA_ASTC_6x6_Format=Zs,t.RGBA_ASTC_8x5_Format=Xs,t.RGBA_ASTC_8x6_Format=Ks,t.RGBA_ASTC_8x8_Format=Js,t.RGBA_ASTC_10x5_Format=Qs,t.RGBA_ASTC_10x6_Format=$s,t.RGBA_ASTC_10x8_Format=tu,t.RGBA_ASTC_10x10_Format=eu,t.RGBA_ASTC_12x10_Format=nu,t.RGBA_ASTC_12x12_Format=ru,t.LoopOnce=iu,t.LoopRepeat=ou,t.LoopPingPong=au,t.InterpolateDiscrete=su,t.InterpolateLinear=uu,t.InterpolateSmooth=cu,t.ZeroCurvatureEnding=lu,t.ZeroSlopeEnding=hu,t.WrapAroundEnding=fu,t.TrianglesDrawMode=du,t.TriangleStripDrawMode=pu,t.TriangleFanDrawMode=mu,t.LinearEncoding=gu,t.sRGBEncoding=vu,t.GammaEncoding=yu,t.RGBEEncoding=_u,t.LogLuvEncoding=bu,t.RGBM7Encoding=xu,t.RGBM16Encoding=wu,t.RGBDEncoding=Eu,t.BasicDepthPacking=Mu,t.RGBADepthPacking=Tu,t.CubeGeometry=z,t.Face4=vo,t.LineStrip=xh,t.LinePieces=wh,t.MeshFaceMaterial=yo,t.MultiMaterial=_o,t.PointCloud=bo,t.Particle=xo,t.ParticleSystem=wo,t.PointCloudMaterial=Eo,t.ParticleBasicMaterial=Mo,t.ParticleSystemMaterial=To,t.Vertex=So,t.DynamicBufferAttribute=Po,t.Int8Attribute=Co,t.Uint8Attribute=Ao,t.Uint8ClampedAttribute=Lo,t.Int16Attribute=Oo,t.Uint16Attribute=Ro,t.Int32Attribute=ko,t.Uint32Attribute=No,t.Float32Attribute=Io,t.Float64Attribute=Do,t.ClosedSplineCurve3=jo,t.SplineCurve3=zo,t.Spline=Uo,t.AxisHelper=Bo,t.BoundingBoxHelper=Fo,t.EdgesHelper=Ho,t.WireframeHelper=Go,t.XHRLoader=Vo,t.BinaryTextureLoader=Wo,t.GeometryUtils=Eh,t.ImageUtils=Mh,t.Projector=qo,t.CanvasRenderer=Yo,t.SceneUtils=Th,t.LensFlare=Zo,Object.defineProperty(t,"__esModule",{value:!0})})},{}],329:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=x(r,o,4);var a=!C(n)&&b.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=w(n,r);for(var i=P(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=P(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(f.call(r,a,s),b.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=k.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||c,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);n--;)o=k[n],o in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)}var a=this,s=a._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,f=u.slice,d=c.toString,p=c.hasOwnProperty,m=Array.isArray,g=Object.keys,v=l.bind,y=Object.create,_=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=b),n._=b):a._=b,b.VERSION="1.8.3";var x=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?b.identity:b.isFunction(t)?x(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return w(t,e,1/0)};var E=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},M=function(t){if(!b.isObject(t))return{};if(y)return y(t);_.prototype=t;var e=new _;return _.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,P=T("length"),C=function(t){var e=P(t);return"number"==typeof e&&e>=0&&e<=S};b.each=b.forEach=function(t,e,n){e=x(e,n);var r,i;if(C(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,e,n){e=w(e,n);for(var r=!C(t)&&b.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var r;if(r=C(t)?b.findIndex(t,e,n):b.findKey(t,e,n),void 0!==r&&r!==-1)return t[r]},b.filter=b.select=function(t,e,n){var r=[];return e=w(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(w(e)),n)},b.every=b.all=function(t,e,n){e=w(e,n);for(var r=!C(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,n){e=w(e,n);for(var r=!C(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,r){return C(t)||(t=b.values(t)),("number"!=typeof n||r)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=f.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=C(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)r=t[s],r>o&&(o=r)}else e=w(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},b.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=C(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)r=t[s],r<o&&(o=r)}else e=w(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(i<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},b.shuffle=function(t){for(var e,n=C(t)?t:b.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=b.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},b.sample=function(t,e,n){return null==e||n?(C(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=w(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,r){var i={};return n=w(n,r),b.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};b.groupBy=A(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=A(function(t,e,n){t[n]=e}),b.countBy=A(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?f.call(t):C(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:C(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=w(e,n);var r=[],i=[];return b.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var L=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=P(t);a<s;a++){var u=t[a];if(C(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=L(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};b.flatten=function(t,e){return L(t,e,!1)},b.without=function(t){return b.difference(t,f.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=P(t);a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?b.contains(o,c)||(o.push(c),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(L(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=P(t);r<i;r++){var o=t[r];if(!b.contains(e,o)){for(var a=1;a<n&&b.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},b.difference=function(t){var e=L(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,P).length||0,n=Array(e),r=0;r<e;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=P(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,e,n,r){n=w(n,r,1);for(var i=n(e),o=0,a=P(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var O=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=M(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,f.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),r=function(){return O(t,r,e,this,n.concat(f.call(arguments)))};return r},b.partial=function(t){var e=f.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===b?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(t,n,this,this,o)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(t,e){var n=f.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=b.now();s||n.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},b.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=b.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},b.once=b.partial(b.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return R&&o(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return R&&o(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=w(e,n);for(var r,i=b.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(t,e,n){e=w(e,n);for(var r,i=b.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;b.isFunction(e)?(i=b.allKeys(a),r=x(e,n)):(i=L(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(L(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=E(b.allKeys,!0),b.create=function(t,e){var n=M(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var N=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!N(t[u],e[u],n,r))return!1}else{var c,l=b.keys(t);if(u=l.length,b.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!b.has(e,c)||!N(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return N(t,e)},b.isEmpty=function(t){return null==t||(C(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=m||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&p.call(t,e)},b.noConflict=function(){return a._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=T,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=x(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=b.invert(I),j=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=j(I),b.unescape=j(D),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var z=0;b.uniqueId=function(t){var e=++z+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+B[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(F,H),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,b)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var G=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),G(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),
"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],G(this,n)}}),b.each(["concat","join","slice"],function(t){var e=u[t];b.prototype[t]=function(){return G(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],330:[function(t,e,n){"use strict";var r=function(){};e.exports=r},{}],331:[function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&_(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];g.redirect=function(t,e){if(w.indexOf(e)===-1)throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=g,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new g(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],332:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){x.set({page:window.location.pathname+window.location.search}),x.pageview(window.location.pathname+window.location.search)}var o=t("react"),a=r(o),s=t("react-dom"),u=r(s),c=t("react-router"),l=t("./components/Application"),h=r(l),f=t("./components/GoogleVisionLabelsViewer"),d=r(f),p=t("./components/ImageList"),m=(r(p),t("./components/ImageView")),g=r(m),v=t("./components/FrontPage"),y=r(v);t("whatwg-fetch");var _=t("promise-polyfill"),b=r(_);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),window.Promise||(window.Promise=b.default);var x=t("react-ga");x.initialize("UA-99610642-1"),u.default.render(a.default.createElement(c.Router,{history:c.hashHistory,onUpdate:i},a.default.createElement(c.Redirect,{from:"/",to:"/search"}),a.default.createElement(c.Route,{path:"/",component:h.default},a.default.createElement(c.Route,{path:"/search(/query/:search)(/person/:searchperson)(/color/:hue/:saturation)(/tags(/person/:person)(/place/:place)(/museum/:museum)(/genre/:genre)(/tags/:tags)(/type/:type))",component:y.default}),a.default.createElement(c.Route,{path:"/image/:imageId(/display/:display)",component:g.default})),a.default.createElement(c.Route,{path:"/googleVisionLabels",component:d.default})),document.getElementById("app"))},{"./components/Application":334,"./components/FrontPage":339,"./components/GoogleVisionLabelsViewer":340,"./components/ImageList":343,"./components/ImageView":346,"promise-polyfill":209,react:321,"react-dom":217,"react-ga":241,"react-router":278,"whatwg-fetch":331}],333:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t("whatwg-fetch");var a=t("underscore"),s=(r(a),t("./../config")),u=r(s),c=function(){function t(e,n){i(this,t),this.url=u.default.apiUrl+u.default.endpoints.documents,this.lastUrl="",this.onComplete=e,this.onFail=n,this.loading=!1}return o(t,[{key:"fetch",value:function(t){function e(e,n,r,i,o){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e,n,r,i){n=n||1,this.currentPage=n,t=t||{};var o=JSON.parse(JSON.stringify(this.currentParams||{}));if(this.currentParams=t,this.loading&&JSON.stringify(o)==JSON.stringify(t))this.onFail&&this.onFail();else{this.loading=!0;var a=[];t.searchString&&a.push("search="+t.searchString),t.person&&""!=t.person&&a.push("person="+(t.person.join?t.person.join(";"):t.person)),t.place&&""!=t.place&&a.push("place="+t.place),t.museum&&""!=t.museum&&a.push("museum="+t.museum),t.genre&&""!=t.genre&&a.push("genre="+t.genre),t.tags&&""!=t.tags&&a.push("tags="+t.tags),t.type&&""!=t.type&&a.push("type="+t.type),t.hue&&""!=t.hue&&a.push("hue="+t.hue),t.saturation&&""!=t.saturation&&a.push("saturation="+t.saturation),t.year&&a.push("year="+t.year),t.google_label&&a.push("google_label="+t.google_label),t.ids&&a.push("ids="+t.ids),t.sort&&a.push("sort="+t.sort),e&&a.push("count="+e),t.hue||t.saturation?a.push("type=Konstverk"):i&&a.push("archivematerial="+i),a.push("page="+n);var s;if(s=t.similar?u.default.apiUrl+"similar?size=20&id="+t.similar:t.similarColors?u.default.apiUrl+"similar/colors?size=20&id="+t.similarColors:t.similarLabels?u.default.apiUrl+"similar/labels?size=20&id="+t.similarLabels:this.url+(a.length>0?"?"+a.join("&"):""),this.lastUrl==s)return void(this.onFail&&this.onFail());this.lastUrl=s,fetch(s).then(function(t){if(decodeURI(t.url)==this.lastUrl)return t.json()}.bind(this)).then(function(t){this.loading=!1,this.onComplete&&t&&this.onComplete({append:r,data:t})}.bind(this)).catch(function(t){console.log("parsing failed",t)})}})}]),t}();n.default=c},{"./../config":354,underscore:329,"whatwg-fetch":331}],334:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-router"),h=t("./Header"),f=r(h),d=t("./Search"),p=r(d),m=t("./ImageList"),g=r(m),v=t("./Timeline"),y=r(v),_=t("./TsneView"),b=r(_),x=t("eventbusjs"),w=r(x),E=t("./../utils/window-scroll"),M=r(E),T=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.galleryTypeLinkClickHandler=n.galleryTypeLinkClickHandler.bind(n),n.eventBusOpenTagsHandler=n.eventBusOpenTagsHandler.bind(n),window.eventBus=w.default,window.eventBus.addEventListener("search.open-tags",n.eventBusOpenTagsHandler),n.state={searchParams:{},galleryType:"gallery"},window.app=n,n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.setState({searchParams:{search:this.props.params.search||"",searchperson:this.props.params.searchperson?this.props.params.searchperson.split(";"):null,person:this.props.params.person?this.props.params.person.split(";"):null,place:this.props.params.place?this.props.params.place.split(";"):null,museum:this.props.params.museum?this.props.params.museum.split(";"):null,genre:this.props.params.genre?this.props.params.genre.split(";"):null,tags:this.props.params.tags?this.props.params.tags.split(";"):null,type:this.props.params.type?this.props.params.type.split(";"):null,hue:this.props.params.hue,saturation:this.props.params.saturation}})}},{key:"componentWillReceiveProps",value:function(t){this.setState({searchParams:{search:t.params.search||"",searchperson:t.params.searchperson?t.params.searchperson.split(";"):null,person:t.params.person?t.params.person.split(";"):null,place:t.params.place?t.params.place.split(";"):null,museum:t.params.museum?t.params.museum.split(";"):null,genre:t.params.genre?t.params.genre.split(";"):null,tags:t.params.tags?t.params.tags.split(";"):null,type:t.params.type?t.params.type.split(";"):null,hue:t.params.hue,saturation:t.params.saturation}})}},{key:"galleryTypeLinkClickHandler",value:function(t){var e=t.target.dataset.type;if(this.setState({galleryType:e}),"tsne-view"==e&&l.hashHistory.push("/"),window.scrollY<30){var n=new M.default;n.scrollToY(n.getOffsetTop(this.refs.siteContent)-250,800,"easeInOutSine",!0)}}},{key:"eventBusOpenTagsHandler",value:function(){"tsne-view"==this.state.galleryType&&this.setState({galleryType:"gallery"})}},{key:"render",value:function(){var t;t="timeline"==this.state.galleryType?c.default.createElement(y.default,{searchString:this.state.searchParams.search,searchPerson:this.state.searchParams.searchperson&&this.state.searchParams.searchperson.length>0?this.state.searchParams.searchperson:this.state.searchParams.person,searchPlace:this.state.searchParams.place,searchMuseum:this.state.searchParams.museum,searchGenre:this.state.searchParams.genre,searchTags:this.state.searchParams.tags,searchType:this.state.searchParams.type,searchHue:this.state.searchParams.hue,searchSaturation:this.state.searchParams.saturation}):"simple-list"==this.state.galleryType?c.default.createElement("div",null,c.default.createElement(g.default,{count:"50",enableAutoLoad:"true",listType:"simple",searchString:this.state.searchParams.search,searchPerson:this.state.searchParams.searchperson&&this.state.searchParams.searchperson.length>0?this.state.searchParams.searchperson:this.state.searchParams.person,searchPlace:this.state.searchParams.place,searchMuseum:this.state.searchParams.museum,searchGenre:this.state.searchParams.genre,searchTags:this.state.searchParams.tags,searchType:this.state.searchParams.type,searchHue:this.state.searchParams.hue,searchSaturation:this.state.searchParams.saturation})):"tsne-view"==this.state.galleryType?c.default.createElement(b.default,{searchMuseum:this.state.searchParams.museum}):c.default.createElement(g.default,{count:"50",enableAutoLoad:"true",searchString:this.state.searchParams.search,searchPerson:this.state.searchParams.searchperson&&this.state.searchParams.searchperson.length>0?this.state.searchParams.searchperson:this.state.searchParams.person,searchPlace:this.state.searchParams.place,searchMuseum:this.state.searchParams.museum,searchGenre:this.state.searchParams.genre,searchTags:this.state.searchParams.tags,searchType:this.state.searchParams.type,searchHue:this.state.searchParams.hue,searchSaturation:this.state.searchParams.saturation});var e=[{type:"timeline",menuItem:"Tidslinje"},{type:"gallery",menuItem:"Galleri"},{type:"simple-list",menuItem:"Katalog"},{type:"tsne-view",menuItem:"Relationer"}],n=e.map(function(t){return c.default.createElement("a",{key:t.type,className:this.state.galleryType==t.type?"selected":null,"data-type":t.type,onClick:this.galleryTypeLinkClickHandler},t.menuItem)}.bind(this));return c.default.createElement("div",null,c.default.createElement(f.default,{routerPath:this.props.location.pathname}),c.default.createElement("div",{className:"site-content"+("/search"==this.props.location.pathname.substr(0,7)?" front":"")},this.props.children,c.default.createElement(p.default,{searchParams:this.state.searchParams}),c.default.createElement("div",{className:"gallery-menu"},n),c.default.createElement("div",{className:"site-content",ref:"siteContent"},t)))}}]),e}(c.default.Component);n.default=T},{"./../utils/window-scroll":359,"./Header":341,"./ImageList":343,"./Search":348,"./Timeline":352,"./TsneView":353,eventbusjs:52,react:321,"react-router":278}],335:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-router"),h=t("underscore"),f=r(h),d=t("./../config"),p=r(d),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputValueChangeHandler=n.inputValueChangeHandler.bind(n),n.inputBlurHandler=n.inputBlurHandler.bind(n),n.inputKeyDownHandler=n.inputKeyDownHandler.bind(n),n.state={inputValue:t.value||"",data:{},listIndex:-1},n}return a(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){if(t.value!=this.state.inputValue){var e={inputValue:t.value};""==t.value&&(e.data=[]),this.setState(e)}}},{key:"focus",value:function(){this.refs.input&&this.refs.input.focus()}},{key:"inputValueChangeHandler",value:function(t){t.persist(),""==t.target.value?(this.setState({inputValue:"",data:[],listIndex:-1}),this.props.onChange&&this.props.onChange({target:{name:this.props.inputName||"",value:""}})):this.setState({inputValue:t.target.value},function(){if(t.target.value.length>2)if(this.state.inputValue.indexOf(",")>-1){var e=this.state.inputValue.split(","),n=e[e.length-1];""!=n&&this.fetchData(n)}else this.fetchData(this.state.inputValue);this.props.onChange&&this.props.onChange(t)}.bind(this))}},{key:"inputKeyDownHandler",value:function(t){t.persist(),38==t.keyCode&&this.state.listIndex>0&&this.setState({listIndex:this.state.listIndex-1,inputValue:this.assignInputValue(this.props.valueField?this.state.data[this.state.listIndex-1][this.props.valueField]:this.state.data[this.state.listIndex-1])},function(){this.props.onChange&&this.props.onChange(t)}.bind(this)),40==t.keyCode&&this.state.listIndex<this.state.data.length&&this.setState({listIndex:this.state.listIndex+1,inputValue:this.assignInputValue(this.props.valueField?this.state.data[this.state.listIndex+1][this.props.valueField]:this.state.data[this.state.listIndex+1])},function(){this.props.onChange&&this.props.onChange(t)}.bind(this)),13==t.keyCode&&this.setState({listIndex:-1,data:[]},function(){this.props.onEnter&&this.props.onEnter()}.bind(this))}},{key:"inputBlurHandler",value:function(){}},{key:"assignInputValue",value:function(t){var e=this.state.inputValue,n="";if(e.indexOf(",")>-1){var r=e.split(",");r[r.length-1]=t,n=r.join(",")}else n=t;return n}},{key:"itemClickHandler",value:function(t,e,n){e&&"setValue"==!this.props.defaultAction?l.hashHistory.push(e+(n?t[n]:t.key)):this.setState({inputValue:t.key},function(){this.props.onChange&&this.props.onChange({target:{name:this.props.inputName||"",value:this.state.inputValue},triggerSearch:!0})}.bind(this))}},{key:"fetchData",value:function(t){this.waitingForFetch||this.props.minChars&&t.length<this.props.minChars||(this.waitingForFetch=!0,fetch(p.default.apiUrl+p.default.endpoints.autocomplete+"?search="+t).then(function(t){return t.json()}).then(function(t){this.setState({data:t,listIndex:-1}),this.waitingForFetch=!1}.bind(this)).catch(function(t){console.log("parsing failed",t)}))}},{key:"render",value:function(){var t=function(t){var e=this.state.data[t].map(function(e,n){return c.default.createElement("div",{className:"item"+(this.state.listIndex==n?" selected":""),key:t+n,onClick:this.itemClickHandler.bind(this,e.key)},e.key+" ("+e.doc_count+")")}.bind(this));return e}.bind(this),e=[];this.state.data.documents&&(e=f.default.union(e,t("documents"))),this.state.data.tags&&(e=f.default.union(e,t("tags"))),this.state.data.persons&&(e=f.default.union(e,t("persons"))),this.state.data.places&&(e=f.default.union(e,t("places")));var n=function(t,e,n){return this.state.data[t].map(function(n,r){return c.default.createElement("span",{className:"item-wrapper",key:t+r},c.default.createElement("a",{href:"#"+e+n.key,className:"item"+(this.state.listIndex==r?" selected":"")},n.key.length>35?n.key.substr(0,35)+"...":n.key))}.bind(this))}.bind(this);return c.default.createElement("div",{ref:"container",className:"autocomplete-input"},c.default.createElement("input",{ref:"input",className:this.props.inputClassName,type:"text",name:this.props.inputName||"",placeholder:this.props.placeholder,value:this.state.inputValue,onChange:this.inputValueChangeHandler,onBlur:this.inputBlurHandler,onKeyDown:this.inputKeyDownHandler,onKeyPress:function(t){this.props.onKeyPress&&this.props.onKeyPress(t)}.bind(this)}),c.default.createElement("div",{className:"autocomplete-tags"+(this.state.data&&e&&e.length>0?" visible":"")},this.state.data.persons&&this.state.data.persons.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Personer "),n("persons","/search/tags/person/")),this.state.data.places&&this.state.data.places.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Platser "),n("places","/search/tags/place/")),this.state.data.tags&&this.state.data.tags.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Taggar "),n("tags","/search/tags/tags/")),this.state.data.type&&this.state.data.type.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Kategorier "),n("type","/search/tags/type/")),this.state.data.genre&&this.state.data.genre.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Underkategorier "),n("genre","/search/tags/genre/")),this.state.data.museum&&this.state.data.museum.length>0&&c.default.createElement("div",{className:"tags-list"},c.default.createElement("span",{className:"tag-name"},"Samlingar "),n("museum","/search/tags/museum/"))))}}]),e}(c.default.Component);n.default=m},{"./../config":354,react:321,"react-router":278,underscore:329}],336:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-dom"),h=r(l),f=t("./../config"),d=r(f),p=t("d3"),m=t("chroma-js"),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={initialized:!1},n.graphRadius=250,n.graphMargins=0,n.circularGraph=!1,n.baseData=n.createBaseData(),n.state={graphWidth:1e3,graphHeight:200,graphMargins:20},n}return a(e,t),s(e,[{key:"createBaseData",value:function(){for(var t=[],e=0;e<=360;e+=5){for(var n={hue:e,saturation:[]},r=0;r<=100;r+=5)n.saturation.push(r);t.push(n)}return t}},{key:"renderGraph",value:function(){this.xRange=p.scaleLinear().range([this.graphMargins,this.state.graphWidth-2*this.graphMargins]).domain([0,360]),this.yRange=p.scaleLinear().range([this.graphMargins,this.state.graphHeight-2*this.graphMargins]).domain([100,0]);var t=this;this.vis=p.select(this.refs.graphContainer),this.graphContainer=this.vis,this.graphContainer.selectAll("g.hue").data(this.baseData).enter().append("g").attr("class","hue").each(function(e,n){p.select(this).selectAll("circle").data(e.saturation).enter().append("rect").attr("x",function(e){if(!t.circularGraph)return t.xRange(t.baseData[n].hue)}).attr("y",function(e){return t.yRange(e)}).attr("width",function(e){return t.state.graphWidth/t.baseData.length+1}).attr("height",function(e){return t.state.graphHeight/t.baseData[0].saturation.length+1}).attr("opacity",1).attr("fill",function(e){return m(t.baseData[n].hue,e/100,.2+e/100,"hsv").darken(1.1).hex()}).on("click",function(e){t.props.onColorSelect&&t.props.onColorSelect({hue:t.baseData[n].hue,saturation:e})})})}},{key:"renderColormap",value:function(t){var e=this;this.graphContainer.selectAll("g.marker").data(t).enter().append("g").attr("class","marker").attr("transform",function(t){if(e.circularGraph)return"rotate("+t.hue+")"}).each(function(n,r){p.select(this).selectAll("circle").data(n.saturation).enter().append("circle").attr("cx",function(n){if(!e.circularGraph)return e.xRange(t[r].hue)}).attr("cy",function(t){return e.yRange(t)}).attr("r",2).attr("fill",function(e){return m(t[r].hue,e/100,.6+e/100,"hsv").saturate(2.5).hex()}).attr("style","cursor: pointer").attr("stroke-width",.1).on("click",function(t){e.props.onColorSelect&&e.props.onColorSelect({hue:e.baseData[r].hue,saturation:t})})})}},{key:"fetchColormap",value:function(){fetch(d.default.apiUrl+d.default.endpoints.colormap+"?type=Konstverk").then(function(t){return t.json()}).then(function(t){this.renderColormap(t)}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"componentDidMount",value:function(){setTimeout(function(){this.setState({initialized:!0})}.bind(this),100),this.setState({graphWidth:h.default.findDOMNode(this).clientWidth,graphHeight:h.default.findDOMNode(this).clientHeight},function(){this.renderGraph(),this.fetchColormap()}.bind(this))}},{key:"render",value:function(){return c.default.createElement("div",{className:"fade-in-component"+(this.state.initialized?" initialized":""),style:{boxSizing:"border-box",height:200,backgroundColor:"#333"}},c.default.createElement("svg",{ref:"graphContainer",width:this.state.graphWidth+this.state.graphMargins,height:this.state.graphHeight+this.state.graphMargins},c.default.createElement("defs",null,c.default.createElement("filter",{id:"blur"},c.default.createElement("feGaussianBlur",{stdDeviation:"2"})))))}}]),e}(c.default.Component);n.default=g},{"./../config":354,"chroma-js":4,d3:38,react:321,"react-dom":217}],337:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=(r(l),t("./../config")),f=r(h),d=t("./../utils/colorUtil"),p=r(d),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={relativeSize:n.props.relativeSize||!1,image:n.props.image||null,index:n.props.index||0},n}return a(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({relativeSize:t.relativeSize||this.state.relativeSize,image:t.image||this.state.image,index:t.index||this.state.index})}},{key:"getImageStyle",value:function(){var t=f.default.imageUrl+"255x/"+(this.state.image.images&&this.state.image.images.length>0?this.state.image.images[0].image:this.state.image.image?this.state.image.image:"")+".jpg";if(this.state.relativeSize){var e=this.refs.imageElement.clientWidth,n=this.refs.imageElement.clientHeight;return{backgroundImage:"url("+t+")",width:e/2,height:n/2}}return{backgroundImage:"url("+t+")",width:"100%",height:"100%"}}},{key:"render",value:function(){var t=this.state.image.item_date_string,e=this.state.image.title;String(t).length>4&&(e=this.state.image.type+'<div class="smaller">'+t+"</div>");var n=this.state.image.images[0].googleVisionColors?p.default.getDominantHex(this.state.image.images[0].googleVisionColors):"#333";return c.default.createElement("a",{className:"label-grid-item",key:this.state.image.id,href:"#image/"+this.state.image.id,
style:{backgroundColor:this.state.relativeSize?n+"33":n}},c.default.createElement("div",{className:"image-wrapper"},c.default.createElement("div",{className:"image-proxy"+(this.state.relativeSize?" visible":""),style:this.getImageStyle()}),c.default.createElement("img",{ref:"imageElement",style:{transitionDelay:this.state.index/80+"s"},src:f.default.imageUrl+"255x/"+(this.state.image.images&&this.state.image.images.length>0?this.state.image.images[0].image:this.state.image.image?this.state.image.image:"")+".jpg"})),c.default.createElement("div",{className:"label",dangerouslySetInnerHTML:{__html:e}}))}}]),e}(c.default.Component);n.default=m},{"./../config":354,"./../utils/colorUtil":357,react:321,underscore:329,"whatwg-fetch":331}],338:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-dom"),h=r(l),f=t("underscore"),d=(r(f),function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.menuButtonClick=n.menuButtonClick.bind(n),n.closeMenu=n.closeMenu.bind(n),n.windowClickHandler=n.windowClickHandler.bind(n),n.closeButtonClickHandler=n.closeButtonClickHandler.bind(n),n.state={menuOpen:!1},n}return a(e,t),s(e,[{key:"menuButtonClick",value:function(){this.setState({menuOpen:!this.state.menuOpen},function(){this.state.menuOpen&&this.props.onOpen&&this.props.onOpen(),this.props.disableScrollOnOpen&&(this.state.menuOpen?document.body.classList.add("disable-scroll"):document.body.classList.remove("disable-scroll"))}.bind(this))}},{key:"closeButtonClickHandler",value:function(){this.closeMenu()}},{key:"closeMenu",value:function(){this.state.menuOpen&&(this.setState({menuOpen:!1}),document.body.classList.remove("disable-scroll"))}},{key:"windowClickHandler",value:function(t){var e=h.default.findDOMNode(this.refs.container);e&&(e.contains(t.target)||this.closeMenu())}},{key:"componentDidMount",value:function(){this.props.manuallyClose||document.getElementById("app").addEventListener("click",this.windowClickHandler)}},{key:"componeneWillUnmount",value:function(){this.props.manuallyClose||document.getElementById("app").removeEventListener("click",this.windowClickHandler),document.body.classList.remove("disable-scroll")}},{key:"componentWillReceiveProps",value:function(t){}},{key:"render",value:function(){return c.default.createElement("div",{ref:"container",className:"dropdown-wrapper"+(this.props.dropdownDirection?" dropdown-direction-"+this.props.dropdownDirection:"")},c.default.createElement("a",{className:"dropdown-link"+(this.props.className?" "+this.props.className:""),onClick:this.menuButtonClick},this.props.label||""),c.default.createElement("div",{className:"dropdown-container dropdown-list"+(this.state.menuOpen||this.props.keepOpen?" open":"")+(this.props.headerText?" has-header":"")},this.props.showCloseButton&&c.default.createElement("span",{className:"close-button",onClick:this.closeButtonClickHandler,dangerouslySetInnerHTML:{__html:"&#xd7"}}),this.props.headerText&&c.default.createElement("div",{className:"panel-heading dropdown-heading"},c.default.createElement("span",{className:"heading-label"},this.props.headerText)),c.default.createElement("div",{className:"list-container minimal-scrollbar"},this.props.children)))}}]),e}(c.default.Component));n.default=d},{react:321,"react-dom":217,underscore:329}],339:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("./../utils/window-scroll"),h=r(l),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.arrowClick=n.arrowClick.bind(n),n.receivedSearchParamsHandler=n.receivedSearchParamsHandler.bind(n),n.state={searchParams:{},initialized:!1,backgroundImage:null,backgroundLoaded:!1},document.title="Ivar Aroseniusarkivet",n}return a(e,t),s(e,[{key:"arrowClick",value:function(){(new h.default).scrollToY(document.documentElement.clientHeight-100,1e3,"easeInOutSine")}},{key:"receivedSearchParamsHandler",value:function(t,e){this.setState({searchParams:e})}},{key:"componentDidMount",value:function(){this.setState({searchParams:this.props.params}),setTimeout(function(){this.setState({initialized:!0})}.bind(this),200),this.loadBackgroundImage()}},{key:"componentWillReceiveProps",value:function(t){this.setState({searchParams:t.params})}},{key:"loadBackgroundImage",value:function(){var t=Math.floor(14*Math.random())+1,e="img/background/bg-"+t+".jpg",n=new Image;n.onload=function(){this.setState({backgroundImage:e},function(){setTimeout(function(){this.setState({backgroundLoaded:!0})}.bind(this),300)}.bind(this))}.bind(this),n.onerror=this.imageErrorHandler,n.src=e}},{key:"imageErrorHandler",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"front"+(this.state.initialized?" initialized":"")},c.default.createElement("div",{className:"hero-image"+(this.state.backgroundLoaded?" initialized":""),style:{backgroundImage:'url("'+this.state.backgroundImage+'")'}},c.default.createElement("div",{className:"overlay"}),c.default.createElement("button",{style:{display:"none"},className:"arrow",onClick:this.arrowClick})))}}]),e}(c.default.Component);n.default=f},{"./../utils/window-scroll":359,react:321}],340:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("react"),l=i(c),h=t("d3-scale"),f=r(h),d=t("underscore"),p=i(d),m=t("./Header"),g=i(m),v=t("./TagsSelector"),y=(i(v),t("./ImageList")),_=i(y),b=t("eventbusjs"),x=i(b),w=t("./../config"),E=i(w),M=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return window.eventBus=x.default,n.state={selectedType:null,selectedLabel:null,selectedSecondLabel:null,types:[],allLabels:[],relatedLabels:[]},n.url=E.default.apiUrl+"googleVisionLabels",window.app=n,n}return s(e,t),u(e,[{key:"componentDidMount",value:function(){fetch(E.default.apiUrl+E.default.endpoints.types).then(function(t){return t.json()}.bind(this)).then(function(t){this.setState({types:t})}.bind(this)).catch(function(t){console.log("parsing failed",t)}),this.fetchAllLabels()}},{key:"fetchAllLabels",value:function(){fetch(this.url+(this.state.selectedType?"?type="+this.state.selectedType:"")).then(function(t){return t.json()}.bind(this)).then(function(t){this.setState({allLabels:t})}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"fetchRelatedLabels",value:function(t){fetch(this.url+"?google_label="+t+(this.state.selectedType?"&type="+this.state.selectedType:"")).then(function(t){return t.json()}.bind(this)).then(function(t){this.setState({relatedLabels:t,selectedSecondLabel:null})}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"getLabelStyle",value:function(t){return{display:"inline-block",margin:"0 10px 0 0",fontSize:30*t+16,cursor:"pointer"}}},{key:"getListContainerStyle",value:function(){return{maxHeight:400,overflowY:"scroll"}}},{key:"createLabelItems",value:function(t,e){var n=p.default.min(t,function(t){return t.doc_count}).doc_count,r=p.default.max(t,function(t){return t.doc_count}).doc_count,i=f.scaleLinear().domain([n,r]);return t.length>0?t.map(function(t){return l.default.createElement("a",{key:t.value,"data-label":t.value,style:this.getLabelStyle(i(t.doc_count)),onClick:e},t.value," ",l.default.createElement("span",{style:{color:"#fff"}},"(",t.doc_count,")"))}.bind(this)):[]}},{key:"render",value:function(){var t=this.createLabelItems(this.state.allLabels,function(t){t.preventDefault(),this.fetchRelatedLabels(t.currentTarget.dataset.label),this.setState({selectedLabel:t.currentTarget.dataset.label})}.bind(this)),e=this.createLabelItems(this.state.relatedLabels,function(t){t.preventDefault(),this.setState({selectedSecondLabel:t.currentTarget.dataset.label})}.bind(this));return l.default.createElement("div",null,l.default.createElement(g.default,{routerPath:this.props.location.pathname,smallHeader:!0}),l.default.createElement("div",{className:"site-content"},l.default.createElement("div",{className:"container",style:{marginTop:50,marginBottom:50}},l.default.createElement("h1",null,"Google Vision Machine Learning"),this.state.types.length>0&&l.default.createElement("div",{className:"button-list"},this.state.types.map(function(t){return l.default.createElement("a",{key:t.value,className:"button-link"+(this.state.selectedType==t.value?" selected":""),onClick:function(e){this.setState({selectedType:t.value,selectedLabel:null,selectedSecondLabel:null,relatedLabels:[]},function(){this.fetchAllLabels()}.bind(this))}.bind(this)},t.value)}.bind(this))),l.default.createElement("hr",null),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"six columns"},l.default.createElement("div",{className:"labels-list",style:this.getListContainerStyle()},t)),l.default.createElement("div",{className:"six columns"},this.state.relatedLabels.length>0&&l.default.createElement("div",{className:"labels-list",style:this.getListContainerStyle()},e))),(this.state.selectedType||this.state.selectedLabel||this.state.selectedSecondLabel)&&l.default.createElement("hr",null),this.state.selectedType&&l.default.createElement("div",null,"Typ: ",this.state.selectedType),this.state.selectedLabel&&l.default.createElement("div",null,"Google Label: ",this.state.selectedLabel,this.state.selectedSecondLabel&&l.default.createElement("span",null,", ",this.state.selectedSecondLabel)),l.default.createElement("hr",null),l.default.createElement(_.default,{disableScrolling:!0,searchType:this.state.selectedType,google_label:(this.state.selectedLabel?this.state.selectedLabel:"")+(this.state.selectedLabel&&this.state.selectedSecondLabel?";"+this.state.selectedSecondLabel:"")}))))}}]),e}(l.default.Component);n.default=M},{"./../config":354,"./Header":341,"./ImageList":343,"./TagsSelector":350,"d3-scale":29,eventbusjs:52,react:321,underscore:329}],341:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.openTagSearchButtonClickHandler=n.openTagSearchButtonClickHandler.bind(n),n.state={smallHeader:!1,initialized:!1},n}return a(e,t),s(e,[{key:"openTagSearchButtonClickHandler",value:function(t){t.preventDefault(),window.eventBus.dispatch("search.open-tags")}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",function(t){var e=window.pageYOffset||document.documentElement.scrollTop;e>300?this.setState({smallHeader:!0}):this.setState({smallHeader:!1})}.bind(this)),setTimeout(function(){this.setState({initialized:!0})}.bind(this),200)}},{key:"render",value:function(){return c.default.createElement("header",{className:"site-header"+(this.props.routerPath.indexOf("/image/")>-1||this.state.smallHeader||this.props.smallHeader?" small ":"")+(this.state.initialized?" initialized":"")},c.default.createElement("div",{className:"site-logo"},c.default.createElement("a",{href:"#/"},"IA")),c.default.createElement("div",{className:"header-content"},c.default.createElement("h1",{className:"site-title"},c.default.createElement("a",{href:"#/"},"Aroseniusarkivet")),c.default.createElement("nav",{className:"site-nav"},c.default.createElement("ul",null,c.default.createElement("li",null,c.default.createElement("a",{href:"http://aroseniusarkivet.org/projekt/"},"Om projektet och Ivar Arosenius")),c.default.createElement("li",null,c.default.createElement("a",{href:"http://aroseniusarkivet.org/projekt/bidra-till-arkivet/"},"Bidra till arkivet")),c.default.createElement("li",null,c.default.createElement("a",{onClick:this.openTagSearchButtonClickHandler,href:"#"},"Upptck arkivet"))))))}}]),e}(c.default.Component);n.default=l},{react:321}],342:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-router");t("whatwg-fetch");var h=t("underscore"),f=(r(h),t("./ImageMap")),d=r(f),p=t("./../utils/imageSizes"),m=r(p),g=t("./../utils/colorUtil"),v=r(g),y=t("./../config"),_=r(y),b=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.imageLoadedHandler=n.imageLoadedHandler.bind(n),n.windowScrollHandler=n.windowScrollHandler.bind(n),n.windowResizeHandler=n.windowResizeHandler.bind(n),n.imageDisplayClickHandler=n.imageDisplayClickHandler.bind(n),n.toggleFullDisplay=n.toggleFullDisplay.bind(n),n.toggleEnlargedDisplay=n.toggleEnlargedDisplay.bind(n),n.rotateButtonClickHandler=n.rotateButtonClickHandler.bind(n),n.state={image:null,imageUrl:"",flipped:!1,rotation:0,enlargedDisplay:!1},n}return a(e,t),s(e,[{key:"toggleFullDisplay",value:function(){this.props.pathname.match("/display/full")?l.hashHistory.push(this.props.pathname.replace("/display/full","")):l.hashHistory.push(this.props.pathname+"/display/full")}},{key:"toggleEnlargedDisplay",value:function(){this.setState({enlargedDisplay:!this.state.enlargedDisplay})}},{key:"checkFullDisplay",value:function(){setTimeout(function(){this.positionImageButtons()}.bind(this),500)}},{key:"imageDisplayClickHandler",value:function(){this.state.image.back&&this.setState({flipped:!this.state.flipped})}},{key:"rotateButtonClickHandler",value:function(){this.setState({rotation:270==this.state.rotation?0:this.state.rotation+90})}},{key:"windowResizeHandler",value:function(){this.positionImageButtons()}},{key:"windowScrollHandler",value:function(){this.positionImageButtons()}},{key:"mouseMoveHandler",value:function(){this.mouseIdleTimer&&clearTimeout(this.mouseIdleTimer),this.mouseIdleTimer=setTimeout(this.mouseIdleHandler.bind(this),2e3)}},{key:"mouseIdleHandler",value:function(){}},{key:"positionImageButtons",value:function(){if(this.refs.imageContainer){var t=this.refs.imageContainer.clientHeight,e=document.documentElement.clientHeight,n=window.scrollY;t+80<=e?this.setState({fixedImageButtons:!1}):t<e+n-80?this.setState({fixedImageButtons:!1}):this.setState({fixedImageButtons:!0})}}},{key:"loadImage",value:function(){if(this.state.image){var t=new Image;this.setState({lowresImageUrl:_.default.imageUrl+"255x/"+this.state.image.front.image+".jpg"}),t.onload=this.imageLoadedHandler,t.onerror=this.imageErrorHandler,t.src=_.default.imageUrl+m.default.getImageUrl()+"x/"+this.state.image.front.image+".jpg",this.setState}}},{key:"imageLoadedHandler",value:function(){var t=_.default.imageUrl+m.default.getImageUrl()+"x/"+this.state.image.front.image+".jpg";this.setState({imageUrl:t,flippable:Boolean(this.state.image.back),flipped:!1,rotation:0}),setTimeout(function(){this.positionImageButtons()}.bind(this),100)}},{key:"imageErrorHandler",value:function(t){}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.windowScrollHandler),window.addEventListener("resize",this.windowResizeHandler),this.setState({image:this.props.image,fullDisplay:this.props.params&&this.props.params.fullDisplay},function(){this.loadImage()}.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.windowScrollHandler),window.removeEventListener("resize",this.windowResizeHandler),document.body.classList.remove("disable-scroll")}},{key:"componentWillReceiveProps",value:function(t){if(null!=t.image&&t.image.front&&(this.state.image&&t.image.front.image!=this.state.image.front.image||t.fullDisplay!=this.state.fullDisplay)){var e=this.state.image&&t.image.front.image!=this.state.image.front.image;this.setState({image:t.image,imageUrl:e?"":this.state.imageUrl,flipped:!e&&this.state.flipped,rotation:0,fullDisplay:t.fullDisplay},function(){this.checkFullDisplay(),e&&this.loadImage()}.bind(this))}}},{key:"getImageObj",value:function(t){var e;return e=t?this.state.image.back:this.state.image.front}},{key:"getImageStyle",value:function(t){var e=(Boolean(Math.round(this.state.rotation/100)%2),this.getImageObj(t)),n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-90,i=0,o=e.imagesize.width,a=e.imagesize.height;if(this.state.enlargedDisplay){var s=n,u=o,c=a;i=s/u,o=s,a=c*i}else o>n&&(i=n/o,o=n,a*=i),a>r&&(i=r/a,a=r,o*=i);var l=this.state.image.images&&this.state.image.images[0].googleVisionColors?v.default.getDominantHex(this.state.image.images[0].googleVisionColors):"#191919",h={backgroundColor:l,backgroundImage:t?"url('"+_.default.imageUrl+m.default.getImageUrl()+"x/"+e.image+".jpg')":this.state.imageUrl&&""!=this.state.imageUrl?"url('"+this.state.imageUrl+"')":"url('"+this.state.lowresImageUrl+"')",width:o,height:a};return h}},{key:"render",value:function(){if(this.state.image){var t;this.state.image.back&&(t=c.default.createElement("div",{className:"image-display image-rear",onClick:this.imageDisplayClickHandler,style:this.getImageStyle(!0)}));var e=this.getImageObj().googleVisionColors?v.default.getDominantHex(this.getImageObj().googleVisionColors):"transparent";return c.default.createElement("div",{ref:"imageContainer",className:"image-container"+(this.state.enlargedDisplay?" enlarged-display":"")+(this.state.flippable?" flippable":"")+(this.state.flipped?" flipped":"")+(this.state.imageUrl&&""!=this.state.imageUrl?" initialized":"")},c.default.createElement("div",{className:"image-wrapper",style:{transform:"rotate("+this.state.rotation+"deg)"}},c.default.createElement("div",{className:"image-display",onClick:this.imageDisplayClickHandler,style:this.getImageStyle()},c.default.createElement("div",{className:"loader",style:{backgroundColor:e}})),t),this.state.fullDisplay&&c.default.createElement(d.default,{imageObj:this.getImageObj(this.state.flipped)}),c.default.createElement("div",{ref:"imageButtons",className:"image-buttons"+(this.state.fixedImageButtons?" fixed":"")},c.default.createElement("a",{className:"icon-download",href:_.default.imageUrl+(this.state.flipped?this.state.image.back.image:this.state.image.front.image)+".jpg",target:"_blank",download:!0}),c.default.createElement("a",{className:"icon-rotate",onClick:this.rotateButtonClickHandler}),c.default.createElement("button",{className:"toggle-show-all",style:{transitionDelay:"60ms"},onClick:this.toggleEnlargedDisplay},c.default.createElement("span",{className:"icon-arrow arrow-1"}),c.default.createElement("span",{className:"icon-arrow arrow-2"}),"Show all"),c.default.createElement("button",{className:"icon-fulldisplay",onClick:this.toggleFullDisplay})))}return c.default.createElement("div",null)}}]),e}(c.default.Component);n.default=b},{"./../config":354,"./../utils/colorUtil":357,"./../utils/imageSizes":358,"./ImageMap":345,react:321,"react-router":278,underscore:329,"whatwg-fetch":331}],343:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=r(l),f=t("react-masonry-component"),d=r(f),p=t("../collections/ImageListCollection"),m=r(p),g=t("./ImageListItem"),v=r(g),y=t("./DateLabelListItem"),_=r(y),b=t("./SimpleListItem"),x=r(b),w=t("./../utils/window-scroll"),E=r(w),M=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return window.imageList=n,n.imageLoadedHandler=n.imageLoadedHandler.bind(n),n.windowScrollHandler=n.windowScrollHandler.bind(n),n.masonryOptions={columnWidth:".grid-sizer",percentPosition:!0,transitionDuration:0,animationOptions:{duration:500,queue:!1},isAnimated:!1},n.state={images:[],loading:!1,initialized:!1,columns:!1,waitingForLoad:!1,relativeSizes:!1},n.collection=new m.default(function(t){setTimeout(function(){this.waitingForLoad=!1}.bind(this),500);var e=[];if(t.append){var n=h.default.filter(t.data.documents,function(t){return t.image&&""!=t.image||t.images&&t.images.length>0&&""!=t.images[0].image});e=this.state.images.concat(n)}else e=h.default.filter(t.data.documents,function(t){return t.image&&""!=t.image||t.images&&t.images.length>0&&""!=t.images[0].image});this.setState({images:e,total:t.data.total,loading:!1})}.bind(n),function(t){this.setState({loading:!1})}.bind(n)),n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){(this.props.enableAutoLoad||this.props.lazyLoad)&&setTimeout(function(){window.addEventListener("scroll",this.windowScrollHandler)}.bind(this),500),this.props.lazyLoad||this.handleProps(this.props),setTimeout(function(){this.positionButtons()}.bind(this),500)}},{key:"componentWillUnmount",value:function(){(this.props.enableAutoLoad||this.props.lazyLoad)&&window.removeEventListener("scroll",this.windowScrollHandler)}},{key:"positionButtons",value:function(){if("date-labels"!=this.props.listType&&this.refs.container){var t=this.refs.container.getBoundingClientRect().top,e=document.documentElement.clientHeight;this.setState({fixedButtons:e<t+85})}}},{key:"isInViewport",value:function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"windowScrollHandler",value:function(){this.props.enableAutoLoad&&window.innerHeight+window.pageYOffset>=document.body.offsetHeight-50&&this.appendPage(),this.props.lazyLoad&&this.refs.container&&this.isInViewport(this.refs.container)&&0==this.state.images.length&&setTimeout(function(){this.isInViewport(this.refs.container)&&0==this.state.images.length&&this.handleProps(this.props)}.bind(this),500),this.positionButtons()}},{key:"componentWillReceiveProps",value:function(t){(!this.props.lazyLoad||this.isInViewport(this.refs.container)||!this.isInViewport(this.refs.container)&&this.props.forceUpdate&&this.state.initialized)&&this.handleProps(t)}},{key:"fetchData",value:function(t,e,n,r,i){this.collection.fetch(t,e,n,r,i)}},{key:"handleProps",value:function(t){if(t.related&&t.relatedValue)"person"==t.related&&this.fetchData({person:t.relatedValue},t.count,1,!1,t.archiveMaterial||null),"place"==t.related&&this.fetchData({place:t.relatedValue},t.count,1,!1,t.archiveMaterial||null),"museum"==t.related&&this.fetchData({museum:t.relatedValue},t.count,1,!1,t.archiveMaterial||null),"genre"==t.related&&this.fetchData({genre:t.relatedValue},t.count,1,!1,t.archiveMaterial||null),"tag"==t.related&&this.fetchData({tags:t.relatedValue},t.count,1,!1,t.archiveMaterial||null);else if(t.similar)this.fetchData({similar:t.similar},t.count,1,!1,t.archiveMaterial||null);else if(t.similarColors)this.fetchData({similarColors:t.similarColors},t.count,1,!1,t.archiveMaterial||null);else if(t.similarLabels)this.fetchData({similarLabels:t.similarLabels},t.count,1,!1,t.archiveMaterial||null);else if(t.nearestNeighbors)this.fetchNearestNeighbors();else if(t.year||t.searchString||t.searchPerson||t.searchPlace||t.searchMuseum||t.searchGenre||t.searchTags||t.searchType||t.searchHue||t.searchSaturation||0!=this.state.images.length){if(this.props.searchString!=t.searchString||this.props.searchPerson!=t.searchPerson||this.props.searchPlace!=t.searchPlace||this.props.searchMuseum!=t.searchMuseum||this.props.searchGenre!=t.searchGenre||this.props.searchTags!=t.searchTags||this.props.searchType!=t.searchType||this.props.searchHue!=t.searchHue||this.props.year!=t.year||this.props.google_label!=t.google_label||this.props.searchSaturation!=t.searchSaturation||0==this.state.images.length){this.waitingForLoad=!0;var e={searchString:t.searchString,person:t.searchPerson,place:t.searchPlace,museum:t.searchMuseum,genre:t.searchGenre,tags:t.searchTags,type:t.searchType,hue:t.searchHue,saturation:t.searchSaturation,year:t.year,google_label:t.google_label};"simple"==t.listType&&(e.sort="insert_id");var n={loading:!0};if(this.props.listType!=t.listType&&("simple"==t.listType&&(e={sort:"insert_id"}),n.images=[]),this.setState(n),this.fetchData(e,t.count,1,!1,t.archiveMaterial||null),(t.searchString||t.searchPerson||t.searchPlace||t.searchMuseum||t.searchGenre||t.searchTags||t.searchType||t.searchHue||t.searchSaturation)&&!this.props.lazyLoad&&!this.props.disableScrolling){var r=new E.default;r.scrollToY(r.getOffsetTop(this.refs.container)-250,1e3,"easeInOutSine")}}else if(this.props.listType!=t.listType){var e={};"simple"==t.listType&&(e.sort="insert_id"),this.fetchData(e,t.count,1,!1,t.archiveMaterial||null)}}else{this.waitingForLoad=!0;var e,n={loading:!0};"simple"==t.listType&&(e={sort:"insert_id"},n.images=[]),this.setState(n),this.fetchData(e,t.count,1,!1,t.archiveMaterial||null)}}},{key:"appendPage",value:function(){if(!this.waitingForLoad){this.waitingForLoad=!0;var t={searchString:this.props.searchString,person:this.props.searchPerson,place:this.props.searchPlace,museum:this.props.searchMuseum,genre:this.props.searchGenre,tags:this.props.searchTags,type:this.props.searchType,hue:this.props.searchHue,saturation:this.props.searchSaturation};"simple"==this.props.listType&&(t.sort="insert_id"),this.fetchData(t,this.props.count,this.collection.currentPage+1,!0)}}},{key:"fetchNearestNeighbors",value:function(){var t="nearest_neighbors/"+this.props.nearestNeighborsType+"/"+this.props.nearestNeighbors+".json";console.log(t),fetch(t).then(function(t){return t.json()}.bind(this)).then(function(t){var e=h.default.map(h.default.filter(t,function(t){return t.similarity<1}),function(t){return t.filename});this.fetchData({ids:e.join(";")})}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"imageLoadedHandler",value:function(){setTimeout(function(){this.state.initialized||this.setState({initialized:!0})}.bind(this),200)}},{key:"render",value:function(){var t=h.default.max(h.default.map(this.state.images,function(t){return t&&t.size&&t.size.inner?t.size.inner.width:0})),e=[];h.default.each(this.state.images,function(n,r){var i;i="date-labels"==this.props.listType?c.default.createElement(_.default,{key:n.id,image:n,index:r}):"simple"==this.props.listType?c.default.createElement(x.default,{key:n.id,image:n,index:r}):c.default.createElement(v.default,{showColors:this.props.showColors,showGoogleLabels:this.props.showGoogleLabels,showDates:this.props.showDates,key:n.id,image:n,index:r,relativeSize:this.state.relativeSizes,maxWidth:t}),e.push(i),"simple"==this.props.listType&&((r+1)%3===0&&e.push(c.default.createElement("div",{key:"cf-3-"+r,className:"u-cf list-divider divider-3"})),(r+1)%2===0&&e.push(c.default.createElement("div",{key:"cf-2-"+r,className:"u-cf list-divider divider-2"})))}.bind(this)),window.imageListItems=e,0==e.length?e.push(c.default.createElement("h2",{key:"no-results",className:"no-results"},"Inga sktrffar")):e.push(c.default.createElement("div",{key:"grid-sizer",className:"grid-sizer"}));
var n;return n="date-labels"==this.props.listType?c.default.createElement(d.default,{className:"grid image-label-grid"+(this.state.initialized?" initialized":""),options:this.masonryOptions,disableImagesLoaded:!1,updateOnEachImageLoad:!0,onImagesLoaded:this.imageLoadedHandler},e):"simple"==this.props.listType?c.default.createElement("div",{className:"simple-list"},e,c.default.createElement("div",{className:"u-cf"})):c.default.createElement(d.default,{className:"grid image-grid"+(this.state.initialized?" initialized":""),options:this.masonryOptions,disableImagesLoaded:!1,updateOnEachImageLoad:!0,onImagesLoaded:this.imageLoadedHandler},e),this.props.columns||this.state.columns?c.default.createElement("div",{className:"grid grid-columns initialized"},e):c.default.createElement("div",{ref:"container","data-title":this.props.title,className:"image-list"+(this.state.relativeSizes?" relative-sizes":"")+(this.state.loading?" loading":""),style:this.state.images.length<2&&this.props.related?{display:"none"}:null},c.default.createElement("div",null,this.props.title&&this.state.images.length>0&&c.default.createElement("h3",null,this.props.title),this.props.related&&this.state.total>this.state.images.length&&c.default.createElement("a",{className:"view-more-link",href:"#/search/tags/"+this.props.related+"/"+this.props.relatedValue},"Visa alla")),this.state.images.length>1&&"date-labels"!=this.props.listType&&"simple"!=this.props.listType&&c.default.createElement("div",{className:"list-buttons"+(this.state.fixedButtons?" fixed":"")},c.default.createElement("button",{className:"circle-button icon-relative-sizes",onClick:function(){this.setState({relativeSizes:!this.state.relativeSizes})}.bind(this)},c.default.createElement("span",{className:"icon-box box-1"}),c.default.createElement("span",{className:"icon-box box-2"}),c.default.createElement("span",{className:"icon-box box-3"}),c.default.createElement("span",{className:"icon-box box-4"}))),n,c.default.createElement("div",{className:"loading-overlay"}))}}]),e}(c.default.Component);n.default=M},{"../collections/ImageListCollection":333,"./../utils/window-scroll":359,"./DateLabelListItem":337,"./ImageListItem":344,"./SimpleListItem":349,react:321,"react-masonry-component":250,underscore:329,"whatwg-fetch":331}],344:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=(r(l),t("./../utils/colorUtil")),f=r(h),d=t("chroma-js"),p=r(d),m=t("./../config"),g=r(m),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.imageLoadHandler=n.imageLoadHandler.bind(n),n.state={relativeSize:n.props.relativeSize,image:n.props.image||null,index:n.props.index||0},n}return a(e,t),s(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({relativeSize:t.relativeSize,image:t.image||this.state.image,index:t.index||this.state.index||0})}},{key:"imageLoadHandler",value:function(){this.forceUpdate()}},{key:"getProxyImageStyle",value:function(){if(this.refs.imageElement){var t=g.default.imageUrl+"255x/"+(this.state.image.images&&this.state.image.images.length>0?this.state.image.images[0].image:this.state.image.image?this.state.image.image:"")+".jpg",e={};if(this.state.relativeSize&&this.state.image.size&&this.state.image.size.inner){var n=this.refs.imageElement.clientWidth,r=this.refs.imageElement.clientHeight;e={backgroundImage:'url("'+t+'")',width:this.state.image.size.inner.width*(n/this.props.maxWidth),height:this.state.image.size.inner.width*(r/this.props.maxWidth)}}else e={backgroundImage:'url("'+t+'")',width:"100%",height:"100%"};return e}}},{key:"render",value:function(){var t=this.getProxyImageStyle(),e=this.state.image.images&&this.state.image.images[0].googleVisionColors?f.default.getDominantHex(this.state.image.images[0].googleVisionColors):"#191919";if(this.props.showColors)var n=this.state.image.images&&this.state.image.images[0].googleVisionColors?this.state.image.images[0].googleVisionColors.map(function(t,e){return c.default.createElement("span",{key:e,style:{display:"block",float:"left",height:10,width:100*t.score+"%",backgroundColor:(0,p.default)(t.color.red,t.color.green,t.color.blue).hex()}})}):[];if(this.props.showGoogleLabels)var r=this.state.image&&this.state.image.googleVisionLabels?this.state.image.googleVisionLabels.map(function(t){return c.default.createElement("div",{key:t.label+t.score},t.label+", "+t.score)}):[];return c.default.createElement("a",{style:{backgroundColor:e},className:"grid-item",key:this.state.image.id,href:"#image/"+this.state.image.id},c.default.createElement("div",{className:"image-wrapper"},c.default.createElement("div",{className:"image-proxy",style:t}),c.default.createElement("img",{ref:"imageElement",onLoad:this.imageLoadHandler,style:{transitionDelay:this.state.index/80+"s"},src:g.default.imageUrl+"255x/"+(this.state.image.images&&this.state.image.images.length>0?this.state.image.images[0].image:this.state.image.image?this.state.image.image:"")+".jpg"})),c.default.createElement("div",{className:"grid-title"},this.state.image.title,this.props.showDates&&c.default.createElement("div",{className:"smaller"},this.state.image.item_date_string),this.props.showGoogleLabels&&c.default.createElement("div",null,r),this.props.showColors&&c.default.createElement("div",{style:{padding:5,background:"#000",height:20,boxSizing:"border-box"},className:"colors"},n)))}}]),e}(c.default.Component);n.default=v},{"./../config":354,"./../utils/colorUtil":357,"chroma-js":4,react:321,underscore:329,"whatwg-fetch":331}],345:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=(r(l),t("leaflet")),f=r(h),d=t("react-router"),p=t("./../config"),m=r(p),g=t("./../utils/imageSizes"),v=r(g),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={initialized:!1,url:null},n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.map=f.default.map(this.refs.mapView,{minZoom:0,maxZoom:3,zoom:0,crs:f.default.CRS.Simple,zoomControl:!1}),window.map=this.map,this.props.imageObj&&this.loadImage(this.props.imageObj),document.body.classList.add("disable-scroll")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("disable-scroll")}},{key:"componentWillReceiveProps",value:function(t){t.imageObj&&this.loadImage(t.imageObj)}},{key:"loadImage",value:function(t){this.lowResOverlay&&this.map.removeLayer(this.lowResOverlay),this.highResOverlay&&this.map.removeLayer(this.highResOverlay);var e=window.innerWidth,n=(window.innerHeight,t?t.imagesize.width:4936),r=t?t.imagesize.height:5048,i=t.image,o=e/n,a=[[0,0],[r*o,n*o]];this.lowResOverlay=f.default.imageOverlay(m.default.imageUrl+v.default.getImageUrl()+"x/"+i+".jpg",a),this.lowResOverlay.addTo(this.map),this.highResOverlay=f.default.imageOverlay(m.default.imageUrl+i+".jpg",a),this.highResOverlay.addTo(this.map),this.map.setMaxBounds(a),this.map.panTo([r,0]),this.setState({initialized:!0,url:i})}},{key:"zoomButtonClickHandler",value:function(t){this.map.setZoom(this.map.getZoom()+t)}},{key:"render",value:function(){return c.default.createElement("div",{className:"image-map-container"+(this.state.initialized?" initialized":"")},c.default.createElement("div",{className:"map-container",ref:"mapView"}),c.default.createElement("div",{className:"map-toolbar"},c.default.createElement("div",{className:"toolbar-links"},c.default.createElement("a",{onClick:d.hashHistory.goBack},"Tillbaka")),c.default.createElement("div",{className:"toolbar-buttons"},c.default.createElement("a",{className:"circle-button icon-plus",onClick:this.zoomButtonClickHandler.bind(this,1)}),c.default.createElement("a",{className:"circle-button icon-minus",onClick:this.zoomButtonClickHandler.bind(this,-1)}),c.default.createElement("a",{className:"circle-button icon-download u-pull-right",href:this.state.url?m.default.imageUrl+this.state.url+".jpg":"",download:!0,target:"_blank"}))))}}]),e}(c.default.Component);n.default=y},{"./../config":354,"./../utils/imageSizes":358,leaflet:61,react:321,"react-router":278,underscore:329,"whatwg-fetch":331}],346:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=r(l),f=t("react-swipe-events"),d=r(f),p=t("./ImageList"),m=r(p),g=t("./ImageDisplay"),v=r(g),y=t("./Search"),_=(r(y),t("./../utils/window-scroll")),b=r(_),x=t("./../config"),w=r(x),E=t("chroma-js"),M=r(E),T=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pageClickHandler=n.pageClickHandler.bind(n),n.imageSwipedHandler=n.imageSwipedHandler.bind(n),n.mouseMoveHandler=n.mouseMoveHandler.bind(n),n.searchFormSearchHandler=n.searchFormSearchHandler.bind(n),n.state={image:null,fullDisplay:!1,fixedImageButtons:!0,flipped:!1,flippable:!1,currentPage:1},n.mouseIdleDuration=3e3,n}return a(e,t),s(e,[{key:"mouseMoveHandler",value:function(){document.body.classList.remove("hide-ui"),this.mouseIdleTimer&&clearTimeout(this.mouseIdleTimer),this.mouseIdleTimer=setTimeout(function(){this.refs.imageDisplay.state.enlargedDisplay&&document.body.classList.add("hide-ui")}.bind(this),this.mouseIdleDuration)}},{key:"fetchData",value:function(t){fetch(w.default.apiUrl+w.default.endpoints.document+t).then(function(t){return t.json()}).then(function(t){this.setState({image:t.data,flipped:!1,currentPage:1},function(){this.forceUpdate()}.bind(this))}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"pageClickHandler",value:function(t){this.setPage(t.currentTarget.dataset.page)}},{key:"imageSwipedHandler",value:function(t,e,n,r,i,o,a){this.state.fullDisplay||Math.abs(a)>100||Math.abs(o)<50||(e<r?this.getPage(this.state.currentPage-1,"front")&&this.setPage(this.state.currentPage-1):this.getPage(this.state.currentPage+1,"front")&&this.setPage(this.state.currentPage+1))}},{key:"setPage",value:function(t){this.setState({currentPage:t})}},{key:"searchFormSearchHandler",value:function(t){}},{key:"componentDidMount",value:function(){document.body.classList.add("image-view-open"),this.fetchData(this.props.params.imageId),setTimeout(function(){this.setState({fullDisplay:"full"==this.props.params.display})}.bind(this),200),(new b.default).scrollToY(0,1,"easeInOutSine")}},{key:"componentWillReceiveProps",value:function(t){this.setState({fullDisplay:"full"==t.params.display}),this.state.image&&this.state.image.id!=t.params.imageId&&(this.fetchData(t.params.imageId),(new b.default).scrollToY(0,1,"easeInOutSine"))}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("image-view-open"),document.body.classList.remove("hide-ui"),this.mouseIdleTimer&&clearTimeout(this.mouseIdleTimer)}},{key:"getPage",value:function(t,e){return h.default.find(this.state.image.images,function(n){return n.page&&n.page.number==t&&n.page.side==e})}},{key:"render",value:function(){if(this.state.image&&this.state.image.images[0]){document.title="Ivar Aroseniusarkivet - "+this.state.image.title;var t=(this.state.image.images[0].googleVisionColors?this.state.image.images[0].googleVisionColors.map(function(t,e){return t.hsv&&t.hsv.h?c.default.createElement("a",{href:"#/search/color/"+t.hsv.h+"/"+t.hsv.s,key:e,style:{display:"block",float:"left",height:10,width:100*t.score+"%",backgroundColor:(0,M.default)(t.color.red,t.color.green,t.color.blue).hex()}}):null}):[],this.state.image.persons?h.default.filter(this.state.image.persons,function(t){return""!=t}):[]),e=this.state.image.places?h.default.filter(this.state.image.places,function(t){return""!=t}):[],n=t.length>0?t.map(function(t,e){if(""!=t)return c.default.createElement("a",{key:t,className:"button-link",href:"#/search/person/"+t},t)}.bind(this)):[],r=e.length>0?e.map(function(t,e){if(""!=t)return c.default.createElement("a",{key:t,className:"button-link",href:"#/search/tags/place/"+t},t)}.bind(this)):[],i=e.length>0?e.map(function(t,e){if(""!=t)return c.default.createElement("div",{className:"related-list",key:t},c.default.createElement(m.default,{title:"Fler bilder frn "+t,related:"place",relatedValue:t,count:"10"}))}):[],o=t.length>0?t.map(function(t,e){if(""!=t)return c.default.createElement("div",{className:"related-list",key:t},c.default.createElement(m.default,{title:"Fler bilder av "+t,related:"person",relatedValue:t,archiveMaterial:"exclude",count:"10"}))}):[],a=t.length>0?t.map(function(t,e){if(""!=t)return c.default.createElement("div",{className:"related-list",key:t},c.default.createElement(m.default,{title:"Fler arkivdokument relaterade till "+t,related:"person",relatedValue:t,archiveMaterial:"only",count:"10"}))}):[],s=this.state.image.genre?h.default.filter(this.state.image.genre,function(t){return""!=t}):[],u=s.length>0?s.map(function(t,e){if(""!=t)return c.default.createElement("div",{className:"related-list",key:t},c.default.createElement(m.default,{title:"Fler objekt av underkategorin "+t.toLowerCase(),related:"genre",relatedValue:t,count:"10"}))}):[],l=s.length>0?s.map(function(t,e){if(""!=t)return c.default.createElement("a",{key:t,className:"button-link",href:"#/search/tags/genre/"+t},t.toLowerCase())}.bind(this)):[],f=this.state.image.type?h.default.filter(this.state.image.type,function(t){return""!=t}):[],p=f.length>0?f.map(function(t,e){if(""!=t)return c.default.createElement("a",{key:t,className:"button-link",href:"#/search/tags/type/"+t},t.toLowerCase())}.bind(this)):[],g=this.state.image.tags?this.state.image.tags.map(function(t,e){if(""!=t)return c.default.createElement("div",{className:"related-list",key:t},c.default.createElement(m.default,{title:"Fler objekt relaterade till "+t.toLowerCase(),related:"tag",relatedValue:t,count:"10"}))}):[],y=this.state.image.tags?h.default.filter(this.state.image.tags,function(t){return""!=t}):[],_=y.length>0?y.map(function(t,e){if(""!=t)return c.default.createElement("a",{key:t,className:"button-link",href:"#/search/tags/tags/"+t},t.toLowerCase())}.bind(this)):[];if(h.default.filter(this.state.image.images,function(t){return t.page&&("front"==t.page.side||"back"==t.page.side)}).length>2)var b=h.default.filter(this.state.image.images,function(t){return t.page&&"front"==t.page.side}),x=b.map(function(t,e){return c.default.createElement("a",{onClick:this.pageClickHandler,key:t.image,"data-page":t.page.number,className:"thumb"+(t.page.number==this.state.currentPage?" selected":"")},c.default.createElement("img",{src:w.default.imageUrl+"255x/"+t.image+".jpg"}))}.bind(this));var E={};return 2==this.state.image.images.length?(E.front=this.state.image.images[0],E.back=this.state.image.images[1]):this.state.image.images.length>2?(E.front=this.getPage(this.state.currentPage,"front")||this.state.image.images[0],this.getPage(this.state.currentPage,"back")&&(E.back=this.getPage(this.state.currentPage,"back"))):E.front=this.state.image.images[0],c.default.createElement("div",{className:"image-display-module",onMouseMove:this.mouseMoveHandler},c.default.createElement("a",{style:{position:"absolute",top:0,right:0,width:35,height:35,backgroundColor:"rgba(0, 0, 0, 0)",zIndex:2e3},className:"admin-link",href:w.default.adminUrl+"/#document/"+this.state.image.id}),c.default.createElement(d.default,{onSwiped:this.imageSwipedHandler},c.default.createElement(v.default,{ref:"imageDisplay",pathname:this.props.location.pathname,image:E,fullDisplay:this.state.fullDisplay})),this.state.image.images.length>2&&c.default.createElement("div",{className:"page-thumbnails"},x),c.default.createElement("div",{className:"container"},c.default.createElement("h2",null,this.state.image.title),this.state.image.subtitle&&c.default.createElement("h3",{style:{marginTop:-20}},this.state.image.subtitle),c.default.createElement("div",{className:"row"},(this.state.image.item_date_str||this.state.image.size&&this.state.image.size.inner||this.state.image.technique_material)&&c.default.createElement("div",{className:"four columns"},this.state.image.item_date_str&&c.default.createElement("div",{className:"attribute"},c.default.createElement("span",{className:"label"},"Datering:")," ",this.state.image.item_date_str),this.state.image.technique_material&&c.default.createElement("div",{className:"attribute"},c.default.createElement("span",{className:"label"},"Teknik och material:")," ",this.state.image.technique_material),this.state.image.size&&this.state.image.size.inner&&c.default.createElement("div",{className:"attribute"},c.default.createElement("span",{className:"label"},"Mtt:")," ",this.state.image.size.inner.height+"x"+this.state.image.size.inner.width," cm"),c.default.createElement("div",{className:"attribute"},c.default.createElement("span",{className:"label"},"Rttigheter:")," ",c.default.createElement("a",{href:"http://aroseniusarkivet.org/projekt/licens/"},"CC PD / CC BY-SA"))),c.default.createElement("div",{className:"four columns"},c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Samling:")," ",c.default.createElement("a",{className:"button-link",href:"#/search/tags/museum/"+this.state.image.collection.museum},this.state.image.collection.museum)),p.length>0&&c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Kategori:")," ",p),l.length>0&&c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Underkategori:")," ",l),r.length>0&&c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Platser:")," ",r)),c.default.createElement("div",{className:"four columns"},n.length>0&&c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Personer:")," ",n),_.length>0&&c.default.createElement("div",{className:"attribute bottom-margin-5"},c.default.createElement("span",{className:"label"},"Taggar:")," ",_))),c.default.createElement("br",null),c.default.createElement("p",null,this.state.image.description),this.state.image.content&&c.default.createElement("div",null,c.default.createElement("br",null),c.default.createElement("h3",null,"Transkription"),c.default.createElement("div",{className:"text-container"},c.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.state.image.content.split("\n").join("<br />")}})))),c.default.createElement("div",{className:"container"},("Konstverk"==this.state.image.type[0]||"Fotografi"==this.state.image.type[0])&&c.default.createElement("div",{className:"related-list"},c.default.createElement(m.default,{title:"Similar",nearestNeighbors:this.props.params.imageId,nearestNeighborsType:this.state.image.type[0].toLowerCase(),count:"10"})),g.length>0&&c.default.createElement("div",null,g),o.length>0&&c.default.createElement("div",null,o),a.length>0&&c.default.createElement("div",null,a),i.length>0&&c.default.createElement("div",null,i),u.length>0&&c.default.createElement("div",null,u),c.default.createElement("div",{className:"related-list"},c.default.createElement(m.default,{title:"Fler objekt frn "+this.state.image.collection.museum,related:"museum",relatedValue:this.state.image.collection.museum,count:"10"}))))}return c.default.createElement("div",null)}}]),e}(c.default.Component);n.default=T},{"./../config":354,"./../utils/window-scroll":359,"./ImageDisplay":342,"./ImageList":343,"./Search":348,"chroma-js":4,react:321,"react-swipe-events":306,underscore:329,"whatwg-fetch":331}],347:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-router"),h=t("react-masonry-component"),f=r(h),d=t("./../config"),p=r(d),m=t("underscore"),g=(r(m),t("./TagsSelector")),v=r(g),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.tagSelectChangeHandler=n.tagSelectChangeHandler.bind(n),n.searchModeChangedHandler=n.searchModeChangedHandler.bind(n),n.tagRemoveButtonClickHandler=n.tagRemoveButtonClickHandler.bind(n),n.tagListLoadHandler=n.tagListLoadHandler.bind(n),n.state={initialized:!1,selectedTags:{person:n.props.person||null,place:n.props.place||null,museum:n.props.museum||null,genre:n.props.genre||null,tags:n.props.tags||null,type:n.props.type||null},version:3},window.eventBus.addEventListener("search.mode-changed",n.searchModeChangedHandler),n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){setTimeout(function(){this.setState({initialized:!0})}.bind(this),300)}},{key:"searchModeChangedHandler",value:function(){this.setState({selectedTags:{person:null,place:null,museum:null,genre:null,tags:null,type:null}})}},{key:"onDropdownOpen",value:function(t){this.setState({openDropdown:t})}},{key:"tagSelectChangeHandler",value:function(t){var e=this.state.selectedTags;e[t.searchParam]&&e[t.searchParam]==t.value?e[t.searchParam]=null:e[t.searchParam]=t.value,this.setState({selectedTags:e},function(){this.updateRoute()}.bind(this))}},{key:"tagRemoveButtonClickHandler",value:function(t){var e=this.state.selectedTags;e[t.currentTarget.dataset.tagname]=null,this.setState({selectedTags:e},function(){this.updateRoute()}.bind(this))}},{key:"tagListLoadHandler",value:function(){this.refs.masonry&&this.refs.masonry.performLayout()}},{key:"updateRoute",value:function(){var t=this.state.selectedTags,e=[];for(var n in t)t[n]&&""!=t[n]&&e.push(n+"/"+t[n]);l.hashHistory.push("/search/tags/"+e.join("/"))}},{key:"componentWillReceiveProps",value:function(t){this.setState({selectedTags:{person:t.person||null,place:t.place||null,museum:t.museum||null,genre:t.genre||null,tags:t.tags||null,type:t.type||null}})}},{key:"personTagSort",value:function(t,e){}},{key:"render",value:function(){var t=[],e=this.state.selectedTags;for(var n in e)e[n]&&t.push(c.default.createElement("span",{key:e[n],className:"button-link",onClick:this.tagRemoveButtonClickHandler,"data-tagname":n},e[n],c.default.createElement("span",{className:"remove-button",dangerouslySetInnerHTML:{__html:"&#xd7"}})));return c.default.createElement("div",{className:"fade-in-component multitags-selector"+(this.state.initialized?" initialized":"")},1==this.state.version&&c.default.createElement(f.default,{ref:"masonry",className:"tags-grid",options:{columnWidth:".grid-sizer",percentPosition:!0}},c.default.createElement("div",{className:"grid-sizer width-33"}),c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Samlingar"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"museum"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Samling",expandable:!1,limit:10,searchParam:"museum",selectedTag:this.state.selectedTags.museum,endpoint:p.default.endpoints.museums,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container width-33"},c.default.createElement("h3",null,"Personer"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"personer"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Personer",dropdownButtonLabel:"Fler personer",expandable:!0,limit:50,searchParam:"person",selectedTag:this.state.selectedTags.person,endpoint:p.default.endpoints.persons,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container width-33"},c.default.createElement("h3",null,"Platser"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Platser",expandable:!1,limit:20,searchParam:"place",selectedTag:this.state.selectedTags.place,endpoint:p.default.endpoints.places,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container width-33"},c.default.createElement("h3",null,"Kategorier"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Kategori",expandable:!1,limit:20,searchParam:"type",selectedTag:this.state.selectedTags.type,endpoint:p.default.endpoints.types,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container width-33"},c.default.createElement("h3",null,"Genrer"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"genre"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Genre",dropdownButtonLabel:"Fler genre",expandable:!1,limit:18,selectedTag:this.state.selectedTags.genre,searchParam:"genre",endpoint:p.default.endpoints.genres,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container width-33"},c.default.createElement("h3",null,"Taggar"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"tags"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Taggar",expandable:!0,limit:60,searchParam:"tags",selectedTag:this.state.selectedTags.tags,endpoint:p.default.endpoints.tags,onLoad:this.tagListLoadHandler}))),2==this.state.version&&c.default.createElement("div",{className:"tags-grid grid-columns"},c.default.createElement("div",{className:"tags-column"},c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Samlingar"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"museum"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Samling",expandable:!1,limit:10,searchParam:"museum",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.museums,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Kategorier"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Kategori",expandable:!1,limit:10,searchParam:"type",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.types,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Taggar"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"tags"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Taggar",dropdownButtonLabel:"Fler taggar",expandable:!0,limit:60,searchParam:"tags",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.tags,onLoad:this.tagListLoadHandler}))),c.default.createElement("div",{className:"tags-column"},c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Personer"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"personer"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Personer",dropdownButtonLabel:"Fler personer",expandable:!0,limit:50,searchParam:"person",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.persons,onLoad:this.tagListLoadHandler}))),c.default.createElement("div",{className:"tags-column"},c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Platser"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Platser",expandable:!1,limit:20,searchParam:"place",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.places,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container"},c.default.createElement("h3",null,"Genrer"),c.default.createElement(v.default,{onDropdownOpen:this.onDropdownOpen.bind(this,"genre"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Genre",dropdownButtonLabel:"Fler genre",expandable:!1,limit:18,selectedTag:this.state.selectedTags,searchParam:"genre",endpoint:p.default.endpoints.genres,onLoad:this.tagListLoadHandler}))),c.default.createElement("div",{className:"u-cf"})),3==this.state.version&&c.default.createElement("div",{className:"tags-columns"},c.default.createElement("div",{className:"tags-container"},c.default.createElement(v.default,{title:"Samlingar",onDropdownOpen:this.onDropdownOpen.bind(this,"museum"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Samlingar",dropdownButtonLabel:"Fler",expandable:!1,limit:5,searchParam:"museum",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.museums,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{
className:"tags-container"},c.default.createElement(v.default,{title:"Kategorier",onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Typer",dropdownButtonLabel:"Fler",expandable:!1,limit:8,searchParam:"type",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.types,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"u-cf divider-2"}),c.default.createElement("div",{className:"tags-container"},c.default.createElement(v.default,{title:"Underkategorier",onDropdownOpen:this.onDropdownOpen.bind(this,"genre"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Underkategorier",dropdownButtonLabel:"Fler",expandable:!0,limit:10,selectedTag:this.state.selectedTags,searchParam:"genre",endpoint:p.default.endpoints.genres,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"u-cf divider-1"}),c.default.createElement("div",{className:"tags-container"},c.default.createElement(v.default,{title:"Personer",onDropdownOpen:this.onDropdownOpen.bind(this,"personer"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Personer",dropdownButtonLabel:"Fler",expandable:!0,limit:7,dropdownItemsSortFunc:function(t,e){var n=t.value.split(" "),r=e.value.split(" ");return n[n.length-1]<r[r.length-1]?-1:r[r.length-1]<n[n.length-1]?1:0},searchParam:"person",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.persons,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"u-cf divider-2"}),c.default.createElement("div",{className:"tags-container"},c.default.createElement(v.default,{title:"Platser",onDropdownOpen:this.onDropdownOpen.bind(this,"ort"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Platser",dropdownButtonLabel:"Fler",expandable:!0,limit:12,searchParam:"place",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.places,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"tags-container"},c.default.createElement(v.default,{title:"Taggar",onDropdownOpen:this.onDropdownOpen.bind(this,"tags"),onSelect:this.tagSelectChangeHandler,dropdownHeaderText:"Taggar",dropdownButtonLabel:"Fler",expandable:!0,limit:13,searchParam:"tags",selectedTag:this.state.selectedTags,endpoint:p.default.endpoints.tags,onLoad:this.tagListLoadHandler})),c.default.createElement("div",{className:"u-cf"})),t.length>0&&c.default.createElement("div",{className:"selected-tags"},t))}}]),e}(c.default.Component);n.default=y},{"./../config":354,"./TagsSelector":350,react:321,"react-masonry-component":250,"react-router":278,underscore:329}],348:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("react-router"),h=t("./ThumbnailCircles"),f=r(h),d=t("./ColorSearchSelector"),p=r(d),m=t("./MultiTagsSelector"),g=r(m),v=t("./DropdownMenu"),y=r(v),_=t("./AutocompleteDiscoverInput"),b=r(_),x=t("./../utils/window-scroll"),w=r(x),E=t("./../config"),M=r(E),T=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.toggleButtonClick=n.toggleButtonClick.bind(n),n.triggerSearch=n.triggerSearch.bind(n),n.searchInputKeyPress=n.searchInputKeyPress.bind(n),n.searchInputChangeHandler=n.searchInputChangeHandler.bind(n),n.personSelectorChangeHandler=n.personSelectorChangeHandler.bind(n),n.colorSelectorSelect=n.colorSelectorSelect.bind(n),n.eventBusOpenTagsHandler=n.eventBusOpenTagsHandler.bind(n),n.receivedSearchParamsHandler=n.receivedSearchParamsHandler.bind(n),n.state={searchParams:{}},n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.setState({searchParams:this.props.searchParams,open:Boolean(this.state.open||this.props.searchParams.search||this.props.searchParams.searchperson||this.props.searchParams.person||this.props.searchParams.museum||this.props.searchParams.hue||this.props.searchParams.saturation||this.props.searchParams.tags||this.props.searchParams.type||this.props.searchParams.genre||this.props.searchParams.place),searchMode:this.props.searchParams.searchperson?"persons":this.props.searchParams.hue&&this.props.searchParams.saturation?"colors":this.props.searchParams.person||this.props.searchParams.museum||this.props.searchParams.tags||this.props.searchParams.type||this.props.searchParams.genre||this.props.searchParams.place?"multi-tags":this.state.searchMode}),window.eventBus.addEventListener("search.open-tags",this.eventBusOpenTagsHandler)}},{key:"componentWillUnmount",value:function(){window.eventBus.removeEventListener("search.open-tags",this.eventBusOpenTagsHandler),window.eventBus.removeEventListener("application.searchParams",this.receivedSearchParamsHandler)}},{key:"componentWillReceiveProps",value:function(t){t.searchParams&&(this.setState({searchParams:t.searchParams,open:Boolean(this.state.open||t.searchParams.search||t.searchParams.searchperson||t.searchParams.person||t.searchParams.museum||t.searchParams.hue||t.searchParams.saturation||t.searchParams.tags||t.searchParams.type||t.searchParams.genre||t.searchParams.place),searchMode:t.searchParams.searchperson?"persons":t.searchParams.hue&&t.searchParams.saturation?"colors":t.searchParams.person||t.searchParams.museum||t.searchParams.tags||t.searchParams.type||t.searchParams.genre||t.searchParams.place?"multi-tags":this.state.searchMode}),!this.state.open&&Boolean(t.searchParams.searchString||t.searchParams.searchperson))}},{key:"eventBusOpenTagsHandler",value:function(){this.setSearchMode("multi-tags"),setTimeout(function(){var t=new w.default;t.scrollToY(this.getOffsetTop(this.refs.searchButton),800,"easeInOutSine",!0)}.bind(this),200)}},{key:"getOffsetTop",value:function(t){var e=0;if(!t)return 0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e}},{key:"receivedSearchParamsHandler",value:function(t,e){if(this.setState({searchParams:e,open:Boolean(this.state.open||e.search||e.searchperson||e.person||e.museum||e.hue||e.saturation||e.tags||e.type||e.genre||e.place),searchMode:e.searchperson?"persons":e.hue&&e.saturation?"colors":e.person||e.museum||e.tags||e.type||e.genre||e.place?"multi-tags":this.state.searchMode}),!this.state.open&&Boolean(e.searchString||e.searchperson)){var n=new w.default;n.scrollToY(this.getOffsetTop(this.refs.searchButton),1e3,"easeInOutSine")}}},{key:"toggleButtonClick",value:function(){this.setState({open:!this.state.open},function(){if(this.state.open){var t=new w.default;t.scrollToY(this.getOffsetTop(this.refs.searchButton)-50,800,"easeInOutSine",!0),this.refs.searchInput.focus()}}.bind(this))}},{key:"searchInputKeyPress",value:function(t){13==t.charCode&&this.triggerSearch()}},{key:"searchInputChangeHandler",value:function(t){var e=this.state.searchParams;e.search=t.target.value,this.setState({searchParams:e},function(){t.triggerSearch&&this.triggerSearch()}.bind(this))}},{key:"personSelectorChangeHandler",value:function(t){var e=this.state.searchParams;e.searchperson=t.selectedPersons,e.hue=null,e.saturation=null,this.setState({searchParams:e},this.triggerSearch)}},{key:"colorSelectorSelect",value:function(t){var e=this.state.searchParams;e.searchperson=[],e.hue=t.hue,e.saturation=t.saturation,this.setState({searchParams:e},this.triggerSearch)}},{key:"setSearchMode",value:function(t){setTimeout(function(){this.refs.searchModeDropdownMenu.closeMenu(),t!=this.state.searchMode&&window.eventBus.dispatch("search.mode-changed"),this.setState({searchMode:t,manualOpen:!0})}.bind(this),100)}},{key:"triggerSearch",value:function(){var t="";this.state.searchParams.search&&""!=this.state.searchParams.search&&(t+="/query/"+this.state.searchParams.search),this.state.searchParams.searchperson&&this.state.searchParams.searchperson.length>0&&(t+="/person/"+this.state.searchParams.searchperson.join(";")),this.state.searchParams.hue&&this.state.searchParams.saturation&&(t+="/color/"+this.state.searchParams.hue+"/"+this.state.searchParams.saturation),l.hashHistory.push((this.props.imageId?"/image/"+this.props.imageId:"")+"/search"+t)}},{key:"render",value:function(){var t="persons"==this.state.searchMode?c.default.createElement(f.default,{selectedPersons:this.state.searchParams.searchperson,selectionChanged:this.personSelectorChangeHandler}):"colors"==this.state.searchMode?c.default.createElement(p.default,{onColorSelect:this.colorSelectorSelect}):"multi-tags"==this.state.searchMode?c.default.createElement(g.default,{museum:this.state.searchParams.museum,genre:this.state.searchParams.genre,tags:this.state.searchParams.tags,type:this.state.searchParams.type,person:this.state.searchParams.person,place:this.state.searchParams.place}):null;return c.default.createElement("div",{className:"search-module"+(this.state.open||this.state.manualOpen?" open":""),ref:"container"},c.default.createElement("button",{ref:"searchButton",className:"toggle-search-button",onClick:this.toggleButtonClick},"Search"),c.default.createElement("div",{className:"module-content mode-"+(this.state.searchMode||"persons")},c.default.createElement(b.default,{ref:"searchInput",searchUrl:M.default.apiUrl+M.default.endpoints.autocomplete+"?search=$s",dataField:"titles",valueField:"key",value:this.state.searchParams.search,type:"text",placeholder:"Skriv hr...",inputClassName:"search-input",onChange:this.searchInputChangeHandler,onKeyPress:this.searchInputKeyPress,defaultAction:"setValue"}),c.default.createElement("div",{className:"filter-menu"},c.default.createElement(y.default,{ref:"searchModeDropdownMenu",label:"Filter >"},c.default.createElement("button",{onClick:this.setSearchMode.bind(this,"persons")},"Personer"),c.default.createElement("button",{onClick:this.setSearchMode.bind(this,"colors"),style:{display:"none"}},"Frger"),c.default.createElement("button",{onClick:this.setSearchMode.bind(this,"multi-tags")},"Nyckelord"))),t))}}]),e}(c.default.Component);n.default=T},{"./../config":354,"./../utils/window-scroll":359,"./AutocompleteDiscoverInput":335,"./ColorSearchSelector":336,"./DropdownMenu":338,"./MultiTagsSelector":347,"./ThumbnailCircles":351,react:321,"react-router":278}],349:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=r(l),f=t("./../utils/colorUtil"),d=r(f),p=t("./../config"),m=r(p),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={image:n.props.image||null,index:n.props.index||0},n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.props.imageId&&this.fetchData(this.props.imageId)}},{key:"componentWillReceiveProps",value:function(t){t.imageId&&t.imageId!=this.props.imageId?this.fetchData(t.imageId):this.setState({image:t.image||this.state.image,index:t.index||this.state.index||0})}},{key:"fetchData",value:function(t){fetch(m.default.apiUrl+m.default.endpoints.document+t).then(function(t){return t.json()}).then(function(t){this.setState({image:t.data},function(){this.forceUpdate()}.bind(this))}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"render",value:function(){if(!this.state.image)return null;var t=m.default.imageUrl+"255x/"+(this.state.image.images&&this.state.image.images.length>0?this.state.image.images[0].image:this.state.image.image?this.state.image.image:"")+".jpg",e=this.state.image.images&&this.state.image.images[0].googleVisionColors?d.default.getDominantHex(this.state.image.images[0].googleVisionColors):"#191919";return c.default.createElement("a",{ref:"el",className:"simple-list-item",key:this.state.image.id,href:"#image/"+this.state.image.id},c.default.createElement("div",{className:"image-thumb",style:{backgroundColor:e}},c.default.createElement("img",{src:t})),c.default.createElement("div",{className:"item-info"},c.default.createElement("div",{className:"title"},this.state.image.title,this.state.image.item_date_string&&c.default.createElement("div",{className:"year"},this.state.image.item_date_string)),c.default.createElement("div",{className:"item-meta"},c.default.createElement("div",null,"Inventarie: ",this.state.image.insert_id),c.default.createElement("div",null,this.state.image.collection?this.state.image.collection.museum:""),c.default.createElement("div",null,"string"==typeof this.state.image.type?this.state.image.type:h.default.compact(this.state.image.type).join(", ")),c.default.createElement("div",null,this.state.image.technique_material)),c.default.createElement("div",{className:"u-cf"})))}}]),e}(c.default.Component);n.default=g},{"./../config":354,"./../utils/colorUtil":357,react:321,underscore:329,"whatwg-fetch":331}],350:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u);t("whatwg-fetch");var l=t("underscore"),h=r(l),f=t("./../config"),d=r(f),p=t("./DropdownMenu"),m=r(p),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.itemClickHandler=n.itemClickHandler.bind(n),n.showAllButtonClickHandler=n.showAllButtonClickHandler.bind(n),n.state={initialized:!1,loading:!0,data:[],selectedTag:n.props.selectedTag[n.props.searchParam]||""},n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.fetchData(),setTimeout(function(){this.setState({initialized:!0})}.bind(this),300)}},{key:"itemClickHandler",value:function(t){this.props.onSelect&&this.props.onSelect({searchParam:this.props.searchParam,value:this.state.selectedTag==t.currentTarget.dataset.value?null:t.currentTarget.dataset.value}),this.setState({selectedTag:this.state.selectedTag==t.currentTarget.dataset.value?null:t.currentTarget.dataset.value}),this.refs.dropdown&&this.refs.dropdown.closeMenu()}},{key:"showAllButtonClickHandler",value:function(t){this.refs.dropdown.menuButtonClick()}},{key:"fetchData",value:function(){var t=d.default.apiUrl+this.props.endpoint+"?sort=doc_count";fetch(t).then(function(t){return t.json()}).then(function(t){this.loading=!1;var e=t;this.props.sortFunction&&(e=e.sort(this.props.sortFunction)),this.setState({loading:!1,data:e},function(){this.props.onLoad&&setTimeout(function(){this.props.onLoad()}.bind(this),100)}.bind(this))}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"componentWillReceiveProps",value:function(t){this.setState({selectedTag:t.selectedTag[this.props.searchParam]})}},{key:"render",value:function(){var t=function(t,e){return c.default.createElement("a",{key:t.value,className:"button-link"+(this.state.selectedTag==t.value?" selected":""),"data-value":t.value,onClick:this.itemClickHandler},t.value)}.bind(this),e=this.state.data.length>0?h.default.filter(this.state.data,function(t){return t.value&&""!=t.value}):[];this.props.expandable&&this.props.dropdownItemsSortFunc&&(e=e.sort(this.props.dropdownItemsSortFunc));var n=e.map(t);if(this.props.expandable)var r=Number(this.props.limit)||10,i=this.state.data.length>0?h.default.filter(this.state.data,function(t,e){return t.value&&""!=t.value&&e<r+10}).map(t):[];return c.default.createElement("div",{className:"tag-selector"+(this.state.initialized?" initialized":"")},this.props.title&&c.default.createElement("h3",null,this.props.title,i&&n.length>0&&c.default.createElement("a",{className:"dropdown-link",onClick:this.showAllButtonClickHandler},"Visa alla")),c.default.createElement("div",{className:"button-list"},i?i:n),i&&n.length>0&&c.default.createElement(m.default,{ref:"dropdown",showCloseButton:!0,disableScrollOnOpen:!0,onOpen:this.props.onDropdownOpen,headerText:this.props.dropdownHeaderText,label:this.props.dropdownButtonLabel||"..."},n))}}]),e}(c.default.Component);n.default=g},{"./../config":354,"./DropdownMenu":338,react:321,underscore:329,"whatwg-fetch":331}],351:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("react"),c=r(u),l=t("underscore"),h=r(l),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={selectedPersons:[],initialized:!1},n.thumbnailClick=n.thumbnailClick.bind(n),n.thumbnails=[{image:"img/persons/ivar.jpg",label:"Ivar Arosenius",shortLabel:"Ivar"},{image:"img/persons/lillan.jpg",label:'Eva "Lillan" Arosenius',shortLabel:"Lillan"},{image:"img/persons/eva.jpg",label:"Ida (Eva) Arosenius",shortLabel:"Eva"},{image:"img/persons/kruse.jpg",label:"Ole Kruse",shortLabel:"Ole"},{image:"img/persons/henning.jpg",label:"Gerhard Henning",shortLabel:"Gerhard"},{image:"img/persons/sahlin.jpg",label:"Ester Sahlin",shortLabel:"Ester"}],n}return a(e,t),s(e,[{key:"thumbnailClick",value:function(t){var e=this.state.selectedPersons||[];h.default.indexOf(e,this.thumbnails[t].label)==-1?e.push(this.thumbnails[t].label):e=h.default.without(e,this.thumbnails[t].label),this.setState({selectedPersons:e},function(){this.props.selectionChanged&&this.props.selectionChanged({selectedPersons:this.state.selectedPersons})}.bind(this))}},{key:"componentDidMount",value:function(){this.setState({selectedPersons:this.props.selectedPersons?this.props.selectedPersons.split?this.props.selectedPersons.split(";"):this.props.selectedPersons:[]}),setTimeout(function(){this.setState({initialized:!0})}.bind(this),300)}},{key:"componentWillReceiveProps",value:function(t){this.setState({selectedPersons:t.selectedPersons?t.selectedPersons.split?t.selectedPersons.split(";"):t.selectedPersons:[]})}},{key:"render",value:function(){var t=this.thumbnails.map(function(t,e){return c.default.createElement("a",{onClick:function(t){t.preventDefault(),this.thumbnailClick(e)}.bind(this),key:e,href:"#",className:"thumb-item"+(h.default.indexOf(this.state.selectedPersons,t.label)>-1?" selected":""),style:{backgroundImage:"url("+t.image+")"}},c.default.createElement("span",null,t.shortLabel))}.bind(this));return c.default.createElement("div",{className:"fade-in-component thumb-list"+(this.state.initialized?" initialized":"")},t)}}]),e}(c.default.Component);n.default=f},{react:321,underscore:329}],352:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("react"),l=i(c);t("whatwg-fetch");var h=t("underscore"),f=i(h),d=t("react-masonry-component"),p=(i(d),t("d3-scale")),m=r(p),g=t("./ImageList"),v=i(g),y=t("./../utils/window-scroll"),_=(i(y),t("./../config")),b=i(_),x=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return window.timeline=n,n.yearLabelClickHandler=n.yearLabelClickHandler.bind(n),n.yearSelectChangeHandler=n.yearSelectChangeHandler.bind(n),n.yearLabelMouseOverHander=n.yearLabelMouseOverHander.bind(n),n.windowScrollHandler=n.windowScrollHandler.bind(n),n.waitForScrollCheck=!1,n.state={data:[],detailYears:[],selectedYear:0,hoveredYear:0,timelineVisible:!0,fixedTimeline:!1},n}return s(e,t),u(e,[{key:"yearLabelClickHandler",value:function(t){var e=t.target.dataset.year||t.currentTarget.dataset.year;this.selectYear(e)}},{key:"yearSelectChangeHandler",value:function(t){var e=t.target.value;console.log(e),this.selectYear(e)}},{key:"selectYear",value:function(t){this.setState({selectedYear:t}),document.getElementsByClassName("year-"+t)[0].scrollIntoView()}},{key:"yearLabelMouseOverHander",value:function(t){if(this.state.data.length>30){var e,n=t.currentTarget.dataset.year,r=f.default.findIndex(this.state.data,function(t){return t.year==n});if(n%10==0||n==this.state.data[0].year)e=n;else{for(var i,o=r;o>=0;o--)this.state.data[o].year%10!=0&&0!=o||i||(i=this.state.data[o].year);e=i}var a=!1,s=f.default.filter(this.state.data,function(t){return t.year>e&&t.year%10==0&&(a=!0),t.year>=e&&!a});this.setState({detailYears:s,hoveredYear:e})}}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.windowScrollHandler),this.windowScrollHandler(),this.scrollCheckInterval=setInterval(this.checkScroll.bind(this),500),this.handleProps(this.props,!0),this.positionTimeline()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.windowScrollHandler),clearInterval(this.scrollCheckInterval)}},{key:"isInViewport",value:function(t,e,n){var r=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;if(e)var o=r+(n?n:0)<window.innerHeight;else var o=r<window.innerHeight&&i>=100;return o}},{key:"windowScrollHandler",value:function(){this.scrollChanged=!0}},{key:"positionTimeline",value:function(){if(this.refs.container){var t=this.refs.container.getBoundingClientRect().top;document.documentElement.clientHeight;this.setState({fixedTimeline:t<0})}}},{key:"checkScroll",value:function(){if(this.scrollChanged&&!this.waitForScrollCheck){for(var t=0;t<this.refs.galleryContainer.children.length;t++){var e=this.refs.galleryContainer.children[t];if(this.isInViewport(e)){this.setState({selectedYear:e.dataset.year});break}}this.waitForScrollCheck=!0,setTimeout(function(){this.waitForScrollCheck=!1}.bind(this),1e3),this.positionTimeline(),this.scrollChanged=!1}}},{key:"componentWillReceiveProps",value:function(t){this.handleProps(t)}},{key:"handleProps",value:function(t,e){t.searchString||t.searchPerson||t.searchPlace||t.searchMuseum||t.searchGenre||t.searchTags||t.searchType||t.searchHue||t.searchSaturation||0!=this.state.data.length?(this.props.searchString!=t.searchString||this.props.searchPerson!=t.searchPerson||this.props.searchPlace!=t.searchPlace||this.props.searchMuseum!=t.searchMuseum||this.props.searchGenre!=t.searchGenre||this.props.searchTags!=t.searchTags||this.props.searchType!=t.searchType||this.props.searchHue!=t.searchHue||this.props.searchSaturation!=t.searchSaturation||e)&&(this.waitingForLoad=!0,this.setState({loading:!0}),this.fetchYears({searchString:t.searchString,person:t.searchPerson,place:t.searchPlace,museum:t.searchMuseum,genre:t.searchGenre,tags:t.searchTags,type:t.searchType,hue:t.searchHue,saturation:t.searchSaturation})):(this.waitingForLoad=!0,this.fetchYears())}},{key:"formatYearRangeData",value:function(t){var e=[];return f.default.each(t,function(t){e.push(t),void 0==f.default.find(e,function(e){return parseInt(e.year)==10*Math.floor(t.year/10)})&&e.push({doc_count:0,year:10*Math.floor(t.year/10)})}),e.sort(function(t,e){return parseInt(t.year)-parseInt(e.year)}),e}},{key:"fetchYears",value:function(t){var e=[];t&&(t.searchString&&e.push("search="+t.searchString),t.person&&""!=t.person&&e.push("person="+(t.person.join?t.person.join(";"):t.person)),t.place&&""!=t.place&&e.push("place="+t.place),t.museum&&""!=t.museum&&e.push("museum="+t.museum),t.genre&&""!=t.genre&&e.push("genre="+t.genre),t.tags&&""!=t.tags&&e.push("tags="+t.tags),t.type&&""!=t.type&&e.push("type="+t.type),t.hue&&""!=t.hue&&e.push("hue="+t.hue),t.saturation&&""!=t.saturation&&e.push("saturation="+t.saturation)),fetch(b.default.apiUrl+b.default.endpoints.year_range+(e.length>0?"?"+e.join("&"):"")).then(function(t){return t.json()}).then(function(t){this.setState({data:this.formatYearRangeData(t)},function(){this.forceUpdate(),console.log("forcing an update")}.bind(this))}.bind(this)).catch(function(t){console.log("parsing failed",t)})}},{key:"render",value:function(){var t=this.state.data.map(function(t){return t.doc_count>0?l.default.createElement("div",{key:t.year,"data-year":t.year,className:"year-item year-"+t.year},l.default.createElement("h3",null,t.year),l.default.createElement(v.default,{year:t.year,archiveMaterial:"exclude",lazyLoad:!0,forceUpdate:!0,searchString:this.props.searchString,searchPerson:this.props.searchPerson,searchPlace:this.props.searchPlace,searchMuseum:this.props.searchMuseum,searchGenre:this.props.searchGenre,searchTags:this.props.searchTags,searchType:this.props.searchType,searchHue:this.props.searchHue,searchSaturation:this.props.searchSaturation}),l.default.createElement("br",null),l.default.createElement(v.default,{title:"Dokument frn "+t.year,year:t.year,archiveMaterial:"only",showDates:!0,lazyLoad:!0,forceUpdate:!0,searchString:this.props.searchString,searchPerson:this.props.searchPerson,searchPlace:this.props.searchPlace,searchMuseum:this.props.searchMuseum,searchGenre:this.props.searchGenre,searchTags:this.props.searchTags,searchType:this.props.searchType,searchHue:this.props.searchHue,searchSaturation:this.props.searchSaturation}),l.default.createElement("br",null),l.default.createElement("br",null)):l.default.createElement("div",{key:t.year,"data-year":t.year,className:"year-"+t.year})}.bind(this)),e=f.default.min(this.state.detailYears,function(t){return t.doc_count}).doc_count,n=f.default.max(this.state.detailYears,function(t){return t.doc_count}).doc_count,r=m.scaleLinear().domain([e,n]),i=f.default.min(this.state.data,function(t){return t.doc_count}).doc_count,o=f.default.max(this.state.data,function(t){return t.doc_count}).doc_count,a=m.scaleLinear().domain([i,o]),s=function(){if(this.state.data.length>0)return{maxHeight:16*this.state.data.length}}.bind(this);return l.default.createElement("div",{className:"timeline-view",ref:"container"},l.default.createElement("div",{className:"timeline-year-select"+(this.state.fixedTimeline?" fixed":"")},l.default.createElement("select",{onChange:this.yearSelectChangeHandler},this.state.data.map(function(t,e){return l.default.createElement("option",{key:t.year,value:t.year},t.year+" ("+t.doc_count+")")}))),l.default.createElement("div",{className:"timeline-year-list flex"+(this.state.timelineVisible?" visible":"")+(this.state.fixedTimeline?" fixed":""),style:s()},this.state.data.map(function(t,e){for(var n=[],i=0;i<t.doc_count;i++)n.push(l.default.createElement("span",{className:"point",key:i}));return l.default.createElement("a",{key:t.year,"data-year":t.year,onClick:this.yearLabelClickHandler,onMouseOver:this.yearLabelMouseOverHander,className:"year-item"+(t.year==this.state.selectedYear&&f.default.findIndex(this.state.detailYears,function(e){return e.year==t.year})==-1?" selected":"")+(t.year%10!=0&&e>0&&this.state.data.length>30?" dot-item":"")},l.default.createElement("span",{className:"year-label"},l.default.createElement("span",{style:this.state.data.length<30?{fontSize:12*a(t.doc_count||0)+14}:{}},t.year)),this.state.hoveredYear==t.year&&this.state.data.length>30&&l.default.createElement("div",{className:"detail-years"},this.state.detailYears.map(function(t,e){return l.default.createElement("span",{"data-year":t.year,onClick:this.yearLabelClickHandler,className:"detail-item"+(t.year==this.state.selectedYear?" selected":""),style:{fontSize:12*r(t.doc_count)+14},key:t.year},t.year)}.bind(this))))}.bind(this))),l.default.createElement("div",{className:"gallery-container",ref:"galleryContainer"},t))}}]),e}(l.default.Component);n.default=x},{"./../config":354,"./../utils/window-scroll":359,"./ImageList":343,"d3-scale":29,react:321,"react-masonry-component":250,underscore:329,"whatwg-fetch":331}],353:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);
}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("react"),l=i(c);t("whatwg-fetch");var h=t("underscore"),f=i(h),d=t("three"),p=r(d),m=t("react-router");t("./../lib/texture-loader"),t("./../lib/trackball-controls");var g=t("./SimpleListItem"),v=i(g),y=t("./../config"),_=i(y),b=t("../collections/ImageListCollection"),x=i(b);window.THREE=p;var w=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return window.tsneView=n,n.windowResizeHandler=n.windowResizeHandler.bind(n),n.windowMouseMoveHandler=n.windowMouseMoveHandler.bind(n),n.dataSetMenuClickHandler=n.dataSetMenuClickHandler.bind(n),n.menuSelectChangeHandler=n.menuSelectChangeHandler.bind(n),n.getHoverObjectStyle=n.getHoverObjectStyle.bind(n),n.state={images:[],loadNumber:0,initialized:!1,waitingForLoad:!1,tsneData:[],dataSet:"all"},n.dataSets=[{name:"Alla",id:"all"},{name:"Konstverk",id:"konstverk"},{name:"Fotografi",id:"photographs"}],n.collection=new x.default(function(t){setTimeout(function(){this.waitingForLoad=!1}.bind(this),500),console.log(t),this.setState({images:t.data.documents},function(){this.updateSelection()}.bind(this))}.bind(n),function(t){this.setState({loading:!1})}.bind(n)),n}return s(e,t),u(e,[{key:"updateSelection",value:function(){if(!this.state.images||0==this.state.images.length)var t=!0;for(var e in this.sceneObjects)t||f.default.findWhere(this.state.images,{id:e})?this.sceneObjects[e].material.opacity=1:this.sceneObjects[e].material.opacity=.05}},{key:"loadMuseumsList",value:function(){fetch(_.default.apiUrl+_.default.endpoints.museums).then(function(t){return t.json()}).then(function(t){this.setState({museumsList:t})}.bind(this))}},{key:"loadGenresList",value:function(){fetch(_.default.apiUrl+_.default.endpoints.genres).then(function(t){return t.json()}).then(function(t){this.setState({genresList:t})}.bind(this))}},{key:"menuSelectChangeHandler",value:function(t){"all"==t.target.value?m.hashHistory.push("/search"):m.hashHistory.push("/search/tags/"+t.target.dataset.type+"/"+t.target.value)}},{key:"componentDidMount",value:function(){this._isMounted=!0,document.body.classList.add("tsne-view-app"),this.loadMuseumsList(),this.loadGenresList(),this.scene=new p.Scene;var t=75,e=window.innerWidth/window.innerHeight,n=100,r=5e4;this.camera=new p.PerspectiveCamera(t,e,n,r),this.camera.position.z=20500,this.camera.position.y=-100,this.renderer=new p.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.refs.canvasContainer.appendChild(this.renderer.domElement),this.light=new p.PointLight(16777215,1,0),this.light.position.set(1,1,100),this.scene.add(this.light),this.raycaster=new p.Raycaster,this.controls=new p.TrackballControls(this.camera,this.renderer.domElement),this.mouse=new p.Vector2,this.intersectObj={},window.addEventListener("resize",this.windowResizeHandler),window.document.addEventListener("mousemove",this.windowMouseMoveHandler),this.animate(),this.fetchTsneData(this.state.dataSet),this.handleProps(this.props)}},{key:"animate",value:function(){if(this._isMounted){if(requestAnimationFrame(this.animate.bind(this)),this.raycaster.setFromCamera(this.mouse,this.camera),this.state.initialized){var t=this.raycaster.intersectObjects(this.scene.children);t.length>0?this.intersectObj!=t[0].object&&(this.intersectObj=t[0].object,this.hoverStateInterval||(this.lastIntersectObj=this.intersectObj,this.hoverStateInterval=setInterval(function(){this.lastIntersectObj==this.intersectObj&&this.setState({hoverId:this.intersectObj.userData.id}),this.hoverStateInterval=void 0}.bind(this),1e3))):(this.intersectObj=null,this.setState({hoverId:void 0}))}this.renderer.render(this.scene,this.camera),this.controls.update()}}},{key:"windowResizeHandler",value:function(){console.log("windowResizeHandler"),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.controls.handleResize()}},{key:"windowMouseMoveHandler",value:function(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=2*-(t.clientY/window.innerHeight)+1,this.setState({mouseX:t.clientX,mouseY:t.clientY})}},{key:"dataSetMenuClickHandler",value:function(t){t.target.dataset.dataset!=this.state.dataSet&&(this.setState({dataSet:t.target.dataset.dataset}),this.fetchTsneData(t.target.dataset.dataset))}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("tsne-view-app"),window.removeEventListener("resize",this.windowResizeHandler),window.document.removeEventListener("mousemove",this.windowMouseMoveHandler),this._isMounted=!1}},{key:"fetchTsneData",value:function(t){m.hashHistory.push("/search"),this.setState({images:[],loadNumber:0,initialized:!1,waitingForLoad:!1,tsneData:[]}),fetch("tsne_data/image_tsne_projections_"+t+".json").then(function(t){return t.json()}).then(function(t){this.setState({tsneData:t},function(){this.buildGeometry()}.bind(this))}.bind(this))}},{key:"buildGeometry",value:function(){if(this.sceneObjects){console.log("remove object");for(var t=this.scene.children.length-1;t>=0;t--)this.scene.children[t].geometry&&(this.scene.children[t].geometry.dispose(),this.scene.children[t].material.dispose(),this.scene.remove(this.scene.children[t]))}this.sceneObjects={},this.setState({loadNumber:0}),f.default.each(this.state.tsneData,function(t,e){var n=new p.PlaneGeometry(.8*t.width,.8*t.height);t.x*=1200,t.y*=600,t.z=-200+e;var r=(new p.TextureLoader).load(_.default.imageUrl+"255x/"+t.image+".jpg",function(){this.setState({loadNumber:this.state.loadNumber+1},function(){this.state.loadNumber==this.state.tsneData.length&&this.setState({initialized:!0})}.bind(this))}.bind(this));this.buildMesh(n,new p.MeshBasicMaterial({map:r,transparent:!0}),t)}.bind(this))}},{key:"buildMesh",value:function(t,e,n){var t=(new p.BufferGeometry).fromGeometry(t),r=new p.Mesh(t,e);r.position.set(n.x,n.y,n.z),r.userData.id=n.id,this.sceneObjects[r.userData.id]=r,this.scene.add(r)}},{key:"componentWillReceiveProps",value:function(t){this.handleProps(t)}},{key:"fetchData",value:function(t,e,n,r,i){this.collection.fetch(t,e,n,r,i)}},{key:"handleProps",value:function(t){if(""!=this.props.searchMuseum&&this.props.searchMuseum!=t.searchMuseum||""!=this.props.searchGenre&&this.props.searchGenre!=t.searchGenre){this.waitingForLoad=!0;var e={simple:!0,museum:t.searchMuseum,genre:t.searchGenre,type:"photographs"==this.state.dataSet?"Fotografi":"konstverk"==this.state.dataSet?"Konstverk":void 0},n={loading:!0,images:[]};"all"==t.searchMuseum||"all"==t.searchGenre?this.setState({images:[],loading:!1},function(){this.updateSelection()}.bind(this)):(this.setState(n),this.fetchData(e,1e3,1,!1,t.archiveMaterial||null))}}},{key:"getHoverObjectStyle",value:function(){var t={top:this.state.mouseY-30,left:this.state.mouseX-30};return this.refs&&this.refs.hoverObject&&this.refs.hoverObject.refs.el&&(this.refs.hoverObject.refs.el.clientWidth+t.left>document.body.clientWidth&&(t.left=void 0,t.right=5),this.refs.hoverObject.refs.el.clientHeight+t.top>document.body.scrollHeight&&(t.top=void 0,t.bottom=95)),t}},{key:"render",value:function(){return l.default.createElement("div",{className:"tsne-view"+(this.state.initialized?" initialized":"")},l.default.createElement("div",{className:"tsne-menu"},l.default.createElement("div",{className:"menu-group"},this.dataSets.map(function(t){return l.default.createElement("a",{className:this.state.dataSet==t.id?"selected":"",onClick:this.dataSetMenuClickHandler,key:t.id,"data-dataset":t.id},t.name)}.bind(this)),l.default.createElement("div",{className:"spacer"}),l.default.createElement("select",{className:"menu-select","data-type":"museum",onChange:this.menuSelectChangeHandler},l.default.createElement("option",{value:"all"},"Samling"),this.state.museumsList?this.state.museumsList.map(function(t,e){return l.default.createElement("option",{key:t.value,value:t.value},t.value)}.bind(this)):[]))),l.default.createElement("div",{ref:"canvasContainer",className:"three-canvas-container"}),l.default.createElement("div",{className:"loading"},l.default.createElement("div",{className:"process-label"},isNaN(this.state.loadNumber/this.state.tsneData.length*100)?"":Math.round(this.state.loadNumber/this.state.tsneData.length*100)+"%")),this.state.hoverId&&l.default.createElement("div",{className:"hover-object",style:this.getHoverObjectStyle()},l.default.createElement(v.default,{ref:"hoverObject",imageId:this.state.hoverId})))}}]),e}(l.default.Component);n.default=w},{"../collections/ImageListCollection":333,"./../config":354,"./../lib/texture-loader":355,"./../lib/trackball-controls":356,"./SimpleListItem":349,react:321,"react-router":278,three:328,underscore:329,"whatwg-fetch":331}],354:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={apiUrl:"http://cdh-vir-1.it.gu.se:8004/",imageUrl:"http://cdh-vir-1.it.gu.se:8004/images/",adminUrl:"http://cdh-vir-1.it.gu.se:8010/",endpoints:{documents:"documents",document:"document/",autocomplete:"autocomplete",tags:"tags",persons:"persons",places:"places",genres:"genres",museums:"museums",types:"types",year_range:"year_range",colormap:"colormap"}}},{}],355:[function(t,e,n){"use strict"},{}],356:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var i=t("three"),o=r(i);o.TrackballControls=function(t,e){function n(t){d.enabled!==!1&&(window.removeEventListener("keydown",n),y=v,v===p.NONE&&(t.keyCode!==d.keys[p.ROTATE]||d.noRotate?t.keyCode!==d.keys[p.ZOOM]||d.noZoom?t.keyCode!==d.keys[p.PAN]||d.noPan||(v=p.PAN):v=p.ZOOM:v=p.ROTATE))}function r(t){d.enabled!==!1&&(v=y,window.addEventListener("keydown",n,!1))}function i(t){d.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v===p.NONE&&(v=t.button),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||(C.copy(k(t.pageX,t.pageY)),A.copy(C)):(M.copy(k(t.pageX,t.pageY)),T.copy(M)):(x.copy(N(t.pageX,t.pageY)),b.copy(x)),document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),d.dispatchEvent(O))}function a(t){d.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v!==p.ROTATE||d.noRotate?v!==p.ZOOM||d.noZoom?v!==p.PAN||d.noPan||A.copy(k(t.pageX,t.pageY)):T.copy(k(t.pageX,t.pageY)):(b.copy(x),x.copy(N(t.pageX,t.pageY))))}function s(t){d.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v=p.NONE,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s),d.dispatchEvent(R))}function u(t){if(d.enabled!==!1){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:M.y-=.025*t.deltaY;break;case 1:M.y-=.01*t.deltaY;break;default:M.y-=25e-5*t.deltaY}d.dispatchEvent(O),d.dispatchEvent(R)}}function c(t){if(d.enabled!==!1){switch(t.touches.length){case 1:v=p.TOUCH_ROTATE,x.copy(N(t.touches[0].pageX,t.touches[0].pageY)),b.copy(x);break;default:v=p.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;P=S=Math.sqrt(e*e+n*n);var r=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;C.copy(k(r,i)),A.copy(C)}d.dispatchEvent(O)}}function l(t){if(d.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:b.copy(x),x.copy(N(t.touches[0].pageX,t.touches[0].pageY));break;default:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;P=Math.sqrt(e*e+n*n);var r=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;A.copy(k(r,i))}}function h(t){if(d.enabled!==!1){switch(t.touches.length){case 0:v=p.NONE;break;case 1:v=p.TOUCH_ROTATE,x.copy(N(t.touches[0].pageX,t.touches[0].pageY)),b.copy(x)}d.dispatchEvent(R)}}function f(t){d.enabled!==!1&&t.preventDefault()}var d=this,p={NONE:-1,ROTATE:2,ZOOM:1,PAN:0,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.7,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new o.Vector3;var m=1e-6,g=new o.Vector3,v=p.NONE,y=p.NONE,_=new o.Vector3,b=new o.Vector2,x=new o.Vector2,w=new o.Vector3,E=0,M=new o.Vector2,T=new o.Vector2,S=0,P=0,C=new o.Vector2,A=new o.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var L={type:"change"},O={type:"start"},R={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},this.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var k=function(){var t=new o.Vector2;return function(e,n){return t.set((e-d.screen.left)/d.screen.width,(n-d.screen.top)/d.screen.height),t}}(),N=function(){var t=new o.Vector2;return function(e,n){return t.set((e-.5*d.screen.width-d.screen.left)/(.5*d.screen.width),(d.screen.height+2*(d.screen.top-n))/d.screen.width),t}}();this.rotateCamera=function(){var t,e=new o.Vector3,n=new o.Quaternion,r=new o.Vector3,i=new o.Vector3,a=new o.Vector3,s=new o.Vector3;return function(){s.set(x.x-b.x,x.y-b.y,0),t=s.length(),t?(_.copy(d.object.position).sub(d.target),r.copy(_).normalize(),i.copy(d.object.up).normalize(),a.crossVectors(i,r).normalize(),i.setLength(x.y-b.y),a.setLength(x.x-b.x),s.copy(i.add(a)),e.crossVectors(s,_).normalize(),t*=d.rotateSpeed,n.setFromAxisAngle(e,t),_.applyQuaternion(n),d.object.up.applyQuaternion(n),w.copy(e),E=t):!d.staticMoving&&E&&(E*=Math.sqrt(1-d.dynamicDampingFactor),_.copy(d.object.position).sub(d.target),n.setFromAxisAngle(w,E),_.applyQuaternion(n),d.object.up.applyQuaternion(n)),b.copy(x)}}(),this.zoomCamera=function(){var t;v===p.TOUCH_ZOOM_PAN?(t=S/P,S=P,_.multiplyScalar(t)):(t=1+(T.y-M.y)*d.zoomSpeed,1!==t&&t>0&&_.multiplyScalar(t),d.staticMoving?M.copy(T):M.y+=(T.y-M.y)*this.dynamicDampingFactor)},this.panCamera=function(){var t=new o.Vector2,e=new o.Vector3,n=new o.Vector3;return function(){t.copy(A).sub(C),t.lengthSq()&&(t.multiplyScalar(_.length()*d.panSpeed),n.copy(_).cross(d.object.up).setLength(t.x),n.add(e.copy(d.object.up).setLength(t.y)),d.object.position.add(n),d.target.add(n),d.staticMoving?C.copy(A):C.add(t.subVectors(A,C).multiplyScalar(d.dynamicDampingFactor)))}}(),this.checkDistances=function(){d.noZoom&&d.noPan||(_.lengthSq()>d.maxDistance*d.maxDistance&&(d.object.position.addVectors(d.target,_.setLength(d.maxDistance)),M.copy(T)),_.lengthSq()<d.minDistance*d.minDistance&&(d.object.position.addVectors(d.target,_.setLength(d.minDistance)),M.copy(T)))},this.update=function(){_.subVectors(d.object.position,d.target),d.noRotate||d.rotateCamera(),d.noZoom||d.zoomCamera(),d.noPan||d.panCamera(),d.object.position.addVectors(d.target,_),d.checkDistances(),d.object.lookAt(d.target),g.distanceToSquared(d.object.position)>m&&(d.dispatchEvent(L),g.copy(d.object.position))},this.reset=function(){v=p.NONE,y=p.NONE,d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.up.copy(d.up0),_.subVectors(d.object.position,d.target),d.object.lookAt(d.target),d.dispatchEvent(L),g.copy(d.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",f,!1),this.domElement.removeEventListener("mousedown",i,!1),this.domElement.removeEventListener("wheel",u,!1),this.domElement.removeEventListener("touchstart",c,!1),this.domElement.removeEventListener("touchend",h,!1),this.domElement.removeEventListener("touchmove",l,!1),document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",s,!1),window.removeEventListener("keydown",n,!1),window.removeEventListener("keyup",r,!1)},this.domElement.addEventListener("contextmenu",f,!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("wheel",u,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",h,!1),this.domElement.addEventListener("touchmove",l,!1),window.addEventListener("keydown",n,!1),window.addEventListener("keyup",r,!1),this.handleResize(),this.update()},o.TrackballControls.prototype=Object.create(o.EventDispatcher.prototype),o.TrackballControls.prototype.constructor=o.TrackballControls},{three:328}],357:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("chroma-js"),o=r(i),a=t("underscore"),s=r(a);n.default={getDominantHex:function(t){var e=s.default.sortBy(t,function(t){return t.score});return(0,o.default)(e[e.length-1].color.red,e[e.length-1].color.green,e[e.length-1].color.blue).hex()}}},{"chroma-js":4,underscore:329}],358:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getImageUrl:function(){if(!window)return 1e3;var t=window.innerWidth;return t>1200?1600:t>1e3?1200:t>700?1e3:t>500?700:500}}},{}],359:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t("whatwg-fetch");var a=t("underscore"),s=(r(a),function(){function t(e,n){i(this,t),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()}return o(t,[{key:"getOffsetTop",value:function(t){var e=0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e}},{key:"scrollToY",value:function(t,e,n,r){function i(){a+=1/60;var e=a/s,r=u[n](e);e<1?(requestAnimFrame(i),window.scrollTo(0,o+(t-o)*r)):window.scrollTo(0,t)}if(!r)return void setTimeout(function(){window.scrollTo(0,t)},10);var o=window.scrollY,t=t||0,e=e||2e3,n=n||"easeOutSine",a=0,s=Math.max(.1,Math.min(Math.abs(o-t)/e,.8)),u=(Math.PI/2,{easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)}});i()}}]),t}());n.default=s},{underscore:329,"whatwg-fetch":331}]},{},[332]);